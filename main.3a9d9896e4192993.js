"use strict";(self.webpackChunkqueuest_frontend=self.webpackChunkqueuest_frontend||[]).push([[179],{2011:(Dt,ke,F)=>{F.d(ke,{Dh:()=>Ce,GT:()=>ce,cc:()=>we,hO:()=>xe,on:()=>W,pX:()=>ge,xv:()=>_e});var h=F(2223),V=F(9260),k=F(3324);Dt=F.hmd(Dt);const ne=["ngOnDestroy"],ge=(Fe,ze,Ze,be={})=>new Proxy(Fe,{get:(De,Te)=>Ze.runOutsideAngular(()=>{var Be;if(Fe[Te])return!(null===(Be=be?.spy)||void 0===Be)&&Be.get&&be.spy.get(Te,Fe[Te]),Fe[Te];if(ne.indexOf(Te)>-1)return()=>{};const Se=ze.toPromise().then(J=>{const st=J&&J[Te];return"function"==typeof st?st.bind(J):st&&st.then?st.then(Xe=>Ze.run(()=>Xe)):Ze.run(()=>st)});return new Proxy(()=>{},{get:(J,st)=>Se[st],apply:(J,st,Xe)=>Se.then(cn=>{var Xn;const er=cn&&cn(...Xe);return!(null===(Xn=be?.spy)||void 0===Xn)&&Xn.apply&&be.spy.apply(Te,Xe,er),er})})})}),ce=(Fe,ze)=>{ze.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(be=>{Object.defineProperty(Fe.prototype,be,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,be))})})};class ve{constructor(ze){return ze}}const Ce=new h.OlP("angularfire2.app.options"),_e=new h.OlP("angularfire2.app.name");function W(Fe,ze,Ze){const De="object"==typeof Ze&&Ze||{};De.name=De.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Be=V.Z.apps.filter(Se=>Se&&Se.name===De.name)[0]||ze.runOutsideAngular(()=>V.Z.initializeApp(Fe,De));try{JSON.stringify(Fe)!==JSON.stringify(Be.options)&&z("error",`${Be.name} Firebase App already initialized with different options${Dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Be)}const z=(Fe,...ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Fe](...ze)},q={provide:ve,useFactory:W,deps:[Ce,h.R0b,[new h.FiY,_e]]};let xe=(()=>{class Fe{constructor(Ze){V.Z.registerVersion("angularfire",k.q4.full,"core"),V.Z.registerVersion("angularfire",k.q4.full,"app-compat"),V.Z.registerVersion("angular",h.q4F.full,Ze.toString())}static initializeApp(Ze,be){return{ngModule:Fe,providers:[{provide:Ce,useValue:Ze},{provide:_e,useValue:be}]}}}return Fe.\u0275fac=function(Ze){return new(Ze||Fe)(h.LFG(h.Lbi))},Fe.\u0275mod=h.oAB({type:Fe}),Fe.\u0275inj=h.cJS({providers:[q]}),Fe})();function we(Fe,ze,Ze,be,De){const[,Te,Be]=globalThis.\u0275AngularfireInstanceCache.find(Se=>Se[0]===Fe)||[];if(Te)return function Qe(Fe,ze){try{return Fe.toString()===ze.toString()}catch{return Fe===ze}}(De,Be)||(fe("error",`${ze} was already initialized on the ${Ze} Firebase App with different settings.${Et?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:De,was:Be})),Te;{const Se=be();return globalThis.\u0275AngularfireInstanceCache.push([Fe,Se,De]),Se}}const Et=!!Dt.hot,fe=(Fe,...ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Fe](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3324:(Dt,ke,F)=>{F.d(ke,{q4:()=>Zr,iC:()=>Un,HU:()=>_c,vb:()=>yc,JM:()=>hu,nk:()=>hd,u3:()=>Lf});var h=F(2223),V=F(259),k=F(5861),ne=F(6881),ge=F(2090),ce=F(4859),ve=F(1877);F(4727);const _e="@firebase/remote-config",W="0.4.4",we=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ye{constructor(x,j,re,Re){this.client=x,this.storage=j,this.storageCache=re,this.logger=Re}isCachedDataFresh(x,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-j,Re=re<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${Re}.`),Re}fetch(x){var j=this;return(0,k.Z)(function*(){const[re,Re]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Re&&j.isCachedDataFresh(x.cacheMaxAgeMillis,re))return Re;x.eTag=Re&&Re.eTag;const Oe=yield j.client.fetch(x),gt=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Oe.status&&gt.push(j.storage.setLastSuccessfulFetchResponse(Oe)),yield Promise.all(gt),Oe})()}}function Ne(A=navigator){return A.languages&&A.languages[0]||A.language}class Le{constructor(x,j,re,Re,Oe,gt){this.firebaseInstallations=x,this.sdkVersion=j,this.namespace=re,this.projectId=Re,this.apiKey=Oe,this.appId=gt}fetch(x){var j=this;return(0,k.Z)(function*(){const[re,Re]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),gt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Mn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},pn={sdk_version:j.sdkVersion,app_instance_id:re,app_instance_id_token:Re,app_id:j.appId,language_code:Ne()},Nn={method:"POST",headers:Mn,body:JSON.stringify(pn)},ln=fetch(gt,Nn),Zt=new Promise((ts,Ks)=>{x.signal.addEventListener(()=>{const Ca=new Error("The operation was aborted.");Ca.name="AbortError",Ks(Ca)})});let qs;try{yield Promise.race([ln,Zt]),qs=yield ln}catch(ts){let Ks="fetch-client-network";throw"AbortError"===ts?.name&&(Ks="fetch-timeout"),we.create(Ks,{originalErrorMessage:ts?.message})}let Rs=qs.status;const fs=qs.headers.get("ETag")||void 0;let Da,ps;if(200===qs.status){let ts;try{ts=yield qs.json()}catch(Ks){throw we.create("fetch-client-parse",{originalErrorMessage:Ks?.message})}Da=ts.entries,ps=ts.state}if("INSTANCE_STATE_UNSPECIFIED"===ps?Rs=500:"NO_CHANGE"===ps?Rs=304:("NO_TEMPLATE"===ps||"EMPTY_CONFIG"===ps)&&(Da={}),304!==Rs&&200!==Rs)throw we.create("fetch-status",{httpStatus:Rs});return{status:Rs,eTag:fs,config:Da}})()}}class Ae{constructor(x,j){this.client=x,this.storage=j}fetch(x){var j=this;return(0,k.Z)(function*(){const re=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(x,re)})()}attemptFetch(x,{throttleEndTimeMillis:j,backoffCount:re}){var Re=this;return(0,k.Z)(function*(){yield function Je(A,x){return new Promise((j,re)=>{const Re=Math.max(x-Date.now(),0),Oe=setTimeout(j,Re);A.addEventListener(()=>{clearTimeout(Oe),re(we.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,j);try{const Oe=yield Re.client.fetch(x);return yield Re.storage.deleteThrottleMetadata(),Oe}catch(Oe){if(!function je(A){if(!(A instanceof ge.ZR&&A.customData))return!1;const x=Number(A.customData.httpStatus);return 429===x||500===x||503===x||504===x}(Oe))throw Oe;const gt={throttleEndTimeMillis:Date.now()+(0,ge.$s)(re),backoffCount:re+1};return yield Re.storage.setThrottleMetadata(gt),Re.attemptFetch(x,gt)}})()}}class wt{constructor(x,j,re,Re,Oe){this.app=x,this._client=j,this._storageCache=re,this._storage=Re,this._logger=Oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bt(A,x){const j=A.target.error||void 0;return we.create(x,{originalErrorMessage:j&&j?.message})}const Ht="app_namespace_store";class An{constructor(x,j,re,Re=function tr(){return new Promise((A,x)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=re=>{x(bt(re,"storage-open"))},j.onsuccess=re=>{A(re.target.result)},j.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore(Ht,{keyPath:"compositeKey"})}}catch(j){x(we.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=x,this.appName=j,this.namespace=re,this.openDbPromise=Re}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var j=this;return(0,k.Z)(function*(){const re=yield j.openDbPromise;return new Promise((Re,Oe)=>{const Mn=re.transaction([Ht],"readonly").objectStore(Ht),pn=j.createCompositeKey(x);try{const Nn=Mn.get(pn);Nn.onerror=ln=>{Oe(bt(ln,"storage-get"))},Nn.onsuccess=ln=>{const Zt=ln.target.result;Re(Zt?Zt.value:void 0)}}catch(Nn){Oe(we.create("storage-get",{originalErrorMessage:Nn?.message}))}})})()}set(x,j){var re=this;return(0,k.Z)(function*(){const Re=yield re.openDbPromise;return new Promise((Oe,gt)=>{const pn=Re.transaction([Ht],"readwrite").objectStore(Ht),Nn=re.createCompositeKey(x);try{const ln=pn.put({compositeKey:Nn,value:j});ln.onerror=Zt=>{gt(bt(Zt,"storage-set"))},ln.onsuccess=()=>{Oe()}}catch(ln){gt(we.create("storage-set",{originalErrorMessage:ln?.message}))}})})()}delete(x){var j=this;return(0,k.Z)(function*(){const re=yield j.openDbPromise;return new Promise((Re,Oe)=>{const Mn=re.transaction([Ht],"readwrite").objectStore(Ht),pn=j.createCompositeKey(x);try{const Nn=Mn.delete(pn);Nn.onerror=ln=>{Oe(bt(ln,"storage-delete"))},Nn.onsuccess=()=>{Re()}}catch(Nn){Oe(we.create("storage-delete",{originalErrorMessage:Nn?.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class Ir{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,k.Z)(function*(){const j=x.storage.getLastFetchStatus(),re=x.storage.getLastSuccessfulFetchTimestampMillis(),Re=x.storage.getActiveConfig(),Oe=yield j;Oe&&(x.lastFetchStatus=Oe);const gt=yield re;gt&&(x.lastSuccessfulFetchTimestampMillis=gt);const Mn=yield Re;Mn&&(x.activeConfig=Mn)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function di(){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,k.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function nr(){(0,ne._registerComponent)(new ce.wA("remote-config",function A(x,{instanceIdentifier:j}){const re=x.getProvider("app").getImmediate(),Re=x.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw we.create("registration-window");if(!(0,ge.hl)())throw we.create("indexed-db-unavailable");const{projectId:Oe,apiKey:gt,appId:Mn}=re.options;if(!Oe)throw we.create("registration-project-id");if(!gt)throw we.create("registration-api-key");if(!Mn)throw we.create("registration-app-id");const pn=new An(Mn,re.name,j=j||"firebase"),Nn=new Ir(pn),ln=new ve.Yd(_e);ln.logLevel=ve.in.ERROR;const Zt=new Le(Re,ne.SDK_VERSION,j,Oe,gt,Mn),qs=new Ae(Zt,pn),Rs=new ye(qs,pn,Nn,ln),fs=new wt(re,Rs,Nn,pn,ln);return function Be(A){const x=(0,ge.m9)(A);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(fs),fs},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(_e,W),(0,ne.registerVersion)(_e,W,"esm2017")}();const vt=(A,x)=>x.some(j=>A instanceof j);let Cn,dr;const pt=new WeakMap,rt=new WeakMap,Yn=new WeakMap,xn=new WeakMap,hr=new WeakMap;let fr={get(A,x,j){if(A instanceof IDBTransaction){if("done"===x)return rt.get(A);if("objectStoreNames"===x)return A.objectStoreNames||Yn.get(A);if("store"===x)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return nn(A[x])},set:(A,x,j)=>(A[x]=j,!0),has:(A,x)=>A instanceof IDBTransaction&&("done"===x||"store"===x)||x in A};function Ft(A){return"function"==typeof A?function Dr(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Kt(){return dr||(dr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...x){return A.apply(Wn(this),x),nn(pt.get(this))}:function(...x){return nn(A.apply(Wn(this),x))}:function(x,...j){const re=A.call(Wn(this),x,...j);return Yn.set(re,x.sort?x.sort():[x]),nn(re)}}(A):(A instanceof IDBTransaction&&function tn(A){if(rt.has(A))return;const x=new Promise((j,re)=>{const Re=()=>{A.removeEventListener("complete",Oe),A.removeEventListener("error",gt),A.removeEventListener("abort",gt)},Oe=()=>{j(),Re()},gt=()=>{re(A.error||new DOMException("AbortError","AbortError")),Re()};A.addEventListener("complete",Oe),A.addEventListener("error",gt),A.addEventListener("abort",gt)});rt.set(A,x)}(A),vt(A,function On(){return Cn||(Cn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,fr):A)}function nn(A){if(A instanceof IDBRequest)return function bn(A){const x=new Promise((j,re)=>{const Re=()=>{A.removeEventListener("success",Oe),A.removeEventListener("error",gt)},Oe=()=>{j(nn(A.result)),Re()},gt=()=>{re(A.error),Re()};A.addEventListener("success",Oe),A.addEventListener("error",gt)});return x.then(j=>{j instanceof IDBCursor&&pt.set(j,A)}).catch(()=>{}),hr.set(x,A),x}(A);if(xn.has(A))return xn.get(A);const x=Ft(A);return x!==A&&(xn.set(A,x),hr.set(x,A)),x}const Wn=A=>hr.get(A);function $r(A,x,{blocked:j,upgrade:re,blocking:Re,terminated:Oe}={}){const gt=indexedDB.open(A,x),Mn=nn(gt);return re&&gt.addEventListener("upgradeneeded",pn=>{re(nn(gt.result),pn.oldVersion,pn.newVersion,nn(gt.transaction))}),j&&gt.addEventListener("blocked",()=>j()),Mn.then(pn=>{Oe&&pn.addEventListener("close",()=>Oe()),Re&&pn.addEventListener("versionchange",()=>Re())}).catch(()=>{}),Mn}function kn(A,{blocked:x}={}){const j=indexedDB.deleteDatabase(A);return x&&j.addEventListener("blocked",()=>x()),nn(j).then(()=>{})}const $n=["get","getKey","getAll","getAllKeys","count"],Jt=["put","add","delete","clear"],Tn=new Map;function Lt(A,x){if(!(A instanceof IDBDatabase)||x in A||"string"!=typeof x)return;if(Tn.get(x))return Tn.get(x);const j=x.replace(/FromIndex$/,""),re=x!==j,Re=Jt.includes(j);if(!(j in(re?IDBIndex:IDBObjectStore).prototype)||!Re&&!$n.includes(j))return;const Oe=function(){var gt=(0,k.Z)(function*(Mn,...pn){const Nn=this.transaction(Mn,Re?"readwrite":"readonly");let ln=Nn.store;return re&&(ln=ln.index(pn.shift())),(yield Promise.all([ln[j](...pn),Re&&Nn.done]))[0]});return function(pn){return gt.apply(this,arguments)}}();return Tn.set(x,Oe),Oe}!function sn(A){fr=A(fr)}(A=>({...A,get:(x,j,re)=>Lt(x,j)||A.get(x,j,re),has:(x,j)=>!!Lt(x,j)||A.has(x,j)}));const Vn="/firebase-messaging-sw.js",Lr="/firebase-cloud-messaging-push-scope",pr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ni="https://fcmregistrations.googleapis.com/v1",H="google.c.a.c_id",B="google.c.a.c_l",R="google.c.a.ts";var K=(()=>((K=K||{}).PUSH_RECEIVED="push-received",K.NOTIFICATION_CLICKED="notification-clicked",K))();function ie(A){const x=new Uint8Array(A);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function G(A){const j=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(j),Re=new Uint8Array(re.length);for(let Oe=0;Oe<re.length;++Oe)Re[Oe]=re.charCodeAt(Oe);return Re}const ae="fcm_token_details_db",de=5,Ge="fcm_token_object_Store";function it(){return it=(0,k.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Oe=>Oe.name).includes(ae))return null;let x=null;return(yield $r(ae,de,{upgrade:(re=(0,k.Z)(function*(Re,Oe,gt,Mn){var pn;if(Oe<2||!Re.objectStoreNames.contains(Ge))return;const Nn=Mn.objectStore(Ge),ln=yield Nn.index("fcmSenderId").get(A);if(yield Nn.clear(),ln)if(2===Oe){const Zt=ln;if(!Zt.auth||!Zt.p256dh||!Zt.endpoint)return;x={token:Zt.fcmToken,createTime:null!==(pn=Zt.createTime)&&void 0!==pn?pn:Date.now(),subscriptionOptions:{auth:Zt.auth,p256dh:Zt.p256dh,endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:"string"==typeof Zt.vapidKey?Zt.vapidKey:ie(Zt.vapidKey)}}}else if(3===Oe){const Zt=ln;x={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ie(Zt.auth),p256dh:ie(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ie(Zt.vapidKey)}}}else if(4===Oe){const Zt=ln;x={token:Zt.fcmToken,createTime:Zt.createTime,subscriptionOptions:{auth:ie(Zt.auth),p256dh:ie(Zt.p256dh),endpoint:Zt.endpoint,swScope:Zt.swScope,vapidKey:ie(Zt.vapidKey)}}}}),function(Oe,gt,Mn,pn){return re.apply(this,arguments)})})).close(),yield kn(ae),yield kn("fcm_vapid_details_db"),yield kn("undefined"),function et(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:x}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}(x)?x:null;var re}),it.apply(this,arguments)}const kt="firebase-messaging-database",Ut=1,se="firebase-messaging-store";let ee=null;function Pe(){return ee||(ee=$r(kt,Ut,{upgrade:(A,x)=>{0===x&&A.createObjectStore(se)}})),ee}function mt(A){return It.apply(this,arguments)}function It(){return It=(0,k.Z)(function*(A){const x=rr(A),re=yield(yield Pe()).transaction(se).objectStore(se).get(x);if(re)return re;{const Re=yield function Ie(A){return it.apply(this,arguments)}(A.appConfig.senderId);if(Re)return yield Gt(A,Re),Re}}),It.apply(this,arguments)}function Gt(A,x){return on.apply(this,arguments)}function on(){return(on=(0,k.Z)(function*(A,x){const j=rr(A),Re=(yield Pe()).transaction(se,"readwrite");return yield Re.objectStore(se).put(x,j),yield Re.done,x})).apply(this,arguments)}function Fn(){return(Fn=(0,k.Z)(function*(A){const x=rr(A),re=(yield Pe()).transaction(se,"readwrite");yield re.objectStore(se).delete(x),yield re.done})).apply(this,arguments)}function rr({appConfig:A}){return A.appId}const ir=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function po(A,x){return go.apply(this,arguments)}function go(){return(go=(0,k.Z)(function*(A,x){const j=yield va(A),re=mo(x),Re={method:"POST",headers:j,body:JSON.stringify(re)};let Oe;try{Oe=yield(yield fetch(qn(A.appConfig),Re)).json()}catch(gt){throw ir.create("token-subscribe-failed",{errorInfo:gt?.toString()})}if(Oe.error)throw ir.create("token-subscribe-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw ir.create("token-subscribe-no-token");return Oe.token})).apply(this,arguments)}function Ms(){return(Ms=(0,k.Z)(function*(A,x){const j=yield va(A),re=mo(x.subscriptionOptions),Re={method:"PATCH",headers:j,body:JSON.stringify(re)};let Oe;try{Oe=yield(yield fetch(`${qn(A.appConfig)}/${x.token}`,Re)).json()}catch(gt){throw ir.create("token-update-failed",{errorInfo:gt?.toString()})}if(Oe.error)throw ir.create("token-update-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw ir.create("token-update-no-token");return Oe.token})).apply(this,arguments)}function ya(A,x){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,k.Z)(function*(A,x){const re={method:"DELETE",headers:yield va(A)};try{const Oe=yield(yield fetch(`${qn(A.appConfig)}/${x}`,re)).json();if(Oe.error)throw ir.create("token-unsubscribe-failed",{errorInfo:Oe.error.message})}catch(Re){throw ir.create("token-unsubscribe-failed",{errorInfo:Re?.toString()})}})).apply(this,arguments)}function qn({projectId:A}){return`${ni}/projects/${A}/registrations`}function va(A){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,k.Z)(function*({appConfig:A,installations:x}){const j=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function mo({p256dh:A,auth:x,endpoint:j,vapidKey:re}){const Re={web:{endpoint:j,auth:x,p256dh:A}};return re!==pr&&(Re.web.applicationPubKey=re),Re}const yo=6048e5;function os(){return os=(0,k.Z)(function*(A){const x=yield function Pt(A,x){return Wt.apply(this,arguments)}(A.swRegistration,A.vapidKey),j={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:x.endpoint,auth:ie(x.getKey("auth")),p256dh:ie(x.getKey("p256dh"))},re=yield mt(A.firebaseDependencies);if(re){if(function Nt(A,x){return x.vapidKey===A.vapidKey&&x.endpoint===A.endpoint&&x.auth===A.auth&&x.p256dh===A.p256dh}(re.subscriptionOptions,j))return Date.now()>=re.createTime+yo?function U(A,x){return X.apply(this,arguments)}(A,{token:re.token,createTime:Date.now(),subscriptionOptions:j}):re.token;try{yield ya(A.firebaseDependencies,re.token)}catch(Re){console.warn(Re)}return oe(A.firebaseDependencies,j)}return oe(A.firebaseDependencies,j)}),os.apply(this,arguments)}function _o(){return _o=(0,k.Z)(function*(A){const x=yield mt(A.firebaseDependencies);x&&(yield ya(A.firebaseDependencies,x.token),yield function Cr(A){return Fn.apply(this,arguments)}(A.firebaseDependencies));const j=yield A.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()}),_o.apply(this,arguments)}function X(){return X=(0,k.Z)(function*(A,x){try{const j=yield function wi(A,x){return Ms.apply(this,arguments)}(A.firebaseDependencies,x),re=Object.assign(Object.assign({},x),{token:j,createTime:Date.now()});return yield Gt(A.firebaseDependencies,re),j}catch(j){throw yield function Ko(A){return _o.apply(this,arguments)}(A),j}}),X.apply(this,arguments)}function oe(A,x){return tt.apply(this,arguments)}function tt(){return(tt=(0,k.Z)(function*(A,x){const re={token:yield po(A,x),createTime:Date.now(),subscriptionOptions:x};return yield Gt(A,re),re.token})).apply(this,arguments)}function Wt(){return(Wt=(0,k.Z)(function*(A,x){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:G(x)})})).apply(this,arguments)}function Hn(A){const x={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function sr(A,x){if(!x.notification)return;A.notification={};const j=x.notification.title;j&&(A.notification.title=j);const re=x.notification.body;re&&(A.notification.body=re);const Re=x.notification.image;Re&&(A.notification.image=Re);const Oe=x.notification.icon;Oe&&(A.notification.icon=Oe)}(x,A),function or(A,x){x.data&&(A.data=x.data)}(x,A),function as(A,x){var j,re,Re,Oe,gt;if(!(x.fcmOptions||null!==(j=x.notification)&&void 0!==j&&j.click_action))return;A.fcmOptions={};const Mn=null!==(Re=null===(re=x.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==Re?Re:null===(Oe=x.notification)||void 0===Oe?void 0:Oe.click_action;Mn&&(A.fcmOptions.link=Mn);const pn=null===(gt=x.fcmOptions)||void 0===gt?void 0:gt.analytics_label;pn&&(A.fcmOptions.analyticsLabel=pn)}(x,A),x}function ar(A,x){const j=[];for(let re=0;re<A.length;re++)j.push(A.charAt(re)),re<x.length&&j.push(x.charAt(re));return j.join("")}function Bt(A){return ir.create("missing-app-config-values",{valueName:A})}ar("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ar("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zn{constructor(x,j,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Re=function ct(A){if(!A||!A.options)throw Bt("App Configuration Object");if(!A.name)throw Bt("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:j}=A;for(const re of x)if(!j[re])throw Bt(re);return{appName:A.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:Re,installations:j,analyticsProvider:re}}_delete(){return Promise.resolve()}}function us(){return(us=(0,k.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(Vn,{scope:Lr}),A.swRegistration.update().catch(()=>{})}catch(x){throw ir.create("failed-service-worker-registration",{browserErrorMessage:x?.message})}})).apply(this,arguments)}function As(){return(As=(0,k.Z)(function*(A,x){if(!x&&!A.swRegistration&&(yield function ri(A){return us.apply(this,arguments)}(A)),x||!A.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw ir.create("invalid-sw-registration");A.swRegistration=x}})).apply(this,arguments)}function xs(){return(xs=(0,k.Z)(function*(A,x){x?A.vapidKey=x:A.vapidKey||(A.vapidKey=pr)})).apply(this,arguments)}function Ot(){return Ot=(0,k.Z)(function*(A,x){if(!navigator)throw ir.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ir.create("permission-blocked");return yield function Kn(A,x){return xs.apply(this,arguments)}(A,x?.vapidKey),yield function Or(A,x){return As.apply(this,arguments)}(A,x?.serviceWorkerRegistration),function vo(A){return os.apply(this,arguments)}(A)}),Ot.apply(this,arguments)}function Eo(){return(Eo=(0,k.Z)(function*(A,x,j){const re=function zs(A){switch(A){case K.NOTIFICATION_CLICKED:return"notification_open";case K.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(x);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:j[H],message_name:j[B],message_time:j[R],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gs(){return Gs=(0,k.Z)(function*(A,x){const j=x.data;if(!j.isFirebaseMessaging)return;A.onMessageHandler&&j.messageType===K.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Hn(j)):A.onMessageHandler.next(Hn(j)));const re=j.data;(function od(A){return"object"==typeof A&&!!A&&H in A})(re)&&"1"===re["google.c.a.e"]&&(yield function hi(A,x,j){return Eo.apply(this,arguments)}(A,j.messageType,re))}),Gs.apply(this,arguments)}const cs="@firebase/messaging",ls=A=>{const x=new zn(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function Sn(A,x){return Gs.apply(this,arguments)}(x,j)),x},ad=A=>{const x=A.getProvider("messaging").getImmediate();return{getToken:re=>function Yi(A,x){return Ot.apply(this,arguments)}(x,re)}};function Qi(){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,k.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ds(){(0,ne._registerComponent)(new ce.wA("messaging",ls,"PUBLIC")),(0,ne._registerComponent)(new ce.wA("messaging-internal",ad,"PRIVATE")),(0,ne.registerVersion)(cs,"0.12.4"),(0,ne.registerVersion)(cs,"0.12.4","esm2017")}();var Xi=F(3008),gr=F(4408),pi=F(7565);const Ea=new class gi extends pi.v{}(class cd extends gr.o{constructor(x,j){super(x,j),this.scheduler=x,this.work=j}schedule(x,j=0){return j>0?super.schedule(x,j):(this.delay=j,this.state=x,this.scheduler.flush(this),this)}execute(x,j){return j>0||this.closed?super.execute(x,j):this._execute(x,j)}requestAsyncId(x,j,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(x,j,re):(x.flush(this),0)}});var Io=F(4986),ii=F(9751),cu=F(8505),Zo=F(9468),lu=F(5363);const Zr=new h.GfV("7.6.1"),wa="__angularfire_symbol__analyticsIsSupportedValue",Yo="__angularfire_symbol__analyticsIsSupported",Ia="__angularfire_symbol__remoteConfigIsSupportedValue",Qo="__angularfire_symbol__remoteConfigIsSupported",gc="__angularfire_symbol__messagingIsSupportedValue",du="__angularfire_symbol__messagingIsSupported";globalThis[Yo]||(globalThis[Yo]=(0,Xi.Gb)().then(A=>globalThis[wa]=A).catch(()=>globalThis[wa]=!1)),globalThis[du]||(globalThis[du]=Qi().then(A=>globalThis[gc]=A).catch(()=>globalThis[gc]=!1)),globalThis[Qo]||(globalThis[Qo]=di().then(A=>globalThis[Ia]=A).catch(()=>globalThis[Ia]=!1));const hd={async:()=>globalThis[Yo],sync:()=>{const A=globalThis[wa];if(void 0===A)throw new Error((A=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${A} in the constructor, first ensure that ${A} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${A})\`.`)("Analytics"));return A}};function hu(A,x,j){if(x){if(1===x.length)return x[0];const Oe=x.filter(gt=>gt.app===j);if(1===Oe.length)return Oe[0]}return j.container.getProvider(A).getImmediate({optional:!0})}const yc=(A,x)=>{const j=x?[x]:(0,V.C6)(),re=[];return j.forEach(Re=>{Re.container.getProvider(A).instances.forEach(gt=>{re.includes(gt)||re.push(gt)})}),re};function Do(){}class Jo{constructor(x,j=Ea){this.zone=x,this.delegate=j}now(){return this.delegate.now()}schedule(x,j,re){const Re=this.zone;return this.delegate.schedule(function(gt){Re.runGuarded(()=>{x.apply(this,[gt])})},j,re)}}class vc{constructor(x){this.zone=x,this.task=null}call(x,j){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Do,{},Do,Do)),j.pipe((0,cu.b)({next:re,complete:re,error:re})).subscribe(x).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _c=(()=>{class A{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new Jo(Zone.current)),this.insideAngular=j.run(()=>new Jo(Zone.current,Io.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(j){return new(j||A)(h.LFG(h.R0b))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function hs(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function si(A){return hs().ngZone.run(()=>A())}function Un(A){return hs(),function fd(A){return function(j){return(j=j.lift(new vc(A.ngZone))).pipe((0,Zo.R)(A.outsideAngular),(0,lu.Q)(A.insideAngular))}}(hs())(A)}const Ic=(A,x)=>function(){const re=arguments;return x&&setTimeout(()=>{"scheduled"===x.state&&x.invoke()},10),si(()=>A.apply(void 0,re))},Lf=(A,x)=>function(){let j;const re=arguments;for(let Oe=0;Oe<arguments.length;Oe++)"function"==typeof re[Oe]&&(x&&(j||(j=si(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Do,{},Do,Do)))),re[Oe]=Ic(re[Oe],j));const Re=function Ec(A){return hs().ngZone.runOutsideAngular(()=>A())}(()=>A.apply(this,re));if(!x){if(Re instanceof ii.y){const Oe=hs();return Re.pipe((0,Zo.R)(Oe.outsideAngular),(0,lu.Q)(Oe.insideAngular))}return si(()=>Re)}return Re instanceof ii.y?Re.pipe(Un):Re instanceof Promise?si(()=>new Promise((Oe,gt)=>Re.then(Mn=>si(()=>Oe(Mn)),Mn=>si(()=>gt(Mn))))):"function"==typeof Re&&j?function(){return setTimeout(()=>{j&&"scheduled"===j.state&&j.invoke()},10),Re.apply(this,arguments)}:si(()=>Re)}},1389:(Dt,ke,F)=>{F.d(ke,{$:()=>hs,A:()=>z,D:()=>we,I:()=>yo,J:()=>U,L:()=>Sn,N:()=>pr,P:()=>Qn,Q:()=>_a,R:()=>wu,U:()=>cd,V:()=>pi,W:()=>gi,X:()=>gr,Y:()=>ii,Z:()=>cu,_:()=>Yo,a:()=>vu,a0:()=>si,a1:()=>Ff,a2:()=>Lf,a3:()=>Oe,a4:()=>Mn,a5:()=>Nn,a6:()=>Zt,a7:()=>Rs,a8:()=>Da,a9:()=>ts,aA:()=>J,aB:()=>yE,aC:()=>Vn,aD:()=>ni,aE:()=>by,aF:()=>Cu,aG:()=>br,aH:()=>qn,aL:()=>Ta,aO:()=>es,aa:()=>Ks,ab:()=>bb,ac:()=>ay,ad:()=>uy,ae:()=>cE,af:()=>cy,ai:()=>Ps,aj:()=>ly,ak:()=>ur,an:()=>mc,ao:()=>vd,aq:()=>_d,ar:()=>$e,as:()=>Xe,at:()=>de,au:()=>ie,av:()=>be,aw:()=>Oa,ax:()=>Ay,ay:()=>Ge,az:()=>De,b:()=>Li,c:()=>Vc,d:()=>Aa,e:()=>Xf,f:()=>Pd,g:()=>ra,h:()=>Od,i:()=>Ys,j:()=>Fd,k:()=>jd,l:()=>cr,m:()=>ka,o:()=>Uy,p:()=>Ce,r:()=>ns,s:()=>Tb,u:()=>Hr,x:()=>Hf});var h=F(5861),V=F(2090),k=F(6881),ne=F(655),ge=F(1877),ce=F(4859);const Ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const we=function q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Qe=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Et=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new ge.Yd("@firebase/auth");function Ze(v,...p){Fe.logLevel<=ge.in.ERROR&&Fe.error(`Auth (${k.SDK_VERSION}): ${v}`,...p)}function be(v,...p){throw Se(v,...p)}function De(v,...p){return Se(v,...p)}function Te(v,p,m){const w=Object.assign(Object.assign({},Qe()),{[p]:m});return new V.LL("auth","Firebase",w).create(p,{appName:v.name})}function Be(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&be(v,"argument-error"),Te(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Se(v,...p){if("string"!=typeof v){const m=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return Et.create(v,...p)}function J(v,p,...m){if(!v)throw Se(p,...m)}function st(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Ze(p),new Error(p)}function Xe(v,p){v||st(p)}function cn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Xn(){return"http:"===er()||"https:"===er()}function er(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ye{constructor(p,m){this.shortDelay=p,this.longDelay=m,Xe(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Ei(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Xn()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ne(v,p){Xe(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Le{static initialize(p,m,w){this.fetchImpl=p,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},je=new ye(3e4,6e4);function Ae(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function ut(v,p,m,w){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(v,p,m,w,T={}){return wt(v,T,(0,h.Z)(function*(){let P={},Y={};w&&("GET"===p?Y=w:P={body:JSON.stringify(w)});const le=(0,V.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Ye=yield v._getAdditionalHeaders();return Ye["Content-Type"]="application/json",v.languageCode&&(Ye["X-Firebase-Locale"]=v.languageCode),Le.fetch()(mn(v,v.config.apiHost,m,le),Object.assign({method:p,headers:Ye,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function wt(v,p,m){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(v,p,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},Je),p);try{const T=new tr(v),P=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw An(v,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const le=P.ok?Y.errorMessage:Y.error.message,[Ye,dt]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw An(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ye)throw An(v,"email-already-in-use",Y);if("USER_DISABLED"===Ye)throw An(v,"user-disabled",Y);const Ct=w[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw Te(v,Ct,dt);be(v,Ct)}}catch(T){if(T instanceof V.ZR)throw T;be(v,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function Ht(v,p,m,w){return rn.apply(this,arguments)}function rn(){return(rn=(0,h.Z)(function*(v,p,m,w,T={}){const P=yield ut(v,p,m,w,T);return"mfaPendingCredential"in P&&be(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function mn(v,p,m,w){const T=`${p}${m}?${w}`;return v.config.emulator?Ne(v.config,T):`${v.config.apiScheme}://${T}`}class tr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(De(this.auth,"network-request-failed")),je.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(v,p,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const T=De(v,p,w);return T.customData._tokenResponse=m,T}function nr(){return(nr=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Pr(){return(Pr=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function vt(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function On(){return(On=(0,h.Z)(function*(v,p=!1){const m=(0,V.m9)(v),w=yield m.getIdToken(p),T=pt(w);J(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const P="object"==typeof T.firebase?T.firebase:void 0,Y=P?.sign_in_provider;return{claims:T,token:w,authTime:vt(Kt(T.auth_time)),issuedAtTime:vt(Kt(T.iat)),expirationTime:vt(Kt(T.exp)),signInProvider:Y||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Kt(v){return 1e3*Number(v)}function pt(v){const[p,m,w]=v.split(".");if(void 0===p||void 0===m||void 0===w)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,V.tV)(m);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Yn(v,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,h.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(w){throw w instanceof V.ZR&&function hr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}class bn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class tn{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=vt(this.lastLoginAt),this.creationTime=vt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function fr(v){return sn.apply(this,arguments)}function sn(){return sn=(0,h.Z)(function*(v){var p;const m=v.auth,w=yield v.getIdToken(),T=yield Yn(v,function di(v,p){return Pr.apply(this,arguments)}(m,{idToken:w}));J(T?.users.length,m,"internal-error");const P=T.users[0];v._notifyReloadListener(P);const Y=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?function Wn(v){return v.map(p=>{var{providerId:m}=p,w=(0,ne._T)(p,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(P.providerUserInfo):[],le=function nn(v,p){return[...v.filter(w=>!p.some(T=>T.providerId===w.providerId)),...p]}(v.providerData,Y),Ct=!!v.isAnonymous&&!(v.email&&P.passwordHash||le?.length),dn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:le,metadata:new tn(P.createdAt,P.lastLoginAt),isAnonymous:Ct};Object.assign(v,dn)}),sn.apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(v){const p=(0,V.m9)(v);yield fr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function kn(){return(kn=(0,h.Z)(function*(v,p){const m=yield wt(v,{},(0,h.Z)(function*(){const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:P}=v.config,Y=mn(v,T,"/v1/token",`key=${P}`),le=yield v._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Le.fetch()(Y,{method:"POST",headers:le,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class $n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){J(p.idToken,"internal-error"),J(typeof p.idToken<"u","internal-error"),J(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function rt(v){const p=pt(v);return J(p,"internal-error"),J(typeof p.exp<"u","internal-error"),J(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var w=this;return(0,h.Z)(function*(){return J(!w.accessToken||w.refreshToken,p,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var w=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:P,expiresIn:Y}=yield function $r(v,p){return kn.apply(this,arguments)}(p,m);w.updateTokensAndExpiration(T,P,Number(Y))})()}updateTokensAndExpiration(p,m,w){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,m){const{refreshToken:w,accessToken:T,expirationTime:P}=m,Y=new $n;return w&&(J("string"==typeof w,"internal-error",{appName:p}),Y.refreshToken=w),T&&(J("string"==typeof T,"internal-error",{appName:p}),Y.accessToken=T),P&&(J("number"==typeof P,"internal-error",{appName:p}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new $n,this.toJSON())}_performRefresh(){return st("not implemented")}}function Jt(v,p){J("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Tn{constructor(p){var{uid:m,auth:w,stsTokenManager:T}=p,P=(0,ne._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new tn(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const w=yield Yn(m,m.stsTokenManager.getToken(m.auth,p));return J(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(p){return function dr(v){return On.apply(this,arguments)}(this,p)}reload(){return function Dr(v){return Ft.apply(this,arguments)}(this)}_assign(p){this!==p&&(J(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Tn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var w=this;return(0,h.Z)(function*(){let T=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield fr(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield Yn(p,function Ir(v,p){return nr.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var w,T,P,Y,le,Ye,dt,Ct;const dn=null!==(w=m.displayName)&&void 0!==w?w:void 0,zr=null!==(T=m.email)&&void 0!==T?T:void 0,rs=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,Vs=null!==(Y=m.photoURL)&&void 0!==Y?Y:void 0,Ru=null!==(le=m.tenantId)&&void 0!==le?le:void 0,Gc=null!==(Ye=m._redirectEventId)&&void 0!==Ye?Ye:void 0,Us=null!==(dt=m.createdAt)&&void 0!==dt?dt:void 0,Qr=null!==(Ct=m.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:Ci,emailVerified:Hd,isAnonymous:xo,providerData:No,stsTokenManager:vs}=m;J(Ci&&vs,p,"internal-error");const By=$n.fromJSON(this.name,vs);J("string"==typeof Ci,p,"internal-error"),Jt(dn,p.name),Jt(zr,p.name),J("boolean"==typeof Hd,p,"internal-error"),J("boolean"==typeof xo,p,"internal-error"),Jt(rs,p.name),Jt(Vs,p.name),Jt(Ru,p.name),Jt(Gc,p.name),Jt(Us,p.name),Jt(Qr,p.name);const Pu=new Tn({uid:Ci,auth:p,email:zr,emailVerified:Hd,displayName:dn,isAnonymous:xo,photoURL:Vs,phoneNumber:rs,tenantId:Ru,stsTokenManager:By,createdAt:Us,lastLoginAt:Qr});return No&&Array.isArray(No)&&(Pu.providerData=No.map(Xt=>Object.assign({},Xt))),Gc&&(Pu._redirectEventId=Gc),Pu}static _fromIdTokenResponse(p,m,w=!1){return(0,h.Z)(function*(){const T=new $n;T.updateFromServerResponse(m);const P=new Tn({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:w});return yield fr(P),P})()}}const Lt=new Map;function Vn(v){Xe(v instanceof Function,"Expected a class definition");let p=Lt.get(v);return p?(Xe(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Lt.set(v,p),p)}const pr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var T=this;return(0,h.Z)(function*(){T.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=w.storage[m];return void 0===T?null:T})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function ni(v,p,m){return`firebase:${v}:${p}:${m}`}class H{constructor(p,m,w){this.persistence=p,this.auth=m,this.userKey=w;const{config:T,name:P}=this.auth;this.fullUserKey=ni(this.userKey,T.apiKey,P),this.fullPersistenceKey=ni("persistence",T.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Tn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new H(Vn(pr),p,w);const T=(yield Promise.all(m.map(function(){var dt=(0,h.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let P=T[0]||Vn(pr);const Y=ni(w,p.config.apiKey,p.name);let le=null;for(const dt of m)try{const Ct=yield dt._get(Y);if(Ct){const dn=Tn._fromJSON(p,Ct);dt!==P&&(le=dn),P=dt;break}}catch{}const Ye=T.filter(dt=>dt._shouldAllowMigration);return P._shouldAllowMigration&&Ye.length?(P=Ye[0],le&&(yield P._set(Y,le.toJSON())),yield Promise.all(m.map(function(){var dt=(0,h.Z)(function*(Ct){if(Ct!==P)try{yield Ct._remove(Y)}catch{}});return function(Ct){return dt.apply(this,arguments)}}())),new H(P,p,w)):new H(P,p,w)})()}}function B(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(K(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(R(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(G(p))return"Blackberry";if(ae(p))return"Webos";if(O(p))return"Safari";if((p.includes("chrome/")||S(p))&&!p.includes("edge/"))return"Chrome";if(ie(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function R(v=(0,V.z$)()){return/firefox\//i.test(v)}function O(v=(0,V.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function S(v=(0,V.z$)()){return/crios\//i.test(v)}function K(v=(0,V.z$)()){return/iemobile/i.test(v)}function ie(v=(0,V.z$)()){return/android/i.test(v)}function G(v=(0,V.z$)()){return/blackberry/i.test(v)}function ae(v=(0,V.z$)()){return/webos/i.test(v)}function de(v=(0,V.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Ge(v=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function et(v=(0,V.z$)()){return de(v)||ie(v)||ae(v)||G(v)||/windows phone/i.test(v)||K(v)}function Ut(v,p=[]){let m;switch(v){case"Browser":m=B((0,V.z$)());break;case"Worker":m=`${B((0,V.z$)())}-${v}`;break;default:m=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${k.SDK_VERSION}/${w}`}function ee(){return(ee=(0,h.Z)(function*(v){return(yield ut(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pe(v,p){return mt.apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*(v,p){return ut(v,"GET","/v2/recaptchaConfig",Ae(v,p))})).apply(this,arguments)}function It(v){return void 0!==v&&void 0!==v.getResponse}function Gt(v){return void 0!==v&&void 0!==v.enterprise}class on{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Fn(v){return new Promise((p,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=T=>{const P=De("internal-error");P.customData=T,m(P)},w.type="text/javascript",w.charset="UTF-8",function Cr(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function rr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class go{constructor(p){this.type="recaptcha-enterprise",this.auth=qn(p)}verify(p="verify",m=!1){var w=this;return(0,h.Z)(function*(){function P(){return P=(0,h.Z)(function*(le){if(!m){if(null==le.tenantId&&null!=le._agentRecaptchaConfig)return le._agentRecaptchaConfig.siteKey;if(null!=le.tenantId&&void 0!==le._tenantRecaptchaConfigs[le.tenantId])return le._tenantRecaptchaConfigs[le.tenantId].siteKey}return new Promise(function(){var Ye=(0,h.Z)(function*(dt,Ct){Pe(le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(dn=>{if(void 0!==dn.recaptchaKey){const zr=new on(dn);return null==le.tenantId?le._agentRecaptchaConfig=zr:le._tenantRecaptchaConfigs[le.tenantId]=zr,dt(zr.siteKey)}Ct(new Error("recaptcha Enterprise site key undefined"))}).catch(dn=>{Ct(dn)})});return function(dt,Ct){return Ye.apply(this,arguments)}}())}),P.apply(this,arguments)}function Y(le,Ye,dt){const Ct=window.grecaptcha;Gt(Ct)?Ct.enterprise.ready(()=>{Ct.enterprise.execute(le,{action:p}).then(dn=>{Ye(dn)}).catch(()=>{Ye("NO_RECAPTCHA")})}):dt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((le,Ye)=>{(function T(le){return P.apply(this,arguments)})(w.auth).then(dt=>{if(!m&&Gt(window.grecaptcha))Y(dt,le,Ye);else{if(typeof window>"u")return void Ye(new Error("RecaptchaVerifier is only supported in browser"));Fn("https://www.google.com/recaptcha/enterprise.js?render="+dt).then(()=>{Y(dt,le,Ye)}).catch(Ct=>{Ye(Ct)})}}).catch(dt=>{Ye(dt)})})})()}}function wi(v,p,m){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,h.Z)(function*(v,p,m,w=!1){const T=new go(v);let P;try{P=yield T.verify(m)}catch{P=yield T.verify(m,!0)}const Y=Object.assign({},p);return Object.assign(Y,w?{captchaResp:P}:{captchaResponse:P}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}class ya{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const w=P=>new Promise((Y,le)=>{try{Y(p(P))}catch(Ye){le(Ye)}});w.onAbort=m,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const w=[];try{for(const T of m.queue)yield T(p),T.onAbort&&w.push(T.onAbort)}catch(T){w.reverse();for(const P of w)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Ki{constructor(p,m,w,T){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=w,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new va(this),this.idTokenSubscription=new va(this),this.beforeStateQueue=new ya(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Et,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,m){var w=this;return m&&(this._popupRedirectResolver=Vn(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,P;if(!w._deleted&&(w.persistenceManager=yield H.create(w,p),!w._deleted)){if(null!==(T=w._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var w;const T=yield m.assertedPersistence.getCurrentUser();let P=T,Y=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Ye=P?._redirectEventId,dt=yield m.tryRedirectSignIn(p);(!le||le===Ye)&&dt?.user&&(P=dt.user,Y=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield m.beforeStateQueue.runMiddleware(P)}catch(le){P=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(le))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return J(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield fr(p)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const w=p?(0,V.m9)(p):null;return w&&J(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(p,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return p&&J(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(Vn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const m=yield Pe(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new on(m);null==p.tenantId?p._agentRecaptchaConfig=w:p._tenantRecaptchaConfigs[p.tenantId]=w,w.emailPasswordEnabled&&new go(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,m,w){return this.registerStateListener(this.authStateSubscription,p,m,w)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,w){return this.registerStateListener(this.idTokenSubscription,p,m,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var w=this;return(0,h.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=p&&Vn(p)||m._popupRedirectResolver;J(w,m,"argument-error"),m.redirectPersistenceManager=yield H.create(m,[Vn(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var w,T;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,w,T){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return J(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,w,T):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Ut(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();T&&(w["X-Firebase-Client"]=T);const P=yield p._getAppCheckToken();return P&&(w["X-Firebase-AppCheck"]=P),w})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var m;const w=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return w?.error&&function ze(v,...p){Fe.logLevel<=ge.in.WARN&&Fe.warn(`Auth (${k.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function qn(v){return(0,V.m9)(v)}class va{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function yo(v,p,m){const w=qn(v);J(w._canInitEmulator,w,"emulator-config-failed"),J(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const T=!!m?.disableWarnings,P=vo(p),{host:Y,port:le}=function os(v){const p=vo(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const P=T[1];return{host:P,port:Ko(w.substr(P.length+1))}}{const[P,Y]=w.split(":");return{host:P,port:Ko(Y)}}}(p);w.config.emulator={url:`${P}//${Y}${null===le?"":`:${le}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Y,port:le,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function _o(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function vo(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Ko(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class U{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return st("not implemented")}_getIdTokenResponse(p){return st("not implemented")}_linkToIdToken(p,m){return st("not implemented")}_getReauthenticationResolver(p){return st("not implemented")}}function X(v,p){return oe.apply(this,arguments)}function oe(){return(oe=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:resetPassword",Ae(v,p))})).apply(this,arguments)}function tt(v,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Nt(){return(Nt=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:update",Ae(v,p))})).apply(this,arguments)}function Hn(v,p){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signInWithPassword",Ae(v,p))})).apply(this,arguments)}function or(v,p){return as.apply(this,arguments)}function as(){return(as=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:sendOobCode",Ae(v,p))})).apply(this,arguments)}function ar(){return(ar=(0,h.Z)(function*(v,p){return or(v,p)})).apply(this,arguments)}function ct(v,p){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,h.Z)(function*(v,p){return or(v,p)})).apply(this,arguments)}function zn(v,p){return ri.apply(this,arguments)}function ri(){return(ri=(0,h.Z)(function*(v,p){return or(v,p)})).apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(v,p){return or(v,p)})).apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signInWithEmailLink",Ae(v,p))})).apply(this,arguments)}function Yi(){return(Yi=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signInWithEmailLink",Ae(v,p))})).apply(this,arguments)}class Ot extends U{constructor(p,m,w,T=null){super("password",w),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new Ot(p,m,"password")}static _fromEmailAndCode(p,m,w=null){return new Ot(p,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){var w;switch(m.signInMethod){case"password":const T={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const P=yield wi(p,T,"signInWithPassword");return Hn(p,P)}return Hn(p,T).catch(function(){var P=(0,h.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const le=yield wi(p,T,"signInWithPassword");return Hn(p,le)}return Promise.reject(Y)});return function(Y){return P.apply(this,arguments)}}());case"emailLink":return function As(v,p){return Kn.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:be(p,"internal-error")}})()}_linkToIdToken(p,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return tt(p,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function xs(v,p){return Yi.apply(this,arguments)}(p,{idToken:m,email:w._email,oobCode:w._password});default:be(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function hi(v,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signInWithIdp",Ae(v,p))})).apply(this,arguments)}class Sn extends U{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Sn(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):be("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:T}=m,P=(0,ne._T)(m,["providerId","signInMethod"]);if(!w||!T)return null;const Y=new Sn(w,T);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(p){return hi(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,hi(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,hi(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,V.xO)(m)}return p}}function cs(){return(cs=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:sendVerificationCode",Ae(v,p))})).apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signInWithPhoneNumber",Ae(v,p))})).apply(this,arguments)}function ds(){return(ds=(0,h.Z)(function*(v,p){const m=yield Ht(v,"POST","/v1/accounts:signInWithPhoneNumber",Ae(v,p));if(m.temporaryProof)throw An(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Qi={USER_NOT_FOUND:"user-not-found"};function wo(){return(wo=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signInWithPhoneNumber",Ae(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Qi)})).apply(this,arguments)}class qt extends U{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new qt({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new qt({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function fi(v,p){return ls.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function ad(v,p){return ds.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ws(v,p){return wo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:w,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:w,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:P}=p;return w||m||T||P?new qt({verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:P}):null}}class Ns{constructor(p){var m,w,T,P,Y,le;const Ye=(0,V.zd)((0,V.pd)(p)),dt=null!==(m=Ye.apiKey)&&void 0!==m?m:null,Ct=null!==(w=Ye.oobCode)&&void 0!==w?w:null,dn=function kf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ye.mode)&&void 0!==T?T:null);J(dt&&Ct&&dn,"argument-error"),this.apiKey=dt,this.operation=dn,this.code=Ct,this.continueUrl=null!==(P=Ye.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Ye.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(le=Ye.tenantId)&&void 0!==le?le:null}static parseLink(p){const m=function ud(v){const p=(0,V.zd)((0,V.pd)(v)).link,m=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(v)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||m||p||v}(p);try{return new Ns(m)}catch{return null}}}let _a=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return Ot._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const T=Ns.parseLink(w);return J(T,"argument-error"),Ot._fromEmailAndCode(m,T.code,T.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ii{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Xi extends Ii{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class gr extends Xi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return J("providerId"in m&&"signInMethod"in m,"argument-error"),Sn._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return J(p.idToken||p.accessToken,"argument-error"),Sn._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return gr.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return gr.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:P,nonce:Y,providerId:le}=p;if(!w&&!T&&!m&&!P||!le)return null;try{return new gr(le)._credential({idToken:m,accessToken:w,nonce:Y,pendingToken:P})}catch{return null}}}let cd=(()=>{class v extends Xi{constructor(){super("facebook.com")}static credential(m){return Sn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),pi=(()=>{class v extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Sn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:T}=m;if(!w&&!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),gi=(()=>{class v extends Xi{constructor(){super("github.com")}static credential(m){return Sn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class es extends U{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return hi(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,hi(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,hi(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:T,pendingToken:P}=m;return w&&T&&P&&w===T?new es(w,P):null}static _create(p,m){return new es(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ii extends Ii{constructor(p){J(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ii.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ii.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=es.fromJSON(p);return J(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:w}=p;if(!m||!w)return null;try{return es._create(w,m)}catch{return null}}}let cu=(()=>{class v extends Xi{constructor(){super("twitter.com")}static credential(m,w){return Sn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=m;if(!w||!T)return null;try{return v.credential(w,T)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Zo(v,p){return lu.apply(this,arguments)}function lu(){return(lu=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signUp",Ae(v,p))})).apply(this,arguments)}class Zr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,w,T=!1){return(0,h.Z)(function*(){const P=yield Tn._fromIdTokenResponse(p,w,T),Y=wa(w);return new Zr({user:P,providerId:Y,_tokenResponse:w,operationType:m})})()}static _forOperation(p,m,w){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const T=wa(w);return new Zr({user:p,providerId:T,_tokenResponse:w,operationType:m})})()}}function wa(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Yo(v){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,h.Z)(function*(v){var p;const m=qn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Zr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Zo(m,{returnSecureToken:!0}),T=yield Zr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Qo extends V.ZR{constructor(p,m,w,T){var P;super(m.code,m.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,Qo.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,m,w,T){return new Qo(p,m,w,T)}}function gc(v,p,m,w){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Qo._fromErrorAndOperation(v,P,p,w):P})}function du(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function mc(v,p){return ld.apply(this,arguments)}function ld(){return ld=(0,h.Z)(function*(v,p){const m=(0,V.m9)(v);yield hu(!0,m,p);const{providerUserInfo:w}=yield function Ln(v,p){return Zn.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=du(w||[]);return m.providerData=m.providerData.filter(P=>T.has(P.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),ld.apply(this,arguments)}function dd(v,p){return hd.apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(v,p,m=!1){const w=yield Yn(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Zr._forOperation(v,"link",w)})).apply(this,arguments)}function hu(v,p,m){return yc.apply(this,arguments)}function yc(){return(yc=(0,h.Z)(function*(v,p,m){yield fr(p);const T=!1===v?"provider-already-linked":"no-such-provider";J(du(p.providerData).has(m)===v,p.auth,T)})).apply(this,arguments)}function Do(v,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(v,p,m=!1){const{auth:w}=v,T="reauthenticate";try{const P=yield Yn(v,gc(w,T,p,v),m);J(P.idToken,w,"internal-error");const Y=pt(P.idToken);J(Y,w,"internal-error");const{sub:le}=Y;return J(v.uid===le,w,"user-mismatch"),Zr._forOperation(v,T,P)}catch(P){throw"auth/user-not-found"===P?.code&&be(w,"user-mismatch"),P}})).apply(this,arguments)}function vc(v,p){return _c.apply(this,arguments)}function _c(){return(_c=(0,h.Z)(function*(v,p,m=!1){const w="signIn",T=yield gc(v,w,p),P=yield Zr._fromIdTokenResponse(v,w,T);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function hs(v,p){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,h.Z)(function*(v,p){return vc(qn(v),p)})).apply(this,arguments)}function si(v,p){return wc.apply(this,arguments)}function wc(){return(wc=(0,h.Z)(function*(v,p){const m=(0,V.m9)(v);return yield hu(!1,m,p.providerId),dd(m,p)})).apply(this,arguments)}function Ff(v,p){return Un.apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(v,p){return Do((0,V.m9)(v),p)})).apply(this,arguments)}function Ic(){return(Ic=(0,h.Z)(function*(v,p){return Ht(v,"POST","/v1/accounts:signInWithCustomToken",Ae(v,p))})).apply(this,arguments)}function Lf(v,p){return A.apply(this,arguments)}function A(){return A=(0,h.Z)(function*(v,p){const m=qn(v),w=yield function fd(v,p){return Ic.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),T=yield Zr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(T.user),T}),A.apply(this,arguments)}class x{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?j._fromServerResponse(p,m):"totpInfo"in m?re._fromServerResponse(p,m):be(p,"internal-error")}}class j extends x{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new j(m)}}class re extends x{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new re(m)}}function Re(v,p,m){var w;J((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),J(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(J(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(J(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Oe(v,p,m){return gt.apply(this,arguments)}function gt(){return gt=(0,h.Z)(function*(v,p,m){var w;const T=qn(v),P={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Y=yield wi(T,P,"getOobCode",!0);m&&Re(T,Y,m),yield ct(T,Y)}else m&&Re(T,P,m),yield ct(T,P).catch(function(){var Y=(0,h.Z)(function*(le){if("auth/missing-recaptcha-token"!==le.code)return Promise.reject(le);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ye=yield wi(T,P,"getOobCode",!0);m&&Re(T,Ye,m),yield ct(T,Ye)}});return function(le){return Y.apply(this,arguments)}}())}),gt.apply(this,arguments)}function Mn(v,p,m){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(v,p,m){yield X((0,V.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Nn(v,p){return ln.apply(this,arguments)}function ln(){return ln=(0,h.Z)(function*(v,p){yield function Wt(v,p){return Nt.apply(this,arguments)}((0,V.m9)(v),{oobCode:p})}),ln.apply(this,arguments)}function Zt(v,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,h.Z)(function*(v,p){const m=(0,V.m9)(v),w=yield X(m,{oobCode:p}),T=w.requestType;switch(J(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(w.mfaInfo,m,"internal-error");default:J(w.email,m,"internal-error")}let P=null;return w.mfaInfo&&(P=x._fromServerResponse(qn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:T}})).apply(this,arguments)}function Rs(v,p){return fs.apply(this,arguments)}function fs(){return(fs=(0,h.Z)(function*(v,p){const{data:m}=yield Zt((0,V.m9)(v),p);return m.email})).apply(this,arguments)}function Da(v,p,m){return ps.apply(this,arguments)}function ps(){return ps=(0,h.Z)(function*(v,p,m){var w;const T=qn(v),P={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Y;if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const dt=yield wi(T,P,"signUpPassword");Y=Zo(T,dt)}else Y=Zo(T,P).catch(function(){var dt=(0,h.Z)(function*(Ct){if("auth/missing-recaptcha-token"===Ct.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const dn=yield wi(T,P,"signUpPassword");return Zo(T,dn)}return Promise.reject(Ct)});return function(Ct){return dt.apply(this,arguments)}}());const le=yield Y.catch(dt=>Promise.reject(dt)),Ye=yield Zr._fromIdTokenResponse(T,"signIn",le);return yield T._updateCurrentUser(Ye.user),Ye}),ps.apply(this,arguments)}function ts(v,p,m){return hs((0,V.m9)(v),_a.credential(p,m))}function Ks(v,p,m){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,h.Z)(function*(v,p,m){var w;const T=qn(v),P={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Y(le,Ye){J(Ye.handleCodeInApp,T,"argument-error"),Ye&&Re(T,le,Ye)}if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const le=yield wi(T,P,"getOobCode",!0);Y(le,m),yield zn(T,le)}else Y(P,m),yield zn(T,P).catch(function(){var le=(0,h.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const dt=yield wi(T,P,"getOobCode",!0);Y(dt,m),yield zn(T,dt)}});return function(Ye){return le.apply(this,arguments)}}())}),Ca.apply(this,arguments)}function bb(v,p){const m=Ns.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}function ay(v,p,m){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v),T=_a.credentialWithLink(p,m||cn());return J(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),hs(w,T)})).apply(this,arguments)}function Dc(){return(Dc=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:createAuthUri",Ae(v,p))})).apply(this,arguments)}function uy(v,p){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,h.Z)(function*(v,p){const w={identifier:p,continueUri:Xn()?cn():"http://localhost"},{signinMethods:T}=yield function uE(v,p){return Dc.apply(this,arguments)}((0,V.m9)(v),w);return T||[]}),Uf.apply(this,arguments)}function cE(v,p){return pd.apply(this,arguments)}function pd(){return pd=(0,h.Z)(function*(v,p){const m=(0,V.m9)(v),T={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Re(m.auth,T,p);const{email:P}=yield function od(v,p){return ar.apply(this,arguments)}(m.auth,T);P!==v.email&&(yield v.reload())}),pd.apply(this,arguments)}function cy(v,p,m){return gd.apply(this,arguments)}function gd(){return gd=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Re(w.auth,P,m);const{email:Y}=yield function us(v,p){return Or.apply(this,arguments)}(w.auth,P);Y!==v.email&&(yield v.reload())}),gd.apply(this,arguments)}function md(){return(md=(0,h.Z)(function*(v,p){return ut(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ps(v,p){return yd.apply(this,arguments)}function yd(){return yd=(0,h.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const w=(0,V.m9)(v),P={idToken:yield w.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Y=yield Yn(w,function Bf(v,p){return md.apply(this,arguments)}(w.auth,P));w.displayName=Y.displayName||null,w.photoURL=Y.photoUrl||null;const le=w.providerData.find(({providerId:Ye})=>"password"===Ye);le&&(le.displayName=w.displayName,le.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Y)}),yd.apply(this,arguments)}function ly(v,p){return dy((0,V.m9)(v),p,null)}function ur(v,p){return dy((0,V.m9)(v),null,p)}function dy(v,p,m){return fu.apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(v,p,m){const{auth:w}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const Y=yield Yn(v,tt(w,P));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class pu{constructor(p,m,w={}){this.isNewUser=p,this.providerId=m,this.profile=w}}class jf extends pu{constructor(p,m,w,T){super(p,m,w),this.username=T}}class gu extends pu{constructor(p,m){super(p,"facebook.com",m)}}class Fi extends jf{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class Cc extends pu{constructor(p,m){super(p,"google.com",m)}}class bc extends jf{constructor(p,m,w){super(p,"twitter.com",m,w)}}function vd(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ki(v){var p,m;if(!v)return null;const{providerId:w}=v,T=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const Y=null===(m=null===(p=pt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Y)return new pu(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!w)return null;switch(w){case"facebook.com":return new gu(P,T);case"github.com":return new Fi(P,T);case"google.com":return new Cc(P,T);case"twitter.com":return new bc(P,T,v.screenName||null);case"custom":case"anonymous":return new pu(P,null);default:return new pu(P,w,T)}}(m)}function Hf(v,p,m,w){return(0,V.m9)(v).onAuthStateChanged(p,m,w)}class Co{constructor(p,m,w){this.type=p,this.credential=m,this.auth=w}static _fromIdtoken(p,m){return new Co("enroll",p,m)}static _fromMfaPendingCredential(p){return new Co("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,w;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Co._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return Co._fromIdtoken(p.multiFactorSession.idToken)}return null}}class mu{constructor(p,m,w){this.session=p,this.hints=m,this.signInResolver=w}static _fromError(p,m){const w=qn(p),T=m.customData._serverResponse,P=(T.mfaInfo||[]).map(le=>x._fromServerResponse(w,le));J(T.mfaPendingCredential,w,"internal-error");const Y=Co._fromMfaPendingCredential(T.mfaPendingCredential);return new mu(Y,P,function(){var le=(0,h.Z)(function*(Ye){const dt=yield Ye._process(w,Y);delete T.mfaInfo,delete T.mfaPendingCredential;const Ct=Object.assign(Object.assign({},T),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(m.operationType){case"signIn":const dn=yield Zr._fromIdTokenResponse(w,m.operationType,Ct);return yield w._updateCurrentUser(dn.user),dn;case"reauthenticate":return J(m.user,w,"internal-error"),Zr._forOperation(m.user,m.operationType,Ct);default:be(w,"internal-error")}});return function(Ye){return le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function _d(v,p){var m;const w=(0,V.m9)(v),T=p;return J(p.customData.operationType,w,"argument-error"),J(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),mu._fromError(w,T)}class wd{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>x._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new wd(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Co._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var w=this;return(0,h.Z)(function*(){const T=p,P=yield w.getSession(),Y=yield Yn(w.user,T._process(w.user.auth,P,m));return yield w.user._updateTokensIfNecessary(Y),w.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const w="string"==typeof p?p:p.uid,T=yield m.user.getIdToken();try{const P=yield Yn(m.user,function gy(v,p){return ut(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Ae(v,p))}(m.user.auth,{idToken:T,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Y})=>Y!==w),yield m.user._updateTokensIfNecessary(P),yield m.user.reload()}catch(P){throw P}})()}}const Id=new WeakMap;function $e(v){const p=(0,V.m9)(v);return Id.has(p)||Id.set(p,wd._fromUser(p)),Id.get(p)}const an="__sak";class yu{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(an,"1"),this.storage.removeItem(an),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Li=(()=>{class v extends yu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Wf(){const v=(0,V.z$)();return O(v)||de(v)}()&&function kt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=et(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),P=this.localCache[w];T!==P&&m(w,P,T)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((le,Ye,dt)=>{this.notifyListeners(le,dt)});const T=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(T);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!w)return}const P=()=>{const le=this.storage.getItem(T);!w&&this.localCache[T]===le||this.notifyListeners(T,le)},Y=this.storage.getItem(T);!function it(){return(0,V.w1)()&&10===document.documentMode}()||Y===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var T=()=>super._set,P=this;return(0,h.Z)(function*(){yield T().call(P,m,w),P.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,T=this;return(0,h.Z)(function*(){const P=yield w().call(T,m);return T.localCache[m]=JSON.stringify(P),P})()}_remove(m){var w=()=>super._remove,T=this;return(0,h.Z)(function*(){yield w().call(T,m),delete T.localCache[m]})()}}return v.type="LOCAL",v})(),vu=(()=>{class v extends yu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let dE=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(P=>P.isListeningto(m));if(w)return w;const T=new v(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const T=m,{eventId:P,eventType:Y,data:le}=T.data,Ye=w.handlersMap[Y];if(!Ye?.size)return;T.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const dt=Array.from(Ye).map(function(){var dn=(0,h.Z)(function*(zr){return zr(T.origin,le)});return function(zr){return dn.apply(this,arguments)}}()),Ct=yield function qf(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return p.apply(this,arguments)}}()))}(dt);T.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:Ct})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Ta(v="",p=10){let m="";for(let w=0;w<p;w++)m+=Math.floor(10*Math.random());return v+m}class mi{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,w=50){var T=this;return(0,h.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,le;return new Promise((Ye,dt)=>{const Ct=Ta("",20);P.port1.start();const dn=setTimeout(()=>{dt(new Error("unsupported_event"))},w);le={messageChannel:P,onMessage(zr){const rs=zr;if(rs.data.eventId===Ct)switch(rs.data.status){case"ack":clearTimeout(dn),Y=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ye(rs.data.response);break;default:clearTimeout(dn),clearTimeout(Y),dt(new Error("invalid_response"))}}},T.handlers.add(le),P.port1.addEventListener("message",le.onMessage),T.target.postMessage({eventType:p,eventId:Ct,data:m},[P.port2])}).finally(()=>{le&&T.removeMessageHandler(le)})})()}}function Gn(){return window}function Zs(){return typeof Gn().WorkerGlobalScope<"u"&&"function"==typeof Gn().importScripts}function bd(){return(bd=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Td="firebaseLocalStorageDb",Sa="firebaseLocalStorage",Ac="fbase_key";class To{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function xc(v,p){return v.transaction([Sa],p?"readwrite":"readonly").objectStore(Sa)}function _u(){const v=indexedDB.open(Td,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Sa,{keyPath:Ac})}catch(T){m(T)}}),v.addEventListener("success",(0,h.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Sa)?p(w):(w.close(),yield function vy(){const v=indexedDB.deleteDatabase(Td);return new To(v).toPromise()}(),p(yield _u()))}))})}function Zf(v,p,m){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,h.Z)(function*(v,p,m){const w=xc(v,!0).put({[Ac]:p,value:m});return new To(w).toPromise()})).apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(v,p){const m=xc(v,!1).get(p),w=yield new To(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function ms(v,p){const m=xc(v,!0).delete(p);return new To(m).toPromise()}const Ys=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield _u()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const P=yield w._openDb();return yield m(P)}catch(P){if(T++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Zs()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=dE._getInstance(function yy(){return Zs()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(T,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(T,P){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(T,P){return["keyChanged"]});return function(T,P){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,T;if(m.activeServiceWorker=yield function bo(){return bd.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new mi(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);P&&null!==(w=P[0])&&void 0!==w&&w.fulfilled&&null!==(T=P[0])&&void 0!==T&&T.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Kf(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield _u();return yield Zf(m,an,"1"),yield ms(m,an),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(P=>Zf(P,m,w)),T.localCache[m]=w,T.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=yield w._withRetries(P=>function Rc(v,p){return Eu.apply(this,arguments)}(P,m));return w.localCache[m]=T,T})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(T=>ms(T,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(Y=>{const le=xc(Y,!1).getAll();return new To(le).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const T=[],P=new Set;for(const{fbase_key:Y,value:le}of w)P.add(Y),JSON.stringify(m.localCache[Y])!==JSON.stringify(le)&&(m.notifyListeners(Y,le),T.push(Y));for(const Y of Object.keys(m.localCache))m.localCache[Y]&&!P.has(Y)&&(m.notifyListeners(Y,null),T.push(Y));return T})()}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Pc=1e12;class Iy{constructor(p){this.auth=p,this.counter=Pc,this._widgets=new Map}render(p,m){const w=this.counter;return this._widgets.set(w,new Md(p,this.auth.name,m||{})),this.counter++,w}reset(p){var m;const w=p||Pc;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Pc))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(p||Pc))||void 0===w||w.execute(),""})()}}class Md{constructor(p,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;J(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xo(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yf=rr("rcb"),Ad=new ye(3e4,6e4);class Oc{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Gn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return J(function kc(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&It(Gn().grecaptcha)?Promise.resolve(Gn().grecaptcha):new Promise((w,T)=>{const P=Gn().setTimeout(()=>{T(De(p,"network-request-failed"))},Ad.get());Gn()[Yf]=()=>{Gn().clearTimeout(P),delete Gn()[Yf];const le=Gn().grecaptcha;if(!le||!It(le))return void T(De(p,"internal-error"));const Ye=le.render;le.render=(dt,Ct)=>{const dn=Ye(dt,Ct);return this.counter++,dn},this.hostLanguage=m,w(le)},Fn(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Yf,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),T(De(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Gn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Dy{load(p){return(0,h.Z)(function*(){return new Iy(p)})()}clearedOneInstance(){}}const Qf="recaptcha",gE={theme:"light",type:"image"};class wu{constructor(p,m=Object.assign({},gE),w){this.parameters=m,this.type=Qf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qn(w),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;J(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Dy:new Oc,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(m)||new Promise(P=>{const Y=le=>{le&&(p.tokenChangeListeners.delete(Y),P(le))};p.tokenChangeListeners.add(Y),p.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof p)p(m);else if("string"==typeof p){const w=Gn()[p];"function"==typeof w&&w(m)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){J(Xn()&&!Zs(),p.auth,"internal-error"),yield function Fc(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function se(v){return ee.apply(this,arguments)}(p.auth);J(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jf{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=qt._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Tb(v,p,m){return Os.apply(this,arguments)}function Os(){return(Os=(0,h.Z)(function*(v,p,m){const w=qn(v),T=yield ea(w,p,(0,V.m9)(m));return new Jf(T,P=>hs(w,P))})).apply(this,arguments)}function cr(v,p,m){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v);yield hu(!1,w,"phone");const T=yield ea(w.auth,p,(0,V.m9)(m));return new Jf(T,P=>si(w,P))})).apply(this,arguments)}function ns(v,p,m){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v),T=yield ea(w.auth,p,(0,V.m9)(m));return new Jf(T,P=>Ff(w,P))})).apply(this,arguments)}function ea(v,p,m){return Qs.apply(this,arguments)}function Qs(){return Qs=(0,h.Z)(function*(v,p,m){var w;const T=yield m.verify();try{let P;if(J("string"==typeof T,v,"argument-error"),J(m.type===Qf,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const Y=P.session;if("phoneNumber"in P)return J("enroll"===Y.type,v,"internal-error"),(yield function Ed(v,p){return ut(v,"POST","/v2/accounts/mfaEnrollment:start",Ae(v,p))}(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{J("signin"===Y.type,v,"internal-error");const le=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return J(le,v,"missing-multi-factor-info"),(yield function yr(v,p){return ut(v,"POST","/v2/accounts/mfaSignIn:start",Ae(v,p))}(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Gs(v,p){return cs.apply(this,arguments)}(v,{phoneNumber:P.phoneNumber,recaptchaToken:T});return Y}}finally{m._reset()}}),Qs.apply(this,arguments)}function Hr(v,p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,h.Z)(function*(v,p){yield dd((0,V.m9)(v),p)})).apply(this,arguments)}let Qn=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=qn(m)}verifyPhoneNumber(m,w){return ea(this.auth,m,(0,V.m9)(w))}static credential(m,w){return qt._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:T}=m;return w&&T?qt._fromTokenResponse(w,T):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function yt(v,p){return p?Vn(p):(J(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ks extends U{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return hi(p,this._buildIdpRequest())}_linkToIdToken(p,m){return hi(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return hi(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Ur(v){return vc(v.auth,new ks(v),v.bypassAuthState)}function Iu(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),Do(m,new ks(v),v.bypassAuthState)}function Lc(v){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,h.Z)(function*(v){const{auth:p,user:m}=v;return J(m,p,"internal-error"),dd(m,new ks(v),v.bypassAuthState)})).apply(this,arguments)}class Fs{constructor(p,m,w,T,P=!1){this.auth=p,this.resolver=w,this.user=T,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(w,T){p.pendingPromise={resolve:w,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(w,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:P,tenantId:Y,error:le,type:Ye}=p;if(le)return void m.reject(le);const dt={auth:m.auth,requestUri:w,sessionId:T,tenantId:Y||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ye)(dt))}catch(Ct){m.reject(Ct)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ur;case"linkViaPopup":case"linkViaRedirect":return Lc;case"reauthViaPopup":case"reauthViaRedirect":return Iu;default:be(this.auth,"internal-error")}}resolve(p){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cy=new ye(2e3,1e4);function Vc(v,p,m){return Du.apply(this,arguments)}function Du(){return(Du=(0,h.Z)(function*(v,p,m){const w=qn(v);Be(v,p,Ii);const T=yt(w,m);return new Nd(w,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function Xf(v,p,m){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v);Be(w.auth,p,Ii);const T=yt(w.auth,m);return new Nd(w.auth,"reauthViaPopup",p,T,w).executeNotNull()})).apply(this,arguments)}function Aa(v,p,m){return ys.apply(this,arguments)}function ys(){return(ys=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v);Be(w.auth,p,Ii);const T=yt(w.auth,m);return new Nd(w.auth,"linkViaPopup",p,T,w).executeNotNull()})).apply(this,arguments)}let Nd=(()=>{class v extends Fs{constructor(m,w,T,P,Y){super(m,w,P,Y),this.provider=T,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return J(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){Xe(1===m.filter.length,"Popup operations only handle one event");const w=Ta();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(De(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,T;this.pollId=null!==(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Cy.get())};m()}}return v.currentPopupAction=null,v})();const ep="pendingRedirect",xa=new Map;class Rd extends Fs{constructor(p,m,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=xa.get(m.auth._key());if(!w){try{const P=(yield function tp(v,p){return ta.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;w=()=>Promise.resolve(P)}catch(T){w=()=>Promise.reject(T)}xa.set(m.auth._key(),w)}return m.bypassAuthState||xa.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(w,p);if("unknown"!==p.type){if(p.eventId){const T=yield w.auth._redirectUserForId(p.eventId);if(T)return w.user=T,m().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ta(){return(ta=(0,h.Z)(function*(v,p){const m=yi(p),w=Xs(v);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(m));return yield w._remove(m),T})).apply(this,arguments)}function Js(v,p){return So.apply(this,arguments)}function So(){return(So=(0,h.Z)(function*(v,p){return Xs(v)._set(yi(p),"true")})).apply(this,arguments)}function br(){xa.clear()}function Cu(v,p){xa.set(v._key(),p)}function Xs(v){return Vn(v._redirectPersistence)}function yi(v){return ni(ep,v.config.apiKey,v.name)}function Pd(v,p,m){return function bu(v,p,m){return na.apply(this,arguments)}(v,p,m)}function na(){return(na=(0,h.Z)(function*(v,p,m){const w=qn(v);Be(v,p,Ii),yield w._initializationPromise;const T=yt(w,m);return yield Js(T,w),T._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function Od(v,p,m){return function kd(v,p,m){return Mo.apply(this,arguments)}(v,p,m)}function Mo(){return(Mo=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v);Be(w.auth,p,Ii),yield w.auth._initializationPromise;const T=yt(w.auth,m);yield Js(T,w.auth);const P=yield mE(w);return T._openRedirect(w.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function ra(v,p,m){return function Ls(v,p,m){return Tu.apply(this,arguments)}(v,p,m)}function Tu(){return(Tu=(0,h.Z)(function*(v,p,m){const w=(0,V.m9)(v);Be(w.auth,p,Ii),yield w.auth._initializationPromise;const T=yt(w.auth,m);yield hu(!1,w,p.providerId),yield Js(T,w.auth);const P=yield mE(w);return T._openRedirect(w.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function Fd(v,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(v,p){return yield qn(v)._initializationPromise,by(v,p,!1)})).apply(this,arguments)}function by(v,p){return np.apply(this,arguments)}function np(){return(np=(0,h.Z)(function*(v,p,m=!1){const w=qn(v),T=yt(w,p),Y=yield new Rd(w,T,m).execute();return Y&&!m&&(delete Y.user._redirectEventId,yield w._persistUserIfCurrent(Y.user),yield w._setRedirectUser(null,p)),Y})).apply(this,arguments)}function mE(v){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,h.Z)(function*(v){const p=Ta(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class yE{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(m=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Na(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return My(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var w;if(p.error&&!My(p)){const T=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(De(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const w=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Sy(p))}saveEventToCache(p){this.cachedEventUids.add(Sy(p)),this.lastProcessedEventTime=Date.now()}}function Sy(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function My({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Ay(v){return xy.apply(this,arguments)}function xy(){return(xy=(0,h.Z)(function*(v,p={}){return ut(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Br=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ny=/^https?/;function Ld(){return(Ld=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Ay(v);for(const m of p)try{if(Di(m))return}catch{}be(v,"unauthorized-domain")})).apply(this,arguments)}function Di(v){const p=cn(),{protocol:m,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Y.hostname===w}if(!Ny.test(m))return!1;if(Br.test(v))return w===v;const T=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const Su=new ye(3e4,6e4);function Uc(){const v=Gn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let to=null;const vE=new ye(5e3,15e3),Ry="__/auth/iframe",Mb="emulator/auth/iframe",yn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ao=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pa(v){const p=v.config;J(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?Ne(p,Mb):`https://${v.config.authDomain}/${Ry}`,w={apiKey:p.apiKey,appName:v.name,v:k.SDK_VERSION},T=Ao.get(v.config.apiHost);T&&(w.eid=T);const P=v._getFrameworks();return P.length&&(w.fw=P.join(",")),`${m}?${(0,V.xO)(w).slice(1)}`}function Mu(){return Mu=(0,h.Z)(function*(v){const p=yield function rp(v){return to=to||function Bc(v){return new Promise((p,m)=>{var w,T,P;function Y(){Uc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Uc(),m(De(v,"network-request-failed"))},timeout:Su.get()})}if(null!==(T=null===(w=Gn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Gn().gapi)||void 0===P||!P.load){const le=rr("iframefcb");return Gn()[le]=()=>{gapi.load?Y():m(De(v,"network-request-failed"))},Fn(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ye=>m(Ye))}Y()}}).catch(p=>{throw to=null,p})}(v),to}(v),m=Gn().gapi;return J(m,v,"internal-error"),p.open({where:document.body,url:Pa(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yn,dontclear:!0},w=>new Promise(function(){var T=(0,h.Z)(function*(P,Y){yield w.restyle({setHideOnLeave:!1});const le=De(v,"network-request-failed"),Ye=Gn().setTimeout(()=>{Y(le)},vE.get());function dt(){Gn().clearTimeout(Ye),P(w)}w.ping(dt).then(dt,()=>{Y(le)})});return function(P,Y){return T.apply(this,arguments)}}()))}),Mu.apply(this,arguments)}const Py={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Oy{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Au="__/auth/handler",jc="emulator/auth/handler",ky=encodeURIComponent("fac");function Oa(v,p,m,w,T,P){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,h.Z)(function*(v,p,m,w,T,P){J(v.config.authDomain,v,"auth-domain-config-required"),J(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:k.SDK_VERSION,eventId:T};if(p instanceof Ii){p.setDefaultLanguage(v.languageCode),Y.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(Y.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Ct,dn]of Object.entries(P||{}))Y[Ct]=dn}if(p instanceof Xi){const Ct=p.getScopes().filter(dn=>""!==dn);Ct.length>0&&(Y.scopes=Ct.join(","))}v.tenantId&&(Y.tid=v.tenantId);const le=Y;for(const Ct of Object.keys(le))void 0===le[Ct]&&delete le[Ct];const Ye=yield v._getAppCheckToken(),dt=Ye?`#${ky}=${encodeURIComponent(Ye)}`:"";return`${function ip({config:v}){return v.emulator?Ne(v,jc):`https://${v.authDomain}/${Au}`}(v)}?${(0,V.xO)(le).slice(1)}${dt}`})).apply(this,arguments)}const $c="webStorageSupport",jd=class ia{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vu,this._completeRedirectFn=by,this._overrideRedirectResult=Cu}_openPopup(p,m,w,T){var P=this;return(0,h.Z)(function*(){var Y;Xe(null===(Y=P.eventManagers[p._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const le=yield Oa(p,m,w,cn(),T);return function Vd(v,p,m,w=500,T=600){const P=Math.max((window.screen.availHeight-T)/2,0).toString(),Y=Math.max((window.screen.availWidth-w)/2,0).toString();let le="";const Ye=Object.assign(Object.assign({},Py),{width:w.toString(),height:T.toString(),top:P,left:Y}),dt=(0,V.z$)().toLowerCase();m&&(le=S(dt)?"_blank":m),R(dt)&&(p=p||"http://localhost",Ye.scrollbars="yes");const Ct=Object.entries(Ye).reduce((zr,[rs,Vs])=>`${zr}${rs}=${Vs},`,"");if(function Ie(v=(0,V.z$)()){var p;return de(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(dt)&&"_self"!==le)return function Ud(v,p){const m=document.createElement("a");m.href=v,m.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(p||"",le),new Oy(null);const dn=window.open(p||"",le,Ct);J(dn,v,"popup-blocked");try{dn.focus()}catch{}return new Oy(dn)}(p,le,Ta())})()}_openRedirect(p,m,w,T){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(p),function my(v){Gn().location.href=v}(yield Oa(p,m,w,cn(),T)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:P}=this.eventManagers[m];return T?Promise.resolve(T):(Xe(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(p);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const w=yield function Ab(v){return Mu.apply(this,arguments)}(p),T=new yE(p);return w.register("authEvent",P=>(J(P?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=w,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send($c,{type:$c},T=>{var P;const Y=null===(P=T?.[0])||void 0===P?void 0:P[$c];void 0!==Y&&m(!!Y),be(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ra(v){return Ld.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return et()||O()||de()}};class no{constructor(p){this.factorId=p}_process(p,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,w);case"signin":return this._finalizeSignIn(p,m.credential);default:return st("unexpected MultiFactorSessionType")}}}class Ui extends no{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ui(p)}_finalizeEnroll(p,m,w){return function ba(v,p){return ut(v,"POST","/v2/accounts/mfaEnrollment:finalize",Ae(v,p))}(p,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function hE(v,p){return ut(v,"POST","/v2/accounts/mfaSignIn:finalize",Ae(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ka=(()=>{class v{constructor(){}static assertion(m){return Ui._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var sp="@firebase/auth";class Ly{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(w=>{p(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ap=(0,V.Pz)("authIdTokenMaxAge")||300;let zc=null;const up=v=>function(){var p=(0,h.Z)(function*(m){const w=m&&(yield m.getIdTokenResult()),T=w&&((new Date).getTime()-Date.parse(w.issuedAtTime))/1e3;if(T&&T>ap)return;const P=w?.token;zc!==P&&(zc=P,yield fetch(v,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function Uy(v=(0,k.getApp)()){const p=(0,k._getProvider)(v,"auth");if(p.isInitialized())return p.getImmediate();const m=function Zi(v,p){const m=(0,k._getProvider)(v,"auth");if(m.isInitialized()){const T=m.getImmediate(),P=m.getOptions();if((0,V.vZ)(P,p??{}))return T;be(T,"already-initialized")}return m.initialize({options:p})}(v,{popupRedirectResolver:jd,persistence:[Ys,Li,vu]}),w=(0,V.Pz)("authTokenSyncURL");if(w){const P=up(w);(function $f(v,p,m){(0,V.m9)(v).beforeAuthStateChanged(p,m)})(m,P,()=>P(m.currentUser)),function Tc(v,p,m,w){(0,V.m9)(v).onIdTokenChanged(p,m,w)}(m,Y=>P(Y))}const T=(0,V.q4)("auth");return T&&yo(m,`http://${T}`),m}!function op(v){(0,k._registerComponent)(new ce.wA("auth",(p,{options:m})=>{const w=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),P=p.getProvider("app-check-internal"),{apiKey:Y,authDomain:le}=w.options;J(Y&&!Y.includes(":"),"invalid-api-key",{appName:w.name});const Ye={apiKey:Y,authDomain:le,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ut(v)},dt=new Ki(w,T,P,Ye);return function mo(v,p){const m=p?.persistence||[],w=(Array.isArray(m)?m:[m]).map(Vn);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,p?.popupRedirectResolver)}(dt,m),dt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,w)=>{p.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ce.wA("auth-internal",p=>{const m=qn(p.getProvider("auth").getImmediate());return new Ly(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(sp,"0.23.2",function Vy(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,k.registerVersion)(sp,"0.23.2","esm2017")}("Browser")},2090:(Dt,ke,F)=>{F.d(ke,{$s:()=>Vn,BH:()=>Te,G6:()=>Ne,L:()=>_e,LL:()=>_n,Pz:()=>De,Sg:()=>Be,UG:()=>st,US:()=>ce,ZB:()=>q,ZR:()=>ut,aH:()=>be,b$:()=>Xn,eu:()=>Je,hl:()=>Le,jU:()=>Xe,m9:()=>ni,ne:()=>Yn,pd:()=>pt,q4:()=>ze,r3:()=>Ln,ru:()=>cn,tV:()=>W,uI:()=>J,vZ:()=>vt,w1:()=>Ei,xO:()=>On,xb:()=>di,z$:()=>Se,zI:()=>je,zd:()=>Kt});const ne=function(H){const B=[];let R=0;for(let O=0;O<H.length;O++){let S=H.charCodeAt(O);S<128?B[R++]=S:S<2048?(B[R++]=S>>6|192,B[R++]=63&S|128):55296==(64512&S)&&O+1<H.length&&56320==(64512&H.charCodeAt(O+1))?(S=65536+((1023&S)<<10)+(1023&H.charCodeAt(++O)),B[R++]=S>>18|240,B[R++]=S>>12&63|128,B[R++]=S>>6&63|128,B[R++]=63&S|128):(B[R++]=S>>12|224,B[R++]=S>>6&63|128,B[R++]=63&S|128)}return B},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const R=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,O=[];for(let S=0;S<H.length;S+=3){const K=H[S],ie=S+1<H.length,G=ie?H[S+1]:0,ae=S+2<H.length,de=ae?H[S+2]:0;let it=(15&G)<<2|de>>6,et=63&de;ae||(et=64,ie||(it=64)),O.push(R[K>>2],R[(3&K)<<4|G>>4],R[it],R[et])}return O.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(ne(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let R=0,O=0;for(;R<H.length;){const S=H[R++];if(S<128)B[O++]=String.fromCharCode(S);else if(S>191&&S<224){const K=H[R++];B[O++]=String.fromCharCode((31&S)<<6|63&K)}else if(S>239&&S<365){const ae=((7&S)<<18|(63&H[R++])<<12|(63&H[R++])<<6|63&H[R++])-65536;B[O++]=String.fromCharCode(55296+(ae>>10)),B[O++]=String.fromCharCode(56320+(1023&ae))}else{const K=H[R++],ie=H[R++];B[O++]=String.fromCharCode((15&S)<<12|(63&K)<<6|63&ie)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const R=B?this.charToByteMapWebSafe_:this.charToByteMap_,O=[];for(let S=0;S<H.length;){const K=R[H.charAt(S++)],G=S<H.length?R[H.charAt(S)]:0;++S;const de=S<H.length?R[H.charAt(S)]:64;++S;const Ie=S<H.length?R[H.charAt(S)]:64;if(++S,null==K||null==G||null==de||null==Ie)throw new ve;O.push(K<<2|G>>4),64!==de&&(O.push(G<<4&240|de>>2),64!==Ie&&O.push(de<<6&192|Ie))}return O},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(H){return function(H){const B=ne(H);return ce.encodeByteArray(B,!0)}(H).replace(/\./g,"")},W=function(H){try{return ce.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function q(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const R in B)!B.hasOwnProperty(R)||!xe(R)||(H[R]=q(H[R],B[R]));return H}function xe(H){return"__proto__"!==H}const Fe=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&W(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},ze=H=>{var B,R;return null===(R=null===(B=Fe())||void 0===B?void 0:B.emulatorHosts)||void 0===R?void 0:R[H]},be=()=>{var H;return null===(H=Fe())||void 0===H?void 0:H.config},De=H=>{var B;return null===(B=Fe())||void 0===B?void 0:B[`_${H}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,R)=>{this.resolve=B,this.reject=R})}wrapCallback(B){return(R,O)=>{R?this.reject(R):this.resolve(O),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(R):B(R,O))}}}function Be(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const O=B||"demo-project",S=H.iat||0,K=H.sub||H.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ie=Object.assign({iss:`https://securetoken.google.com/${O}`,aud:O,iat:S,exp:S+3600,auth_time:S,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},H);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(ie)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function st(){var H;const B=null===(H=Fe())||void 0===H?void 0:H.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Xe(){return"object"==typeof self&&self.self===self}function cn(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Xn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ei(){const H=Se();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ne(){return!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){try{return"object"==typeof indexedDB}catch{return!1}}function Je(){return new Promise((H,B)=>{try{let R=!0;const O="validate-browser-context-for-indexeddb-analytics-module",S=self.indexedDB.open(O);S.onsuccess=()=>{S.result.close(),R||self.indexedDB.deleteDatabase(O),H(!0)},S.onupgradeneeded=()=>{R=!1},S.onerror=()=>{var K;B((null===(K=S.error)||void 0===K?void 0:K.message)||"")}}catch(R){B(R)}})}function je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ut extends Error{constructor(B,R,O){super(R),this.code=B,this.customData=O,this.name="FirebaseError",Object.setPrototypeOf(this,ut.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}}class _n{constructor(B,R,O){this.service=B,this.serviceName=R,this.errors=O}create(B,...R){const O=R[0]||{},S=`${this.service}/${B}`,K=this.errors[B],ie=K?function wt(H,B){return H.replace(bt,(R,O)=>{const S=B[O];return null!=S?String(S):`<${O}?>`})}(K,O):"Error";return new ut(S,`${this.serviceName}: ${ie} (${S}).`,O)}}const bt=/\{\$([^}]+)}/g;function Ln(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function di(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function vt(H,B){if(H===B)return!0;const R=Object.keys(H),O=Object.keys(B);for(const S of R){if(!O.includes(S))return!1;const K=H[S],ie=B[S];if(Cn(K)&&Cn(ie)){if(!vt(K,ie))return!1}else if(K!==ie)return!1}for(const S of O)if(!R.includes(S))return!1;return!0}function Cn(H){return null!==H&&"object"==typeof H}function On(H){const B=[];for(const[R,O]of Object.entries(H))Array.isArray(O)?O.forEach(S=>{B.push(encodeURIComponent(R)+"="+encodeURIComponent(S))}):B.push(encodeURIComponent(R)+"="+encodeURIComponent(O));return B.length?"&"+B.join("&"):""}function Kt(H){const B={};return H.replace(/^\?/,"").split("&").forEach(O=>{if(O){const[S,K]=O.split("=");B[decodeURIComponent(S)]=decodeURIComponent(K)}}),B}function pt(H){const B=H.indexOf("?");if(!B)return"";const R=H.indexOf("#",B);return H.substring(B,R>0?R:void 0)}function Yn(H,B){const R=new xn(H,B);return R.subscribe.bind(R)}class xn{constructor(B,R){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=R,this.task.then(()=>{B(this)}).catch(O=>{this.error(O)})}next(B){this.forEachObserver(R=>{R.next(B)})}error(B){this.forEachObserver(R=>{R.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,R,O){let S;if(void 0===B&&void 0===R&&void 0===O)throw new Error("Missing Observer.");S=function bn(H,B){if("object"!=typeof H||null===H)return!1;for(const R of B)if(R in H&&"function"==typeof H[R])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:R,complete:O},void 0===S.next&&(S.next=tn),void 0===S.error&&(S.error=tn),void 0===S.complete&&(S.complete=tn);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?S.error(this.finalError):S.complete()}catch{}}),this.observers.push(S),K}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let R=0;R<this.observers.length;R++)this.sendOne(R,B)}sendOne(B,R){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{R(this.observers[B])}catch(O){typeof console<"u"&&console.error&&console.error(O)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tn(){}const $n=1e3,Jt=2,Tn=144e5,Lt=.5;function Vn(H,B=$n,R=Jt){const O=B*Math.pow(R,H),S=Math.round(Lt*O*(Math.random()-.5)*2);return Math.min(Tn,O+S)}function ni(H){return H&&H._delegate?H._delegate:H}},3791:(Dt,ke,F)=>{var h=F(2223);let V=null;function k(){return V}class ge{}const ce=new h.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(_e)},providedIn:"platform"}),n})();const Ce=new h.OlP("Location Initialized");let _e=(()=>{class n extends ve{constructor(){super(),this._doc=(0,h.f3M)(ce),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function W(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function q(n){return n&&"?"!==n[0]?"?"+n:n}let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Qe)},providedIn:"root"}),n})();const we=new h.OlP("appBaseHref");let Qe=(()=>{class n extends xe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return W(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+q(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+q(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+q(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ve),h.LFG(we,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Et=(()=>{class n extends xe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=W(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+q(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ve),h.LFG(we,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),fe=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function be(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z(Ze(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+q(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+q(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+q(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=q,n.joinWithSlash=W,n.stripTrailingSlash=z,n.\u0275fac=function(t){return new(t||n)(h.LFG(xe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Fe(){return new fe((0,h.LFG)(xe))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}function qi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class ya{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ki=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new ya(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),qn(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{qn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function qn(n,e){n.context.$implicit=e.item}let Zi=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){yo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){yo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class mo{constructor(){this.$implicit=null,this.ngIf=null}}function yo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Qi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Ns(n){return"server"===n}let Xi=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new gr((0,h.LFG)(ce),window)}),n})();class gr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function pi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=cd(this.window.history)||cd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function cd(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ea{}class bc extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class vd extends bc{static makeCurrent(){!function ne(n){V||(V=n)}(new vd)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function hy(){return gs=gs||document.querySelector("base"),gs?gs.getAttribute("href"):null}();return null==t?null:function $f(n){Tc=Tc||document.createElement("a"),Tc.setAttribute("href",n);const e=Tc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){gs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qi(document.cookie,e)}}let Tc,gs=null,fy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const zf=new h.OlP("EventManagerPlugins");let zt=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zf),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Gf{constructor(e){this._doc=e}}const Sc="ng-app-id";let Co=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ns(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Sc}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(Sc),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(Sc,this.appId),l}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_d=/%COMP%/g,gy=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function $e(n,e){return e.map(t=>t.replace(_d,n))}let an=(()=>{class n{constructor(t,r,s,u,l,g,_,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=Ns(g),this.defaultRenderer=new yu(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof Cd?s.applyToHost(t):s instanceof Li&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,D=this.sharedStylesHost,b=this.removeStylesOnCompDestory,N=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:u=new Cd(_,D,r,this.appId,b,l,g,N);break;case h.ifc.ShadowDom:return new Mc(_,D,t,r,l,g,this.nonce,N);default:u=new Li(_,D,r,b,l,g,N)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zt),h.LFG(Co),h.LFG(h.AFp),h.LFG(gy),h.LFG(ce),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class yu{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(mu[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Dd(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Dd(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=mu[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=mu[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=k().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Dd(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Mc extends yu{constructor(e,t,r,s,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=$e(s.id,s.styles);for(const b of D){const N=document.createElement("style");g&&N.setAttribute("nonce",g),N.textContent=b,this.shadowRoot.appendChild(N)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Li extends yu{constructor(e,t,r,s,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=_?$e(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Cd extends Li{constructor(e,t,r,s,u,l,g,_){const D=s+"-"+r.id;super(e,t,r,u,l,g,_,D),this.contentAttr=function wd(n){return"_ngcontent-%COMP%".replace(_d,n)}(D),this.hostAttr=function Id(n){return"_nghost-%COMP%".replace(_d,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let vu=(()=>{class n extends Gf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const qf=["alt","control","meta","shift"],dE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ta={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let mi=(()=>{class n extends Gf{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),qf.forEach(D=>{const b=r.indexOf(D);b>-1&&(r.splice(b,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let s=dE[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),qf.forEach(l=>{l!==s&&(0,Ta[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Sd=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function bd(){vd.makeCurrent()},multi:!0},{provide:ce,useFactory:function yy(){return(0,h.RDi)(document),document},deps:[]}]),Sa=new h.OlP(""),Ac=[{provide:h.rWj,useClass:class Hf{addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new h.vHH(5103,!1);return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};s.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],To=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Kf(){return new h.qLn},deps:[]},{provide:zf,useClass:vu,multi:!0,deps:[ce,h.R0b,h.Lbi]},{provide:zf,useClass:mi,multi:!0,deps:[ce]},an,Co,zt,{provide:h.FYo,useExisting:an},{provide:Ea,useClass:fy,deps:[]},[]];let xc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sa,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...To,...Ac],imports:[Qi,h.hGG]}),n})(),Rc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Nc(){return new Rc((0,h.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Os=F(7669),cr=F(8996);function Tt(...n){const e=(0,Os.yG)(n);return(0,cr.D)(n,e)}var ns=F(9751),Yr=F(5577),ea=F(576);function Qs(n,e){return(0,ea.m)(e)?(0,Yr.z)(n,e,1):(0,Yr.z)(n,1)}var Hr=F(4482),Vr=F(5403);function Qn(n,e){return(0,Hr.e)((t,r)=>{let s=0;t.subscribe((0,Vr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var yt=F(4004),ks=F(8421);function Ur(n,e){return(0,Hr.e)((t,r)=>{let s=null,u=0,l=!1;const g=()=>l&&!s&&r.complete();t.subscribe((0,Vr.x)(r,_=>{s?.unsubscribe();let D=0;const b=u++;(0,ks.Xf)(n(_,b)).subscribe(s=(0,Vr.x)(r,N=>r.next(e?e(_,N,b,D++):N),()=>{s=null,g()}))},()=>{l=!0,g()}))})}class Iu{}class Lc{}class Vi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let s;if(s="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),s.length>0){const u=t.toLowerCase();this.headers.set(u,s),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Vi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Vi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Vi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Cy{encodeKey(e){return Ma(e)}encodeValue(e){return Ma(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Du=/%(\d[a-f0-9])/gi,Xf={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ma(n){return encodeURIComponent(n).replace(Du,(e,t)=>Xf[t]??e)}function Aa(n){return`${n}`}class ys{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Cy,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Vc(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Aa):[Aa(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ys({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Aa(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Aa(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ep{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Rd(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tp(n){return typeof Blob<"u"&&n instanceof Blob}function ta(n){return typeof FormData<"u"&&n instanceof FormData}class So{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xa(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Vi),this.context||(this.context=new ep),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new ys,this.urlWithParams=t}serializeBody(){return null===this.body?null:Rd(this.body)||tp(this.body)||ta(this.body)||function Js(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ys?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ta(this.body)?null:tp(this.body)?this.body.type||null:Rd(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ys?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,D=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((N,$)=>N.set($,e.setHeaders[$]),_)),e.setParams&&(D=Object.keys(e.setParams).reduce((N,$)=>N.set($,e.setParams[$]),D)),new So(t,r,u,{params:D,headers:_,context:b,reportProgress:g,responseType:s,withCredentials:l})}}var br=(()=>((br=br||{})[br.Sent=0]="Sent",br[br.UploadProgress=1]="UploadProgress",br[br.ResponseHeader=2]="ResponseHeader",br[br.DownloadProgress=3]="DownloadProgress",br[br.Response=4]="Response",br[br.User=5]="User",br))();class Cu{constructor(e,t=200,r="OK"){this.headers=e.headers||new Vi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Xs extends Cu{constructor(e={}){super(e),this.type=br.ResponseHeader}clone(e={}){return new Xs({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yi extends Cu{constructor(e={}){super(e),this.type=br.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new yi({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Pd extends Cu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function bu(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let na=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof So)u=t;else{let _,D;_=s.headers instanceof Vi?s.headers:new Vi(s.headers),s.params&&(D=s.params instanceof ys?s.params:new ys({fromObject:s.params})),u=new So(t,r,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:D,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=Tt(u).pipe(Qs(_=>this.handler.handle(_)));if(t instanceof So||"events"===s.observe)return l;const g=l.pipe(Qn(_=>_ instanceof yi));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,yt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,yt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,yt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,yt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ys).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,bu(s,r))}post(t,r,s={}){return this.request("POST",t,bu(s,r))}put(t,r,s={}){return this.request("PUT",t,bu(s,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Iu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Od(n,e){return e(n)}function kd(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const ra=new h.OlP(""),Ls=new h.OlP(""),Tu=new h.OlP("");function Fd(){let n=null;return(e,t)=>(null===n&&(n=((0,h.f3M)(ra,{optional:!0})??[]).reduceRight(kd,Od)),n(e,t))}let eo=(()=>{class n extends Iu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Ls),...this.injector.get(Tu,[])]));this.chain=r.reduceRight((s,u)=>function Mo(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(s,u,this.injector),Od)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lc),h.LFG(h.lqb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Br=/^\)\]\}',?\n/;let Ra=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new h.vHH(-2800,!1);const r=function Ld(){const n=()=>{};if(typeof Zone<"u"){const e=Zone.current,t=e.scheduleMacroTask("httpMacroTask",n,void 0,n,n);return()=>e.cancelTask(t)}return n}(),s=this.xhrFactory;return(s.\u0275loadImpl?(0,cr.D)(s.\u0275loadImpl()):Tt(null)).pipe(Ur(()=>new ns.y(l=>{const g=s.build();if(g.open(t.method,t.urlWithParams),t.withCredentials&&(g.withCredentials=!0),t.headers.forEach((nt,ht)=>g.setRequestHeader(nt,ht.join(","))),t.headers.has("Accept")||g.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const nt=t.detectContentTypeHeader();null!==nt&&g.setRequestHeader("Content-Type",nt)}if(t.responseType){const nt=t.responseType.toLowerCase();g.responseType="json"!==nt?nt:"text"}const _=t.serializeBody();let D=null;const b=()=>{if(null!==D)return D;const nt=g.statusText||"OK",ht=new Vi(g.getAllResponseHeaders()),St=function Ny(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(g)||t.url;return D=new Xs({headers:ht,status:g.status,statusText:nt,url:St}),D},N=()=>{let{headers:nt,status:ht,statusText:St,url:$t}=b(),Rt=null;204!==ht&&(Rt=typeof g.response>"u"?g.responseText:g.response),0===ht&&(ht=Rt?200:0);let gn=ht>=200&&ht<300;if("json"===t.responseType&&"string"==typeof Rt){const Oi=Rt;Rt=Rt.replace(Br,"");try{Rt=""!==Rt?JSON.parse(Rt):null}catch(pc){Rt=Oi,gn&&(gn=!1,Rt={error:pc,text:Rt})}}gn?(l.next(new yi({body:Rt,headers:nt,status:ht,statusText:St,url:$t||void 0})),l.complete()):l.error(new Pd({error:Rt,headers:nt,status:ht,statusText:St,url:$t||void 0}))},$=nt=>{const{url:ht}=b(),St=new Pd({error:nt,status:g.status||0,statusText:g.statusText||"Unknown Error",url:ht||void 0});l.error(St),r()};let Q=!1;const me=nt=>{Q||(l.next(b()),Q=!0);let ht={type:br.DownloadProgress,loaded:nt.loaded};nt.lengthComputable&&(ht.total=nt.total),"text"===t.responseType&&g.responseText&&(ht.partialText=g.responseText),l.next(ht)},He=nt=>{let ht={type:br.UploadProgress,loaded:nt.loaded};nt.lengthComputable&&(ht.total=nt.total),l.next(ht)};g.addEventListener("load",N),g.addEventListener("error",$),g.addEventListener("timeout",$),g.addEventListener("abort",$),t.reportProgress&&(g.addEventListener("progress",me),null!==_&&g.upload&&g.upload.addEventListener("progress",He));const We=()=>r();g.addEventListener("loadend",We);try{g.send(_)}catch(nt){$(nt)}return l.next({type:br.Sent}),()=>{g.removeEventListener("loadend",We),g.removeEventListener("error",$),g.removeEventListener("abort",$),g.removeEventListener("load",N),g.removeEventListener("timeout",$),r(),t.reportProgress&&(g.removeEventListener("progress",me),null!==_&&g.upload&&g.upload.removeEventListener("progress",He)),g.readyState!==g.DONE&&g.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ea))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Di=new h.OlP("XSRF_ENABLED"),Uc=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),to=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class rp{}let vE=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=qi(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(h.Lbi),h.LFG(Uc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ry(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(Di)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(rp).getToken(),s=(0,h.f3M)(to);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var yn=(()=>((yn=yn||{})[yn.Interceptors=0]="Interceptors",yn[yn.LegacyInterceptors=1]="LegacyInterceptors",yn[yn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",yn[yn.NoXsrfProtection=3]="NoXsrfProtection",yn[yn.JsonpSupport=4]="JsonpSupport",yn[yn.RequestsMadeViaParent=5]="RequestsMadeViaParent",yn))();function Ao(n,e){return{\u0275kind:n,\u0275providers:e}}function Pa(...n){const e=[na,Ra,eo,{provide:Iu,useExisting:eo},{provide:Lc,useExisting:Ra},{provide:Ls,useValue:Ry,multi:!0},{provide:Di,useValue:!0},{provide:rp,useClass:vE}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const Mu=new h.OlP("LEGACY_INTERCEPTOR_FN");let Vd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Pa(Ao(yn.LegacyInterceptors,[{provide:Mu,useFactory:Fd},{provide:Ls,useExisting:Mu,multi:!0}]))]}),n})();const ia_firebase={projectId:"queuest-cb885",appId:"1:936633637141:web:9cc171d2c3bf1f5a5bb11c",storageBucket:"queuest-cb885.appspot.com",apiKey:"AIzaSyDPU4uUi8KAm_2VC1kZg7oIlPpQJvV7MQY",authDomain:"queuest-cb885.firebaseapp.com",messagingSenderId:"936633637141",measurementId:"G-P8DPMCNH7X"},ia_application_apiUrl="https://api.language.owlbeardm.com";var no=F(7579);class Ui extends no.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:ka}=Array,{getPrototypeOf:Hc,prototype:$d,keys:Fy}=Object;function Fa(n){if(1===n.length){const e=n[0];if(ka(e))return{args:e,keys:null};if(function sp(n){return n&&"object"==typeof n&&Hc(n)===$d}(e)){const t=Fy(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xu=F(4671);const{isArray:Ly}=Array;function op(n){return(0,yt.U)(e=>function Vy(n,e){return Ly(e)?n(...e):n(e)}(n,e))}function Nu(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var ap=F(9672);function zc(...n){const e=(0,Os.yG)(n),t=(0,Os.jO)(n),{args:r,keys:s}=Fa(n);if(0===r.length)return(0,cr.D)([],e);const u=new ns.y(function up(n,e,t=xu.y){return r=>{Uy(e,()=>{const{length:s}=n,u=new Array(s);let l=s,g=s;for(let _=0;_<s;_++)Uy(e,()=>{const D=(0,cr.D)(n[_],e);let b=!1;D.subscribe((0,Vr.x)(r,N=>{u[_]=N,b||(b=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Nu(s,l):xu.y));return t?u.pipe(op(t)):u}function Uy(n,e,t){n?(0,ap.f)(t,n,e):e()}const p=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var m=F(8189);function T(...n){return function w(){return(0,m.J)(1)}()((0,cr.D)(n,(0,Os.yG)(n)))}function P(n){return new ns.y(e=>{(0,ks.Xf)(n()).subscribe(e)})}var Y=F(9635);function le(n,e){const t=(0,ea.m)(n)?n:()=>n,r=s=>s.error(t());return new ns.y(e?s=>e.schedule(r,0,s):r)}var Ye=F(515),dt=F(727);function Ct(){return(0,Hr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Vr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dn extends ns.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Hr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dt.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Vr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dt.w0.EMPTY)}return e}refCount(){return Ct()(this)}}function zr(n){return n<=0?()=>Ye.E:(0,Hr.e)((e,t)=>{let r=0;e.subscribe((0,Vr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function rs(...n){const e=(0,Os.yG)(n);return(0,Hr.e)((t,r)=>{(e?T(n,t,e):T(n,t)).subscribe(r)})}function Vs(n){return(0,Hr.e)((e,t)=>{let r=!1;e.subscribe((0,Vr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Ru(n=Gc){return(0,Hr.e)((e,t)=>{let r=!1;e.subscribe((0,Vr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Gc(){return new p}function Us(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((s,u)=>n(s,u,r)):xu.y,zr(1),t?Vs(e):Ru(()=>new p))}var Qr=F(8505);function Ci(n){return(0,Hr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Vr.x)(t,void 0,void 0,l=>{u=(0,ks.Xf)(n(l,Ci(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function xo(n,e){return(0,Hr.e)(function Hd(n,e,t,r,s){return(u,l)=>{let g=t,_=e,D=0;u.subscribe((0,Vr.x)(l,b=>{const N=D++;_=g?n(_,b,N):(g=!0,b),r&&l.next(_)},s&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function No(n){return n<=0?()=>Ye.E:(0,Hr.e)((e,t)=>{let r=[];e.subscribe((0,Vr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Pu(n){return(0,Hr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Xt="primary",Wc=Symbol("RouteTitle");class jy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qc(n){return new jy(n)}function xb(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))s[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function ro(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!DE(n[s],e[s]))return!1;return!0}function DE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function CE(n){return n.length>0?n[n.length-1]:null}function jr(n){return function jd(n){return!!n&&(n instanceof ns.y||(0,ea.m)(n.lift)&&(0,ea.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,cr.D)(Promise.resolve(n)):Tt(n)}const $y={exact:function Kc(n,e,t){if(!Ou(n.segments,e.segments)||!zd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Kc(n.children[r],e.children[r],t))return!1;return!0},subset:zy},Hy={exact:function bi(n,e){return ro(n,e)},subset:function bE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>DE(n[t],e[t]))},ignored:()=>!0};function cp(n,e,t){return $y[t.paths](n.root,e.root,t.matrixParams)&&Hy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function zy(n,e,t){return TE(n,e,e.segments,t)}function TE(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Ou(s,t)||e.hasChildren()||!zd(s,t,r))}if(n.segments.length===t.length){if(!Ou(n.segments,t)||!zd(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!zy(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ou(n.segments,s)&&zd(n.segments,s,r)&&n.children[Xt])&&TE(n.children[Xt],e,u,r)}}function zd(n,e,t){return e.every((r,s)=>Hy[t](n[s].parameters,r.parameters))}class Zc{constructor(e=new Bn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qc(this.queryParams)),this._queryParamMap}toString(){return Pb.serialize(this)}}class Bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return La(this)}}class Gd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qc(this.parameters)),this._parameterMap}toString(){return Wy(this)}}function Ou(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ku=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Wd},providedIn:"root"}),n})();class Wd{parse(e){const t=new xE(e);return new Zc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${qd(e.root,!0)}`,r=function dp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Yc(t)}=${Yc(s)}`).join("&"):`${Yc(t)}=${Yc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Gy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Pb=new Wd;function La(n){return n.segments.map(e=>Wy(e)).join("/")}function qd(n,e){if(!n.hasChildren())return La(n);if(e){const t=n.children[Xt]?qd(n.children[Xt],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==Xt&&r.push(`${s}:${qd(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Rb(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Xt&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Xt&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Xt?[qd(n.children[Xt],!1)]:[`${s}:${qd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Xt]?`${La(n)}/${t[0]}`:`${La(n)}/(${t.join("//")})`}}function ME(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yc(n){return ME(n).replace(/%3B/gi,";")}function lp(n){return ME(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sa(n){return decodeURIComponent(n)}function Kd(n){return sa(n.replace(/\+/g,"%20"))}function Wy(n){return`${lp(n.path)}${function qy(n){return Object.keys(n).map(e=>`;${lp(e)}=${lp(n[e])}`).join("")}(n.parameters)}`}const Ob=/^[^\/()?;#]+/;function Ky(n){const e=n.match(Ob);return e?e[0]:""}const kb=/^[^\/()?;=#]+/,Lb=/^[^=?&#]+/,AE=/^[^&#]+/;class xE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bn([],{}):new Bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Xt]=new Bn(e,t)),r}parseSegment(){const e=Ky(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Gd(sa(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Fb(n){const e=n.match(kb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Ky(this.remaining);s&&(r=s,this.capture(r))}e[sa(t)]=sa(r)}parseQueryParam(e){const t=function Vb(n){const e=n.match(Lb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Zy(n){const e=n.match(AE);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Kd(t),u=Kd(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ky(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Xt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Xt]:new Bn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function hp(n){return n.segments.length>0?new Bn([],{[Xt]:n}):n}function NE(n){const e={};for(const r of Object.keys(n.children)){const u=NE(n.children[r]);if(r===Xt&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ub(n){if(1===n.numberOfChildren&&n.children[Xt]){const e=n.children[Xt];return new Bn(n.segments.concat(e.segments),e.children)}return n}(new Bn(n.segments,e))}function oa(n){return n instanceof Zc}function Va(n){let e;const s=hp(function t(u){const l={};for(const _ of u.children){const D=t(_);l[_.outlet]=D}const g=new Bn(u.url,l);return u===n&&(e=g),g}(n.root));return e??s}function Yy(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return PE(s,s,s,t,r);const u=function kE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new OE(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,D])=>{g[_]="string"==typeof D?D.split("/"):D}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new OE(t,e,r)}(e);if(u.toRoot())return PE(s,s,new Bn([],{}),t,r);const l=function FE(n,e,t){if(n.isAbsolute)return new Jd(e,!0,0);if(!t)return new Jd(e,!1,NaN);if(null===t.parent)return new Jd(t,!0,0);const r=Zd(n.commands[0])?0:1;return function Qy(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new h.vHH(4005,!1);s=r.segments.length}return new Jd(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),g=l.processChildren?aa(l.segmentGroup,l.index,u.commands):Xd(l.segmentGroup,l.index,u.commands);return PE(s,l.segmentGroup,g,t,r)}function Zd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yd(n){return"object"==typeof n&&null!=n&&n.outlets}function PE(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([_,D])=>{u[_]=Array.isArray(D)?D.map(b=>`${b}`):`${D}`}),l=n===e?t:Qd(n,e,t);const g=hp(NE(l));return new Zc(g,u,s)}function Qd(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:Qd(u,e,t)}),new Bn(n.segments,r)}class OE{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Zd(r[0]))throw new h.vHH(4003,!1);const s=r.find(Yd);if(s&&s!==CE(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Xd(n,e,t){if(n||(n=new Bn([],{})),0===n.segments.length&&n.hasChildren())return aa(n,e,t);const r=function VE(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],g=t[r];if(Yd(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!pp(_,D,l))return u;r+=2}else{if(!pp(_,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Bn(n.segments.slice(0,r.pathIndex),{});return u.children[Xt]=new Bn(n.segments.slice(r.pathIndex),n.children),aa(u,0,s)}return r.match&&0===s.length?new Bn(n.segments,{}):r.match&&!n.hasChildren()?eh(n,e,t):r.match?aa(n,0,s):eh(n,e,t)}function aa(n,e,t){if(0===t.length)return new Bn(n.segments,{});{const r=function LE(n){return Yd(n[0])?n[0].outlets:{[Xt]:n}}(t),s={};if(!r[Xt]&&n.children[Xt]&&1===n.numberOfChildren&&0===n.children[Xt].segments.length){const u=aa(n.children[Xt],e,t);return new Bn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=Xd(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new Bn(n.segments,s)}}function eh(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Yd(u)){const _=fp(u.outlets);return new Bn(r,_)}if(0===s&&Zd(t[0])){r.push(new Gd(n.segments[e].path,Jy(t[0]))),s++;continue}const l=Yd(u)?u.outlets[Xt]:`${u}`,g=s<t.length-1?t[s+1]:null;l&&g&&Zd(g)?(r.push(new Gd(l,Jy(g))),s+=2):(r.push(new Gd(l,{})),s++)}return new Bn(r,{})}function fp(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=eh(new Bn([],{}),0,r))}),e}function Jy(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function pp(n,e,t){return n==t.path&&ro(e,t.parameters)}const ua="imperative";class Ro{constructor(e,t){this.id=e,this.url=t}}class gp extends Ro{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fu extends Ro{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mp extends Ro{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class th extends Ro{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class yp extends Ro{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class UE extends Ro{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vp extends Ro{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xy extends Ro{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qc extends Ro{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bb extends Ro{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jb{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tx{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $b{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ev{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jc{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nh{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class jE{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Xc,this.attachRef=null}}let Xc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new jE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_p(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_p(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=nv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return nv(e,this._root).map(t=>t.value)}}function _p(n,e){if(n===e.value)return e;for(const t of e.children){const r=_p(n,t);if(r)return r}return null}function nv(n,e){if(n===e.value)return[e];for(const t of e.children){const r=nv(n,t);if(r.length)return r.unshift(e),r}return[]}class ca{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function el(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class $E extends tv{constructor(e,t){super(e),this.snapshot=t,GE(this,e)}toString(){return this.snapshot.toString()}}function HE(n,e){const t=function Ua(n,e){const l=new rv([],{},{},"",{},Xt,e,null,{});return new zb("",new ca(l,[]))}(0,e),r=new Ui([new Gd("",{})]),s=new Ui({}),u=new Ui({}),l=new Ui({}),g=new Ui(""),_=new Po(r,s,l,g,u,Xt,e,t.root);return _.snapshot=t.root,new $E(new ca(_,[]),t)}class Po{constructor(e,t,r,s,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,yt.U)(D=>D[Wc]))??Tt(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>qc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>qc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Sx(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class rv{get title(){return this.data?.[Wc]}constructor(e,t,r,s,u,l,g,_,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class zb extends tv{constructor(e,t){super(t),this.url=e,GE(this,t)}toString(){return Gb(this._root)}}function GE(n,e){e.value._routerState=n,e.children.forEach(t=>GE(n,t))}function Gb(n){const e=n.children.length>0?` { ${n.children.map(Gb).join(", ")} } `:"";return`${n.value}${e}`}function Ep(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ro(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ro(e.params,t.params)||n.paramsSubject.next(t.params),function Nb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ro(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),ro(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function iv(n,e){const t=ro(n.params,e.params)&&function SE(n,e){return Ou(n,e)&&n.every((t,r)=>ro(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||iv(n.parent,e.parent))}let WE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Xc),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(wp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new Wb(t,g,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class Wb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Po?this.route:e===Xc?this.childContexts:this.parent.get(e,t)}}const wp=new h.OlP("");let Ip=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=zc([r.queryParams,r.params,r.data]).pipe(Ur(([u,l,g],_)=>(g={...u,...l,...g},0===_?Tt(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function da(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function qE(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return da(n,r,s);return da(n,r)})}(n,e,t);return new ca(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>da(n,g)),l}}const r=function KE(n){return new Po(new Ui(n.url),new Ui(n.params),new Ui(n.queryParams),new Ui(n.fragment),new Ui(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>da(n,u));return new ca(r,s)}}const Dp="ngNavigationCancelingError";function qb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=oa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Kb(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Kb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Dp]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Zb(n){return Cp(n)&&oa(n.url)}function Cp(n){return n&&n[Dp]}let rh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[WE],encapsulation:2}),n})();function sv(n){const e=n.children&&n.children.map(sv),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Xt&&(t.component=rh),t}function _s(n){return n.outlet||Xt}function vr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class YE{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ep(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=el(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=el(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=el(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=el(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Jc(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ev(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Ep(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),Ep(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=vr(s.snapshot);l.attachRef=null,l.route=s,l.injector=g,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ov{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Tp{constructor(e,t){this.component=e,this.route=t}}function eT(n,e,t){const r=n._root;return nl(r,e?e._root:null,t,[r.value])}function tl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function nl(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=el(e);return n.children.forEach(l=>{(function Px(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function Ox(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ou(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ou(n.url,e.url)||!ro(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iv(n,e)||!ro(n.queryParams,e.queryParams);default:return!iv(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new ov(r)):(u.data=l.data,u._resolvedData=l._resolvedData),nl(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new Tp(g.outlet.component,l))}else l&&ha(e,g,s),s.canActivateChecks.push(new ov(r)),nl(n,null,u.component?g?g.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>ha(g,t.getContext(l),s)),s}function ha(n,e,t){const r=el(n),s=n.value;Object.entries(r).forEach(([u,l])=>{ha(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Tp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function vn(n){return"function"==typeof n}function Sp(n){return n instanceof p||"EmptyError"===n?.name}const uv=Symbol("INITIAL_VALUE");function Ba(){return Ur(n=>zc(n.map(e=>e.pipe(zr(1),rs(uv)))).pipe((0,yt.U)(e=>{for(const t of e)if(!0!==t){if(t===uv)return uv;if(!1===t||t instanceof Zc)return t}return!0}),Qn(e=>e!==uv),zr(1)))}function Ap(n){return(0,Y.z)((0,Qr.b)(e=>{if(oa(e))throw qb(0,e)}),(0,yt.U)(e=>!0===e))}class Oo{constructor(e){this.segmentGroup=e||null}}class Np{constructor(e){this.urlTree=e}}function ja(n){return le(new Oo(n))}function rw(n){return le(new Np(n))}class rl{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Tt(r);if(s.numberOfChildren>1||!s.children[Xt])return le(new h.vHH(4e3,!1));s=s.children[Xt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Zc(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[s]=t[g]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,s)}),new Bn(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const dv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uT(n,e,t,r,s){const u=hv(n,e,t);return u.matched?(r=function Mx(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function xp(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?Tt(s.map(l=>{const g=tl(l,n);return jr(function nT(n){return n&&vn(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Ba(),Ap()):Tt(!0)}(r,e,t).pipe((0,yt.U)(l=>!0===l?u:{...dv}))):Tt(u)}function hv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...dv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||xb)(t,n,e);if(!s)return{...dv};const u={};Object.entries(s.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function Rp(n,e,t,r){return t.length>0&&function ow(n,e,t){return t.some(r=>pv(n,e,r)&&_s(r)!==Xt)}(n,t,r)?{segmentGroup:new Bn(e,cT(r,new Bn(t,n.children))),slicedSegments:[]}:0===t.length&&function fv(n,e,t){return t.some(r=>pv(n,e,r))}(n,t,r)?{segmentGroup:new Bn(n.segments,sw(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Bn(n.segments,n.children),slicedSegments:t}}function sw(n,e,t,r,s){const u={};for(const l of r)if(pv(n,t,l)&&!s[_s(l)]){const g=new Bn([],{});u[_s(l)]=g}return{...s,...u}}function cT(n,e){const t={};t[Xt]=e;for(const r of n)if(""===r.path&&_s(r)!==Xt){const s=new Bn([],{});t[_s(r)]=s}return t}function pv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Fx{constructor(e,t,r,s,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new rl(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=Rp(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Xt).pipe(Ci(t=>{if(t instanceof Np)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Oo?this.noMatchError(t):t}),(0,yt.U)(t=>{const r=new rv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,{}),s=new ca(r,t),u=new zb("",s),l=function RE(n,e,t=null,r=null){return Yy(Va(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Xt).pipe(Ci(r=>{throw r instanceof Oo?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=zE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,cr.D)(s).pipe(Qs(u=>{const l=r.children[u],g=function Jb(n,e){const t=n.filter(r=>_s(r)===e);return t.push(...n.filter(r=>_s(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),xo((u,l)=>(u.push(...l),u)),Vs(null),function vs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Qn((s,u)=>n(s,u,r)):xu.y,No(1),t?Vs(e):Ru(()=>new p))}(),(0,Yr.z)(u=>{if(null===u)return ja(r);const l=aw(u);return function Lx(n){n.sort((e,t)=>e.value.outlet===Xt?-1:t.value.outlet===Xt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),Tt(l)}))}processSegment(e,t,r,s,u,l){return(0,cr.D)(t).pipe(Qs(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,l).pipe(Ci(_=>{if(_ instanceof Oo)return Tt(null);throw _}))),Us(g=>!!g),Ci(g=>{if(Sp(g))return function lT(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?Tt([]):ja(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,l,g){return function kx(n,e,t,r){return!!(_s(n)===r||r!==Xt&&pv(e,t,n))&&("**"===n.path||hv(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):ja(s):ja(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rw(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,Yr.z)(l=>{const g=new Bn(l,{});return this.processSegment(e,t,g,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:b}=hv(t,s,u);if(!g)return ja(t);const N=this.applyRedirects.applyRedirectCommands(_,s.redirectTo,b);return s.redirectTo.startsWith("/")?rw(N):this.applyRedirects.lineralizeSegments(s,N).pipe((0,Yr.z)($=>this.processSegment(e,r,t,$.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let g;if("**"===r.path){const _=s.length>0?CE(s).parameters:{};g=Tt({snapshot:new rv(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Op(r),_s(r),r.component??r._loadedComponent??null,r,il(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else g=uT(t,r,s,e).pipe((0,yt.U)(({matched:_,consumedSegments:D,remainingSegments:b,parameters:N})=>_?{snapshot:new rv(D,N,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Op(r),_s(r),r.component??r._loadedComponent??null,r,il(r)),consumedSegments:D,remainingSegments:b}:null));return g.pipe(Ur(_=>null===_?ja(t):this.getChildConfig(e=r._injector??e,r,s).pipe(Ur(({routes:D})=>{const b=r._loadedInjector??e,{snapshot:N,consumedSegments:$,remainingSegments:Q}=_,{segmentGroup:me,slicedSegments:He}=Rp(t,$,Q,D);if(0===He.length&&me.hasChildren())return this.processChildren(b,D,me).pipe((0,yt.U)(nt=>null===nt?null:[new ca(N,nt)]));if(0===D.length&&0===He.length)return Tt([new ca(N,[])]);const We=_s(r)===u;return this.processSegment(b,D,me,He,We?Xt:u,!0).pipe((0,yt.U)(nt=>[new ca(N,nt)]))}))))}getChildConfig(e,t,r){return t.children?Tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function oT(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?Tt(!0):Tt(s.map(l=>{const g=tl(l,n);return jr(function QE(n){return n&&vn(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Ba(),Ap())}(e,t,r).pipe((0,Yr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Qr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function iw(n){return le(Kb(!1,3))}())):Tt({routes:[],injector:e})}}function Pp(n){const e=n.value.routeConfig;return e&&""===e.path}function aw(n){const e=[],t=new Set;for(const r of n){if(!Pp(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=aw(r.children);e.push(new ca(r.value,s))}return e.filter(r=>!t.has(r))}function Op(n){return n.data||{}}function il(n){return n.resolve||{}}function Fp(n){return"string"==typeof n.title||null===n.title}function sl(n){return Ur(e=>{const t=n(e);return t?(0,cr.D)(t).pipe((0,yt.U)(()=>e)):Tt(e)})}const ah=new h.OlP("ROUTES");let uh=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=jr(t.loadComponent()).pipe((0,yt.U)(vv),(0,Qr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Pu(()=>{this.componentLoaders.delete(t)})),s=new dn(r,()=>new no.x).pipe(Ct());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,yt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D;return Array.isArray(g)?D=g:(_=g.create(t).injector,D=_.get(ah,[],h.XFs.Self|h.XFs.Optional).flat()),{routes:D.map(sv),injector:_}}),Pu(()=>{this.childrenLoaders.delete(r)})),l=new dn(u,()=>new no.x).pipe(Ct());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return jr(t()).pipe((0,yt.U)(vv),(0,Yr.z)(r=>r instanceof h.YKP||Array.isArray(r)?Tt(r):(0,cr.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vv(n){return function yv(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Lp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new no.x,this.configLoader=(0,h.f3M)(uh),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(ku),this.rootContexts=(0,h.f3M)(Xc),this.inputBindingEnabled=null!==(0,h.f3M)(wp,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Tt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new Tx(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new jb(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ui({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ua,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qn(r=>0!==r.id),(0,yt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Ur(r=>{let s=!1,u=!1;return Tt(r).pipe((0,Qr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ur(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new th(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ye.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return lw(l.source)&&(t.browserUrlTree=l.extractedUrl),Tt(l).pipe(Ur(b=>{const N=this.transitions?.getValue();return this.events.next(new gp(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),N!==this.transitions?.getValue()?Ye.E:Promise.resolve(b)}),function gv(n,e,t,r,s,u){return(0,Yr.z)(l=>function dT(n,e,t,r,s,u,l="emptyOnly"){return new Fx(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,yt.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Qr.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,r.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl($,b)}t.browserUrlTree=b.urlAfterRedirects}const N=new UE(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(N)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:N,source:$,restoredState:Q,extras:me}=l,He=new gp(b,this.urlSerializer.serialize(N),$,Q);this.events.next(He);const We=HE(0,this.rootComponentType).snapshot;return Tt(r={...l,targetSnapshot:We,urlAfterRedirects:N,extras:{...me,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new th(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ye.E}}),(0,Qr.b)(l=>{const g=new vp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,yt.U)(l=>r={...l,guards:eT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function iT(n,e){return(0,Yr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Tt({...t,guardsResult:!0}):function cv(n,e,t,r){return(0,cr.D)(n).pipe((0,Yr.z)(s=>function Mp(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Tt(u.map(g=>{const _=vr(e)??s,D=tl(g,_);return jr(function av(n){return n&&vn(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(Us())})).pipe(Ba()):Tt(!0)}(s.component,s.route,t,e,r)),Us(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Yr.z)(g=>g&&function ih(n){return"boolean"==typeof n}(g)?function tw(n,e,t,r){return(0,cr.D)(e).pipe(Qs(s=>T(function Lu(n,e){return null!==n&&e&&e(new $b(n)),Tt(!0)}(s.route.parent,r),function nw(n,e){return null!==n&&e&&e(new Hb(n)),Tt(!0)}(s.route,r),function lv(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function tT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>P(()=>Tt(l.guards.map(_=>{const D=vr(l.node)??t,b=tl(_,D);return jr(function XE(n){return n&&vn(n.canActivateChild)}(b)?b.canActivateChild(r,n):D.runInContext(()=>b(r,n))).pipe(Us())})).pipe(Ba())));return Tt(u).pipe(Ba())}(n,s.path,t),function sT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Tt(!0);const s=r.map(u=>P(()=>{const l=vr(e)??t,g=tl(u,l);return jr(function JE(n){return n&&vn(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(Us())}));return Tt(s).pipe(Ba())}(n,s.route,t))),Us(s=>!0!==s,!0))}(r,u,n,e):Tt(g)),(0,yt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Qr.b)(l=>{if(r.guardsResult=l.guardsResult,oa(l.guardsResult))throw qb(0,l.guardsResult);const g=new Xy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),Qn(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),sl(l=>{if(l.guards.canActivateChecks.length)return Tt(l).pipe((0,Qr.b)(g=>{const _=new Qc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),Ur(g=>{let _=!1;return Tt(g).pipe(function mv(n,e){return(0,Yr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return Tt(t);let u=0;return(0,cr.D)(s).pipe(Qs(l=>function sh(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!Fp(s)&&(u[Wc]=s.title),function kp(n,e,t,r){const s=function oh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return Tt({});const u={};return(0,cr.D)(s).pipe((0,Yr.z)(l=>function cw(n,e,t,r){const s=vr(e)??r,u=tl(n,s);return jr(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Us(),(0,Qr.b)(g=>{u[l]=g}))),No(1),function By(n){return(0,yt.U)(()=>n)}(u),Ci(l=>Sp(l)?Ye.E:le(l)))}(u,n,e,r).pipe((0,yt.U)(l=>(n._resolvedData=l,n.data=zE(n,t).resolve,s&&Fp(s)&&(n.data[Wc]=s.title),null)))}(l.route,r,n,e)),(0,Qr.b)(()=>u++),No(1),(0,Yr.z)(l=>u===s.length?Tt(t):Ye.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Qr.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Qr.b)(g=>{const _=new Bb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),sl(l=>{const g=_=>{const D=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Qr.b)(b=>{_.component=b}),(0,yt.U)(()=>{})));for(const b of _.children)D.push(...g(b));return D};return zc(g(l.targetSnapshot.root)).pipe(Vs(),zr(1))}),sl(()=>this.afterPreactivation()),(0,yt.U)(l=>{const g=function la(n,e,t){const r=da(n,e._root,t?t._root:void 0);return new $E(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,Qr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,yt.U)(s=>(new YE(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),zr(1),(0,Qr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Fu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Pu(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ci(l=>{if(u=!0,Cp(l)){Zb(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new mp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),Zb(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||lw(r.source)};t.scheduleNavigation(_,ua,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new yp(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Ye.E}))}))}cancelNavigationTransition(t,r,s){const u=new mp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lw(n){return n!==ua}let _v=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Xt);return r}getResolvedTitleForRoute(t){return t.data[Wc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(dw)},providedIn:"root"}),n})(),dw=(()=>{class n extends _v{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Vx)},providedIn:"root"}),n})();class fT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Vx=(()=>{class n extends fT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vp=new h.OlP("",{providedIn:"root",factory:()=>({})});let Ev=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(wv)},providedIn:"root"}),n})(),wv=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Es=(()=>((Es=Es||{})[Es.COMPLETE=0]="COMPLETE",Es[Es.FAILED=1]="FAILED",Es[Es.REDIRECTING=2]="REDIRECTING",Es))();function Iv(n,e){n.events.pipe(Qn(t=>t instanceof Fu||t instanceof mp||t instanceof yp||t instanceof th),(0,yt.U)(t=>t instanceof Fu||t instanceof th?Es.COMPLETE:t instanceof mp&&(0===t.code||1===t.code)?Es.REDIRECTING:Es.FAILED),Qn(t=>t!==Es.REDIRECTING),zr(1)).subscribe(()=>{e()})}function Dv(n){throw n}function Up(n,e,t){return e.parse("/")}const pT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ws=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Vp,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||Dv,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Up,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(Ev),this.routeReuseStrategy=(0,h.f3M)(hT),this.titleStrategy=(0,h.f3M)(_v),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(ah,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(Lp),this.urlSerializer=(0,h.f3M)(ku),this.location=(0,h.f3M)(fe),this.componentInputBindingEnabled=!!(0,h.f3M)(wp,{optional:!0}),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Zc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=HE(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ua,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,D=_?this.currentUrlTree.fragment:l;let N,b=null;switch(g){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}null!==b&&(b=this.removeEmptyProps(b));try{N=Va(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),N=this.currentUrlTree.root}return Yy(N,t,b,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=oa(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,ua,null,r)}navigate(t,r={skipLocationChange:!1}){return function fw(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...pT}:!1===r?{...hw}:r,oa(t))return cp(this.currentUrlTree,t,s);const u=this.parseUrl(t);return cp(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,D;l?(g=l.resolve,_=l.reject,D=l.promise):D=new Promise((N,$)=>{g=N,_=$});const b=this.pendingTasks.add();return Iv(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gw{}let mT=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Qn(t=>t instanceof Fu),Qs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,cr.D)(s).pipe((0,m.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Tt(null);const u=s.pipe((0,Yr.z)(l=>null===l?Tt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,cr.D)([u,l]).pipe((0,m.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ws),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(gw),h.LFG(uh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const jp=new h.OlP("");let mw=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof gp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof th&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function ko(n,e){return{\u0275kind:n,\u0275providers:e}}function vT(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(ws),s=n.get(Hp);1===n.get($a)&&r.initialNavigation(),n.get(ww,null,h.XFs.Optional)?.setUpPreloading(),n.get(jp,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const Hp=new h.OlP("",{factory:()=>new no.x}),$a=new h.OlP("",{providedIn:"root",factory:()=>1}),ww=new h.OlP("");function ET(n){return ko(0,[{provide:ww,useExisting:mT},{provide:gw,useExisting:n}])}const Vu=new h.OlP("ROUTER_FORROOT_GUARD"),fa=[fe,{provide:ku,useClass:Wd},ws,Xc,{provide:Po,useFactory:function yw(n){return n.routerState.root},deps:[ws]},uh,[]];function Iw(){return new h.PXZ("Router",ws)}let DT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[fa,[],{provide:ah,multi:!0,useValue:t},{provide:Vu,useFactory:Dw,deps:[[ws,new h.FiY,new h.tp0]]},{provide:Vp,useValue:r||{}},r?.useHash?{provide:xe,useClass:Et}:{provide:xe,useClass:Qe},{provide:jp,useFactory:()=>{const n=(0,h.f3M)(Xi),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Vp),r=(0,h.f3M)(Lp),s=(0,h.f3M)(ku);return t.scrollOffset&&n.setOffset(t.scrollOffset),new mw(s,r,n,e,t)}},r?.preloadingStrategy?ET(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:Iw},r?.initialNavigation?Cw(r):[],r?.bindToComponentInputs?ko(8,[Ip,{provide:wp,useExisting:Ip}]).\u0275providers:[],[{provide:bT,useFactory:vT},{provide:h.tb,multi:!0,useExisting:bT}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ah,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vu,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Dw(n){return"guarded"}function Cw(n){return["disabled"===n.initialNavigation?ko(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(ws);return()=>{e.setUpLocationChangeListener()}}},{provide:$a,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ko(2,[{provide:$a,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Ce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(ws),u=e.get(Hp);Iv(s,()=>{r(!0)}),e.get(Lp).afterPreactivation=()=>(r(!0),u.closed?Tt(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const bT=new h.OlP(""),Tw=[];let Gx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[DT.forRoot(Tw),DT]}),n})();var hn=F(3324),io=F(259);class ol{constructor(e){return e}}class bv{constructor(){return(0,io.C6)()}}const Gp=new h.OlP("angularfire2._apps"),RT={provide:ol,useFactory:function NT(n){return n&&1===n.length?n[0]:new ol((0,io.Mq)())},deps:[[new h.FiY,Gp]]},PT={provide:bv,deps:[[new h.FiY,Gp]]};function Wx(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ol(r)}}let Sw=(()=>{class n{constructor(t){(0,io.KN)("angularfire",hn.q4.full,"core"),(0,io.KN)("angularfire",hn.q4.full,"app"),(0,io.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[RT,PT]}),n})();function Mw(n,...e){return{ngModule:Sw,providers:[{provide:Gp,useFactory:Wx(n),multi:!0,deps:[h.R0b,h.zs3,hn.HU,...e]}]}}const kT=(0,hn.u3)(io.ZF,!0);var Ee=F(5861),Ha=F(6881),al=F(4859),En=F(2090),Fo=F(1877);const Wp=new Map,qp={activated:!1,tokenObservers:[]},FT={initialized:!1,enabled:!1};function kr(n){return Wp.get(n)||Object.assign({},qp)}function fh(){return FT}const Sv="https://content-firebaseappcheck.googleapis.com/v1",BT="exchangeDebugToken",Mv={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class jT{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new En.BH,yield function $T(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new En.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vi=new En.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Nw(n){if(!kr(n).activated)throw vi.create("use-before-activation",{appName:n.name})}function Zp(n,e){return Av.apply(this,arguments)}function Av(){return(Av=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(N){throw vi.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw vi.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(N){throw vi.create("fetch-parse-error",{originalErrorMessage:N?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw vi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),b=Date.now();return{token:g.token,expireTimeMillis:b+D,issuedAtTimeMillis:b}})).apply(this,arguments)}function Pw(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${Sv}/projects/${t}/apps/${r}:${BT}?key=${s}`,body:{debug_token:e}}}const zT="firebase-app-check-database",xv=1,mh="firebase-app-check-store";let Yp=null;function Pv(){return(Pv=(0,Ee.Z)(function*(n,e){const r=(yield function kw(){return Yp||(Yp=new Promise((n,e)=>{try{const t=indexedDB.open(zT,xv);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(vi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(mh,{keyPath:"compositeKey"})}}catch(t){e(vi.create("storage-open",{originalErrorMessage:t?.message}))}}),Yp)}()).transaction(mh,"readwrite"),u=r.objectStore(mh).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var D;g(vi.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const Bu=new Fo.Yd("@firebase/app-check");function Xp(n,e){return(0,En.hl)()?function Lo(n,e){return function Rv(n,e){return Pv.apply(this,arguments)}(function yh(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Bu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function vh(){return fh().enabled}function so(){return kv.apply(this,arguments)}function kv(){return(kv=(0,Ee.Z)(function*(){const n=fh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Fv={error:"UNKNOWN_ERROR"};function KT(n){return En.US.encodeString(JSON.stringify(n),!1)}function tg(n){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Nw(t);const r=kr(t);let u,s=r.token;if(s&&!ll(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(ll(_)?s=_:yield Xp(t,void 0))}if(!e&&s&&ll(s))return{token:s.token};let g,l=!1;if(vh()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zp(Pw(t,yield so()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield Xp(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield kr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Bu.warn(_.message):Bu.error(_),u=_}return s?u?g=ll(s)?{token:s.token,internalError:u}:_h(u):(g={token:s.token},r.token=s,yield Xp(t,s)):g=_h(u),l&&function YT(n,e){const t=kr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g})).apply(this,arguments)}function ZT(n){return ng.apply(this,arguments)}function ng(){return(ng=(0,Ee.Z)(function*(n){const e=n.app;Nw(e);const{provider:t}=kr(e);if(vh()){const r=yield so(),{token:s}=yield Zp(Pw(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function ul(n,e){const t=kr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cl(n){const{app:e}=n,t=kr(e);let r=t.tokenRefresher;r||(r=function rg(n){const{app:e}=n;return new jT((0,Ee.Z)(function*(){let r;if(r=kr(e).token?yield tg(n,!0):yield tg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=kr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Mv.RETRIAL_MIN_WAIT,Mv.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ll(n){return n.expireTimeMillis-Date.now()>0}function _h(n){return{token:KT(Fv),error:n}}class QT{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kr(this.app);for(const t of e)ul(this.app,t.next);return Promise.resolve()}}const Ww="app-check-internal";!function oS(){(0,Ha._registerComponent)(new al.wA("app-check",n=>function JT(n,e){return new QT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Ww).initialize()})),(0,Ha._registerComponent)(new al.wA(Ww,n=>function XT(n){return{getToken:e=>tg(n,e),getLimitedUseToken:()=>ZT(n),addTokenListener:e=>function Vv(n,e,t,r){const{app:s}=n,u=kr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&ll(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),cl(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>cl(n))}(n,"INTERNAL",e),removeTokenListener:e=>ul(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ha.registerVersion)("@firebase/app-check","0.8.0")}();class wh{constructor(){return(0,hn.vb)("app-check")}}typeof window<"u"&&window;var Ih=F(1389);function fl(n){return new ns.y(function(e){return{unsubscribe:(0,Ih.x)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class Uo{constructor(e){return e}}const za=new h.OlP("angularfire2.auth-instances");function Yw(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Uo(r)}}const Qw={provide:class gl{constructor(){return(0,hn.vb)("auth")}},deps:[[new h.FiY,za]]},Jw={provide:Uo,useFactory:function ml(n,e){const t=(0,hn.JM)("auth",n,e);return t&&new Uo(t)},deps:[[new h.FiY,za],ol]};let Xw=(()=>{class n{constructor(){(0,io.KN)("angularfire",hn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Jw,Qw]}),n})();function eI(n,...e){return{ngModule:Xw,providers:[{provide:za,useFactory:Yw(n),multi:!0,deps:[h.R0b,h.zs3,hn.HU,bv,[new h.FiY,wh],...e]}]}}const tI=(0,hn.u3)(fl,!0),sN=(0,hn.u3)(Ih.o,!0);let bh=(()=>{class n{constructor(){this.rootUrl=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lI=(()=>{class n{constructor(t,r){this.config=t,this.http=r,this._rootUrl=""}get rootUrl(){return this._rootUrl||this.config.rootUrl}set rootUrl(t){this._rootUrl=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bh),h.LFG(na))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Yv=new class ES{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};class Th{constructor(e,t,r,s,u){this.name=e,this.value=t,this.options=r,this.options=r||{},null==this.options.style&&(this.options.style=s),null==this.options.explode&&(this.options.explode=u)}serializeValue(e,t=","){if(null==e)return"";if(e instanceof Array)return e.map(r=>this.serializeValue(r).split(t).join(encodeURIComponent(t))).join(t);if("object"==typeof e){const r=[];for(const s of Object.keys(e)){let u=e[s];null!=u&&(u=this.serializeValue(u).split(t).join(encodeURIComponent(t)),this.options.explode?r.push(`${s}=${u}`):(r.push(s),r.push(u)))}return r.join(t)}return String(e)}}class dI extends Th{constructor(e,t,r){super(e,t,r,"simple",!1)}append(e){let t=this.value;null==t&&(t="");let r="label"===this.options.style?".":"",s=this.options.explode?""===r?",":r:",",u=!1;return"matrix"===this.options.style&&(r=`;${this.name}=`,this.options.explode&&"object"==typeof t&&(r=";",t instanceof Array?(t=t.map(l=>`${this.name}=${this.serializeValue(l,";")}`),t=t.join(";"),u=!0):(t=this.serializeValue(t,";"),u=!0))),t=r+(u?t:this.serializeValue(t,s)),(e=e.replace(`{${this.name}}`,t)).replace(`{${r}${this.name}${this.options.explode?"*":""}}`,t)}serializeValue(e,t=","){var r="string"==typeof e?encodeURIComponent(e):super.serializeValue(e,t);return(r=(r=r.replace(/%3D/g,"=")).replace(/%3B/g,";")).replace(/%2C/g,",")}}class hI extends Th{constructor(e,t,r){super(e,t,r,"form",!0)}append(e){if(this.value instanceof Array){if(!this.options.explode)return e.append(this.name,this.serializeValue(this.value,"spaceDelimited"===this.options.style?" ":"pipeDelimited"===this.options.style?"|":","));for(const t of this.value)e=e.append(this.name,this.serializeValue(t))}else if(null!==this.value&&"object"==typeof this.value)if("deepObject"===this.options.style)for(const t of Object.keys(this.value)){const r=this.value[t];null!=r&&(e=e.append(`${this.name}[${t}]`,this.serializeValue(r)))}else if(this.options.explode)for(const t of Object.keys(this.value)){const r=this.value[t];null!=r&&(e=e.append(t,this.serializeValue(r)))}else{const t=[];for(const r of Object.keys(this.value)){const s=this.value[r];null!=s&&(t.push(r),t.push(s))}e=e.append(this.name,this.serializeValue(t))}else null!=this.value&&(e=e.append(this.name,this.serializeValue(this.value)));return e}}class wS extends Th{constructor(e,t,r){super(e,t,r,"simple",!1)}append(e){if(null!=this.value)if(this.value instanceof Array)for(const t of this.value)e=e.append(this.name,this.serializeValue(t));else e=e.append(this.name,this.serializeValue(this.value));return e}}class Ga{constructor(e,t,r){this.rootUrl=e,this.operationPath=t,this.method=r,this._path=new Map,this._query=new Map,this._header=new Map}path(e,t,r){this._path.set(e,new dI(e,t,r||{}))}query(e,t,r){this._query.set(e,new hI(e,t,r||{}))}header(e,t,r){this._header.set(e,new wS(e,t,r||{}))}body(e,t="application/json"){if(this._bodyContentType=e instanceof Blob?e.type:t,"application/x-www-form-urlencoded"===this._bodyContentType&&null!==e&&"object"==typeof e){const r=[];for(const s of Object.keys(e)){let u=e[s];u instanceof Array||(u=[u]);for(const l of u){const g=this.formDataValue(l);null!==g&&r.push([s,g])}}this._bodyContent=r.map(s=>`${encodeURIComponent(s[0])}=${encodeURIComponent(s[1])}`).join("&")}else if("multipart/form-data"===this._bodyContentType){const r=new FormData;if(null!=e)for(const s of Object.keys(e)){const u=e[s];if(u instanceof Array)for(const l of u){const g=this.formDataValue(l);null!==g&&r.append(s,g)}else{const l=this.formDataValue(u);null!==l&&r.set(s,l)}}this._bodyContent=r}else this._bodyContent=e}formDataValue(e){return null==e?null:e instanceof Blob?e:"object"==typeof e?JSON.stringify(e):String(e)}build(e){e=e||{};let t=this.operationPath;for(const l of this._path.values())t=l.append(t);const r=this.rootUrl+t;let s=new ys({encoder:Yv});for(const l of this._query.values())s=l.append(s);let u=new Vi;e.accept&&(u=u.append("Accept",e.accept));for(const l of this._header.values())u=l.append(u);return this._bodyContentType&&!(this._bodyContent instanceof FormData)&&(u=u.set("Content-Type",this._bodyContentType)),new So(this.method.toUpperCase(),r,this._bodyContent,{params:s,headers:u,responseType:e.responseType,reportProgress:e.reportProgress,context:e.context})}}let $u=(()=>{class n extends lI{constructor(t,r){super(t,r)}itemsControllerGetItems$Response(t,r){const s=new Ga(this.rootUrl,n.ItemsControllerGetItemsPath,"get");return this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u))}itemsControllerGetItems(t,r){return this.itemsControllerGetItems$Response(t,r).pipe((0,yt.U)(s=>s.body))}itemsControllerAddItem$Response(t,r){const s=new Ga(this.rootUrl,n.ItemsControllerAddItemPath,"post");return t&&s.body(t.body,"application/json"),this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u.clone({body:void 0})))}itemsControllerAddItem(t,r){return this.itemsControllerAddItem$Response(t,r).pipe((0,yt.U)(s=>s.body))}itemsControllerGetBestPairs$Response(t,r){const s=new Ga(this.rootUrl,n.ItemsControllerGetBestPairsPath,"get");return t&&s.query("size",t.size,{}),this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u))}itemsControllerGetBestPairs(t,r){return this.itemsControllerGetBestPairs$Response(t,r).pipe((0,yt.U)(s=>s.body))}itemsControllerGetLastItem$Response(t,r){const s=new Ga(this.rootUrl,n.ItemsControllerGetLastItemPath,"get");return this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u))}itemsControllerGetLastItem(t,r){return this.itemsControllerGetLastItem$Response(t,r).pipe((0,yt.U)(s=>s.body))}itemsControllerGetBestPair$Response(t,r){const s=new Ga(this.rootUrl,n.ItemsControllerGetBestPairPath,"get");return t&&(s.path("id",t.id,{}),s.query("exclude",t.exclude,{})),this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u))}itemsControllerGetBestPair(t,r){return this.itemsControllerGetBestPair$Response(t,r).pipe((0,yt.U)(s=>s.body))}itemsControllerAddRelation$Response(t,r){const s=new Ga(this.rootUrl,n.ItemsControllerAddRelationPath,"post");return t&&s.body(t.body,"application/json"),this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u.clone({body:void 0})))}itemsControllerAddRelation(t,r){return this.itemsControllerAddRelation$Response(t,r).pipe((0,yt.U)(s=>s.body))}itemsControllerDeleteRelation$Response(t,r){const s=new Ga(this.rootUrl,n.ItemsControllerDeleteRelationPath,"delete");return t&&s.body(t.body,"application/json"),this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u.clone({body:void 0})))}itemsControllerDeleteRelation(t,r){return this.itemsControllerDeleteRelation$Response(t,r).pipe((0,yt.U)(s=>s.body))}}return n.ItemsControllerGetItemsPath="/items",n.ItemsControllerAddItemPath="/items",n.ItemsControllerGetBestPairsPath="/items/pairs",n.ItemsControllerGetLastItemPath="/items/last",n.ItemsControllerGetBestPairPath="/items/{id}/bestpair",n.ItemsControllerAddRelationPath="/items/relation",n.ItemsControllerDeleteRelationPath="/items/relation",n.\u0275fac=function(t){return new(t||n)(h.LFG(bh),h.LFG(na))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qv(n,e){if(1&n&&(h.TgZ(0,"li"),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Oqu(t.name)}}let fI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-list"]],inputs:{items:"items"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(h.TgZ(0,"div")(1,"ol"),h.YNc(2,Qv,2,1,"li",0),h.qZA()()),2&t&&(h.xp6(2),h.Q6J("ngForOf",r.items))},dependencies:[Ki]}),n})();function Jv(n,e){if(1&n&&(h.TgZ(0,"span",2),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item1.name)}}function pI(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addRelation(s.pair.item1.id,s.pair.item2.id))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item1.name)}}function IS(n,e){1&n&&(h.TgZ(0,"span",2),h._uU(1,"="),h.qZA())}function gI(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.deleteRelation(s.pair.relation.from,s.pair.relation.to))}),h._uU(1,"="),h.qZA()}}function mI(n,e){if(1&n&&(h.TgZ(0,"span",2),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item2.name)}}function yI(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addRelation(s.pair.item2.id,s.pair.item1.id))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item2.name)}}let Xv=(()=>{class n{constructor(t){this.itemsService=t,this.pressed=new h.vpe}addRelation(t,r){if(void 0!==t&&void 0!==r){console.log("adding relation");const s={from:t,to:r};this.itemsService.itemsControllerAddRelation({body:s}).subscribe(()=>{this.pair.relation=s,this.pressed.emit()})}}deleteRelation(t,r){console.log("deleting relation"),this.itemsService.itemsControllerDeleteRelation({body:{from:t,to:r}}).subscribe(()=>{this.pair.relation=void 0,this.pressed.emit()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pair"]],inputs:{pair:"pair"},outputs:{pressed:"pressed"},decls:6,vars:6,consts:[["class","bold-pair",4,"ngIf"],["class","btn-pair",3,"click",4,"ngIf"],[1,"bold-pair"],[1,"btn-pair",3,"click"]],template:function(t,r){1&t&&(h.YNc(0,Jv,2,1,"span",0),h.YNc(1,pI,2,1,"button",1),h.YNc(2,IS,2,0,"span",0),h.YNc(3,gI,2,0,"button",1),h.YNc(4,mI,2,1,"span",0),h.YNc(5,yI,2,1,"button",1)),2&t&&(h.Q6J("ngIf",r.pair.item1.id===(null==r.pair.relation?null:r.pair.relation.from)),h.xp6(1),h.Q6J("ngIf",r.pair.item1.id!==(null==r.pair.relation?null:r.pair.relation.from)),h.xp6(1),h.Q6J("ngIf",!r.pair.relation),h.xp6(1),h.Q6J("ngIf",!!r.pair.relation),h.xp6(1),h.Q6J("ngIf",r.pair.item2.id===(null==r.pair.relation?null:r.pair.relation.from)),h.xp6(1),h.Q6J("ngIf",r.pair.item2.id!==(null==r.pair.relation?null:r.pair.relation.from)))},dependencies:[Zi],styles:[".bold-pair[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.btn-pair[_ngcontent-%COMP%]{margin-right:5px}"]}),n})();function DS(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"app-pair",3),h.NdJ("pressed",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.itemPressed())}),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("pair",t)}}let CS=(()=>{class n{constructor(t){this.itemsService=t,this.items=[],this.changes=new h.vpe}ngOnInit(){this.getPairs()}getPairs(){this.itemsService.itemsControllerGetBestPairs({size:5}).subscribe(t=>this.items=t)}itemPressed(){this.changes.emit()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pairs"]],outputs:{changes:"changes"},decls:8,vars:1,consts:[[4,"ngFor","ngForOf"],[2,"padding-left","20px"],[3,"click"],[3,"pair","pressed"]],template:function(t,r){1&t&&(h.TgZ(0,"h2"),h._uU(1,"Sort list"),h.qZA(),h.TgZ(2,"div")(3,"ul"),h.YNc(4,DS,2,1,"li",0),h.qZA()(),h.TgZ(5,"span",1)(6,"button",2),h.NdJ("click",function(){return r.getPairs()}),h._uU(7,"NEXT"),h.qZA()()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.items))},dependencies:[Ki,Xv]}),n})(),e_=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),pa=(()=>{class n extends e_{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ao=new h.OlP("NgValueAccessor"),_I={provide:ao,useExisting:(0,h.Gpc)(()=>Sh),multi:!0},wI=new h.OlP("CompositionEventMode");let Sh=(()=>{class n extends e_{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function EI(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(wI,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([_I]),h.qOj]}),n})();function ga(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Mh(n){return null!=n&&"number"==typeof n.length}const Tr=new h.OlP("NgValidators"),Wa=new h.OlP("NgAsyncValidators"),TS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class n_{static min(e){return function qa(n){return e=>{if(ga(e.value)||ga(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function lg(n){return e=>{if(ga(e.value)||ga(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function II(n){return ga(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function dg(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function SS(n){return ga(n.value)||TS.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function MS(n){return e=>ga(e.value)||!Mh(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function DI(n){return e=>Mh(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function CI(n){if(!n)return Ah;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ga(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return SI(e)}static composeAsync(e){return s_(e)}}function Ah(n){return null}function bI(n){return null!=n}function Gr(n){return(0,h.QGY)(n)?(0,cr.D)(n):n}function r_(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function TI(n,e){return e.map(t=>t(n))}function i_(n){return n.map(e=>function AS(n){return!n.validate}(e)?e:t=>e.validate(t))}function SI(n){if(!n)return null;const e=n.filter(bI);return 0==e.length?null:function(t){return r_(TI(t,e))}}function hg(n){return null!=n?SI(i_(n)):null}function s_(n){if(!n)return null;const e=n.filter(bI);return 0==e.length?null:function(t){return function bS(...n){const e=(0,Os.jO)(n),{args:t,keys:r}=Fa(n),s=new ns.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,D=l;for(let b=0;b<l;b++){let N=!1;(0,ks.Xf)(t[b]).subscribe((0,Vr.x)(u,$=>{N||(N=!0,D--),g[b]=$},()=>_--,void 0,()=>{(!_||!N)&&(D||u.next(r?Nu(r,g):g),u.complete())}))}});return e?s.pipe(op(e)):s}(TI(t,e).map(Gr)).pipe((0,yt.U)(r_))}}function Ka(n){return null!=n?s_(i_(n)):null}function MI(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function AI(n){return n._rawValidators}function o_(n){return n._rawAsyncValidators}function a_(n){return n?Array.isArray(n)?n:[n]:[]}function xh(n,e){return Array.isArray(n)?n.includes(e):n===e}function xS(n,e){const t=a_(e);return a_(n).forEach(s=>{xh(t,s)||t.push(s)}),t}function u_(n,e){return a_(e).filter(t=>!xh(n,t))}class fg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ka(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _r extends fg{get formDirective(){return null}get path(){return null}}class Za extends fg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class xI{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Bs=(()=>{class n extends xI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Za,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),c_=(()=>{class n extends xI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_r,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const yl="VALID",yg="INVALID",vl="PENDING",Hu="DISABLED";function Rh(n){return(Ph(n)?n.validators:n)||null}function vg(n,e){return(Ph(e)?e.asyncValidators:n)||null}function Ph(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function d_(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function h_(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new h.vHH(1002,"")})}class Oh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yl}get invalid(){return this.status===yg}get pending(){return this.status==vl}get disabled(){return this.status===Hu}get enabled(){return this.status!==Hu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(xS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(u_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(u_(e,this._rawAsyncValidators))}hasValidator(e){return xh(this._rawValidators,e)}hasAsyncValidator(e){return xh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yl,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yl||this.status===vl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hu:yl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vl,this._hasOwnPendingAsyncValidator=!0;const t=Gr(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Hu:this.errors?yg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vl)?vl:this._anyControlsHaveStatus(yg)?yg:yl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ph(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function PI(n){return Array.isArray(n)?hg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function OI(n){return Array.isArray(n)?Ka(n):n||null}(this._rawAsyncValidators)}}class _l extends Oh{constructor(e,t,r){super(Rh(t),vg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){h_(this,0,e),Object.keys(e).forEach(r=>{d_(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class kI extends _l{}const El=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>_g}),_g="always";function kh(n,e,t=_g){f_(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function VS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&FI(n,e)})}(n,e),function BS(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function US(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&FI(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function LS(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function wg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Dg(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ig(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function f_(n,e){const t=AI(n);null!==e.validator?n.setValidators(MI(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=o_(n);null!==e.asyncValidator?n.setAsyncValidators(MI(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();Ig(e._rawValidators,s),Ig(e._rawAsyncValidators,s)}function Dg(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=AI(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=o_(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Ig(e._rawValidators,r),Ig(e._rawAsyncValidators,r),t}function FI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function GS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Sg(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Mg=class extends Oh{constructor(e=null,t,r){super(Rh(t),vg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ph(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Sg(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){GS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){GS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Sg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let KS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),m_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const v_=new h.OlP("NgModelWithFormControlWarning"),JS={provide:_r,useExisting:(0,h.Gpc)(()=>xg)};let xg=(()=>{class n extends _r{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Dg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return kh(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){wg(t.control||null,t,!1),function jI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function p_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(wg(r||null,t),(n=>n instanceof Mg)(s)&&(kh(s,t,this.callSetDisabledState),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function LI(n,e){f_(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function VI(n,e){return Dg(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){f_(this.form,this),this._oldForm&&Dg(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Tr,10),h.Y36(Wa,10),h.Y36(El,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([JS]),h.qOj,h.TTD]}),n})();const Uh={provide:Za,useExisting:(0,h.Gpc)(()=>zu)};let zu=(()=>{class n extends Za{set isDisabled(t){}constructor(t,r,s,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function Tg(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Sh?t=u:function BI(n){return Object.getPrototypeOf(n.constructor)===pa}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function bg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Eg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(_r,13),h.Y36(Tr,10),h.Y36(Wa,10),h.Y36(ao,10),h.Y36(v_,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Uh]),h.qOj,h.TTD]}),n})(),cD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[m_]}),n})();class lD extends Oh{constructor(e,t,r){super(Rh(t),vg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){h_(this,0,e),e.forEach((r,s)=>{d_(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function kg(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let uM=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return kg(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new _l(s,u)}record(t,r=null){const s=this._reduceControls(t);return new kI(s,r)}control(t,r,s){let u={};return this.useNonNullable?(kg(r)?u=r:(u.validators=r,u.asyncValidators=s),new Mg(t,{...u,nonNullable:!0})):new Mg(t,r,s)}array(t,r,s){const u=t.map(l=>this._createControl(l));return new lD(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof Mg||t instanceof Oh?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),dM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:v_,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:El,useValue:t.callSetDisabledState??_g}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[cD]}),n})(),w_=(()=>{class n{constructor(t,r){this.formBuilder=t,this.itemService=r,this.changes=new h.vpe,this.form=this.formBuilder.group({name:[null,n_.required]})}addNewItem(t){this.updateFormValidity(this.form),this.form.valid?this.itemService.itemsControllerAddItem({body:this.form.value}).subscribe(()=>{this.form.reset(),this.changes.emit()}):t.target.blur()}updateFormValidity(t){Object.values(t.controls).forEach(r=>{this.updateFormControlValidity(r)})}updateFormControlValidity(t){t.markAsTouched(),t.markAsDirty(),t.updateValueAndValidity()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(uM),h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-add-item"]],outputs:{changes:"changes"},decls:4,vars:2,consts:[[3,"formGroup"],["formControlName","name","id","name","placeholder","Item",1,"input-item"],[3,"disabled","click"]],template:function(t,r){1&t&&(h.TgZ(0,"form",0),h._UZ(1,"input",1),h.TgZ(2,"button",2),h.NdJ("click",function(u){return r.addNewItem(u)}),h._uU(3,"Add"),h.qZA()()),2&t&&(h.Q6J("formGroup",r.form),h.xp6(2),h.Q6J("disabled",r.form.invalid))},dependencies:[KS,Sh,Bs,c_,xg,zu],styles:[".input-item[_ngcontent-%COMP%]{margin-right:5px}"]}),n})();function hM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"app-pair",4),h.NdJ("pressed",function(){const u=h.CHM(t).index,l=h.oxw(2);return h.KtG(l.itemPressed(u))}),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("pair",t)}}function dD(n,e){if(1&n&&(h.TgZ(0,"div")(1,"ul"),h.YNc(2,hM,2,1,"li",3),h.qZA()()),2&n){const t=h.oxw();h.xp6(2),h.Q6J("ngForOf",t.items)}}function fM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"span",5)(1,"button",6),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.getPairs())}),h._uU(2,"MORE"),h.qZA()()}}function pM(n,e){1&n&&(h.TgZ(0,"h3"),h._uU(1,"Calibrated!"),h.qZA())}let gM=(()=>{class n{constructor(t){this.itemsService=t,this.changes=new h.vpe,this.items=[],this.calibrated=!1,this.changed=!1}ngOnChanges(t){t.lastItem?.currentValue?.id!==t.lastItem?.previousValue?.id&&(console.log(t.lastItem?.currentValue),this.reloadCalibration())}getPairs(){this.getNextBestPair()}itemPressed(t){this.changed=!0,this.changes.emit(),t===this.items.length-1&&this.getNextBestPair()}reloadCalibration(){this.calibrated=!1,this.changed=!1,this.items=[],this.getNextBestPair()}getNextBestPair(){const t=[];t.push(this.lastItem.id),this.items.forEach(r=>t.push(r.item2.id)),this.itemsService.itemsControllerGetBestPair({id:this.lastItem.id,exclude:t}).subscribe(r=>{r?(this.changed=!1,this.items.push(r)):this.calibrated=!0})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-calibrate-item"]],inputs:{lastItem:"lastItem"},outputs:{changes:"changes"},features:[h.TTD],decls:7,vars:4,consts:[[1,"item"],[4,"ngIf"],["style","padding-left: 20px;",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"pair","pressed"],[2,"padding-left","20px"],[3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"h2"),h._uU(1,"Calibrate "),h.TgZ(2,"span",0),h._uU(3),h.qZA()(),h.YNc(4,dD,3,1,"div",1),h.YNc(5,fM,3,0,"span",2),h.YNc(6,pM,2,0,"h3",1)),2&t&&(h.xp6(3),h.Oqu(r.lastItem.name),h.xp6(1),h.Q6J("ngIf",!r.calibrated||!r.changed),h.xp6(1),h.Q6J("ngIf",!r.calibrated),h.xp6(1),h.Q6J("ngIf",r.calibrated&&r.changed))},dependencies:[Ki,Zi,Xv],styles:["h2[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{color:#8d697a}h3[_ngcontent-%COMP%]{color:#7faf54}"]}),n})();var mM=F(6451),Fg=F(5363),yM=F(6063);class vM extends no.x{constructor(e=1/0,t=1/0,r=yM.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var _M=F(3099);function I_(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,_M.B)({connector:()=>new vM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function D_(n,e){return(0,ea.m)(e)?Ur(()=>n,e):Ur(()=>n)}var C_=F(9468),uo=F(2011);F(9260);const hD=new h.OlP("angularfire2.auth.use-emulator"),fD=new h.OlP("angularfire2.auth.settings"),Lg=new h.OlP("angularfire2.auth.tenant-id"),Vg=new h.OlP("angularfire2.auth.langugage-code"),b_=new h.OlP("angularfire2.auth.use-device-language"),Ug=new h.OlP("angularfire.auth.persistence"),pD=(n,e,t,r,s,u,l,g)=>(0,uo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),l)for(const[D,b]of Object.entries(l))_.settings[D]=b;return g&&_.setPersistence(g),_},[t,r,s,u,l,g]);let T_=(()=>{class n{constructor(t,r,s,u,l,g,_,D,b,N,$,Q){const me=new no.x,He=Tt(void 0).pipe((0,Fg.Q)(l.outsideAngular),Ur(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,yt.U)(()=>(0,uo.on)(t,u,r)),(0,yt.U)(We=>pD(We,u,g,D,b,N,_,$)),I_({bufferSize:1,refCount:!1}));if(Ns(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Tt(null);else{He.pipe(Us()).subscribe();const nt=He.pipe(Ur($t=>$t.getRedirectResult().then(Rt=>Rt,()=>null)),hn.iC,I_({bufferSize:1,refCount:!1})),ht=He.pipe(Ur($t=>new ns.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>$t.onAuthStateChanged(gn=>Rt.next(gn),gn=>Rt.error(gn),()=>Rt.complete()))})))),St=He.pipe(Ur($t=>new ns.y(Rt=>({unsubscribe:u.runOutsideAngular(()=>$t.onIdTokenChanged(gn=>Rt.next(gn),gn=>Rt.error(gn),()=>Rt.complete()))}))));this.authState=nt.pipe(D_(ht),(0,C_.R)(l.outsideAngular),(0,Fg.Q)(l.insideAngular)),this.user=nt.pipe(D_(St),(0,C_.R)(l.outsideAngular),(0,Fg.Q)(l.insideAngular)),this.idToken=this.user.pipe(Ur($t=>$t?(0,cr.D)($t.getIdToken()):Tt(null))),this.idTokenResult=this.user.pipe(Ur($t=>$t?(0,cr.D)($t.getIdTokenResult()):Tt(null))),this.credential=(0,mM.T)(nt,me,this.authState.pipe(Qn($t=>!$t))).pipe((0,yt.U)($t=>$t?.user?$t:null),(0,C_.R)(l.outsideAngular),(0,Fg.Q)(l.insideAngular))}return(0,uo.pX)(this,He,u,{spy:{apply:(We,nt,ht)=>{(We.startsWith("signIn")||We.startsWith("createUser"))&&ht.then(St=>me.next(St))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uo.Dh),h.LFG(uo.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(hD,8),h.LFG(fD,8),h.LFG(Lg,8),h.LFG(Vg,8),h.LFG(b_,8),h.LFG(Ug,8),h.LFG(wh,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var IM=F(4986);function $h(){return(0,Hr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Vr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function Gu(n,e=xu.y){return n=n??mD,(0,Hr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Vr.x)(r,l=>{const g=e(l);(u||!n(s,g))&&(u=!1,s=g,r.next(l))}))})}function mD(n,e){return n===e}F(9568);var ft,HN=F(3942),S_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ds={},Bg=Bg||{},Yt=S_||self;function jg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var $g="closure_uid_"+(1e9*Math.random()>>>0),yD=0;function vD(n,e,t){return n.call.apply(n.bind,arguments)}function _D(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Ti(n,e,t){return(Ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vD:_D).apply(null,arguments)}function Hg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ui(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[s].apply(r,l)}}function Qa(){this.s=this.s,this.o=this.o}Qa.prototype.s=!1,Qa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function M_(n){Object.prototype.hasOwnProperty.call(n,$g)&&n[$g]||(n[$g]=++yD)}(this)},Qa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const DM=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function zg(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function wD(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(jg(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Si.prototype.h=function(){this.defaultPrevented=!0};var zN=function(){if(!Yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Yt.addEventListener("test",()=>{},e),Yt.removeEventListener("test",()=>{},e)}catch{}return n}();function Hh(n){return/^[\s\xa0]*$/.test(n)}function Gg(){var n=Yt.navigator;return n&&(n=n.userAgent)?n:""}function jo(n){return-1!=Gg().indexOf(n)}function A_(n){return A_[" "](n),n}A_[" "]=function(){};var Wu,n,bM=jo("Opera"),Tl=jo("Trident")||jo("MSIE"),ID=jo("Edge"),x_=ID||Tl,DD=jo("Gecko")&&!(-1!=Gg().toLowerCase().indexOf("webkit")&&!jo("Edge"))&&!(jo("Trident")||jo("MSIE"))&&!jo("Edge"),TM=-1!=Gg().toLowerCase().indexOf("webkit")&&!jo("Edge");function CD(){var n=Yt.document;return n?n.documentMode:void 0}e:{var Wg="",qg=(n=Gg(),DD?/rv:([^\);]+)(\)|;)/.exec(n):ID?/Edge\/([\d\.]+)/.exec(n):Tl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):TM?/WebKit\/(\S+)/.exec(n):bM?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(qg&&(Wg=qg?qg[1]:""),Tl){var Kg=CD();if(null!=Kg&&Kg>parseFloat(Wg)){Wu=String(Kg);break e}}Wu=Wg}var SM=Yt.document&&Tl&&(CD()||parseInt(Wu,10))||void 0;function zh(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(DD){e:{try{A_(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:GN[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&zh.$.h.call(this)}}ui(zh,Si);var GN={2:"touch",3:"pen",4:"mouse"};zh.prototype.h=function(){zh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Gh="closure_listenable_"+(1e6*Math.random()|0),MM=0;function AM(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++MM,this.fa=this.ia=!1}function Yg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function R_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function bD(n){const e={};for(const t in n)e[t]=n[t];return e}const Qg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function co(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Qg.length;u++)t=Qg[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Jg(n){this.src=n,this.g={},this.h=0}function qh(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=DM(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Yg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function qu(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Jg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=qu(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new AM(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var P_="closure_lm_"+(1e6*Math.random()|0),O_={};function TD(n,e,t,r,s){if(r&&r.once)return MD(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)TD(n,e[u],t,r,s);return null}return t=F_(t),n&&n[Gh]?n.O(e,t,bl(r)?!!r.capture:!!r,s):Kh(n,e,t,!1,r,s)}function Kh(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=bl(s)?!!s.capture:!!s,g=Xg(n);if(g||(n[P_]=g=new Jg(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function SD(){const e=xM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zN||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(xD(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function MD(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)MD(n,e[u],t,r,s);return null}return t=F_(t),n&&n[Gh]?n.P(e,t,bl(r)?!!r.capture:!!r,s):Kh(n,e,t,!0,r,s)}function AD(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)AD(n,e[u],t,r,s);else r=bl(r)?!!r.capture:!!r,t=F_(t),n&&n[Gh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=qu(u=n.g[e],t,r,s))&&(Yg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Xg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=qu(e,t,r,s)),(t=-1<n?e[n]:null)&&Zh(t))}function Zh(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Gh])qh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(xD(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Xg(e))?(qh(t,n),0==t.h&&(t.src=null,e[P_]=null)):Yg(n)}}}function xD(n){return n in O_?O_[n]:O_[n]="on"+n}function xM(n,e){if(n.fa)n=!0;else{e=new zh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Zh(n),n=t.call(r,e)}return n}function Xg(n){return(n=n[P_])instanceof Jg?n:null}var k_="__closure_events_fn_"+(1e9*Math.random()>>>0);function F_(n){return"function"==typeof n?n:(n[k_]||(n[k_]=function(e){return n.handleEvent(e)}),n[k_])}function Jr(){Qa.call(this),this.i=new Jg(this),this.S=this,this.J=null}function Wr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var s=e;co(e=new Si(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=em(l,r,!0,e)&&s}if(s=em(l=e.g=n,r,!0,e)&&s,s=em(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=em(l=e.g=t[u],r,!1,e)&&s}function em(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&qh(n.i,l),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}ui(Jr,Qa),Jr.prototype[Gh]=!0,Jr.prototype.removeEventListener=function(n,e,t,r){AD(this,n,e,t,r)},Jr.prototype.N=function(){if(Jr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Yg(t[r]);delete n.g[e],n.h--}}this.J=null},Jr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Jr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var L_=Yt.JSON.stringify;function RD(){var n=Jh;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var U_=new class ND{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new NM,n=>n.reset());class NM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function PD(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function OD(n){Yt.setTimeout(()=>{throw n},0)}let Yh,Qh=!1,Jh=new class V_{constructor(){this.h=this.g=null}add(e,t){const r=U_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},tm=()=>{const n=Yt.Promise.resolve(void 0);Yh=()=>{n.then(kD)}};var kD=()=>{for(var n;n=RD();){try{n.h.call(n.g)}catch(t){OD(t)}var e=U_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Qh=!1};function Sl(n,e){Jr.call(this),this.h=n||1,this.g=e||Yt,this.j=Ti(this.qb,this),this.l=Date.now()}function Xh(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function B_(n,e,t){if("function"==typeof n)t&&(n=Ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:Yt.setTimeout(n,e||0)}function FD(n){n.g=B_(()=>{n.g=null,n.i&&(n.i=!1,FD(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ui(Sl,Jr),(ft=Sl.prototype).ga=!1,ft.T=null,ft.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Wr(this,"tick"),this.ga&&(Xh(this),this.start()))}},ft.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.N=function(){Sl.$.N.call(this),Xh(this),delete this.g};class RM extends Qa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:FD(this)}N(){super.N(),this.g&&(Yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ef(n){Qa.call(this),this.h=n,this.g={}}ui(ef,Qa);var j_=[];function nm(n,e,t,r){Array.isArray(t)||(t&&(j_[0]=t.toString()),t=j_);for(var s=0;s<t.length;s++){var u=TD(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function $_(n){R_(n.g,function(e,t){this.g.hasOwnProperty(t)&&Zh(e)},n),n.g={}}function rm(){this.g=!0}function Ml(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function BD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return L_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}ef.prototype.N=function(){ef.$.N.call(this),$_(this)},ef.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},rm.prototype.Ea=function(){this.g=!1},rm.prototype.info=function(){};var Ku={},H_=null;function im(){return H_=H_||new Jr}function Mi(n){Si.call(this,Ku.Ta,n)}function $o(n){const e=im();Wr(e,new Mi(e))}function jD(n,e){Si.call(this,Ku.STAT_EVENT,n),this.stat=e}function ji(n){const e=im();Wr(e,new jD(e,n))}function PM(n,e){Si.call(this,Ku.Ua,n),this.size=e}function sm(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Yt.setTimeout(function(){n()},e)}Ku.Ta="serverreachability",ui(Mi,Si),Ku.STAT_EVENT="statevent",ui(jD,Si),Ku.Ua="timingevent",ui(PM,Si);var tf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},om={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Zu(){}function am(){}Zu.prototype.h=null;var G_,nf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function um(){Si.call(this,"d")}function z_(){Si.call(this,"c")}function cm(){}function Yu(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new ef(this),this.P=OM,this.V=new Sl(n=x_?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new W_}function W_(){this.i=null,this.g="",this.h=!1}ui(um,Si),ui(z_,Si),ui(cm,Zu),cm.prototype.g=function(){return new XMLHttpRequest},cm.prototype.i=function(){return{}},G_=new cm;var OM=45e3,Al={},xl={};function HD(n,e,t){n.L=1,n.v=hm(Ho(e)),n.s=t,n.S=!0,q_(n,null)}function q_(n,e){n.G=Date.now(),rf(n),n.A=Ho(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),jM(t.i,"t",r),n.C=0,t=n.l.J,n.h=new W_,n.g=aC(n.l,t?e:null,!n.s),0<n.O&&(n.M=new RM(Ti(n.Pa,n,n.g),n.O)),nm(n.U,n.g,"readystatechange",n.nb),e=n.I?bD(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),$o(),function LD(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var b=D[0];D=D[1];var N=b.split("_");l=2<=N.length&&"type"==N[1]?l+(b+"=")+D+"&":l+(b+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function zD(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function K_(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=Nl(n,t),s==xl){4==e&&(n.o=4,ji(14),r=!1),Ml(n.j,n.m,null,"[Incomplete Response]");break}if(s==Al){n.o=4,ji(15),Ml(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ml(n.j,n.m,s,null),GD(n,s)}zD(n)&&s!=xl&&s!=Al&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),bm(e),e.M=!0,ji(11))):(Ml(n.j,n.m,t,"[Invalid Chunked Response]"),Qu(n),lm(n))}function Nl(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xl:(t=Number(e.substring(t,r)),isNaN(t)?Al:(r+=1)+t>e.length?xl:(e=e.slice(r,r+t),n.C=r+t,e))}function rf(n){n.Y=Date.now()+n.P,Z_(n,n.P)}function Z_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=sm(Ti(n.lb,n),e)}function Rl(n){n.B&&(Yt.clearTimeout(n.B),n.B=null)}function lm(n){0==n.l.H||n.J||sC(n.l,n)}function Qu(n){Rl(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Xh(n.V),$_(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function GD(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||X_(t.i,n)))if(!n.K&&X_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Tm(t),uf(t)}rC(t),ji(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=sm(Ti(t.ib,t),6e3));if(1>=J_(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Xa(t,11)}else if((n.K||t.g==n)&&Tm(t),!Hh(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const b=D[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const N=D[4];null!=N&&(t.Ga=N,t.l.info("SVER="+t.Ga));const $=D[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const me=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(me){var u=r.i;u.g||-1==me.indexOf("spdy")&&-1==me.indexOf("quic")&&-1==me.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(kl(u,u.h),u.h=null))}if(r.F){const He=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;He&&(r.Da=He,lr(r.I,r.F,He))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=u0(r,r.J?r.pa:null,r.Y),l.K){JD(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(Rl(g),rf(g)),r.g=l}else nC(r);0<t.j.length&&Ll(t)}else"stop"!=D[0]&&"close"!=D[0]||Xa(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Xa(t,7):o0(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}$o()}catch{}}function WD(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function FM(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(jg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function kM(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=Yu.prototype).setTimeout=function(n){this.P=n},ft.nb=function(n){n=n.target;const e=this.M;e&&3==lo(n)?e.l():this.Pa(n)},ft.Pa=function(n){try{if(n==this.g)e:{const b=lo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||x_||this.g&&(this.h.h||this.g.ja()||n0(this.g)))){this.J||4!=b||7==e||$o(),Rl(this);var t=this.g.da();this.ca=t;t:if(zD(this)){var r=n0(this.g);n="";var s=r.length,u=4==lo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Qu(this),lm(this);var l="";break t}this.h.i=new Yt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function VD(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hh(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,ji(12),Qu(this),lm(this);break e}Ml(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,GD(this,t)}this.S?(K_(this,b,l),x_&&this.i&&3==b&&(nm(this.U,this.V,"tick",this.mb),this.V.start())):(Ml(this.j,this.m,l,null),GD(this,l)),4==b&&Qu(this),this.i&&!this.J&&(4==b?sC(this.l,this):(this.i=!1,rf(this)))}else(function KM(n){const e={};n=(n.g&&2<=lo(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Hh(n[r]))continue;var t=PD(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function Wh(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ji(12)):(this.o=0,ji(13)),Qu(this),lm(this)}}}catch{}},ft.mb=function(){if(this.g){var n=lo(this.g),e=this.g.ja();this.C<e.length&&(Rl(this),K_(this,n,e),this.i&&4!=n&&rf(this))}},ft.cancel=function(){this.J=!0,Qu(this)},ft.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function UD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&($o(),ji(17)),Qu(this),this.o=2,lm(this)):Z_(this,this.Y-n)};var Y_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ju(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ju){this.h=n.h,sf(this,n.j),this.s=n.s,this.g=n.g,dm(this,n.m),this.l=n.l;var e=n.i,t=new fm;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),KD(this,t),this.o=n.o}else n&&(e=String(n).match(Y_))?(this.h=!1,sf(this,e[1]||"",!0),this.s=Pl(e[2]||""),this.g=Pl(e[3]||"",!0),dm(this,e[4]),this.l=Pl(e[5]||"",!0),KD(this,e[6]||"",!0),this.o=Pl(e[7]||"")):(this.h=!1,this.i=new fm(null,this.h))}function Ho(n){return new Ju(n)}function sf(n,e,t){n.j=t?Pl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function KD(n,e,t){e instanceof fm?(n.i=e,function qN(n,e){e&&!n.j&&(Xu(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(UM(this,r),jM(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ol(e,WN)),n.i=new fm(e,n.h))}function lr(n,e,t){n.i.set(e,t)}function hm(n){return lr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Pl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ol(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,ZD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function ZD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ju.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ol(e,Q_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ol(e,Q_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ol(t,"/"==t.charAt(0)?VM:LM,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ol(t,YD)),n.join("")};var Q_=/[#\/\?@]/g,LM=/[#\?:]/g,VM=/[#\?]/g,WN=/[#\?@]/g,YD=/#/g;function fm(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xu(n){n.g||(n.g=new Map,n.h=0,n.i&&function qD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function UM(n,e){Xu(n),e=af(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function BM(n,e){return Xu(n),e=af(n,e),n.g.has(e)}function jM(n,e,t){UM(n,e),0<t.length&&(n.i=null,n.g.set(af(n,e),zg(t)),n.h+=t.length)}function af(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function $M(n){this.l=n||QD,n=Yt.PerformanceNavigationTiming?0<(n=Yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Yt.g&&Yt.g.Ka&&Yt.g.Ka()&&Yt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=fm.prototype).add=function(n,e){Xu(this),this.i=null,n=af(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){Xu(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},ft.ta=function(){Xu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},ft.Z=function(n){Xu(this);let e=[];if("string"==typeof n)BM(this,n)&&(e=e.concat(this.g.get(af(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return Xu(this),this.i=null,BM(this,n=af(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var QD=10;function pm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function J_(n){return n.h?1:n.g?n.g.size:0}function X_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kl(n,e){n.g?n.g.add(e):n.h=e}function JD(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HM(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return zg(n.i)}$M.prototype.cancel=function(){if(this.i=HM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ZN=class{stringify(n){return Yt.JSON.stringify(n,void 0)}parse(n){return Yt.JSON.parse(n,void 0)}};function YN(){this.g=new ZN}function zM(n,e,t){const r=t||"";try{WD(n,function(s,u){let l=s;bl(s)&&(l=L_(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function gm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function mm(n){this.l=n.fc||null,this.j=n.ob||!1}function ym(n,e){Jr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=vm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ui(mm,Zu),mm.prototype.g=function(){return new ym(this.l,this.j)},mm.prototype.i=function(n){return function(){return n}}({}),ui(ym,Jr);var vm=0;function e0(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function _m(n){n.readyState=4,n.l=null,n.j=null,n.A=null,$i(n)}function $i(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=ym.prototype).open=function(n,e){if(this.readyState!=vm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,$i(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_m(this)),this.readyState=vm},ft.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Yt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;e0(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ft.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?_m(this):$i(this),3==this.readyState&&e0(this)}},ft.Za=function(n){this.g&&(this.response=this.responseText=n,_m(this))},ft.Ya=function(n){this.g&&(this.response=n,_m(this))},ft.ka=function(){this.g&&_m(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(ym.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var WM=Yt.JSON.parse;function Er(n){Jr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=t0,this.L=this.M=!1}ui(Er,Jr);var t0="",qM=/^https?$/i,QN=["POST","PUT"];function XD(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Em(n),wm(n)}function Em(n){n.F||(n.F=!0,Wr(n,"complete"),Wr(n,"error"))}function eC(n){if(n.h&&typeof Bg<"u"&&(!n.C[1]||4!=lo(n)||2!=n.da()))if(n.v&&4==lo(n))B_(n.La,0,n);else if(Wr(n,"readystatechange"),4==lo(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(Y_)[1]||null;!s&&Yt.self&&Yt.self.location&&(s=Yt.self.location.protocol.slice(0,-1)),r=!qM.test(s?s.toLowerCase():"")}t=r}if(t)Wr(n,"complete"),Wr(n,"success");else{n.m=6;try{var u=2<lo(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",Em(n)}}finally{wm(n)}}}function wm(n,e){if(n.g){Im(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Wr(n,"ready");try{t.onreadystatechange=r}catch{}}}function Im(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Yt.clearTimeout(n.A),n.A=null)}function lo(n){return n.g?n.g.readyState:0}function n0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case t0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function r0(n){let e="";return R_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Dm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=r0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):lr(n,e,t))}function Fl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function s0(n){this.Ga=0,this.j=[],this.l=new rm,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Fl("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Fl("baseRetryDelayMs",5e3,n),this.hb=Fl("retryDelaySeedMs",1e4,n),this.eb=Fl("forwardChannelMaxRetries",2,n),this.xa=Fl("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new $M(n&&n.concurrentRequestLimit),this.Ja=new YN,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function o0(n){if(tC(n),3==n.H){var e=n.W++,t=Ho(n.I);if(lr(t,"SID",n.K),lr(t,"RID",e),lr(t,"TYPE","terminate"),ec(n,t),(e=new Yu(n,n.l,e)).L=2,e.v=hm(Ho(t)),t=!1,Yt.navigator&&Yt.navigator.sendBeacon)try{t=Yt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=aC(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rf(e)}ZM(n)}function uf(n){n.g&&(bm(n),n.g.cancel(),n.g=null)}function tC(n){uf(n),n.u&&(Yt.clearTimeout(n.u),n.u=null),Tm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Yt.clearTimeout(n.m),n.m=null)}function Ll(n){if(!pm(n.i)&&!n.m){n.m=!0;var e=n.Na;Yh||tm(),Qh||(Yh(),Qh=!0),Jh.add(e,n),n.C=0}}function a0(n,e){var t;t=e?e.m:n.W++;const r=Ho(n.I);lr(r,"SID",n.K),lr(r,"RID",t),lr(r,"AID",n.V),ec(n,r),n.o&&n.s&&Dm(r,n.o,n.s),t=new Yu(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Cm(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),kl(n.i,t),HD(t,r,e)}function ec(n,e){n.na&&R_(n.na,function(t,r){lr(e,r,t)}),n.h&&WD({},function(t,r){lr(e,r,t)})}function Cm(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ti(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=s[_].g;const b=s[_].map;if(D-=u,0>D)u=Math.max(0,s[_].g-100),g=!1;else try{zM(b,l,"req"+D+"_")}catch{r&&r(b)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function nC(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Yh||tm(),Qh||(Yh(),Qh=!0),Jh.add(e,n),n.A=0}}function rC(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=sm(Ti(n.Ma,n),oC(n,n.A)),n.A++,0))}function bm(n){null!=n.B&&(Yt.clearTimeout(n.B),n.B=null)}function iC(n){n.g=new Yu(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ho(n.wa);lr(e,"RID","rpc"),lr(e,"SID",n.K),lr(e,"AID",n.V),lr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&lr(e,"TO",n.qa),lr(e,"TYPE","xmlhttp"),ec(n,e),n.o&&n.s&&Dm(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=hm(Ho(e)),t.s=null,t.S=!0,q_(t,n)}function Tm(n){null!=n.v&&(Yt.clearTimeout(n.v),n.v=null)}function sC(n,e){var t=null;if(n.g==e){Tm(n),bm(n),n.g=null;var r=2}else{if(!X_(n.i,e))return;t=e.F,JD(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;Wr(r=im(),new PM(r,t)),Ll(n)}else nC(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function Ja(n,e){return!(J_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=sm(Ti(n.Na,n,e),oC(n,n.C)),n.C++,0)))}(n,e)||2==r&&rC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:Xa(n,5);break;case 4:Xa(n,10);break;case 3:Xa(n,6);break;default:Xa(n,2)}}function oC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Xa(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ti(n.pb,n);t||(t=new Ju("//www.google.com/images/cleardot.gif"),Yt.location&&"http"==Yt.location.protocol||sf(t,"https"),hm(t)),function GM(n,e){const t=new rm;if(Yt.Image){const r=new Image;r.onload=Hg(gm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Hg(gm,t,r,"TestLoadImage: error",!1,e),r.onabort=Hg(gm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hg(gm,t,r,"TestLoadImage: timeout",!1,e),Yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ji(2);n.H=0,n.h&&n.h.za(e),ZM(n),tC(n)}function ZM(n){if(n.H=0,n.ma=[],n.h){const e=HM(n.i);(0!=e.length||0!=n.j.length)&&(wD(n.ma,e),wD(n.ma,n.j),n.i.i.length=0,zg(n.j),n.j.length=0),n.h.ya()}}function u0(n,e,t){var r=t instanceof Ju?Ho(t):new Ju(t);if(""!=r.g)e&&(r.g=e+"."+r.g),dm(r,r.m);else{var s=Yt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ju(null);r&&sf(u,r),e&&(u.g=e),s&&dm(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&lr(r,t,e),lr(r,"VER",n.ra),ec(n,r),r}function aC(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Er(t&&n.Ha&&!n.va?new mm({ob:!0}):n.va)).Oa(n.J),e}function c0(){}function l0(){if(Tl&&!(10<=Number(SM)))throw Error("Environmental error: no available transport.")}function Hi(n,e){Jr.call(this),this.g=new s0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Hh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vl(this)}function d0(n){um.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function h0(){z_.call(this),this.status=1}function Vl(n){this.g=n}function js(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function eu(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function Rn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(ft=Er.prototype).Oa=function(n){this.M=n},ft.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():G_.g(),this.C=function $D(n){return n.h||(n.h=n.i())}(this.u?this.u:G_),this.g.onreadystatechange=Ti(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void XD(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Yt.FormData&&n instanceof Yt.FormData,!(0<=DM(QN,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Im(this),0<this.B&&((this.L=function Ai(n){return Tl&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ti(this.ua,this)):this.A=B_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){XD(this,u)}},ft.ua=function(){typeof Bg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Wr(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Wr(this,"complete"),Wr(this,"abort"),wm(this))},ft.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),wm(this,!0)),Er.$.N.call(this)},ft.La=function(){this.s||(this.G||this.v||this.l?eC(this):this.kb())},ft.kb=function(){eC(this)},ft.isActive=function(){return!!this.g},ft.da=function(){try{return 2<lo(this)?this.g.status:-1}catch{return-1}},ft.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),WM(e)}},ft.Ia=function(){return this.m},ft.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=s0.prototype).ra=8,ft.H=1,ft.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Yu(this,this.l,n);let u=this.s;if(this.U&&(u?(u=bD(u),co(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Cm(this,s,e),lr(t=Ho(this.I),"RID",n),lr(t,"CVER",22),this.F&&lr(t,"X-HTTP-Session-Id",this.F),ec(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(r0(u)))+"&"+e:this.o&&Dm(t,this.o,u)),kl(this.i,s),this.bb&&lr(t,"TYPE","init"),this.P?(lr(t,"$req",e),lr(t,"SID","null"),s.aa=!0,HD(s,t,null)):HD(s,t,e),this.H=2}}else 3==this.H&&(n?a0(this,n):0==this.j.length||pm(this.i)||a0(this))},ft.Ma=function(){if(this.u=null,iC(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=sm(Ti(this.jb,this),n)}},ft.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ji(10),uf(this),iC(this))},ft.ib=function(){null!=this.v&&(this.v=null,uf(this),rC(this),ji(19))},ft.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ji(2)):(this.l.info("Failed to ping google.com"),ji(1))},ft.isActive=function(){return!!this.h&&this.h.isActive(this)},(ft=c0.prototype).Ba=function(){},ft.Aa=function(){},ft.za=function(){},ft.ya=function(){},ft.isActive=function(){return!0},ft.Va=function(){},l0.prototype.g=function(n,e){return new Hi(n,e)},ui(Hi,Jr),Hi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ji(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=u0(n,null,n.Y),Ll(n)},Hi.prototype.close=function(){o0(this.g)},Hi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=L_(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Ll(e)},Hi.prototype.N=function(){this.g.h=null,delete this.j,o0(this.g),delete this.g,Hi.$.N.call(this)},ui(d0,um),ui(h0,z_),ui(Vl,c0),Vl.prototype.Ba=function(){Wr(this.g,"a")},Vl.prototype.Aa=function(n){Wr(this.g,new d0(n))},Vl.prototype.za=function(n){Wr(this.g,new h0)},Vl.prototype.ya=function(){Wr(this.g,"b")},ui(js,function uC(){this.blockSize=-1}),js.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},js.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)eu(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){eu(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){eu(this,r),s=0;break}}this.h=s,this.i+=e},js.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var cC={};function Sm(n){return-128<=n&&128>n?function CM(n,e){var t=cC;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Rn([0|e],0>e?-1:0)}):new Rn([0|n],0>n?-1:0)}function zo(n){if(isNaN(n)||!isFinite(n))return tc;if(0>n)return xi(zo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=dC;return new Rn(e,0)}var dC=4294967296,tc=Sm(0),f0=Sm(1),hC=Sm(16777216);function tu(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ho(n){return-1==n.h}function xi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Rn(t,~n.h).add(f0)}function cf(n,e){return n.add(xi(e))}function Mm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function lf(n,e){this.g=n,this.h=e}function Am(n,e){if(tu(e))throw Error("division by zero");if(tu(n))return new lf(tc,tc);if(ho(n))return e=Am(xi(n),e),new lf(xi(e.g),xi(e.h));if(ho(e))return e=Am(n,xi(e)),new lf(xi(e.g),e.h);if(30<n.g.length){if(ho(n)||ho(e))throw Error("slowDivide_ only works with positive integers.");for(var t=f0,r=e;0>=r.X(n);)t=YM(t),r=YM(r);var s=df(t,1),u=df(r,1);for(r=df(r,2),t=df(t,2);!tu(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=df(r,1),t=df(t,1)}return e=cf(n,s.R(e)),new lf(s,e)}for(s=tc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=zo(t)).R(e);ho(l)||0<l.X(n);)l=(u=zo(t-=r)).R(e);tu(u)&&(u=f0),s=s.add(u),n=cf(n,l)}return new lf(s,n)}function YM(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Rn(t,n.h)}function df(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Rn(s,n.h)}(ft=Rn.prototype).ea=function(){if(ho(this))return-xi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:dC+r)*e,e*=dC}return n},ft.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(tu(this))return"0";if(ho(this))return"-"+xi(this).toString(n);for(var e=zo(Math.pow(n,6)),t=this,r="";;){var s=Am(t,e).g,u=((0<(t=cf(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(tu(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},ft.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ft.X=function(n){return ho(n=cf(this,n))?-1:tu(n)?0:1},ft.abs=function(){return ho(this)?xi(this):this},ft.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new Rn(t,-2147483648&t[t.length-1]?-1:0)},ft.R=function(n){if(tu(this)||tu(n))return tc;if(ho(this))return ho(n)?xi(this).R(xi(n)):xi(xi(this).R(n));if(ho(n))return xi(this.R(xi(n)));if(0>this.X(hC)&&0>n.X(hC))return zo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=l*_,Mm(t,2*r+2*s),t[2*r+2*s+1]+=u*_,Mm(t,2*r+2*s+1),t[2*r+2*s+1]+=l*g,Mm(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,Mm(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Rn(t,0)},ft.gb=function(n){return Am(this,n).h},ft.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Rn(t,this.h&n.h)},ft.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Rn(t,this.h|n.h)},ft.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Rn(t,this.h^n.h)},l0.prototype.createWebChannel=l0.prototype.g,Hi.prototype.send=Hi.prototype.u,Hi.prototype.open=Hi.prototype.m,Hi.prototype.close=Hi.prototype.close,tf.NO_ERROR=0,tf.TIMEOUT=8,tf.HTTP_ERROR=6,om.COMPLETE="complete",am.EventType=nf,nf.OPEN="a",nf.CLOSE="b",nf.ERROR="c",nf.MESSAGE="d",Jr.prototype.listen=Jr.prototype.O,Er.prototype.listenOnce=Er.prototype.P,Er.prototype.getLastError=Er.prototype.Sa,Er.prototype.getLastErrorCode=Er.prototype.Ia,Er.prototype.getStatus=Er.prototype.da,Er.prototype.getResponseJson=Er.prototype.Wa,Er.prototype.getResponseText=Er.prototype.ja,Er.prototype.send=Er.prototype.ha,Er.prototype.setWithCredentials=Er.prototype.Oa,js.prototype.digest=js.prototype.l,js.prototype.reset=js.prototype.reset,js.prototype.update=js.prototype.j,Rn.prototype.add=Rn.prototype.add,Rn.prototype.multiply=Rn.prototype.R,Rn.prototype.modulo=Rn.prototype.gb,Rn.prototype.compare=Rn.prototype.X,Rn.prototype.toNumber=Rn.prototype.ea,Rn.prototype.toString=Rn.prototype.toString,Rn.prototype.getBits=Rn.prototype.D,Rn.fromNumber=zo,Rn.fromString=function lC(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return xi(lC(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=zo(Math.pow(e,8)),r=tc,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=zo(Math.pow(e,u)),r=r.R(u).add(zo(l))):r=(r=r.R(t)).add(zo(l))}return r};var JN=Ds.createWebChannelTransport=function(){return new l0},XN=Ds.getStatEventTarget=function(){return im()},fC=Ds.ErrorCode=tf,QM=Ds.EventType=om,xm=Ds.Event=Ku,pC=Ds.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},JM=Ds.FetchXmlHttpFactory=mm,hf=Ds.WebChannel=am,nc=Ds.XhrIo=Er,gC=Ds.Md5=js,nu=Ds.Integer=Rn;const Nm="@firebase/firestore";class ci{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");let ru="9.22.2";const Go=new Fo.Yd("@firebase/firestore");function Ul(){return Go.logLevel}function Ke(n,...e){if(Go.logLevel<=Fo.in.DEBUG){const t=e.map(p0);Go.debug(`Firestore (${ru}): ${n}`,...t)}}function qr(n,...e){if(Go.logLevel<=Fo.in.ERROR){const t=e.map(p0);Go.error(`Firestore (${ru}): ${n}`,...t)}}function Cs(n,...e){if(Go.logLevel<=Fo.in.WARN){const t=e.map(p0);Go.warn(`Firestore (${ru}): ${n}`,...t)}}function p0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const e=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: `+n;throw qr(e),new Error(e)}function Mt(n,e){n||_t()}function lt(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends En.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class mC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ci.UNAUTHENTICATED))}shutdown(){}}class g0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tR{constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let l=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xr,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xr)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new mC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new ci(e)}}class vC{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class m0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new vC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ci.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _C{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eA{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.T=t.token,new _C(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class EC{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=nR(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Qt(n,e){return n<e?-1:n>e?1:0}function Bl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function wC(n){return n+"\0"}class mr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ve(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mr.fromMillis(Date.now())}static fromDate(e){return mr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new mr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new mr(0,0))}static max(){return new At(new mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Rm{constructor(e,t,r){void 0===t?t=0:t>e.length&&_t(),void 0===r?r=e.length-t:r>e.length-t&&_t(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Rm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class wn extends Rm{construct(e,t,r){return new wn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new wn(t)}static emptyPath(){return new wn([])}}const y0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends Rm{construct(e,t,r){return new Mr(e,t,r)}static isValidIdentifier(e){return y0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Ve(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new Ve(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ve(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(l=!l,s++):"."!==g||l?(r+=g,s++):(u(),s++)}if(u(),l)throw new Ve(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class at{constructor(e){this.path=e}static fromPath(e){return new at(wn.fromString(e))}static fromName(e){return new at(wn.fromString(e).popFirst(5))}static empty(){return new at(wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return wn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new wn(e.slice()))}}class Pm{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function ff(n){return n.fields.find(e=>2===e.kind)}function rc(n){return n.fields.filter(e=>2!==e.kind)}Pm.UNKNOWN_ID=-1;class pf{constructor(e,t){this.fieldPath=e,this.kind=t}}class jl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jl(0,Ni.min())}}function nA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=At.fromTimestamp(1e9===r?new mr(t+1,0):new mr(t,r));return new Ni(s,at.empty(),e)}function DC(n){return new Ni(n.readTime,n.key,-1)}class Ni{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ni(At.min(),at.empty(),-1)}static max(){return new Ni(At.max(),at.empty(),-1)}}function CC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=at.comparator(n.documentKey,e.documentKey),0!==t?t:Qt(n.largestBatchId,e.largestBatchId))}const bC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ic(n){return v0.apply(this,arguments)}function v0(){return v0=(0,Ee.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==bC)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),v0.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let s=0,u=0,l=!1;e.forEach(g=>{++s,g.next(()=>{++u,l&&u===s&&t()},_=>r(_))}),l=!0,u===s&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(s=>s?ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,s)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(b=>{l[D]=b,++g,g===u&&r(l)},b=>s(b))}})}static doWhile(e,t){return new ue((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class _0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Xr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new gf(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=TC(r.target.error);this.v.reject(new gf(e,s))}}static open(e,t,r,s){try{return new _0(t,e.transaction(s,r))}catch(u){throw new gf(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iR(t)}}class Wo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Wo.S((0,En.z$)())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),$l(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,En.hl)())return!1;if(Wo.C())return!0;const e=(0,En.z$)(),t=Wo.S(e),r=0<t&&t<10,s=Wo.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;s("VersionError"===g.name?new Ve(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Ve(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new gf(e,g))},u.onupgradeneeded=l=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=_0.open(u.db,e,l?"readonly":"readwrite",r),D=s(_).next(b=>(_.P(),b)).catch(b=>(_.abort(b),ue.reject(b))).toPromise();return D.catch(()=>{}),yield _.R,D}catch(_){const D=_,b="FirebaseError"!==D.name&&g<3;if(Ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",b),u.close(),!b)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rR{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return $l(this.L.delete())}}class gf extends Ve{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function sc(n){return"IndexedDbTransactionError"===n.name}class iR{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$l(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),$l(this.store.add(e))}get(e){return $l(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),$l(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),$l(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ue((u,l)=>{s.onerror=g=>{l(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ue((r,s)=>{t.onerror=u=>{const l=TC(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new ue((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void s();const _=new rR(g),D=t(g.primaryKey,g.value,_);if(D instanceof ue){const b=D.catch(N=>(_.done(),ue.reject(N)));r.push(b)}_.isDone?s():null===_.K?g.continue():g.continue(_.K)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $l(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=TC(r.target.error);t(s)}})}let iA=!1;function TC(n){const e=Wo.S((0,En.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iA||(iA=!0,setTimeout(()=>{throw r},0)),r}}return n}class sA{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){sc(r)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ic(r)}yield t.et(6e4)}))}}class sR{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ue.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ke("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(g=>{s-=g,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(g=>(Ke("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=DC(u);CC(l,r)>0&&(r=l)}),new Ni(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let i=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function o(n){return null==n}function a(n){return 0===n&&1/n==-1/0}function c(n){return"number"==typeof n&&Number.isInteger(n)&&!a(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function d(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=y(e)),e=f(n.get(t),e);return y(e)}function f(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function y(n){return n+"\x01\x01"}function E(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),wn.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&_t(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:_t()}u=l+2}return new wn(r)}const I=["userId","batchId"];function C(n,e){return[n,d(e)]}function M(n,e,t){return[n,d(e),t]}const L={},Z=["prefixPath","collectionGroup","readTime","documentId"],te=["prefixPath","collectionGroup","documentId"],Me=["collectionGroup","readTime","prefixPath","documentId"],qe=["canonicalId","targetId"],ot=["targetId","path"],xt=["path","targetId"],Ue=["collectionId","parent"],Vt=["indexId","uid"],fn=["uid","sequenceNumber"],jn=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fo=["indexId","uid","orderedDocumentKey"],SC=["userId","collectionPath","documentId"],Vk=["userId","collectionPath","largestBatchId"],Uk=["userId","collectionGroup","largestBatchId"],oR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Bk=[...oR,"documentOverlays"],aR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uR=aR,jk=[...uR,"indexConfiguration","indexState","indexEntries"];class oA extends rA{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ri(n,e){const t=lt(n);return Wo.M(t.ht,e)}function cR(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Hl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wr{constructor(e,t){this.comparator=e,this.root=t||zi.EMPTY}insert(e,t){return new wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zi.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new MC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new MC(this.root,e,this.comparator,!1)}getReverseIterator(){return new MC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new MC(this.root,e,this.comparator,!0)}}class MC{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??zi.RED,this.left=s??zi.EMPTY,this.right=u??zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new zi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return zi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}zi.EMPTY=null,zi.RED=!0,zi.BLACK=!1,zi.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,e,t,r,s){return this}insert(n,e,t){return new zi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ar{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dR(this.data.getIterator())}getIteratorFrom(e){return new dR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ar)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ar(this.comparator);return t.data=e,t}}class dR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Om(n){return n.hasNext()?n.getNext():void 0}class $s{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new $s([])}unionWith(e){let t=new Ar(Mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hR("Invalid base64 string: "+s):s}}(e);return new _i(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new _i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_i.EMPTY_BYTE_STRING=new _i("");const Hk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zl(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=Hk.exec(n);if(Mt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kr(n.seconds),nanos:Kr(n.nanos)}}function Kr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function oc(n){return"string"==typeof n?_i.fromBase64String(n):_i.fromUint8Array(n)}function AC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xC(n){const e=n.mapValue.fields.__previous_value__;return AC(e)?xC(e):e}function E0(n){const e=zl(n.mapValue.fields.__local_write_time__.timestampValue);return new mr(e.seconds,e.nanos)}class zk{constructor(e,t,r,s,u,l,g,_,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=D}}class Gl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Gl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Gl&&e.projectId===this.projectId&&e.database===this.database}}const Wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},NC={nullValue:"NULL_VALUE"};function ql(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?AC(n)?4:mR(n)?9007199254740991:10:_t()}function iu(n,e){if(n===e)return!0;const t=ql(n);if(t!==ql(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return E0(n).isEqual(E0(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=zl(r.timestampValue),l=zl(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,oc(n.bytesValue).isEqual(oc(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Kr(r.geoPointValue.latitude)===Kr(s.geoPointValue.latitude)&&Kr(r.geoPointValue.longitude)===Kr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Kr(r.integerValue)===Kr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Kr(r.doubleValue),l=Kr(s.doubleValue);return u===l?a(u)===a(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Bl(n.arrayValue.values||[],e.arrayValue.values||[],iu);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(cR(u)!==cR(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!iu(u[g],l[g])))return!1;return!0}(n,e);default:return _t()}var s}function w0(n,e){return void 0!==(n.values||[]).find(t=>iu(t,e))}function Kl(n,e){if(n===e)return 0;const t=ql(n),r=ql(e);if(t!==r)return Qt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Kr(s.integerValue||s.doubleValue),g=Kr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return fR(n.timestampValue,e.timestampValue);case 4:return fR(E0(n),E0(e));case 5:return Qt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=oc(s),g=oc(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const D=Qt(l[_],g[_]);if(0!==D)return D}return Qt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Qt(Kr(s.latitude),Kr(u.latitude));return 0!==l?l:Qt(Kr(s.longitude),Kr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const D=Kl(l[_],g[_]);if(D)return D}return Qt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===Wl.mapValue&&u===Wl.mapValue)return 0;if(s===Wl.mapValue)return 1;if(u===Wl.mapValue)return-1;const l=s.fields||{},g=Object.keys(l),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let b=0;b<g.length&&b<D.length;++b){const N=Qt(g[b],D[b]);if(0!==N)return N;const $=Kl(l[g[b]],_[D[b]]);if(0!==$)return $}return Qt(g.length,D.length)}(n.mapValue,e.mapValue);default:throw _t()}}function fR(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Qt(n,e);const t=zl(n),r=zl(e),s=Qt(t.seconds,r.seconds);return 0!==s?s:Qt(t.nanos,r.nanos)}function km(n){return aA(n)}function aA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=zl(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?oc(n.bytesValue).toBase64():"referenceValue"in n?at.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=aA(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of s)l?l=!1:u+=",",u+=`${g}:${aA(r.fields[g])}`;return u+"}"}(n.mapValue):_t();var e}function mf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uA(n){return!!n&&"integerValue"in n}function I0(n){return!!n&&"arrayValue"in n}function pR(n){return!!n&&"nullValue"in n}function gR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function PC(n){return!!n&&"mapValue"in n}function D0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Hl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=D0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=D0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mR(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Gk(n){return"nullValue"in n?NC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mf(Gl.empty(),at.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_t()}function Wk(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mf(Gl.empty(),at.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Wl:_t()}function yR(n,e){const t=Kl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vR(n,e){const t=Kl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Gi{constructor(e){this.value=e}static empty(){return new Gi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!PC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=D0(t)}setAll(e){let t=Mr.emptyPath(),r={},s=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}l?r[g.lastSegment()]=D0(l):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());PC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];PC(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Hl(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Gi(D0(this.value))}}function _R(n){const e=[];return Hl(n.fields,(t,r)=>{const s=new Mr([t]);if(PC(r)){const u=_R(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new $s(e)}class xr{constructor(e,t,r,s,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new xr(e,0,At.min(),At.min(),At.min(),Gi.empty(),0)}static newFoundDocument(e,t,r,s){return new xr(e,1,t,At.min(),r,s,0)}static newNoDocument(e,t){return new xr(e,2,t,At.min(),At.min(),Gi.empty(),0)}static newUnknownDocument(e,t){return new xr(e,3,t,At.min(),At.min(),Gi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Zl{constructor(e,t){this.position=e,this.inclusive=t}}function ER(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?at.comparator(at.fromName(l.referenceValue),t.key):Kl(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function wR(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!iu(n.position[t],e.position[t]))return!1;return!0}class Fm{constructor(e,t="asc"){this.field=e,this.dir=t}}function qk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class IR{}class In extends IR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Kk(e,t,r):"array-contains"===t?new Qk(e,r):"in"===t?new MR(e,r):"not-in"===t?new Jk(e,r):"array-contains-any"===t?new Xk(e,r):new In(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Zk(e,r):new Yk(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kl(t,this.value)):null!==t&&ql(this.value)===ql(t)&&this.matchesComparison(Kl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Jn extends IR{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Jn(e,t)}matches(e){return Lm(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Lm(n){return"and"===n.op}function cA(n){return"or"===n.op}function lA(n){return DR(n)&&Lm(n)}function DR(n){for(const e of n.filters)if(e instanceof Jn)return!1;return!0}function dA(n){if(n instanceof In)return n.field.canonicalString()+n.op.toString()+km(n.value);if(lA(n))return n.filters.map(e=>dA(e)).join(",");{const e=n.filters.map(t=>dA(t)).join(",");return`${n.op}(${e})`}}function CR(n,e){return n instanceof In?(t=n,(r=e)instanceof In&&t.op===r.op&&t.field.isEqual(r.field)&&iu(t.value,r.value)):n instanceof Jn?function(t,r){return r instanceof Jn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&CR(u,r.filters[l]),!0)}(n,e):void _t();var t,r}function bR(n,e){const t=n.filters.concat(e);return Jn.create(t,n.op)}function TR(n){return n instanceof In?`${(e=n).field.canonicalString()} ${e.op} ${km(e.value)}`:n instanceof Jn?function(e){return e.op.toString()+" {"+e.getFilters().map(TR).join(" ,")+"}"}(n):"Filter";var e}class Kk extends In{constructor(e,t,r){super(e,t,r),this.key=at.fromName(r.referenceValue)}matches(e){const t=at.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zk extends In{constructor(e,t){super(e,"in",t),this.keys=SR(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Yk extends In{constructor(e,t){super(e,"not-in",t),this.keys=SR(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function SR(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>at.fromName(r.referenceValue))}class Qk extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return I0(t)&&w0(t.arrayValue,this.value)}}class MR extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&w0(this.value.arrayValue,t)}}class Jk extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(w0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!w0(this.value.arrayValue,t)}}class Xk extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!I0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>w0(this.value.arrayValue,r))}}class e2{constructor(e,t=null,r=[],s=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function hA(n,e=null,t=[],r=[],s=null,u=null,l=null){return new e2(n,e,t,r,s,u,l)}function yf(n){const e=lt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dA(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),o(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>km(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>km(r)).join(",")),e.dt=t}return e.dt}function C0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wR(n.startAt,e.startAt)&&wR(n.endAt,e.endAt)}function OC(n){return at.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function kC(n,e){return n.filters.filter(t=>t instanceof In&&t.field.isEqual(e))}function AR(n,e,t){let r=NC,s=!0;for(const u of kC(n,e)){let l=NC,g=!0;switch(u.op){case"<":case"<=":l=Gk(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=NC}yR({value:r,inclusive:s},{value:l,inclusive:g})<0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];yR({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function xR(n,e,t){let r=Wl,s=!0;for(const u of kC(n,e)){let l=Wl,g=!0;switch(u.op){case">=":case">":l=Wk(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=Wl}vR({value:r,inclusive:s},{value:l,inclusive:g})>0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];vR({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class ac{constructor(e,t=null,r=[],s=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function NR(n,e,t,r,s,u,l,g){return new ac(n,e,t,r,s,u,l,g)}function Vm(n){return new ac(n)}function RR(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function FC(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function pA(n){return null!==n.collectionGroup}function vf(n){const e=lt(n);if(null===e.wt){e.wt=[];const t=FC(e),r=fA(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Fm(t)),e.wt.push(new Fm(Mr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Fm(Mr.keyField(),u))}}}return e.wt}function bs(n){const e=lt(n);if(!e._t)if("F"===e.limitType)e._t=hA(e.path,e.collectionGroup,vf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of vf(e))t.push(new Fm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Zl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Zl(e.startAt.position,e.startAt.inclusive):null;e._t=hA(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function gA(n,e){e.getFirstInequalityField(),FC(n);const t=n.filters.concat([e]);return new ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function LC(n,e,t){return new ac(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function b0(n,e){return C0(bs(n),bs(e))&&n.limitType===e.limitType}function PR(n){return`${yf(bs(n))}|lt:${n.limitType}`}function mA(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>TR(r)).join(", ")}]`),o(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>km(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>km(r)).join(",")),`Target(${t})`}(bs(n))}; limitType=${n.limitType})`}function T0(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):at.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of vf(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const g=ER(s,u,l);return s.inclusive?g<=0:g<0}(t.startAt,vf(t),r)||t.endAt&&!function(s,u,l){const g=ER(s,u,l);return s.inclusive?g>=0:g>0}(t.endAt,vf(t),r)));var t,r}function OR(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kR(n){return(e,t)=>{let r=!1;for(const s of vf(n)){const u=t2(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function t2(n,e,t){const r=n.field.isKeyField()?at.comparator(e.key,t.key):function(s,u,l){const g=u.data.field(s),_=l.data.field(s);return null!==g&&null!==_?Kl(g,_):_t()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}class uc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hl(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return lR(this.inner)}size(){return this.innerSize}}const n2=new wr(at.comparator);function Hs(){return n2}const FR=new wr(at.comparator);function S0(...n){let e=FR;for(const t of n)e=e.insert(t.key,t);return e}function LR(n){let e=FR;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function su(){return M0()}function VR(){return M0()}function M0(){return new uc(n=>n.toString(),(n,e)=>n.isEqual(e))}const r2=new wr(at.comparator),i2=new Ar(at.comparator);function un(...n){let e=i2;for(const t of n)e=e.add(t);return e}const s2=new Ar(Qt);function yA(){return s2}function UR(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:a(e)?"-0":e}}function BR(n){return{integerValue:""+n}}function jR(n,e){return c(e)?BR(e):UR(n,e)}class VC{constructor(){this._=void 0}}function o2(n,e,t){return n instanceof Um?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&AC(s)&&(s=xC(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof _f?HR(n,e):n instanceof Ef?zR(n,e):function(r,s){const u=$R(r,s),l=GR(u)+GR(r.gt);return uA(u)&&uA(r.gt)?BR(l):UR(r.serializer,l)}(n,e)}function a2(n,e,t){return n instanceof _f?HR(n,e):n instanceof Ef?zR(n,e):t}function $R(n,e){return n instanceof Bm?uA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Um extends VC{}class _f extends VC{constructor(e){super(),this.elements=e}}function HR(n,e){const t=WR(e);for(const r of n.elements)t.some(s=>iu(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ef extends VC{constructor(e){super(),this.elements=e}}function zR(n,e){let t=WR(e);for(const r of n.elements)t=t.filter(s=>!iu(s,r));return{arrayValue:{values:t}}}class Bm extends VC{constructor(e,t){super(),this.serializer=e,this.gt=t}}function GR(n){return Kr(n.integerValue||n.doubleValue)}function WR(n){return I0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class A0{constructor(e,t){this.field=e,this.transform=t}}class c2{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function UC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class BC{}function qR(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new $m(n.key,Fr.none()):new jm(n.key,n.data,Fr.none());{const t=n.data,r=Gi.empty();let s=new Ar(Mr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new cc(n.key,r,new $s(s.toArray()),Fr.none())}}function l2(n,e,t){n instanceof jm?function(r,s,u){const l=r.value.clone(),g=YR(r.fieldTransforms,s,u.transformResults);l.setAll(g),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof cc?function(r,s,u){if(!UC(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=YR(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(ZR(r)),g.setAll(l),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function x0(n,e,t,r){return n instanceof jm?function(s,u,l,g){if(!UC(s.precondition,u))return l;const _=s.value.clone(),D=QR(s.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof cc?function(s,u,l,g){if(!UC(s.precondition,u))return l;const _=QR(s.fieldTransforms,g,u),D=u.data;return D.setAll(ZR(s)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,UC(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function d2(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=$R(r.transform,s||null);null!=u&&(null===t&&(t=Gi.empty()),t.set(r.field,u))}return t||null}function KR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Bl(t,r,(s,u)=>function u2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _f&&r instanceof _f||t instanceof Ef&&r instanceof Ef?Bl(t.elements,r.elements,iu):t instanceof Bm&&r instanceof Bm?iu(t.gt,r.gt):t instanceof Um&&r instanceof Um);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class jm extends BC{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class cc extends BC{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ZR(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function YR(n,e,t){const r=new Map;Mt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,g=e.data.field(u.field);r.set(u.field,a2(l,g,t[s]))}return r}function QR(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,o2(u,l,e))}return r}class $m extends BC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends BC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _A{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&l2(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=x0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=x0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=VR();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(s.key)?null:g;const _=qR(l,g);null!==_&&r.set(s.key,_),l.isValidDocument()||l.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),un())}isEqual(e){return this.batchId===e.batchId&&Bl(this.mutations,e.mutations,(t,r)=>KR(t,r))&&Bl(this.baseMutations,e.baseMutations,(t,r)=>KR(t,r))}}class EA{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Mt(e.mutations.length===r.length);let s=r2;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new EA(e,t,r,s)}}class wA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class f2{constructor(e,t){this.count=e,this.unchangedNames=t}}var li,Pn;function JR(n){switch(n){default:return _t();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function XR(n){if(void 0===n)return qr("GRPC error has no .code"),he.UNKNOWN;switch(n){case li.OK:return he.OK;case li.CANCELLED:return he.CANCELLED;case li.UNKNOWN:return he.UNKNOWN;case li.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case li.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case li.INTERNAL:return he.INTERNAL;case li.UNAVAILABLE:return he.UNAVAILABLE;case li.UNAUTHENTICATED:return he.UNAUTHENTICATED;case li.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case li.NOT_FOUND:return he.NOT_FOUND;case li.ALREADY_EXISTS:return he.ALREADY_EXISTS;case li.PERMISSION_DENIED:return he.PERMISSION_DENIED;case li.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case li.ABORTED:return he.ABORTED;case li.OUT_OF_RANGE:return he.OUT_OF_RANGE;case li.UNIMPLEMENTED:return he.UNIMPLEMENTED;case li.DATA_LOSS:return he.DATA_LOSS;default:return _t()}}(Pn=li||(li={}))[Pn.OK=0]="OK",Pn[Pn.CANCELLED=1]="CANCELLED",Pn[Pn.UNKNOWN=2]="UNKNOWN",Pn[Pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pn[Pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pn[Pn.NOT_FOUND=5]="NOT_FOUND",Pn[Pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pn[Pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pn[Pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pn[Pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pn[Pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pn[Pn.ABORTED=10]="ABORTED",Pn[Pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pn[Pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pn[Pn.INTERNAL=13]="INTERNAL",Pn[Pn.UNAVAILABLE=14]="UNAVAILABLE",Pn[Pn.DATA_LOSS=15]="DATA_LOSS";class IA{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return jC}static getOrCreateInstance(){return null===jC&&(jC=new IA),jC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let jC=null;function eP(){return new TextEncoder}const p2=new nu([4294967295,4294967295],0);function tP(n){const e=eP().encode(n),t=new gC;return t.update(e),new Uint8Array(t.digest())}function nP(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new nu([t,r],0),new nu([s,u],0)]}class DA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new N0(`Invalid padding: ${t}`);if(r<0)throw new N0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new N0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new N0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=nu.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(nu.fromNumber(r)));return 1===s.compare(p2)&&(s=new nu([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=tP(e),[r,s]=nP(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new DA(u,s,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=tP(e),[r,s]=nP(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class N0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class R0{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,P0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new R0(At.min(),s,new wr(Qt),Hs(),un())}}class P0{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new P0(r,t,un(),un(),un())}}class $C{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class rP{constructor(e,t){this.targetId=e,this.Vt=t}}class iP{constructor(e,t,r=_i.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class sP{constructor(){this.St=0,this.Dt=aP(),this.Ct=_i.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=un(),t=un(),r=un();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:_t()}}),new P0(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=aP()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class g2{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Hs(),this.zt=oP(),this.Wt=new wr(Qt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:_t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(OC(l))if(0===s){const g=new at(l.path);this.Yt(r,g,xr.newNoDocument(g,At.min()))}else Mt(1===s);else{const g=this.ie(r);if(g!==s){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=IA.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,b,N){var $,Q,me,He,We,nt;const ht={localCacheCount:b,existenceFilterCount:N.count},St=N.unchangedNames;return St&&(ht.bloomFilter={applied:0===D,hashCount:null!==($=St?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(He=null===(me=null===(Q=St?.bits)||void 0===Q?void 0:Q.bitmap)||void 0===me?void 0:me.length)&&void 0!==He?He:0,padding:null!==(nt=null===(We=St?.bits)||void 0===We?void 0:We.padding)&&void 0!==nt?nt:0}),ht}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,D;try{_=oc(u).toUint8Array()}catch(b){if(b instanceof hR)return Cs("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{D=new DA(_,l,g)}catch(b){return Cs(b instanceof N0?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===D.It?1:s!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&OC(g.target)){const _=new at(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,xr.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=un();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const D=this.se(_);return!D||"TargetPurposeLimboResolution"===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new R0(e,t,this.Wt,this.jt,r);return this.jt=Hs(),this.zt=oP(),this.Wt=new wr(Qt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new sP,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Ar(Qt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new sP),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function oP(){return new wr(at.comparator)}function aP(){return new wr(at.comparator)}const m2={asc:"ASCENDING",desc:"DESCENDING"},y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v2={and:"AND",or:"OR"};class _2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function CA(n,e){return n.useProto3Json||o(e)?e:{value:e}}function Hm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function E2(n,e){return Hm(n,e.toTimestamp())}function ei(n){return Mt(!!n),At.fromTimestamp(function(e){const t=zl(e);return new mr(t.seconds,t.nanos)}(n))}function bA(n,e){return(t=n,new wn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function cP(n){const e=wn.fromString(n);return Mt(vP(e)),e}function O0(n,e){return bA(n.databaseId,e.path)}function ou(n,e){const t=cP(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new at(dP(t))}function TA(n,e){return bA(n.databaseId,e)}function lP(n){const e=cP(n);return 4===e.length?wn.emptyPath():dP(e)}function k0(n){return new wn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dP(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function hP(n,e,t){return{name:O0(n,e),fields:t.value.mapValue.fields}}function fP(n,e,t){const r=ou(n,e.name),s=ei(e.updateTime),u=e.createTime?ei(e.createTime):At.min(),l=new Gi({mapValue:{fields:e.fields}}),g=xr.newFoundDocument(r,s,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function F0(n,e){let t;if(e instanceof jm)t={update:hP(n,e.key,e.value)};else if(e instanceof $m)t={delete:O0(n,e.key)};else if(e instanceof cc)t={update:hP(n,e.key,e.data),updateMask:M2(e.fieldMask)};else{if(!(e instanceof vA))return _t();t={verify:O0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Um)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _f)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ef)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bm)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw _t()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:E2(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:_t()),t;var s}function SA(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Fr.updateTime(ei(s.updateTime)):void 0!==s.exists?Fr.exists(s.exists):Fr.none():Fr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let g=null;"setToServerValue"in l?(Mt("REQUEST_TIME"===l.setToServerValue),g=new Um):"appendMissingElements"in l?g=new _f(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Ef(l.removeAllFromArray.values||[]):"increment"in l?g=new Bm(u,l.increment):_t();const _=Mr.fromServerFormat(l.fieldPath);return new A0(_,g)}(n,s)):[];var s;if(e.update){const s=ou(n,e.update.name),u=new Gi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new $s((e.updateMask.fieldPaths||[]).map(D=>Mr.fromServerFormat(D)));return new cc(s,u,l,t,r)}return new jm(s,u,t,r)}if(e.delete){const s=ou(n,e.delete);return new $m(s,t)}if(e.verify){const s=ou(n,e.verify);return new vA(s,t)}return _t()}function pP(n,e){return{documents:[TA(n,e.path)]}}function MA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=TA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=TA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return yP(Jn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:Yl((b=D).field),direction:b2(b.dir)};var b})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=CA(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function gP(n){let e=lP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Mt(1===r);const b=t.from[0];b.allDescendants?s=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=function(b){const N=mP(b);return N instanceof Jn&&lA(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new Fm(zm((N=b).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(b){let N;return N="object"==typeof b?b.value:b,o(N)?null:N}(t.limit));let _=null;var b;t.startAt&&(_=new Zl((b=t.startAt).values||[],!!b.before));let D=null;return t.endAt&&(D=function(b){return new Zl(b.values||[],!b.before)}(t.endAt)),NR(e,s,l,u,g,"F",_,D)}function mP(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zm(e.unaryFilter.field);return In.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=zm(e.unaryFilter.field);return In.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=zm(e.unaryFilter.field);return In.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=zm(e.unaryFilter.field);return In.create(u,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}(n):void 0!==n.fieldFilter?In.create(zm((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Jn.create(e.compositeFilter.filters.map(t=>mP(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return _t()}}(e.compositeFilter.op))}(n):_t();var e}function b2(n){return m2[n]}function T2(n){return y2[n]}function S2(n){return v2[n]}function Yl(n){return{fieldPath:n.canonicalString()}}function zm(n){return Mr.fromServerFormat(n.fieldPath)}function yP(n){return n instanceof In?function(e){if("=="===e.op){if(gR(e.value))return{unaryFilter:{field:Yl(e.field),op:"IS_NAN"}};if(pR(e.value))return{unaryFilter:{field:Yl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gR(e.value))return{unaryFilter:{field:Yl(e.field),op:"IS_NOT_NAN"}};if(pR(e.value))return{unaryFilter:{field:Yl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(e.field),op:T2(e.op),value:e.value}}}(n):n instanceof Jn?function(e){const t=e.getFilters().map(r=>yP(r));return 1===t.length?t[0]:{compositeFilter:{op:S2(e.op),filters:t}}}(n):_t()}function M2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function vP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class lc{constructor(e,t,r,s,u=At.min(),l=At.min(),g=_i.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new lc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class _P{constructor(e){this.fe=e}}function EP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:HC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:O0(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Hm(s,u.version.toTimestamp()),createTime:Hm(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wf(e.version)};else{if(!e.isUnknownDocument())return _t();r.unknownDocument={path:t.path.toArray(),version:wf(e.version)}}var s,u;return r}function HC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function If(n){const e=new mr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Df(n,e){const t=(e.baseMutations||[]).map(u=>SA(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>SA(n.fe,u)),s=mr.fromMillis(e.localWriteTimeMs);return new _A(e.batchId,s,t,r)}function L0(n){const e=If(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?If(n.lastLimboFreeSnapshotVersion):At.min();let r;var s;return void 0!==n.query.documents?(Mt(1===(s=n.query).documents.length),r=bs(Vm(lP(s.documents[0])))):r=bs(gP(n.query)),new lc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,_i.fromBase64String(n.resumeToken))}function wP(n,e){const t=wf(e.snapshotVersion),r=wf(e.lastLimboFreeSnapshotVersion);let s;s=OC(e.target)?pP(n.fe,e.target):MA(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function AA(n){const e=gP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?LC(e,e.limit,"L"):e}function xA(n,e){return new wA(e.largestBatchId,SA(n.fe,e.overlayMutation))}function IP(n,e){const t=e.path.lastSegment();return[n,d(e.path.popLast()),t]}function DP(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:wf(r.readTime),documentKey:d(r.documentKey.path),largestBatchId:r.largestBatchId}}class x2{getBundleMetadata(e,t){return CP(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:If(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return CP(e).put({bundleId:(r=t).id,createTime:wf(ei(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bP(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:AA(s.bundledQuery),readTime:If(s.readTime)};var s})}saveNamedQuery(e,t){return bP(e).put({name:(r=t).name,readTime:wf(ei(r.readTime)),bundledQuery:r.bundledQuery});var r}}function CP(n){return Ri(n,"bundles")}function bP(n){return Ri(n,"namedQueries")}class zC{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new zC(e,t.uid||"")}getOverlay(e,t){return V0(e).get(IP(this.userId,t)).next(r=>r?xA(this.serializer,r):null)}getOverlays(e,t){const r=su();return ue.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const g=new wA(t,l);s.push(this.we(e,g))}),ue.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(d(l.getCollectionPath())));const u=[];return s.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(V0(e).J("collectionPathOverlayIndex",g))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const s=su(),u=d(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return V0(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const D=xA(this.serializer,_);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=su();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return V0(e).X({index:"collectionGroupOverlayIndex",range:g},(_,D,b)=>{const N=xA(this.serializer,D);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):b.done()}).next(()=>u)}we(e,t){return V0(e).put(function(r,s,u){const[l,g,_]=IP(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:F0(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function V0(n){return Ri(n,"documentOverlays")}class Cf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Kr(e.integerValue));else if("doubleValue"in e){const r=Kr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),a(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(oc(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?mR(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):_t()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),at.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function N2(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function TP(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=N2(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Cf.Ve=new Cf;class R2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=TP(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=TP(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class P2{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class O2{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class U0{constructor(){this.je=new R2,this.ze=new P2(this.je),this.We=new O2(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class bf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bf(this.indexId,this.documentKey,this.arrayValue,r)}}function Ql(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=SP(n.arrayValue,e.arrayValue),0!==t?t:(t=SP(n.directionalValue,e.directionalValue),0!==t?t:at.comparator(n.documentKey,e.documentKey)))}function SP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class k2{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Mt(e.collectionGroup===this.collectionId);const t=ff(e);if(void 0!==t&&!this.en(t))return!1;const r=rc(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[l++],g))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function MP(n){var e,t;if(Mt(n instanceof In||n instanceof Jn),n instanceof In){if(n instanceof MR){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>In.create(n.field,"==",u)))||[];return Jn.create(s,"or")}return n}const r=n.filters.map(s=>MP(s));return Jn.create(r,n.op)}function F2(n){if(0===n.getFilters().length)return[];const e=PA(MP(n));return Mt(AP(e)),NA(e)||RA(e)?[e]:e.getFilters()}function NA(n){return n instanceof In}function RA(n){return n instanceof Jn&&lA(n)}function AP(n){return NA(n)||RA(n)||function(e){if(e instanceof Jn&&cA(e)){for(const t of e.getFilters())if(!NA(t)&&!RA(t))return!1;return!0}return!1}(n)}function PA(n){if(Mt(n instanceof In||n instanceof Jn),n instanceof In)return n;if(1===n.filters.length)return PA(n.filters[0]);const e=n.filters.map(r=>PA(r));let t=Jn.create(e,n.op);return t=GC(t),AP(t)?t:(Mt(t instanceof Jn),Mt(Lm(t)),Mt(t.filters.length>1),t.filters.reduce((r,s)=>OA(r,s)))}function OA(n,e){let t;return Mt(n instanceof In||n instanceof Jn),Mt(e instanceof In||e instanceof Jn),t=n instanceof In?e instanceof In?Jn.create([n,e],"and"):xP(n,e):e instanceof In?xP(e,n):function(r,s){if(Mt(r.filters.length>0&&s.filters.length>0),Lm(r)&&Lm(s))return bR(r,s.getFilters());const u=cA(r)?r:s,l=cA(r)?s:r,g=u.filters.map(_=>OA(_,l));return Jn.create(g,"or")}(n,e),GC(t)}function xP(n,e){if(Lm(e))return bR(e,n.getFilters());{const t=e.filters.map(r=>OA(n,r));return Jn.create(t,"or")}}function GC(n){if(Mt(n instanceof In||n instanceof Jn),n instanceof In)return n;const e=n.getFilters();if(1===e.length)return GC(e[0]);if(DR(n))return n;const t=e.map(s=>GC(s)),r=[];return t.forEach(s=>{s instanceof In?r.push(s):s instanceof Jn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Jn.create(r,n.op)}class L2{constructor(){this.rn=new kA}addToCollectionParentIndex(e,t){return this.rn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ni.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ni.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class kA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ar(wn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ar(wn.comparator)).toArray()}}const WC=new Uint8Array(0);class V2{constructor(e,t){this.user=e,this.databaseId=t,this.on=new kA,this.un=new uc(r=>yf(r),(r,s)=>C0(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:d(s)};return NP(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[wC(t),""],!1,!0);return NP(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(E(l.parent))}return r})}addFieldIndex(e,t){const r=qC(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=j0(e);return u.next(g=>{l.put(DP(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=qC(e),s=j0(e),u=B0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=B0(e);let s=!0;const u=new Map;return ue.forEach(this.cn(t),l=>this.an(e,l).next(g=>{s&&(s=!!g),u.set(l,g)})).next(()=>{if(s){let l=un();const g=[];return ue.forEach(u,(_,D)=>{var b;Ke("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(St=>`${St.fieldPath}:${St.kind}`).join(",")}`} to execute ${yf(t)}`);const N=function(St,$t){const Rt=ff($t);if(void 0===Rt)return null;for(const gn of kC(St,Rt.fieldPath))switch(gn.op){case"array-contains-any":return gn.value.arrayValue.values||[];case"array-contains":return[gn.value]}return null}(D,_),$=function(St,$t){const Rt=new Map;for(const gn of rc($t))for(const Oi of kC(St,gn.fieldPath))switch(Oi.op){case"==":case"in":Rt.set(gn.fieldPath.canonicalString(),Oi.value);break;case"not-in":case"!=":return Rt.set(gn.fieldPath.canonicalString(),Oi.value),Array.from(Rt.values())}return null}(D,_),Q=function(St,$t){const Rt=[];let gn=!0;for(const Oi of rc($t)){const pc=0===Oi.kind?AR(St,Oi.fieldPath,St.startAt):xR(St,Oi.fieldPath,St.startAt);Rt.push(pc.value),gn&&(gn=pc.inclusive)}return new Zl(Rt,gn)}(D,_),me=function(St,$t){const Rt=[];let gn=!0;for(const Oi of rc($t)){const pc=0===Oi.kind?xR(St,Oi.fieldPath,St.endAt):AR(St,Oi.fieldPath,St.endAt);Rt.push(pc.value),gn&&(gn=pc.inclusive)}return new Zl(Rt,gn)}(D,_),He=this.hn(_,D,Q),We=this.hn(_,D,me),nt=this.ln(_,D,$),ht=this.fn(_.indexId,N,He,Q.inclusive,We,me.inclusive,nt);return ue.forEach(ht,St=>r.H(St,t.limit).next($t=>{$t.forEach(Rt=>{const gn=at.fromSegments(Rt.documentKey);l.has(gn)||(l=l.add(gn),g.push(gn))})}))}).next(()=>g)}return ue.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:F2(Jn.create(e.filters,"and")).map(r=>hA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),b=[];for(let N=0;N<_;++N){const $=t?this.dn(t[N/D]):WC,Q=this.wn(e,$,r[N%D],s),me=this._n(e,$,u[N%D],l),He=g.map(We=>this.wn(e,$,We,!0));b.push(...this.createRange(Q,me,He))}return b}wn(e,t,r,s){const u=new bf(e,at.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new bf(e,at.empty(),t,r);return s?u.Je():u}an(e,t){const r=new k2(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ue.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Ar(Mr.comparator),D=!1;for(const b of g.filters)for(const N of b.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?D=!0:_=_.add(N.field));for(const b of g.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new U0;for(const s of rc(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Cf.Ve._e(u,l)}return r.Qe()}dn(e){const t=new U0;return Cf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new U0;return Cf.Ve._e(mf(this.databaseId,t),r.He(function(s){const u=rc(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new U0);let u=0;for(const l of rc(e)){const g=r[u++];for(const _ of s)if(this.yn(t,l.fieldPath)&&I0(g))s=this.pn(s,l,g);else{const D=_.He(l.kind);Cf.Ve._e(g,D)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of s){const _=new U0;_.seed(g.Qe()),Cf.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof In&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=qC(e),s=j0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ue.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{l.push(function(D,b){const N=b?new jl(b.sequenceNumber,new Ni(If(b.readTime),new at(E(b.documentKey)),b.largestBatchId)):jl.empty(),$=D.fields.map(([Q,me])=>new pf(Mr.fromServerFormat(Q),me));return new Pm(D.indexId,D.collectionGroup,$,N)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Qt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=qC(e),u=j0(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ue.forEach(g,_=>u.put(DP(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),ue.forEach(g,_=>this.En(e,s,_).next(D=>{const b=this.An(u,_);return D.isEqual(b)?ue.resolve():this.vn(e,u,_,D,b)}))))})}Rn(e,t,r,s){return B0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return B0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=B0(e);let u=new Ar(Ql);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new bf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Ar(Ql);const s=this.mn(t,e);if(null==s)return r;const u=ff(t);if(null!=u){const l=e.data.field(u.fieldPath);if(I0(l))for(const g of l.arrayValue.values||[])r=r.add(new bf(t.indexId,e.key,this.dn(g),s))}else r=r.add(new bf(t.indexId,e.key,WC,s));return r}vn(e,t,r,s,u){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,D,b,N){const $=g.getIterator(),Q=_.getIterator();let me=Om($),He=Om(Q);for(;me||He;){let We=!1,nt=!1;if(me&&He){const ht=D(me,He);ht<0?nt=!0:ht>0&&(We=!0)}else null!=me?nt=!0:We=!0;We?(b(He),He=Om(Q)):nt?(N(me),me=Om($)):(me=Om($),He=Om(Q))}}(s,u,Ql,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),ue.waitFor(l)}Tn(e){let t=1;return j0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>Ql(l,g)).filter((l,g,_)=>!g||0!==Ql(l,_[g-1]));const s=[];s.push(e);for(const l of r){const g=Ql(l,e),_=Ql(l,t);if(0===g)s[0]=e.Je();else if(g>0&&_<0)s.push(l),s.push(l.Je());else if(_>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,WC,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,WC,[]]))}return u}bn(e,t){return Ql(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RP)}getMinOffset(e,t){return ue.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||_t())).next(RP)}}function NP(n){return Ri(n,"collectionParents")}function B0(n){return Ri(n,"indexEntries")}function qC(n){return Ri(n,"indexConfiguration")}function j0(n){return Ri(n,"indexState")}function RP(n){Mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;CC(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ni(e.readTime,e.documentKey,t)}const PP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function OP(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(b,N,$)=>(g++,$.delete()));u.push(_.next(()=>{Mt(1===g)}));const D=[];for(const b of t.mutations){const N=M(e,b.key.path,t.batchId);u.push(s.delete(N)),D.push(b.key)}return ue.waitFor(u).next(()=>D)}function KC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _t();e=n.noDocument}return JSON.stringify(e).length}is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(41943040,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);class ZC{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){Mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ZC(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jl(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=Gm(e),l=Jl(e);return l.add({}).next(g=>{Mt("number"==typeof g);const _=new _A(g,t,r,s),D=function($,Q,me){const He=me.baseMutations.map(nt=>F0($.fe,nt)),We=me.mutations.map(nt=>F0($.fe,nt));return{userId:Q,batchId:me.batchId,localWriteTimeMs:me.localWriteTime.toMillis(),baseMutations:He,mutations:We}}(this.serializer,this.userId,_),b=[];let N=new Ar(($,Q)=>Qt($.canonicalString(),Q.canonicalString()));for(const $ of s){const Q=M(this.userId,$.key.path,g);N=N.add($.key.path.popLast()),b.push(l.put(D)),b.push(u.put(Q,L))}return N.forEach($=>{b.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),ue.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return Jl(e).get(t).next(r=>r?(Mt(r.userId===this.userId),Df(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ue.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Jl(e).X({index:"userMutationsIndex",range:s},(l,g,_)=>{g.userId===this.userId&&(Mt(g.batchId>=r),u=Df(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jl(e).j("userMutationsIndex",t).next(r=>r.map(s=>Df(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=C(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return Gm(e).X({range:s},(l,g,_)=>{const[D,b,N]=l,$=E(b);if(D===this.userId&&t.path.isEqual($))return Jl(e).get(N).next(Q=>{if(!Q)throw _t();Mt(Q.userId===this.userId),u.push(Df(this.serializer,Q))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ar(Qt);const s=[];return t.forEach(u=>{const l=C(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=Gm(e).X({range:g},(D,b,N)=>{const[$,Q,me]=D,He=E(Q);$===this.userId&&u.path.isEqual(He)?r=r.add(me):N.done()});s.push(_)}),ue.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=C(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Ar(Qt);return Gm(e).X({range:l},(_,D,b)=>{const[N,$,Q]=_,me=E($);N===this.userId&&r.isPrefixOf(me)?me.length===s&&(g=g.add(Q)):b.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Jl(e).get(u).next(l=>{if(null===l)throw _t();Mt(l.userId===this.userId),r.push(Df(this.serializer,l))}))}),ue.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return OP(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ue.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return Gm(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=E(u[1]);s.push(_)}else g.done()}).next(()=>{Mt(0===s.length)})})}containsKey(e,t){return kP(e,this.userId,t)}xn(e){return FP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kP(n,e,t){const r=C(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Gm(n).X({range:u,Y:!0},(g,_,D)=>{const[b,N,$]=g;b===e&&N===s&&(l=!0),D.done()}).next(()=>l)}function Jl(n){return Ri(n,"mutations")}function Gm(n){return Ri(n,"documentMutations")}function FP(n){return Ri(n,"mutationQueues")}class Tf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Tf(0)}static Mn(){return new Tf(-1)}}class U2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Tf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>At.fromTimestamp(new mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wm(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Wm(e).X((l,g)=>{const _=L0(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Wm(e).X((r,s)=>{const u=L0(s);t(u)})}$n(e){return LP(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}On(e,t){return LP(e).put("targetGlobalKey",t)}Fn(e,t){return Wm(e).put(wP(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yf(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Wm(e).X({range:s,index:"queryTargetsIndex"},(l,g,_)=>{const D=L0(g);C0(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Xl(e);return t.forEach(l=>{const g=d(l.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(s)}removeMatchingKeys(e,t,r){const s=Xl(e);return ue.forEach(t,u=>{const l=d(u.path);return ue.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Xl(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Xl(e);let u=un();return s.X({range:r,Y:!0},(l,g,_)=>{const D=E(l[1]),b=new at(D);u=u.add(b)}).next(()=>u)}containsKey(e,t){const r=d(t.path),s=IDBKeyRange.bound([r],[wC(r)],!1,!0);let u=0;return Xl(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,g],_,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}le(e,t){return Wm(e).get(t).next(r=>r?L0(r):null)}}function Wm(n){return Ri(n,"targets")}function LP(n){return Ri(n,"targetGlobal")}function Xl(n){return Ri(n,"targetDocuments")}function VP([n,e],[t,r]){const s=Qt(n,t);return 0===s?Qt(e,r):s}class B2{constructor(e){this.Ln=e,this.buffer=new Ar(VP),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();VP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){sc(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ic(r)}yield t.Qn(3e5)}))}}class j2{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(i.ct);const r=new B2(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(PP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),PP):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,g,_,D;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(D=Date.now(),Ul()<=Fo.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${s} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${N} documents in `+(D-_)+`ms\nTotal Duration: ${D-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class $2{constructor(e,t){this.db=e,this.garbageCollector=function BP(n,e){return new j2(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return YC(e,r)}removeReference(e,t,r){return YC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return YC(e,t)}Xn(e,t){return function(r,s){let u=!1;return FP(r).Z(l=>kP(r,l,s).next(g=>(g&&(u=!0),ue.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),Xl(e).delete([0,d(l.path)])))});s.push(_)}}).next(()=>ue.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return YC(e,t)}Yn(e,t){const r=Xl(e);let s,u=i.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:D})=>{0===l?(u!==i.ct&&t(new at(E(s)),u),u=D,s=_):u=i.ct}).next(()=>{u!==i.ct&&t(new at(E(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YC(n,e){return Xl(n).put((r=n.currentSequenceNumber,{targetId:0,path:d(e.path),sequenceNumber:r}));var r}class jP{constructor(){this.changes=new uc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class H2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sf(e).put(r)}removeEntry(e,t,r){return Sf(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],HC(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=xr.newInvalidDocument(t);return Sf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only($0(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:xr.newInvalidDocument(t)};return Sf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only($0(t))},(s,u)=>{r={document:this.ts(t,u),size:KC(u)}}).next(()=>r)}getEntries(e,t){let r=Hs();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=Hs(),s=new wr(at.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),s=s.insert(u,KC(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ue.resolve();let s=new Ar(GP);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound($0(s.first()),$0(s.last())),l=s.getIterator();let g=l.getNext();return Sf(e).X({index:"documentKeyIndex",range:u},(_,D,b)=>{const N=at.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&GP(g,N)<0;)r(g,null),g=l.getNext();g&&g.isEqual(N)&&(r(g,D),g=l.hasNext()?l.getNext():null),g?b.G($0(g)):b.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),HC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sf(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let D=Hs();for(const b of _){const N=this.ts(at.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);N.isFoundDocument()&&(T0(t,N)||s.has(N.key))&&(D=D.insert(N.key,N))}return D})}getAllFromCollectionGroup(e,t,r,s){let u=Hs();const l=zP(t,r),g=zP(t,Ni.max());return Sf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,D,b)=>{const N=this.ts(at.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(N.key,N),u.size===s&&b.done()}).next(()=>u)}newChangeBuffer(e){return new z2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return HP(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}Zn(e,t){return HP(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function A2(n,e){let t;if(e.document)t=fP(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=at.fromSegments(e.noDocument.path),s=If(e.noDocument.readTime);t=xr.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _t();{const r=at.fromSegments(e.unknownDocument.path),s=If(e.unknownDocument.version);t=xr.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new mr(r[0],r[1]);return At.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return xr.newInvalidDocument(e)}}function $P(n){return new H2(n)}class z2 extends jP{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new uc(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Ar((u,l)=>Qt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=EP(this.os.serializer,l);s=s.add(u.path.popLast());const D=KC(_);r+=D-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=EP(this.os.serializer,l.convertToNoDocument(At.min()));t.push(this.os.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function HP(n){return Ri(n,"remoteDocumentGlobal")}function Sf(n){return Ri(n,"remoteDocumentsV14")}function $0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zP(n,e){const t=e.documentKey.path.toArray();return[n,HC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function GP(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Qt(t[u],r[u]),s)return s;return s=Qt(t.length,r.length),s||(s=Qt(t[t.length-2],r[r.length-2]),s||Qt(t[t.length-1],r[r.length-1]))}class G2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class WP{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&x0(r.mutation,s,$s.empty(),mr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,un()).next(()=>r))}getLocalViewOfDocuments(e,t,r=un()){const s=su();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=S0();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=su();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,un()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,s){let u=Hs();const l=M0(),g=M0();return t.forEach((_,D)=>{const b=r.get(D.key);s.has(D.key)&&(void 0===b||b.mutation instanceof cc)?u=u.insert(D.key,D):void 0!==b?(l.set(D.key,b.mutation.getFieldMask()),x0(b.mutation,D,b.mutation.getFieldMask(),mr.now())):l.set(D.key,$s.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,b)=>l.set(D,b)),t.forEach((D,b)=>{var N;return g.set(D,new G2(b,null!==(N=l.get(D))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=M0();let s=new wr((l,g)=>l-g),u=un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let b=r.get(_)||$s.empty();b=g.applyToLocalView(D,b),r.set(_,b);const N=(s.get(g.batchId)||un()).add(_);s=s.insert(g.batchId,N)})}).next(()=>{const l=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,b=_.value,N=VR();b.forEach($=>{if(!u.has($)){const Q=qR(t.get($),r.get($));null!==Q&&N.set($,Q),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,N))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return at.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):pA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ue.resolve(su());let g=-1,_=u;return l.next(D=>ue.forEach(D,(b,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(b)?ue.resolve():this.remoteDocumentCache.getEntry(e,b).next($=>{_=_.insert(b,$)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,un())).next(b=>({batchId:g,changes:LR(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new at(t)).next(r=>{let s=S0();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=S0();return this.indexManager.getCollectionParents(e,s).next(l=>ue.forEach(l,g=>{const _=(D=t,b=g.child(s),new ac(b,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((b,N)=>{u=u.insert(b,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,_)=>{const D=_.getKey();null===u.get(D)&&(u=u.insert(D,xr.newInvalidDocument(D)))});let l=S0();return u.forEach((g,_)=>{const D=s.get(g);void 0!==D&&x0(D.mutation,_,$s.empty(),mr.now()),T0(t,_)&&(l=l.insert(g,_))}),l})}}class W2{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ue.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:ei(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:AA(r.bundledQuery),readTime:ei(r.readTime)}),ue.resolve();var r}}class q2{constructor(){this.overlays=new wr(at.comparator),this.ls=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=su();return ue.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=su(),u=t.length+1,l=new at(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new wr((D,b)=>D-b);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let b=u.get(D.largestBatchId);null===b&&(b=su(),u=u.insert(D.largestBatchId,b)),b.set(D.getKey(),D)}}const g=su(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,b)=>g.set(D,b)),!(g.size()>=s)););return ue.resolve(g)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new wA(t,r));let u=this.ls.get(t);void 0===u&&(u=un(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class FA{constructor(){this.fs=new Ar(Pi.ds),this.ws=new Ar(Pi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Pi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Pi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new at(new wn([])),r=new Pi(t,e),s=new Pi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new at(new wn([])),r=new Pi(t,e),s=new Pi(t,e+1);let u=un();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Pi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return at.comparator(e.key,t.key)||Qt(e.As,t.As)}static _s(e,t){return Qt(e.As,t.As)||at.comparator(e.key,t.key)}}class K2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Ar(Pi.ds)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new _A(u,t,r,s);this.mutationQueue.push(l);for(const g of s)this.Rs=this.Rs.add(new Pi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pi(t,0),s=new Pi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const g=this.Ps(l.As);u.push(g)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ar(Qt);return t.forEach(s=>{const u=new Pi(s,0),l=new Pi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),ue.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;at.isDocumentKey(u)||(u=u.child(""));const l=new Pi(new at(u),0);let g=new Ar(Qt);return this.Rs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(g=g.add(_.As)),!0)},l),ue.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Mt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ue.forEach(t.mutations,s=>{const u=new Pi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Pi(t,0),s=this.Rs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ue.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Z2{constructor(e){this.Ds=e,this.docs=new wr(at.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():xr.newInvalidDocument(t))}getEntries(e,t){let r=Hs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():xr.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Hs();const l=t.path,g=new at(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:b}}=_.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||CC(DC(b),r)<=0||(s.has(b.key)||T0(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,t,r,s){_t()}Cs(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Y2(this)}getSize(e){return ue.resolve(this.size)}}class Y2 extends jP{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Q2{constructor(e){this.persistence=e,this.xs=new uc(t=>yf(t),C0),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Ns=0,this.ks=new FA,this.targetCount=0,this.Ms=Tf.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ue.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Tf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Fn(t),ue.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),ue.waitFor(u).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.ks.containsKey(t))}}class LA{constructor(e,t){this.$s={},this.overlays={},this.Os=new i(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Q2(this),this.indexManager=new L2,this.remoteDocumentCache=new Z2(r=>this.referenceDelegate.Ls(r)),this.serializer=new _P(t),this.qs=new W2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new q2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new K2(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const s=new J2(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ue.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class J2 extends rA{constructor(e){super(),this.currentSequenceNumber=e}}class QC{constructor(e){this.persistence=e,this.Qs=new FA,this.js=null}static zs(e){return new QC(e)}get Ws(){if(this.js)return this.js;throw _t()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ws,r=>{const s=at.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,At.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ue.or([()=>ue.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class X2{constructor(e){this.serializer=e}O(e,t,r,s){const u=new _0("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I,{unique:!0}),g.createObjectStore("documentMutations"),qP(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),qP(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",I,{unique:!0});const b=_.store("mutations"),N=D.map($=>b.put($));return ue.waitFor(N)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:SC});_.createIndex("collectionPathOverlayIndex",Vk,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",Uk,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:Z});_.createIndex("documentKeyIndex",te),_.createIndex("collectionGroupIndex",Me)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Vt}).createIndex("sequenceNumberIndex",fn,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:jn}).createIndex("documentKeyIndex",fo,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=KC(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ue.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>ue.forEach(g,_=>{Mt(_.userId===u.userId);const D=Df(this.serializer,_);return OP(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,g)=>{const _=new wn(l),D=[0,d(_)];u.push(t.get(D).next(b=>b?ue.resolve():t.put({targetId:0,path:d(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Ue});const r=t.store("collectionParents"),s=new kA,u=l=>{if(s.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:d(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new wn(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],D)=>{const b=E(g);return u(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=L0(s),l=wP(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(D=l,D.document?new at(wn.fromString(D.document.name).popFirst(5)):D.noDocument?at.fromSegments(D.noDocument.path):D.unknownDocument?at.fromSegments(D.unknownDocument.path):_t()).path.toArray();var D;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(g.put(b))}).next(()=>ue.waitFor(s))}si(e,t){const r=t.store("mutations"),s=$P(this.serializer),u=new LA(QC.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var D;let b=null!==(D=g.get(_.userId))&&void 0!==D?D:un();Df(this.serializer,_).keys().forEach(N=>b=b.add(N)),g.set(_.userId,b)}),ue.forEach(g,(_,D)=>{const b=new ci(D),N=zC.de(this.serializer,b),$=u.getIndexManager(b),Q=ZC.de(b,this.serializer,$,u.referenceDelegate);return new WP(s,Q,N,$).recalculateAndSaveOverlaysForDocumentKeys(new oA(t,i.ct),_).next()})})}}function qP(n){n.createObjectStore("targetDocuments",{keyPath:ot}).createIndex("documentTargetsIndex",xt,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qe,{unique:!0}),n.createObjectStore("targetGlobal")}const VA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class UA{constructor(e,t,r,s,u,l,g,_,D,b,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=D,this.oi=b,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!UA.D())throw new Ve(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $2(this,s),this.di=t+"main",this.serializer=new _P(_),this.wi=new Wo(this.di,this.ui,new X2(this.serializer)),this.Bs=new U2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$P(this.serializer),this.qs=new x2,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(he.FAILED_PRECONDITION,VA);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new i(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ee.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>XC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(sc(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return H0(e).get("owner").next(t=>ue.resolve(this.Ri(t)))}Pi(e){return XC(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Ri(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return ue.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ue.resolve(!0):H0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Ve(he.FAILED_PRECONDITION,VA);return!1}}return!(!this.networkEnabled||!this.inForeground)||XC(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new oA(t,i.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>XC(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return ZC.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new V2(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return zC.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?jk:14===l?uR:13===l?aR:12===l?Bk:11===l?oR:void _t();var l;let g;return this.wi.runTransaction(e,s,u,_=>(g=new oA(_,this.Os?this.Os.next():i.ct),"readwrite-primary"===t?this.Ti(g).next(D=>!!D||this.Ei(g)).next(D=>{if(!D)throw qr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ve(he.FAILED_PRECONDITION,bC);return r(g)}).next(D=>this.vi(g).next(()=>D)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return H0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(he.FAILED_PRECONDITION,VA)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return H0(e).put("owner",t)}static D(){return Wo.D()}Ai(e){const t=H0(e);return t.get("owner").next(r=>this.Ri(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(qr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,En.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return qr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){qr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function H0(n){return Ri(n,"owner")}function XC(n){return Ri(n,"clientMetadata")}function BA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class jA{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=un(),s=un();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new jA(e,t.fromCache,r,s)}}class KP{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(RR(t))return ue.resolve(null);let r=bs(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=LC(t,null,"F"),r=bs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=un(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.ji(t,g);return this.zi(t,D,l,_.readTime)?this.Ki(e,LC(t,null,"F")):this.Wi(e,D,t,_)}))})))}Gi(e,t,r,s){return RR(t)||s.isEqual(At.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(Ul()<=Fo.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mA(t)),this.Wi(e,l,t,nA(s,-1)))})}ji(e,t){let r=new Ar(kR(e));return t.forEach((s,u)=>{T0(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return Ul()<=Fo.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",mA(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ni.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class eF{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new wr(Qt),this.Yi=new uc(u=>yf(u),C0),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WP(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ZP(n,e,t,r){return new eF(n,e,t,r)}function YP(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,Ee.Z)(function*(n,e){const t=lt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=un();for(const D of s){l.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}for(const D of u){g.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(D=>({er:D,removedBatchIds:l,addedBatchIds:g}))})})}),$A.apply(this,arguments)}function QP(n){const e=lt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function JP(n,e,t){let r=un(),s=un();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Hs();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(At.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Ke("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{nr:l,sr:s}})}function rF(n,e){const t=lt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qm(n,e){const t=lt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ue.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new lc(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Km(n,e,t){return HA.apply(this,arguments)}function HA(){return HA=(0,Ee.Z)(function*(n,e,t){const r=lt(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!sc(l))throw l;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),HA.apply(this,arguments)}function eb(n,e,t){const r=lt(n);let s=At.min(),u=un();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,D){const b=lt(g),N=b.Yi.get(D);return void 0!==N?ue.resolve(b.Ji.get(N)):b.Bs.getTargetData(_,D)}(r,l,bs(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:At.min(),t?u:un())).next(g=>(tO(r,OR(e),g),{documents:g,ir:u})))}function XP(n,e){const t=lt(n),r=lt(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function eO(n,e){const t=lt(n),r=t.Xi.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,nA(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(tO(t,e,s),s))}function tO(n,e,t){let r=n.Xi.get(e)||At.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function zA(){return zA=(0,Ee.Z)(function*(n,e,t,r){const s=lt(n);let u=un(),l=Hs();for(const D of t){const b=e.rr(D.metadata.name);D.document&&(u=u.add(b));const N=e.ur(D);N.setReadTime(e.cr(D.metadata.readTime)),l=l.insert(b,N)}const g=s.Zi.newChangeBuffer({trackRemovals:!0}),_=yield qm(s,(D=r,bs(Vm(wn.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>JP(D,g,l).next(b=>(g.apply(D),b)).next(b=>s.Bs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>s.Bs.addMatchingKeys(D,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,b.nr,b.sr)).next(()=>b.nr)))}),zA.apply(this,arguments)}function sF(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,Ee.Z)(function*(n,e,t=un()){const r=yield qm(n,bs(AA(e.bundledQuery))),s=lt(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=ei(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const g=r.withResumeToken(_i.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(g.targetId,g),s.Bs.updateTargetData(u,g).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),GA.apply(this,arguments)}function nO(n,e){return`firestore_clients_${n}_${e}`}function rO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function WA(n,e){return`firestore_targets_${n}_${e}`}class tb{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new Ve(s.error.code,s.error.message))),l?new tb(e,t,s.state,u):(qr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class z0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new Ve(r.error.code,r.error.message))),u?new z0(e,r.state,s):(qr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=yA();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=c(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new nb(e,u):(qr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qA{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qA(t.clientId,t.onlineState):(qr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class KA{constructor(){this.activeTargetIds=yA()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZA{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new wr(Qt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=nO(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new KA),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(nO(e.persistenceKey,s));if(u){const l=nb.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(WA(this.persistenceKey,e));if(r){const s=z0.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(WA(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=i.ct;if(null!=u)try{const g=JSON.parse(u);Mt("number"==typeof g),l=g}catch(g){qr("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);s!==i.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new tb(this.currentUser,e,t,r),u=rO(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=rO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=WA(this.persistenceKey,e),u=new z0(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return nb.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return tb.ar(new ci(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return z0.ar(s,t)}br(e){return qA.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{s.has(_)||l.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=yA();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class iO{constructor(){this.Hr=new KA,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new KA,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class oF{Yr(e){}shutdown(){}}class sO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rb=null;function YA(){return null===rb?rb=268435456+Math.round(2147483648*Math.random()):rb++,"0x"+rb.toString(16)}const aF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uF{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ss="WebChannelConnection";class cF extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=YA(),g=this.To(e,t);Ke("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,s,u),this.Ao(e,g,_,r).then(D=>(Ke("RestConnection",`Received RPC '${e}' ${l}: `,D),D),D=>{throw Cs("RestConnection",`RPC '${e}' ${l} failed with error: `,D,"url: ",g,"request:",r),D})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ru,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${aF[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=YA();return new Promise((l,g)=>{const _=new nc;_.setWithCredentials(!0),_.listenOnce(QM.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case fC.NO_ERROR:const b=_.getResponseJson();Ke(ss,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),l(b);break;case fC.TIMEOUT:Ke(ss,`RPC '${e}' ${u} timed out`),g(new Ve(he.DEADLINE_EXCEEDED,"Request time out"));break;case fC.HTTP_ERROR:const N=_.getStatus();if(Ke(ss,`RPC '${e}' ${u} failed with status:`,N,"response text:",_.getResponseText()),N>0){let $=_.getResponseJson();Array.isArray($)&&($=$[0]);const Q=$?.error;if(Q&&Q.status&&Q.message){const me=function(He){const We=He.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(We)>=0?We:he.UNKNOWN}(Q.status);g(new Ve(me,Q.message))}else g(new Ve(he.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new Ve(he.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Ke(ss,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(s);Ke(ss,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",D,r,15)})}Ro(e,t,r){const s=YA(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=JN(),g=XN(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(_.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(_.xmlHttpFactory=new JM({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const b=u.join("");Ke(ss,`Creating RPC '${e}' stream ${s}: ${b}`,_);const N=l.createWebChannel(b,_);let $=!1,Q=!1;const me=new uF({ro:We=>{Q?Ke(ss,`Not sending because RPC '${e}' stream ${s} is closed:`,We):($||(Ke(ss,`Opening RPC '${e}' stream ${s} transport.`),N.open(),$=!0),Ke(ss,`RPC '${e}' stream ${s} sending:`,We),N.send(We))},oo:()=>N.close()}),He=(We,nt,ht)=>{We.listen(nt,St=>{try{ht(St)}catch($t){setTimeout(()=>{throw $t},0)}})};return He(N,hf.EventType.OPEN,()=>{Q||Ke(ss,`RPC '${e}' stream ${s} transport opened.`)}),He(N,hf.EventType.CLOSE,()=>{Q||(Q=!0,Ke(ss,`RPC '${e}' stream ${s} transport closed`),me.wo())}),He(N,hf.EventType.ERROR,We=>{Q||(Q=!0,Cs(ss,`RPC '${e}' stream ${s} transport errored:`,We),me.wo(new Ve(he.UNAVAILABLE,"The operation could not be completed")))}),He(N,hf.EventType.MESSAGE,We=>{var nt;if(!Q){const ht=We.data[0];Mt(!!ht);const $t=ht.error||(null===(nt=ht[0])||void 0===nt?void 0:nt.error);if($t){Ke(ss,`RPC '${e}' stream ${s} received error:`,$t);const Rt=$t.status;let gn=function(pc){const Nk=li[pc];if(void 0!==Nk)return XR(Nk)}(Rt),Oi=$t.message;void 0===gn&&(gn=he.INTERNAL,Oi="Unknown error status: "+Rt+" with message "+$t.message),Q=!0,me.wo(new Ve(gn,Oi)),N.close()}else Ke(ss,`RPC '${e}' stream ${s} received:`,ht),me._o(ht)}}),He(g,xm.STAT_EVENT,We=>{We.stat===pC.PROXY?Ke(ss,`RPC '${e}' stream ${s} detected buffering proxy`):We.stat===pC.NOPROXY&&Ke(ss,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{me.fo()},0),me}}function oO(){return typeof window<"u"?window:null}function ib(){return typeof document<"u"?document:null}function G0(n){return new _2(n,!0)}class QA{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class aO{constructor(e,t,r,s,u,l,g,_){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new QA(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Ve(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lF extends aO{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function I2(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:_t(),s=e.targetChange.targetIds||[],u=function(_,D){return _.useProto3Json?(Mt(void 0===D||"string"==typeof D),_i.fromBase64String(D||"")):(Mt(void 0===D||D instanceof Uint8Array),_i.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const D=void 0===_.code?he.UNKNOWN:XR(_.code);return new Ve(D,_.message||"")}(l);t=new iP(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=ou(n,r.document.name),u=ei(r.document.updateTime),l=r.document.createTime?ei(r.document.createTime):At.min(),g=new Gi({mapValue:{fields:r.document.fields}}),_=xr.newFoundDocument(s,u,l,g);t=new $C(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=ou(n,r.document),u=r.readTime?ei(r.readTime):At.min(),l=xr.newNoDocument(s,u);t=new $C([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=ou(n,r.document);t=new $C([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return _t();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new f2(s,u);t=new rP(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return At.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?At.min():u.readTime?ei(u.readTime):At.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=k0(this.serializer),t.addTarget=function(s,u){let l;const g=u.target;if(l=OC(g)?{documents:pP(s,g)}:{query:MA(s,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=uP(s,u.resumeToken);const _=CA(s,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(At.min())>0){l.readTime=Hm(s,u.snapshotVersion.toTimestamp());const _=CA(s,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function C2(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=k0(this.serializer),t.removeTarget=e,this.Wo(t)}}class dF extends aO{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function D2(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,s){let u=ei(r.updateTime?r.updateTime:s);return u.isEqual(At.min())&&(u=ei(s)),new c2(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.cu(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=k0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>F0(this.serializer,r))};this.Wo(t)}}class hF extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Ve(he.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ve(he.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ve(he.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class pF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(qr(t),this.mu=!1):Ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class gF{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;ed(l)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(D){const b=lt(D);b.vu.add(4),yield Zm(b),b.bu.set("Unknown"),b.vu.delete(4),yield W0(b)}),function(D){return _.apply(this,arguments)})(l))}))}),this.bu=new pF(r,s)}}function W0(n){return XA.apply(this,arguments)}function XA(){return XA=(0,Ee.Z)(function*(n){if(ed(n))for(const e of n.Ru)yield e(!0)}),XA.apply(this,arguments)}function Zm(n){return e1.apply(this,arguments)}function e1(){return e1=(0,Ee.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),e1.apply(this,arguments)}function sb(n,e){const t=lt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),r1(t)?n1(t):Qm(t).Ko()&&t1(t,e))}function q0(n,e){const t=lt(n),r=Qm(t);t.Au.delete(e),r.Ko()&&uO(t,e),0===t.Au.size&&(r.Ko()?r.jo():ed(t)&&t.bu.set("Unknown"))}function t1(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qm(n).su(e)}function uO(n,e){n.Vu.qt(e),Qm(n).iu(e)}function n1(n){n.Vu=new g2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Qm(n).start(),n.bu.gu()}function r1(n){return ed(n)&&!Qm(n).Uo()&&n.Au.size>0}function ed(n){return 0===lt(n).vu.size}function cO(n){n.Vu=void 0}function mF(n){return i1.apply(this,arguments)}function i1(){return i1=(0,Ee.Z)(function*(n){n.Au.forEach((e,t)=>{t1(n,e)})}),i1.apply(this,arguments)}function yF(n,e){return s1.apply(this,arguments)}function s1(){return s1=(0,Ee.Z)(function*(n,e){cO(n),r1(n)?(n.bu.Iu(e),n1(n)):n.bu.set("Unknown")}),s1.apply(this,arguments)}function vF(n,e,t){return o1.apply(this,arguments)}function o1(){return o1=(0,Ee.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof iP&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(s,u){const l=u.cause;for(const g of u.targetIds)s.Au.has(g)&&(yield s.remoteSyncer.rejectListen(g,l),s.Au.delete(g),s.Vu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ob(n,r)}else if(e instanceof $C?n.Vu.Ht(e):e instanceof rP?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(At.min()))try{const r=yield QP(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=s.Au.get(_);D&&s.Au.set(_,D.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const D=s.Au.get(g);if(!D)return;s.Au.set(g,D.withResumeToken(_i.EMPTY_BYTE_STRING,D.snapshotVersion)),uO(s,g);const b=new lc(D.target,g,_,D.sequenceNumber);t1(s,b)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield ob(n,r)}var r}),o1.apply(this,arguments)}function ob(n,e,t){return a1.apply(this,arguments)}function a1(){return a1=(0,Ee.Z)(function*(n,e,t){if(!sc(e))throw e;n.vu.add(1),yield Zm(n),n.bu.set("Offline"),t||(t=()=>QP(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield W0(n)}))}),a1.apply(this,arguments)}function lO(n,e){return e().catch(t=>ob(n,t,e))}function Ym(n){return u1.apply(this,arguments)}function u1(){return u1=(0,Ee.Z)(function*(n){const e=lt(n),t=td(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;_F(e);)try{const s=yield rF(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,EF(e,s)}catch(s){yield ob(e,s)}dO(e)&&hO(e)}),u1.apply(this,arguments)}function _F(n){return ed(n)&&n.Eu.length<10}function EF(n,e){n.Eu.push(e);const t=td(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function dO(n){return ed(n)&&!td(n).Uo()&&n.Eu.length>0}function hO(n){td(n).start()}function wF(n){return c1.apply(this,arguments)}function c1(){return c1=(0,Ee.Z)(function*(n){td(n).hu()}),c1.apply(this,arguments)}function IF(n){return l1.apply(this,arguments)}function l1(){return l1=(0,Ee.Z)(function*(n){const e=td(n);for(const t of n.Eu)e.uu(t.mutations)}),l1.apply(this,arguments)}function DF(n,e,t){return d1.apply(this,arguments)}function d1(){return d1=(0,Ee.Z)(function*(n,e,t){const r=n.Eu.shift(),s=EA.from(r,e,t);yield lO(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Ym(n)}),d1.apply(this,arguments)}function CF(n,e){return h1.apply(this,arguments)}function h1(){return h1=(0,Ee.Z)(function*(n,e){var t;e&&td(n).ou&&(yield(t=(0,Ee.Z)(function*(r,s){if(JR(u=s.code)&&u!==he.ABORTED){const l=r.Eu.shift();td(r).Qo(),yield lO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Ym(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),dO(n)&&hO(n)}),h1.apply(this,arguments)}function fO(n,e){return f1.apply(this,arguments)}function f1(){return f1=(0,Ee.Z)(function*(n,e){const t=lt(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=ed(t);t.vu.add(3),yield Zm(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield W0(t)}),f1.apply(this,arguments)}function p1(n,e){return g1.apply(this,arguments)}function g1(){return g1=(0,Ee.Z)(function*(n,e){const t=lt(n);e?(t.vu.delete(2),yield W0(t)):e||(t.vu.add(2),yield Zm(t),t.bu.set("Unknown"))}),g1.apply(this,arguments)}function Qm(n){return n.Su||(n.Su=function(e,t,r){const s=lt(e);return s.fu(),new lF(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:mF.bind(null,n),ao:yF.bind(null,n),nu:vF.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Su.Qo(),r1(n)?n1(n):n.bu.set("Unknown")):(yield n.Su.stop(),cO(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function td(n){return n.Du||(n.Du=function(e,t,r){const s=lt(e);return s.fu(),new dF(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:wF.bind(null,n),ao:CF.bind(null,n),au:IF.bind(null,n),cu:DF.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Du.Qo(),yield Ym(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class m1{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,g=new m1(e,t,l,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(n,e){if(qr("AsyncQueue",`${e}: ${n}`),sc(n))return new Ve(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Xm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||at.comparator(t.key,r.key):(t,r)=>at.comparator(t.key,r.key),this.keyedMap=S0(),this.sortedSet=new wr(this.comparator)}static emptySet(e){return new Xm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class pO{constructor(){this.Cu=new wr(at.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):_t():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ey{constructor(e,t,r,s,u,l,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new ey(e,t,Xm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&b0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class bF{constructor(){this.Nu=void 0,this.listeners=[]}}class TF{constructor(){this.queries=new uc(e=>PR(e),b0),this.onlineState="Unknown",this.ku=new Set}}function y1(n,e){return v1.apply(this,arguments)}function v1(){return v1=(0,Ee.Z)(function*(n,e){const t=lt(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new bF),s)try{u.Nu=yield t.onListen(r)}catch(l){const g=Jm(l,`Initialization of query '${mA(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&w1(t)}),v1.apply(this,arguments)}function _1(n,e){return E1.apply(this,arguments)}function E1(){return E1=(0,Ee.Z)(function*(n,e){const t=lt(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),E1.apply(this,arguments)}function SF(n,e){const t=lt(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const g of l.listeners)g.$u(s)&&(r=!0);l.Nu=s}}r&&w1(t)}function MF(n,e,t){const r=lt(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function w1(n){n.ku.forEach(e=>{e.next()})}class I1{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new ey(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=ey.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class AF{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class gO{constructor(e){this.serializer=e}rr(e){return ou(this.serializer,e)}ur(e){return e.metadata.exists?fP(this.serializer,e.document,!1):xr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return ei(e)}}class xF{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mO(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=wn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new gO(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const g=(t.get(l)||un()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function iF(n,e,t,r){return zA.apply(this,arguments)}(e.localStore,new gO(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield sF(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function mO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class yO{constructor(e){this.key=e}}class vO{constructor(e){this.key=e}}class _O{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=un(),this.mutatedKeys=un(),this.tc=kR(e),this.ec=new Xm(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new pO,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((b,N)=>{const $=s.get(b),Q=T0(this.query,N)?N:null,me=!!$&&this.mutatedKeys.has($.key),He=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let We=!1;$&&Q?$.data.isEqual(Q.data)?me!==He&&(r.track({type:3,doc:Q}),We=!0):this.rc($,Q)||(r.track({type:2,doc:Q}),We=!0,(_&&this.tc(Q,_)>0||D&&this.tc(Q,D)<0)&&(g=!0)):!$&&Q?(r.track({type:0,doc:Q}),We=!0):$&&!Q&&(r.track({type:1,doc:$}),We=!0,(_||D)&&(g=!0)),We&&(Q?(l=l.add(Q),u=He?u.add(b):u.delete(b)):(l=l.delete(b),u=u.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,b)=>function(N,$){const Q=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return Q(N)-Q($)}(D.type,b.type)||this.tc(D.doc,b.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new ey(this.query,e.ec,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new pO,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=un(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new vO(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new yO(r))}),t}hc(e){this.Yu=e.ir,this.Zu=un();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return ey.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class NF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class RF{constructor(e){this.key=e,this.fc=!1}}class PF{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new uc(g=>PR(g),b0),this._c=new Map,this.mc=new Set,this.gc=new wr(at.comparator),this.yc=new Map,this.Ic=new FA,this.Tc={},this.Ec=new Map,this.Ac=Tf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function OF(n,e){return D1.apply(this,arguments)}function D1(){return D1=(0,Ee.Z)(function*(n,e){const t=W1(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield qm(t.localStore,bs(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield C1(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&sb(t.remoteStore,l)}return s}),D1.apply(this,arguments)}function C1(n,e,t,r,s){return b1.apply(this,arguments)}function b1(){return b1=(0,Ee.Z)(function*(n,e,t,r,s){n.Rc=(N,$,Q)=>{return(me=(0,Ee.Z)(function*(He,We,nt,ht){let St=We.view.sc(nt);St.zi&&(St=yield eb(He.localStore,We.query,!1).then(({documents:gn})=>We.view.sc(gn,St)));const $t=ht&&ht.targetChanges.get(We.targetId),Rt=We.view.applyChanges(St,He.isPrimaryClient,$t);return k1(He,We.targetId,Rt.cc),Rt.snapshot}),function(He,We,nt,ht){return me.apply(this,arguments)})(n,N,$,Q);var me};const u=yield eb(n.localStore,e,!0),l=new _O(e,u.ir),g=l.sc(u.documents),_=P0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=l.applyChanges(g,n.isPrimaryClient,_);k1(n,t,D.cc);const b=new NF(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),b1.apply(this,arguments)}function kF(n,e){return T1.apply(this,arguments)}function T1(){return T1=(0,Ee.Z)(function*(n,e){const t=lt(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!b0(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Km(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),q0(t.remoteStore,r.targetId),ty(t,r.targetId)}).catch(ic))):(ty(t,r.targetId),yield Km(t.localStore,r.targetId,!0))}),T1.apply(this,arguments)}function S1(){return S1=(0,Ee.Z)(function*(n,e,t){const r=q1(n);try{const s=yield function(u,l){const g=lt(u),_=mr.now(),D=l.reduce(($,Q)=>$.add(Q.key),un());let b,N;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Q=Hs(),me=un();return g.Zi.getEntries($,D).next(He=>{Q=He,Q.forEach((We,nt)=>{nt.isValidDocument()||(me=me.add(We))})}).next(()=>g.localDocuments.getOverlayedDocuments($,Q)).next(He=>{b=He;const We=[];for(const nt of l){const ht=d2(nt,b.get(nt.key).overlayedDocument);null!=ht&&We.push(new cc(nt.key,ht,_R(ht.value.mapValue),Fr.exists(!0)))}return g.mutationQueue.addMutationBatch($,_,We,l)}).next(He=>{N=He;const We=He.applyToLocalDocumentSet(b,me);return g.documentOverlayCache.saveOverlays($,He.batchId,We)})}).then(()=>({batchId:N.batchId,changes:LR(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new wr(Qt)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield dc(r,s.changes),yield Ym(r.remoteStore)}catch(s){const u=Jm(s,"Failed to persist write");t.reject(u)}}),S1.apply(this,arguments)}function EO(n,e){return M1.apply(this,arguments)}function M1(){return M1=(0,Ee.Z)(function*(n,e){const t=lt(n);try{const r=yield function nF(n,e){const t=lt(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const g=[];e.targetChanges.forEach((b,N)=>{const $=s.get(N);if(!$)return;g.push(t.Bs.removeMatchingKeys(u,b.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,b.addedDocuments,N)));let Q=$.withSequenceNumber(u.currentSequenceNumber);var me,He,We;null!==e.targetMismatches.get(N)?Q=Q.withResumeToken(_i.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):b.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(b.resumeToken,r)),s=s.insert(N,Q),He=Q,We=b,(0===(me=$).resumeToken.approximateByteSize()||He.snapshotVersion.toMicroseconds()-me.snapshotVersion.toMicroseconds()>=3e8||We.addedDocuments.size+We.modifiedDocuments.size+We.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,Q))});let _=Hs(),D=un();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),g.push(JP(u,l,e.documentUpdates).next(b=>{_=b.nr,D=b.sr})),!r.isEqual(At.min())){const b=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(b)}return ue.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(Mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?Mt(l.fc):s.removedDocuments.size>0&&(Mt(l.fc),l.fc=!1))}),yield dc(t,r,e)}catch(r){yield ic(r)}}),M1.apply(this,arguments)}function wO(n,e,t){const r=lt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&s.push(g.snapshot)}),function(u,l){const g=lt(u);g.onlineState=l;let _=!1;g.queries.forEach((D,b)=>{for(const N of b.listeners)N.Mu(l)&&(_=!0)}),_&&w1(g)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function LF(n,e,t){return A1.apply(this,arguments)}function A1(){return A1=(0,Ee.Z)(function*(n,e,t){const r=lt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new wr(at.comparator);l=l.insert(u,xr.newNoDocument(u,At.min()));const g=un().add(u),_=new R0(At.min(),new Map,new wr(Qt),l,g);yield EO(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),F1(r)}else yield Km(r.localStore,e,!1).then(()=>ty(r,e,t)).catch(ic)}),A1.apply(this,arguments)}function VF(n,e){return x1.apply(this,arguments)}function x1(){return x1=(0,Ee.Z)(function*(n,e){const t=lt(n),r=e.batch.batchId;try{const s=yield function tF(n,e){const t=lt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,D){const b=_.batch,N=b.keys();let $=ue.resolve();return N.forEach(Q=>{$=$.next(()=>D.getEntry(g,Q)).next(me=>{const He=_.docVersions.get(Q);Mt(null!==He),me.version.compareTo(He)<0&&(b.applyToRemoteDocument(me,_),me.isValidDocument()&&(me.setReadTime(_.commitVersion),D.addEntry(me)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(g,b))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=un();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);O1(t,r,null),P1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dc(t,s)}catch(s){yield ic(s)}}),x1.apply(this,arguments)}function UF(n,e,t){return N1.apply(this,arguments)}function N1(){return N1=(0,Ee.Z)(function*(n,e,t){const r=lt(n);try{const s=yield function(u,l){const g=lt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,l).next(b=>(Mt(null!==b),D=b.keys(),g.mutationQueue.removeMutationBatch(_,b))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);O1(r,e,t),P1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dc(r,s)}catch(s){yield ic(s)}}),N1.apply(this,arguments)}function R1(){return R1=(0,Ee.Z)(function*(n,e){const t=lt(n);ed(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=lt(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=Jm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),R1.apply(this,arguments)}function P1(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function O1(n,e,t){const r=lt(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function ty(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||IO(n,r)})}function IO(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(q0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),F1(n))}function k1(n,e,t){for(const r of t)r instanceof yO?(n.Ic.addReference(r.key,e),jF(n,r)):r instanceof vO?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||IO(n,r.key)):_t()}function jF(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),F1(n))}function F1(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new at(wn.fromString(e)),r=n.Ac.next();n.yc.set(r,new RF(t)),n.gc=n.gc.insert(t,r),sb(n.remoteStore,new lc(bs(Vm(t.path)),r,"TargetPurposeLimboResolution",i.ct))}}function dc(n,e,t){return L1.apply(this,arguments)}function L1(){return L1=(0,Ee.Z)(function*(n,e,t){const r=lt(n),s=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const b=jA.Li(_.targetId,D);u.push(b)}}))}),yield Promise.all(l),r.dc.nu(s),yield(g=(0,Ee.Z)(function*(_,D){const b=lt(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ue.forEach(D,$=>ue.forEach($.Fi,Q=>b.persistence.referenceDelegate.addReference(N,$.targetId,Q)).next(()=>ue.forEach($.Bi,Q=>b.persistence.referenceDelegate.removeReference(N,$.targetId,Q)))))}catch(N){if(!sc(N))throw N;Ke("LocalStore","Failed to update sequence numbers: "+N)}for(const N of D){const $=N.targetId;if(!N.fromCache){const Q=b.Ji.get($),He=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);b.Ji=b.Ji.insert($,He)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),L1.apply(this,arguments)}function $F(n,e){return V1.apply(this,arguments)}function V1(){return V1=(0,Ee.Z)(function*(n,e){const t=lt(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield YP(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new Ve(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dc(t,r.er)}var s}),V1.apply(this,arguments)}function HF(n,e){const t=lt(n),r=t.yc.get(e);if(r&&r.fc)return un().add(r.key);{let s=un();const u=t._c.get(e);if(!u)return s;for(const l of u){const g=t.wc.get(l);s=s.unionWith(g.view.nc)}return s}}function zF(n,e){return U1.apply(this,arguments)}function U1(){return U1=(0,Ee.Z)(function*(n,e){const t=lt(n),r=yield eb(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&k1(t,e.targetId,s.cc),s}),U1.apply(this,arguments)}function GF(n,e){return B1.apply(this,arguments)}function B1(){return B1=(0,Ee.Z)(function*(n,e){const t=lt(n);return eO(t.localStore,e).then(r=>dc(t,r))}),B1.apply(this,arguments)}function WF(n,e,t,r){return j1.apply(this,arguments)}function j1(){return j1=(0,Ee.Z)(function*(n,e,t,r){const s=lt(n),u=yield function(l,g){const _=lt(l),D=lt(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>D.Sn(b,g).next(N=>N?_.localDocuments.getDocuments(b,N):ue.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield Ym(s.remoteStore):"acknowledged"===t||"rejected"===t?(O1(s,e,r||null),P1(s,e),g=e,lt(lt(s.localStore).mutationQueue).Cn(g)):_t(),yield dc(s,u)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),j1.apply(this,arguments)}function $1(){return $1=(0,Ee.Z)(function*(n,e){const t=lt(n);if(W1(t),q1(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield DO(t,r.toArray());t.vc=!0,yield p1(t.remoteStore,!0);for(const u of s)sb(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(ty(t,l),Km(t.localStore,l,!0))),q0(t.remoteStore,l)}),yield s,yield DO(t,r),function(u){const l=lt(u);l.yc.forEach((g,_)=>{q0(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new wr(at.comparator)}(t),t.vc=!1,yield p1(t.remoteStore,!1)}}),$1.apply(this,arguments)}function DO(n,e,t){return H1.apply(this,arguments)}function H1(){return H1=(0,Ee.Z)(function*(n,e,t){const r=lt(n),s=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield qm(r.localStore,bs(_[0]));for(const D of _){const b=r.wc.get(D),N=yield zF(r,b);N.snapshot&&u.push(N.snapshot)}}else{const D=yield XP(r.localStore,l);g=yield qm(r.localStore,D),yield C1(r,CO(D),l,!1,g.resumeToken)}s.push(g)}return r.dc.nu(u),s}),H1.apply(this,arguments)}function CO(n){return NR(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function KF(n){const e=lt(n);return lt(lt(e.localStore).persistence).$i()}function ZF(n,e,t,r){return z1.apply(this,arguments)}function z1(){return z1=(0,Ee.Z)(function*(n,e,t,r){const s=lt(n);if(s.vc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield eO(s.localStore,OR(u[0])),g=R0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_i.EMPTY_BYTE_STRING);yield dc(s,l,g);break}case"rejected":yield Km(s.localStore,e,!0),ty(s,e,r);break;default:_t()}}),z1.apply(this,arguments)}function YF(n,e,t){return G1.apply(this,arguments)}function G1(){return G1=(0,Ee.Z)(function*(n,e,t){const r=W1(n);if(r.vc){for(const s of e){if(r._c.has(s)){Ke("SyncEngine","Adding an already active target "+s);continue}const u=yield XP(r.localStore,s),l=yield qm(r.localStore,u);yield C1(r,CO(u),l.targetId,!1,l.resumeToken),sb(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Km(r.localStore,s,!1).then(()=>{q0(r.remoteStore,s),ty(r,s)}).catch(ic))}}),G1.apply(this,arguments)}function W1(n){const e=lt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LF.bind(null,e),e.dc.nu=SF.bind(null,e.eventManager),e.dc.Pc=MF.bind(null,e.eventManager),e}function q1(n){const e=lt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UF.bind(null,e),e}class K0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=G0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ZP(this.persistence,new KP,e.initialUser,this.serializer)}createPersistence(e){return new LA(QC.zs,this.serializer)}createSharedClientState(e){return new iO}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class K1 extends K0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield q1(r.Vc.syncEngine),yield Ym(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ZP(this.persistence,new KP,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new UP(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new sR(t,this.persistence);return new sA(e.asyncQueue,r)}createPersistence(e){const t=BA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?is.withCacheSize(this.cacheSizeBytes):is.DEFAULT;return new UA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,oO(),ib(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new iO}}class bO extends K1{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof ZA&&(r.sharedClientState.syncEngine={jr:WF.bind(null,s),zr:ZF.bind(null,s),Wr:YF.bind(null,s),$i:KF.bind(null,s),Qr:GF.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ee.Z)(function*(l){yield function qF(n,e){return $1.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=oO();if(!ZA.D(t))throw new Ve(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ZA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ny{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>wO(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=$F.bind(null,r.syncEngine),yield p1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new TF}createDatastore(e){const t=G0(e.databaseInfo.databaseId),r=new cF(e.databaseInfo);return new hF(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>wO(this.syncEngine,g,0),l=sO.D()?new sO:new oF,new gF(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,g,_,D){const b=new PF(r,s,u,l,g,_);return D&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=lt(t);Ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Zm(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function TO(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ab{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class XF{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Xr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new AF(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ve(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ee.Z)(function*(u,l){const g=lt(u),_=k0(g.serializer)+"/documents",D={documents:l.map(Q=>O0(g.serializer,Q))},b=yield g.vo("BatchGetDocuments",_,D,l.length),N=new Map;b.forEach(Q=>{const me=function w2(n,e){return"found"in e?function(t,r){Mt(!!r.found);const s=ou(t,r.found.name),u=ei(r.found.updateTime),l=r.found.createTime?ei(r.found.createTime):At.min(),g=new Gi({mapValue:{fields:r.found.fields}});return xr.newFoundDocument(s,u,l,g)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const s=ou(t,r.missing),u=ei(r.readTime);return xr.newNoDocument(s,u)}(n,e):_t()}(g.serializer,Q);N.set(me.key.toString(),me)});const $=[];return l.forEach(Q=>{const me=N.get(Q.toString());Mt(!!me),$.push(me)}),$}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $m(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=at.fromPath(s);e.mutations.push(new vA(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(s,u){const l=lt(s),g=k0(l.serializer)+"/documents",_={writes:u.map(D=>F0(l.serializer,D))};yield l.Io("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _t();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?Fr.exists(!1):Fr.updateTime(t):Fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Ve(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fr.updateTime(t)}return Fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tL{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new QA(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const t=new eL(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!o(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!JR(t)}return!1}}class nL{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=ci.UNAUTHENTICATED,this.clientId=EC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(g){Ke("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Jm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function ub(n,e){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield YP(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Z1.apply(this,arguments)}function Y1(n,e){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield J1(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>fO(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>fO(e.remoteStore,u)),n._onlineComponents=e}),Q1.apply(this,arguments)}function SO(n){return"FirebaseError"===n.name?n.code===he.FAILED_PRECONDITION||n.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function J1(n){return X1.apply(this,arguments)}function X1(){return X1=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ub(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!SO(t))throw t;Cs("Error using user provided cache. Falling back to memory cache: "+t),yield ub(n,new K0)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield ub(n,new K0);return n._offlineComponents}),X1.apply(this,arguments)}function cb(n){return ex.apply(this,arguments)}function ex(){return ex=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield Y1(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield Y1(n,new ny))),n._onlineComponents}),ex.apply(this,arguments)}function MO(n){return J1(n).then(e=>e.persistence)}function lb(n){return J1(n).then(e=>e.localStore)}function AO(n){return cb(n).then(e=>e.remoteStore)}function tx(n){return cb(n).then(e=>e.syncEngine)}function ry(n){return nx.apply(this,arguments)}function nx(){return nx=(0,Ee.Z)(function*(n){const e=yield cb(n),t=e.eventManager;return t.onListen=OF.bind(null,e.syncEngine),t.onUnlisten=kF.bind(null,e.syncEngine),t}),nx.apply(this,arguments)}function NO(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,g,_){const D=new ab({next:N=>{u.enqueueAndForget(()=>_1(s,b));const $=N.docs.has(l);!$&&N.fromCache?_.reject(new Ve(he.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&g&&"server"===g.source?_.reject(new Ve(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(N)},error:N=>_.reject(N)}),b=new I1(Vm(l.path),D,{includeMetadataChanges:!0,Ku:!0});return y1(s,b)}(yield ry(n),n.asyncQueue,e,t,r)})),r.promise}function RO(n,e,t={}){const r=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,g,_){const D=new ab({next:N=>{u.enqueueAndForget(()=>_1(s,b)),N.fromCache&&"server"===g.source?_.reject(new Ve(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),b=new I1(l,D,{includeMetadataChanges:!0,Ku:!0});return y1(s,b)}(yield ry(n),n.asyncQueue,e,t,r)})),r.promise}function PO(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const OO=new Map;function rx(n,e,t){if(!t)throw new Ve(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kO(n,e,t,r){if(!0===e&&!0===r)throw new Ve(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FO(n){if(!at.isDocumentKey(n))throw new Ve(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LO(n){if(at.isDocumentKey(n))throw new Ve(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function db(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_t()}function Dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=db(n);throw new Ve(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VO(n,e){if(e<=0)throw new Ve(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class UO{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ve(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ve(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=PO(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ve(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ve(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ve(he.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Z0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UO({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ve(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ve(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UO(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new yC;switch(t.type){case"firstParty":return new m0(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ve(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=OO.get(e);t&&(Ke("ComponentProvider","Removing Datastore"),OO.delete(e),t.terminate())}(this),Promise.resolve()}}class Nr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nr(this.firestore,e,this._key)}}class Wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class au extends Wi{constructor(e,t,r){super(e,t,Vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nr(this.firestore,null,new at(e))}withConverter(e){return new au(this.firestore,e,this._path)}}function jO(n,e,...t){if(n=(0,En.m9)(n),rx("collection","path",e),n instanceof Z0){const r=wn.fromString(e,...t);return LO(r),new au(n,null,r)}{if(!(n instanceof Nr||n instanceof au))throw new Ve(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return LO(r),new au(n.firestore,null,r)}}function hb(n,e,...t){if(n=(0,En.m9)(n),1===arguments.length&&(e=EC.A()),rx("doc","path",e),n instanceof Z0){const r=wn.fromString(e,...t);return FO(r),new Nr(n,null,new at(r))}{if(!(n instanceof Nr||n instanceof au))throw new Ve(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(wn.fromString(e,...t));return FO(r),new Nr(n.firestore,n instanceof au?n.converter:null,new at(r))}}function $O(n,e){return n=(0,En.m9)(n),e=(0,En.m9)(e),(n instanceof Nr||n instanceof au)&&(e instanceof Nr||e instanceof au)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ix(n,e){return n=(0,En.m9)(n),e=(0,En.m9)(e),n instanceof Wi&&e instanceof Wi&&n.firestore===e.firestore&&b0(n._query,e._query)&&n.converter===e.converter}class hL{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new QA(this,"async_queue_retry"),this.Xc=()=>{const t=ib();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=ib();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=ib();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Xr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!sc(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,qr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=m1.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&_t()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function sx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class fL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rr extends Z0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new hL,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||HO(this),this._firestoreClient.terminate()}}function ti(n){return n._firestoreClient||HO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function HO(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zk(n._databaseId,g,n._persistenceKey,(D=s).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,PO(D.experimentalLongPollingOptions),D.useFetchStreams));var g,D;n._firestoreClient=new nL(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function zO(n,e,t){const r=new Xr;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield ub(n,t),yield Y1(n,e),r.resolve()}catch(s){const u=s;if(!SO(u))throw u;Cs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function GO(n){if(n._initialized||n._terminated)throw new Ve(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uu(_i.fromBase64String(e))}catch(t){throw new Ve(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uu(_i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ve(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mf{constructor(e){this._methodName=e}}class fb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}const CL=/^__.*__$/;class bL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cc(e,this.data,this.fieldMask,t,this.fieldTransforms):new jm(e,this.data,t,this.fieldTransforms)}}class WO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function qO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class pb{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new pb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return yb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(qO(this.ca)&&CL.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class TL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||G0(e)}ya(e,t,r,s=!1){return new pb({ca:e,methodName:t,ga:r,path:Mr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Af(n){const e=n._freezeSettings(),t=G0(n._databaseId);return new TL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gb(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);cx("Data must be an object, but it was:",l,r);const g=YO(r,l);let _,D;if(u.merge)_=new $s(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const b=[];for(const N of u.mergeFields){const $=J0(e,N,t);if(!l.contains($))throw new Ve(he.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);JO(b,$)||b.push($)}_=new $s(b),D=l.fieldTransforms.filter(N=>_.covers(N.field))}else _=null,D=l.fieldTransforms;return new bL(new Gi(g),_,D)}class Q0 extends Mf{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Q0}}function KO(n,e,t){return new pb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ox extends Mf{_toFieldTransform(e){return new A0(e.path,new Um)}isEqual(e){return e instanceof ox}}class SL extends Mf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=KO(this,e,!0),r=this.pa.map(u=>xf(u,t)),s=new _f(r);return new A0(e.path,s)}isEqual(e){return this===e}}class ML extends Mf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=KO(this,e,!0),r=this.pa.map(u=>xf(u,t)),s=new Ef(r);return new A0(e.path,s)}isEqual(e){return this===e}}class AL extends Mf{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Bm(e.serializer,jR(e.serializer,this.Ia));return new A0(e.path,t)}isEqual(e){return this===e}}function ax(n,e,t,r){const s=n.ya(1,e,t);cx("Data must be an object, but it was:",s,r);const u=[],l=Gi.empty();Hl(r,(_,D)=>{const b=mb(e,_,t);D=(0,En.m9)(D);const N=s.da(b);if(D instanceof Q0)u.push(b);else{const $=xf(D,N);null!=$&&(u.push(b),l.set(b,$))}});const g=new $s(u);return new WO(l,g,s.fieldTransforms)}function ux(n,e,t,r,s,u){const l=n.ya(1,e,t),g=[J0(e,r,t)],_=[s];if(u.length%2!=0)throw new Ve(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(J0(e,u[$])),_.push(u[$+1]);const D=[],b=Gi.empty();for(let $=g.length-1;$>=0;--$)if(!JO(D,g[$])){const Q=g[$];let me=_[$];me=(0,En.m9)(me);const He=l.da(Q);if(me instanceof Q0)D.push(Q);else{const We=xf(me,He);null!=We&&(D.push(Q),b.set(Q,We))}}const N=new $s(D);return new WO(b,N,l.fieldTransforms)}function ZO(n,e,t,r=!1){return xf(t,n.ya(r?4:3,e))}function xf(n,e){if(QO(n=(0,En.m9)(n)))return cx("Unsupported field value:",e,n),YO(n,e);if(n instanceof Mf)return function(t,r){if(!qO(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let g=xf(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,En.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return jR(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=mr.fromDate(t);return{timestampValue:Hm(r.serializer,s)}}if(t instanceof mr){const s=new mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Hm(r.serializer,s)}}if(t instanceof fb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uu)return{bytesValue:uP(r.serializer,t._byteString)};if(t instanceof Nr){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${db(t)}`)}(n,e)}function YO(n,e){const t={};return lR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hl(n,(r,s)=>{const u=xf(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function QO(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mr||n instanceof fb||n instanceof uu||n instanceof Nr||n instanceof Mf)}function cx(n,e,t){if(!QO(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=db(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function J0(n,e,t){if((e=(0,En.m9)(e))instanceof hc)return e._internalPath;if("string"==typeof e)return mb(n,e);throw yb("Field path arguments must be of type string or ",n,!1,void 0,t)}const xL=new RegExp("[~\\*/\\[\\]]");function mb(n,e,t){if(e.search(xL)>=0)throw yb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hc(...e.split("."))._internalPath}catch{throw yb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yb(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${s}`),_+=")"),new Ve(he.INVALID_ARGUMENT,g+n+_)}function JO(n,e){return n.some(t=>t.isEqual(e))}class X0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Nr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new NL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class NL extends X0{data(){return super.data()}}function vb(n,e){return"string"==typeof e?mb(n,e):e instanceof hc?e._internalPath:e._delegate._internalPath}function XO(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lx{}class eE extends lx{}function nd(n,e,...t){let r=[];e instanceof lx&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof iy).length,l=s.filter(g=>g instanceof tE).length;if(u>1||u>0&&l>0)throw new Ve(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class tE extends eE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tE(e,t,r)}_apply(e){const t=this._parse(e);return rk(e._query,t),new Wi(e.firestore,e.converter,gA(e._query,t))}_parse(e){const t=Af(e.firestore);return function(s,u,l,g,_,D,b){let N;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ve(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){nk(b,D);const $=[];for(const Q of b)$.push(tk(g,s,Q));N={arrayValue:{values:$}}}else N=tk(g,s,b)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||nk(b,D),N=ZO(l,"where",b,"in"===D||"not-in"===D);return In.create(_,D,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class iy extends lx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new iy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Jn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const g of l)rk(u,g),u=gA(u,g)}(e._query,t),new Wi(e.firestore,e.converter,gA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class dx extends eE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new dx(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Ve(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ve(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Fm(s,u);return function(g,_){if(null===fA(g)){const D=FC(g);null!==D&&ik(0,D,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new Wi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new ac(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class _b extends eE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new _b(e,t,r)}_apply(e){return new Wi(e.firestore,e.converter,LC(e._query,this._limit,this._limitType))}}class Eb extends eE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Eb(e,t,r)}_apply(e){const t=ek(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(s=t,new ac((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class wb extends eE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new wb(e,t,r)}_apply(e){const t=ek(e,this.type,this._docOrFields,this._inclusive);return new Wi(e.firestore,e.converter,(s=t,new ac((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function ek(n,e,t,r){if(t[0]=(0,En.m9)(t[0]),t[0]instanceof X0)return function(s,u,l,g,_){if(!g)throw new Ve(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const b of vf(s))if(b.field.isKeyField())D.push(mf(u,g.key));else{const N=g.data.field(b.field);if(AC(N))throw new Ve(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=b.field.canonicalString();throw new Ve(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}D.push(N)}return new Zl(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Af(n.firestore);return function(u,l,g,_,D,b){const N=u.explicitOrderBy;if(D.length>N.length)throw new Ve(he.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Q=0;Q<D.length;Q++){const me=D[Q];if(N[Q].field.isKeyField()){if("string"!=typeof me)throw new Ve(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof me}`);if(!pA(u)&&-1!==me.indexOf("/"))throw new Ve(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${me}' contains a slash.`);const He=u.path.child(wn.fromString(me));if(!at.isDocumentKey(He))throw new Ve(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${He}' is not because it contains an odd number of segments.`);const We=new at(He);$.push(mf(l,We))}else{const He=ZO(g,_,me);$.push(He)}}return new Zl($,b)}(n._query,n.firestore._databaseId,s,e,t,r)}}function tk(n,e,t){if("string"==typeof(t=(0,En.m9)(t))){if(""===t)throw new Ve(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pA(e)&&-1!==t.indexOf("/"))throw new Ve(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(wn.fromString(t));if(!at.isDocumentKey(r))throw new Ve(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mf(n,new at(r))}if(t instanceof Nr)return mf(n,t._key);throw new Ve(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${db(t)}.`)}function nk(n,e){if(!Array.isArray(n)||0===n.length)throw new Ve(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rk(n,e){if(e.isInequality()){const r=FC(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Ve(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=fA(n);null!==u&&ik(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ve(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ik(n,e,t){if(!t.isEqual(e))throw new Ve(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class hx{convertValue(e,t="none"){switch(ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _t()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Hl(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new fb(Kr(e.latitude),Kr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(E0(e));default:return null}}convertTimestamp(e){const t=zl(e);return new mr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=wn.fromString(e);Mt(vP(r));const s=new Gl(r.get(1),r.get(3)),u=new at(r.popFirst(5));return s.isEqual(t)||qr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Ib(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class BL extends hx{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,t)}}class Nf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fc extends X0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class nE extends fc{data(e={}){return super.data(e)}}class rd{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Nf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new nE(this._firestore,this._userDataWriter,r.key,r,new Nf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new nE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Nf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const g=new nE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Nf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:$L(l.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $L(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function ok(n,e){return n instanceof fc&&e instanceof fc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rd&&e instanceof rd&&n._firestore===e._firestore&&ix(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class id extends hx{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nr(this.firestore,null,t)}}function ak(n,e,t){n=Dn(n,Nr);const r=Dn(n.firestore,Rr),s=Ib(n.converter,e,t);return sy(r,[gb(Af(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,Fr.none())])}function uk(n,e,t,...r){n=Dn(n,Nr);const s=Dn(n.firestore,Rr),u=Af(s);let l;return l="string"==typeof(e=(0,En.m9)(e))||e instanceof hc?ux(u,"updateDoc",n._key,e,t,r):ax(u,"updateDoc",n._key,e),sy(s,[l.toMutation(n._key,Fr.exists(!0))])}function ck(n,...e){var t,r,s;n=(0,En.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||sx(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(sx(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let _,D,b;if(n instanceof Nr)D=Dn(n.firestore,Rr),b=Vm(n._key.path),_={next:N=>{e[l]&&e[l](fx(D,n,N))},error:e[l+1],complete:e[l+2]};else{const N=Dn(n,Wi);D=Dn(N.firestore,Rr),b=N._query;const $=new id(D);_={next:Q=>{e[l]&&e[l](new rd(D,$,N,Q))},error:e[l+1],complete:e[l+2]},XO(n._query)}return function(N,$,Q,me){const He=new ab(me),We=new I1($,He,Q);return N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return y1(yield ry(N),We)})),()=>{He.Dc(),N.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return _1(yield ry(N),We)}))}}(ti(D),b,g,_)}function sy(n,e){return function(t,r){const s=new Xr;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function FF(n,e,t){return S1.apply(this,arguments)}(yield tx(t),r,s)})),s.promise}(ti(n),e)}function fx(n,e,t){const r=t.docs.get(e._key),s=new id(n);return new fc(n,s,e._key,r,new Nf(t.hasPendingWrites,t.fromCache),e.converter)}const oV={maxAttempts:5};class lk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Af(e)}set(e,t,r){this._verifyNotCommitted();const s=sd(e,this._firestore),u=Ib(s.converter,t,r),l=gb(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,Fr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=sd(e,this._firestore);let l;return l="string"==typeof(t=(0,En.m9)(t))||t instanceof hc?ux(this._dataReader,"WriteBatch.update",u._key,t,r,s):ax(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sd(e,this._firestore);return this._mutations=this._mutations.concat(new $m(t._key,Fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sd(n,e){if((n=(0,En.m9)(n)).firestore!==e)throw new Ve(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class aV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Af(e)}get(e){const t=sd(e,this._firestore),r=new BL(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return _t();const u=s[0];if(u.isFoundDocument())return new X0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new X0(this._firestore,r,t._key,null,t.converter);throw _t()})}set(e,t,r){const s=sd(e,this._firestore),u=Ib(s.converter,t,r),l=gb(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=sd(e,this._firestore);let l;return l="string"==typeof(t=(0,En.m9)(t))||t instanceof hc?ux(this._dataReader,"Transaction.update",u._key,t,r,s):ax(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=sd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sd(e,this._firestore),r=new id(this._firestore);return super.get(e).then(s=>new fc(this._firestore,r,t._key,s._document,new Nf(!1,!1),t.converter))}}function px(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hk(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function fk(){if(!function $k(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ru=Ha.SDK_VERSION,(0,Ha._registerComponent)(new al.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Rr(new tR(t.getProvider("auth-internal")),new eA(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Ve(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gl(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,Ha.registerVersion)(Nm,"3.12.2",n),(0,Ha.registerVersion)(Nm,"3.12.2","esm2017")}();class rE{constructor(e){this._delegate=e}static fromBase64String(e){return fk(),new rE(uu.fromBase64String(e))}static fromUint8Array(e){return hk(),new rE(uu.fromUint8Array(e))}toBase64(){return fk(),this._delegate.toBase64()}toUint8Array(){return hk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gx(n){return function mV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yV{enableIndexedDbPersistence(e,t){return function gL(n,e){GO(n=Dn(n,Rr));const t=ti(n);if(t._uninitializedComponentsProvider)throw new Ve(he.FAILED_PRECONDITION,"SDK cache is already specified.");Cs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new ny;return zO(t,s,new K1(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function mL(n){GO(n=Dn(n,Rr));const e=ti(n);if(e._uninitializedComponentsProvider)throw new Ve(he.FAILED_PRECONDITION,"SDK cache is already specified.");Cs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new ny;return zO(e,r,new bO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yL(n){if(n._initialized&&!n._terminated)throw new Ve(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!Wo.D())return Promise.resolve();const s=r+"main";yield Wo.delete(s)}),function(r){return t.apply(this,arguments)})(BA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Gl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Cs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function BO(n,e,t,r={}){var s;const u=(n=Dn(n,Z0))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=ci.MOCK_USER;else{g=(0,En.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new Ve(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new ci(D)}n._authCredentials=new g0(new mC(g,_))}}(this._delegate,e,t,r)}enableNetwork(){return function _L(n){return function rL(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield MO(n),t=yield AO(n);return e.setNetworkEnabled(!0),function(r){const s=lt(r);return s.vu.delete(0),W0(s)}(t)}))}(ti(n=Dn(n,Rr)))}(this._delegate)}disableNetwork(){return function EL(n){return function iL(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield MO(n),t=yield AO(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(s){const u=lt(s);u.vu.add(0),yield Zm(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(ti(n=Dn(n,Rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vL(n){return function(e){const t=new Xr;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function BF(n,e){return R1.apply(this,arguments)}(yield tx(e),t)})),t.promise}(ti(n=Dn(n,Rr)))}(this._delegate)}onSnapshotsInSync(e){return function QL(n,e){return function aL(n,e){const t=new ab(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield ry(n),s=t,lt(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield ry(n),s=t,void lt(r).ku.delete(s);var r,s}))}}(ti(n=Dn(n,Rr)),sx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oy(this,jO(this._delegate,e))}catch(t){throw Ts(t,"collection()","Firestore.collection()")}}doc(e){try{return new qo(this,hb(this._delegate,e))}catch(t){throw Ts(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function dL(n,e){if(n=Dn(n,Z0),rx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wi(n,null,(t=e,new ac(wn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ts(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function uV(n,e,t){n=Dn(n,Rr);const r=Object.assign(Object.assign({},oV),t);return function(s){if(s.maxAttempts<1)throw new Ve(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const g=new Xr;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const _=yield function xO(n){return cb(n).then(e=>e.datastore)}(s);new tL(s.asyncQueue,_,l,u,g).run()})),g.promise}(ti(n),s=>e(new aV(n,s)),r)}(this._delegate,t=>e(new gk(this,t)))}batch(){return ti(this._delegate),new mk(new lk(this._delegate,e=>sy(this._delegate,e)))}loadBundle(e){return function wL(n,e){const t=ti(n=Dn(n,Rr)),r=new fL;return function uL(n,e,t,r){const s=function(u,l){let g;return g="string"==typeof u?eP().encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return TO(_,D);if(_ instanceof ArrayBuffer)return TO(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new XF(_,l);var _}(t,G0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function QF(n,e,t){const r=lt(n);var s;(s=(0,Ee.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function($,Q){const me=lt($),He=ei(Q.createTime);return me.persistence.runTransaction("hasNewerBundle","readonly",We=>me.qs.getBundleMetadata(We,Q.id)).then(We=>!!We&&We.createTime.compareTo(He)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:($=_).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(mO(_));const D=new xF(_,u.localStore,l.serializer);let b=yield l.bc();for(;b;){const $=yield D.zu(b);$&&g._updateProgress($),b=yield l.bc()}const N=yield D.complete();return yield dc(u,N.Ju,void 0),yield function($,Q){const me=lt($);return me.persistence.runTransaction("Save bundle","readwrite",He=>me.qs.saveBundleMetadata(He,Q))}(u.localStore,_),g._completeWith(N.progress),Promise.resolve(N.Hu)}catch(_){return Cs("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var $}),function(u,l,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield tx(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function IL(n,e){return function cL(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const s=lt(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield lb(n),e)}))}(ti(n=Dn(n,Rr)),e).then(t=>t?new Wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class Db extends hx{constructor(e){super(),this.firestore=e}convertBytes(e){return new rE(new uu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return qo.forKey(t,this.firestore,null)}}class gk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}get(e){const t=Pf(e);return this._delegate.get(t).then(r=>new iE(this._firestore,new fc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Pf(e);return r?(px("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pf(e);return this._delegate.delete(t),this}}class mk{constructor(e){this._delegate=e}set(e,t,r){const s=Pf(e);return r?(px("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new nE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Rf.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Rf(e,new Db(e),t),s.set(t,u)),u}}Rf.INSTANCES=new WeakMap;class qo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new qo(t,new Nr(t._delegate,r,new at(e)))}static forKey(e,t,r){return new qo(t,new Nr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oy(this.firestore,jO(this._delegate,e))}catch(t){throw Ts(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,En.m9)(e))instanceof Nr&&$O(this._delegate,e)}set(e,t){t=px("DocumentReference.set",t);try{return t?ak(this._delegate,e,t):ak(this._delegate,e)}catch(r){throw Ts(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?uk(this._delegate,e):uk(this._delegate,e,t,...r)}catch(s){throw Ts(s,"updateDoc()","DocumentReference.update()")}}delete(){return function ZL(n){return sy(Dn(n.firestore,Rr),[new $m(n._key,Fr.none())])}(this._delegate)}onSnapshot(...e){const t=yk(e),r=vk(e,s=>new iE(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return ck(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function zL(n){n=Dn(n,Nr);const e=Dn(n.firestore,Rr),t=ti(e),r=new id(e);return function sL(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const g=yield function(_,D){const b=lt(_);return b.persistence.runTransaction("read document","readonly",N=>b.localDocuments.getDocument(N,D))}(s,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Ve(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Jm(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield lb(n),e,t);var r})),t.promise}(t,n._key).then(s=>new fc(e,r,n._key,s,new Nf(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function GL(n){n=Dn(n,Nr);const e=Dn(n.firestore,Rr);return NO(ti(e),n._key,{source:"server"}).then(t=>fx(e,n,t))}(this._delegate):function HL(n){n=Dn(n,Nr);const e=Dn(n.firestore,Rr);return NO(ti(e),n._key).then(t=>fx(e,n,t))}(this._delegate),t.then(r=>new iE(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new qo(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}function Ts(n,e,t){return n.message=n.message.replace(e,t),n}function yk(n){for(const e of n)if("object"==typeof e&&!gx(e))return e;return{}}function vk(n,e){var t,r;let s;return s=gx(n[0])?n[0]:gx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class iE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new qo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ok(this._delegate,e._delegate)}}class sE extends iE{data(e){const t=this._delegate.data(e);return function XM(n,e){n||_t()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}where(e,t,r){try{return new Ss(this.firestore,nd(this._delegate,function RL(n,e,t){const r=e,s=vb("where",n);return tE._create(s,r,t)}(e,t,r)))}catch(s){throw Ts(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,nd(this._delegate,function PL(n,e="asc"){const t=e,r=vb("orderBy",n);return dx._create(r,t)}(e,t)))}catch(r){throw Ts(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,nd(this._delegate,function OL(n){return VO("limit",n),_b._create("limit",n,"F")}(e)))}catch(t){throw Ts(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,nd(this._delegate,function kL(n){return VO("limitToLast",n),_b._create("limitToLast",n,"L")}(e)))}catch(t){throw Ts(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,nd(this._delegate,function FL(...n){return Eb._create("startAt",n,!0)}(...e)))}catch(t){throw Ts(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,nd(this._delegate,function LL(...n){return Eb._create("startAfter",n,!1)}(...e)))}catch(t){throw Ts(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,nd(this._delegate,function VL(...n){return wb._create("endBefore",n,!1)}(...e)))}catch(t){throw Ts(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,nd(this._delegate,function UL(...n){return wb._create("endAt",n,!0)}(...e)))}catch(t){throw Ts(t,"endAt()","Query.endAt()")}}isEqual(e){return ix(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function qL(n){n=Dn(n,Wi);const e=Dn(n.firestore,Rr),t=ti(e),r=new id(e);return function oL(n,e){const t=new Xr;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const g=yield eb(s,u,!0),_=new _O(u,g.ir),D=_.sc(g.documents),b=_.applyChanges(D,!1);l.resolve(b.snapshot)}catch(g){const _=Jm(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield lb(n),e,t);var r})),t.promise}(t,n._query).then(s=>new rd(e,r,n,s))}(this._delegate):"server"===e?.source?function KL(n){n=Dn(n,Wi);const e=Dn(n.firestore,Rr),t=ti(e),r=new id(e);return RO(t,n._query,{source:"server"}).then(s=>new rd(e,r,n,s))}(this._delegate):function WL(n){n=Dn(n,Wi);const e=Dn(n.firestore,Rr),t=ti(e),r=new id(e);return XO(n._query),RO(t,n._query).then(s=>new rd(e,r,n,s))}(this._delegate),t.then(r=>new mx(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=yk(e),r=vk(e,s=>new mx(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return ck(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}class _V{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new sE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new sE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new _V(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new sE(this._firestore,r))})}isEqual(e){return ok(this._delegate,e._delegate)}}class oy extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new qo(this.firestore,e):null}doc(e){try{return new qo(this.firestore,void 0===e?hb(this._delegate):hb(this._delegate,e))}catch(t){throw Ts(t,"doc()","CollectionReference.doc()")}}add(e){return function YL(n,e){const t=Dn(n.firestore,Rr),r=hb(n),s=Ib(n.converter,e);return sy(t,[gb(Af(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,Fr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new qo(this.firestore,t))}isEqual(e){return $O(this._delegate,e._delegate)}withConverter(e){return new oy(this.firestore,this._delegate.withConverter(e?Rf.getInstance(this.firestore,e):null))}}function Pf(n){return Dn(n,Nr)}class yx{constructor(...e){this._delegate=new hc(...e)}static documentId(){return new yx(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,En.m9)(e))instanceof hc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Of{constructor(e){this._delegate=e}static serverTimestamp(){const e=function lV(){return new ox("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Of(e)}static delete(){const e=function cV(){return new Q0("deleteField")}();return e._methodName="FieldValue.delete",new Of(e)}static arrayUnion(...e){const t=function dV(...n){return new SL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Of(t)}static arrayRemove(...e){const t=function hV(...n){return new ML("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Of(t)}static increment(e){const t=function fV(n){return new AL("increment",n)}(e);return t._methodName="FieldValue.increment",new Of(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const EV={Firestore:pk,GeoPoint:fb,Timestamp:mr,Blob:rE,Transaction:gk,WriteBatch:mk,DocumentReference:qo,DocumentSnapshot:iE,Query:Ss,QueryDocumentSnapshot:sE,QuerySnapshot:mx,CollectionReference:oy,FieldPath:yx,FieldValue:Of,setLogLevel:function vV(n){!function eR(n){Go.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function _k(n,e){return function DV(n,e=IM.z){return new ns.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function vx(n,e){return _k(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function Cb(n,e){return vx(n,e).pipe(rs(void 0),$h(),(0,yt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=s.find(b=>b.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function Ek(n,e,t){return Cb(n,t).pipe(xo((r,s)=>function bV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function TV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _x(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _x(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _x(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),Gu(),(0,yt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function _x(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function wk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function IV(n){(function wV(n,e){n.INTERNAL.registerComponent(new al.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},EV)))})(n,(e,t)=>new pk(e,t,new yV)),n.registerVersion("@firebase/firestore-compat","0.3.11")}(HN.Z);class Ik{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Cb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(rs(void 0),$h(),Qn(([r,s])=>s.length>0||!r),(0,yt.U)(([r,s])=>s),hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wk(e);return Ek(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return vx(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),hn.iC)}get(e){return(0,cr.D)(this.query.get(e)).pipe(hn.iC)}add(e){return this.ref.add(e)}doc(e){return new Dk(this.ref.doc(e),this.afs)}}class Dk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=Ck(r,t);return new Ik(s,u,this.afs)}snapshotChanges(){return function CV(n,e){return _k(n,e).pipe(rs(void 0),$h(),(0,yt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,cr.D)(this.ref.get(e)).pipe(hn.iC)}}class SV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Cb(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Qn(t=>t.length>0),hn.iC):Cb(this.query,this.afs.schedulers.outsideAngular).pipe(hn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=wk(e);return Ek(this.query,t,this.afs.schedulers.outsideAngular).pipe(hn.iC)}valueChanges(e={}){return vx(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),hn.iC)}get(e){return(0,cr.D)(this.query.get(e)).pipe(hn.iC)}}const MV=new h.OlP("angularfire2.enableFirestorePersistence"),AV=new h.OlP("angularfire2.firestore.persistenceSettings"),xV=new h.OlP("angularfire2.firestore.settings"),NV=new h.OlP("angularfire2.firestore.use-emulator");function Ck(n,e=(t=>t)){return{query:e(n),ref:n}}let RV=(()=>{class n{constructor(t,r,s,u,l,g,_,D,b,N,$,Q,me,He,We,nt,ht){this.schedulers=_;const St=(0,uo.on)(t,g,r),$t=b;N&&pD(St,g,$,me,He,We,Q,nt),[this.firestore,this.persistenceEnabled$]=(0,uo.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const Rt=g.runOutsideAngular(()=>St.firestore());if(u&&Rt.settings(u),$t&&Rt.useEmulator(...$t),s&&!Ns(l)){const gn=()=>{try{return(0,cr.D)(Rt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Oi){return typeof console<"u"&&console.warn(Oi),Tt(!1)}};return[Rt,g.runOutsideAngular(gn)]}return[Rt,Tt(!1)]},[u,$t,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=Ck(s,r),g=this.schedulers.ngZone.run(()=>u);return new Ik(g,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new SV(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new Dk(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(uo.Dh),h.LFG(uo.xv,8),h.LFG(MV,8),h.LFG(xV,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(hn.HU),h.LFG(AV,8),h.LFG(NV,8),h.LFG(T_,8),h.LFG(hD,8),h.LFG(fD,8),h.LFG(Lg,8),h.LFG(Vg,8),h.LFG(b_,8),h.LFG(Ug,8),h.LFG(wh,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Ex=(()=>{class n{constructor(t,r){this.afAuth=t,this.afs=r,this.afAuth.authState.subscribe(s=>{s?(this.userData=s,localStorage.setItem("fire.user",JSON.stringify(this.userData))):localStorage.setItem("fire.user","null")})}get isLoggedIn(){const t=localStorage.getItem("fire.user"),r=JSON.parse(t||"null");return null!==r&&!1!==r.emailVerified}GoogleAuth(){return this.AuthLogin(new Ih.V).then(t=>{})}getToken(){var t=this;return(0,Ee.Z)(function*(){return yield(yield t.afAuth.currentUser)?.getIdToken(!1)})()}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("fire.user")})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(T_),h.LFG(RV))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PV(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"a",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.logOut())}),h.qZA()}}function OV(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",4),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.GoogleAuth())}),h._uU(1,"LOGIN"),h.qZA()}}let kV=(()=>{class n{constructor(t){this.fireAuthService=t}get loggedIn(){return this.fireAuthService.isLoggedIn}get userName(){const t=this.fireAuthService?.userData?.displayName;return t||"Logged In"}login(){this.GoogleAuth()}GoogleAuth(){this.fireAuthService.GoogleAuth()}logOut(){this.fireAuthService.SignOut()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ex))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:3,vars:2,consts:[[1,"login-block"],["class","login",3,"click",4,"ngIf"],["class","text-main link-btn",3,"click",4,"ngIf"],[1,"login",3,"click"],[1,"text-main","link-btn",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"span",0),h.YNc(1,PV,1,0,"a",1),h.YNc(2,OV,2,0,"button",2),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",r.loggedIn),h.xp6(1),h.Q6J("ngIf",!r.loggedIn))},dependencies:[Zi],styles:[".login[_ngcontent-%COMP%]{display:block;width:32px;height:32px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -0.5 32 32' shape-rendering='crispEdges'%3E%3Cmetadata%3EMade with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj%3C/metadata%3E%3Cpath stroke='%23203c56' d='M10 0h12M10 1h12M6 2h4M22 2h4M6 3h4M22 3h4M4 4h2M12 4h8M26 4h2M4 5h2M12 5h8M26 5h2M2 6h2M8 6h4M20 6h4M28 6h2M2 7h2M8 7h4M20 7h4M28 7h2M2 8h2M6 8h2M24 8h2M28 8h2M2 9h2M6 9h2M24 9h2M28 9h2M0 10h2M6 10h2M24 10h2M30 10h2M0 11h2M6 11h2M24 11h2M30 11h2M0 12h2M4 12h2M26 12h2M30 12h2M0 13h2M4 13h2M26 13h2M30 13h2M0 14h2M4 14h2M26 14h2M30 14h2M0 15h2M4 15h2M26 15h2M30 15h2M0 16h2M4 16h2M26 16h2M30 16h2M0 17h2M4 17h2M26 17h2M30 17h2M0 18h2M4 18h2M26 18h2M30 18h2M0 19h2M4 19h2M26 19h2M30 19h2M0 20h2M6 20h2M24 20h2M30 20h2M0 21h2M6 21h2M24 21h2M30 21h2M2 22h2M6 22h2M24 22h2M28 22h2M2 23h2M6 23h2M24 23h2M28 23h2M2 24h2M8 24h4M20 24h4M28 24h2M2 25h2M8 25h4M20 25h4M28 25h2M4 26h2M12 26h8M26 26h2M4 27h2M12 27h8M26 27h2M6 28h4M22 28h4M6 29h4M22 29h4M10 30h12M10 31h12' /%3E%3Cpath stroke='%23ffaa5e' d='M10 2h12M10 3h12M6 4h4M22 4h4M6 5h4M22 5h4M4 6h2M26 6h2M4 7h2M26 7h2M4 8h2M14 8h4M26 8h2M4 9h2M13 9h6M26 9h2M2 10h2M13 10h6M28 10h2M2 11h2M13 11h6M28 11h2M2 12h2M13 12h6M28 12h2M2 13h2M14 13h4M28 13h2M2 14h2M28 14h2M2 15h2M28 15h2M2 16h2M12 16h8M28 16h2M2 17h2M11 17h10M28 17h2M2 18h2M10 18h12M28 18h2M2 19h2M10 19h12M28 19h2M4 20h2M11 20h10M26 20h2M4 21h2M12 21h2M18 21h2M26 21h2M4 22h2M26 22h2M4 23h2M26 23h2M6 24h2M24 24h2M6 25h2M24 25h2M8 26h4M20 26h4M8 27h4M20 27h4M12 28h8M12 29h8' /%3E%3Cpath stroke='%23d08159' d='M10 4h2M20 4h2M10 5h2M20 5h2M6 6h2M24 6h2M6 7h2M24 7h2M4 10h2M26 10h2M4 11h2M26 11h2M13 13h1M18 13h1M14 14h4M2 20h2M10 20h1M21 20h1M28 20h2M2 21h2M11 21h1M14 21h4M20 21h1M28 21h2M12 22h2M18 22h2M4 24h2M26 24h2M4 25h2M26 25h2M6 26h2M24 26h2M6 27h2M24 27h2M10 28h2M20 28h2M10 29h2M20 29h2' /%3E%3Cpath stroke='%23544e68' d='M12 6h8M8 8h4M20 8h4M8 9h1M23 9h1M8 10h1M23 10h1M8 11h1M23 11h1M6 12h1M25 12h1M6 13h1M25 13h1M6 14h1M25 14h1M6 15h1M25 15h1M6 16h1M25 16h1M6 17h1M25 17h1M6 18h1M25 18h1M6 19h1M25 19h1M8 20h1M23 20h1M8 21h1M23 21h1M8 22h1M23 22h1M8 23h4M20 23h4M12 25h8' /%3E%3Cpath stroke='%238d697a' d='M12 7h8M12 8h2M18 8h2M9 9h4M19 9h4M9 10h4M19 10h4M9 11h4M19 11h4M7 12h6M19 12h6M7 13h6M19 13h6M7 14h7M18 14h7M7 15h18M7 16h5M20 16h5M7 17h4M21 17h4M7 18h3M22 18h3M7 19h3M22 19h3M9 20h1M22 20h1M9 21h2M21 21h2M9 22h3M14 22h4M20 22h3M12 23h8M12 24h8' /%3E%3C/svg%3E\")}.login[_ngcontent-%COMP%]:hover{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -0.5 32 32' shape-rendering='crispEdges'%3E%3Cmetadata%3EMade with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj%3C/metadata%3E%3Cpath stroke='%23203c56' d='M10 0h12M6 2h4M22 2h4M4 4h2M12 4h8M26 4h2M12 5h8M2 6h2M8 6h4M20 6h4M28 6h2M2 7h2M8 7h4M20 7h4M28 7h2M2 8h2M6 8h2M24 8h2M28 8h2M6 9h2M24 9h2M0 10h2M6 10h2M24 10h2M30 10h2M0 11h2M6 11h2M24 11h2M30 11h2M0 12h2M4 12h2M26 12h2M30 12h2M0 13h2M4 13h2M26 13h2M30 13h2M0 14h2M4 14h2M26 14h2M30 14h2M0 15h2M4 15h2M26 15h2M30 15h2M0 16h2M4 16h2M26 16h2M30 16h2M0 17h2M4 17h2M26 17h2M30 17h2M0 18h2M4 18h2M26 18h2M30 18h2M0 19h2M30 19h2M0 20h2M6 20h2M24 20h2M30 20h2M0 21h2M6 21h2M24 21h2M30 21h2M2 22h2M6 22h2M24 22h2M28 22h2M2 23h2M28 23h2M2 24h2M8 24h4M20 24h4M28 24h2M2 25h2M28 25h2M4 26h2M12 26h8M26 26h2M4 27h2M26 27h2M6 28h4M22 28h4M6 29h4M22 29h4M10 30h12M10 31h12' /%3E%3Cpath stroke='%23ffd4a3' d='M10 1h12M10 2h12M6 3h4M22 3h4M6 4h4M22 4h4M4 5h2M26 5h2M4 6h2M26 6h2M4 7h2M14 7h4M26 7h2M4 8h2M13 8h6M26 8h2M2 9h2M13 9h6M28 9h2M2 10h2M13 10h6M28 10h2M2 11h2M13 11h6M28 11h2M2 12h2M14 12h4M28 12h2M2 13h2M28 13h2M2 14h2M28 14h2M2 15h2M12 15h8M28 15h2M2 16h2M11 16h10M28 16h2M2 17h2M10 17h12M28 17h2M2 18h2M10 18h12M28 18h2M4 19h2M11 19h10M26 19h2M4 20h2M12 20h2M18 20h2M26 20h2M4 21h2M26 21h2M4 22h2M26 22h2M6 23h2M24 23h2M6 24h2M24 24h2M8 25h4M20 25h4M8 26h4M20 26h4M12 27h8M12 28h8' /%3E%3Cpath stroke='%23d08159' d='M10 3h12M10 4h2M20 4h2M6 5h6M20 5h6M6 6h2M24 6h2M6 7h2M24 7h2M4 9h2M26 9h2M4 10h2M26 10h2M4 11h2M26 11h2M13 12h1M18 12h1M13 13h6M14 14h4M2 19h2M10 19h1M21 19h1M28 19h2M2 20h2M10 20h2M14 20h4M20 20h2M28 20h2M2 21h2M10 21h12M28 21h2M11 22h10M4 23h2M12 23h2M18 23h2M26 23h2M4 24h2M26 24h2M4 25h4M24 25h4M6 26h2M24 26h2M6 27h6M20 27h6M10 28h2M20 28h2M10 29h12' /%3E%3Cpath stroke='%23544e68' d='M12 6h8M8 8h4M20 8h4M8 9h1M23 9h1M8 10h1M23 10h1M8 11h1M23 11h1M6 12h1M25 12h1M6 13h1M25 13h1M6 14h1M25 14h1M6 15h1M25 15h1M6 16h1M25 16h1M6 17h1M25 17h1M6 18h1M25 18h1M6 19h1M25 19h1M8 20h1M23 20h1M8 21h1M23 21h1M8 22h1M23 22h1M8 23h4M20 23h4M12 25h8' /%3E%3Cpath stroke='%238d697a' d='M12 7h2M18 7h2M12 8h1M19 8h1M9 9h4M19 9h4M9 10h4M19 10h4M9 11h4M19 11h4M7 12h6M19 12h6M7 13h6M19 13h6M7 14h7M18 14h7M7 15h5M20 15h5M7 16h4M21 16h4M7 17h3M22 17h3M7 18h3M22 18h3M7 19h3M22 19h3M9 20h1M22 20h1M9 21h1M22 21h1M9 22h2M21 22h2M14 23h4M12 24h8' /%3E%3C/svg%3E\")}.login[_ngcontent-%COMP%]:active{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -0.5 32 32' shape-rendering='crispEdges'%3E%3Cmetadata%3EMade with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj%3C/metadata%3E%3Cpath stroke='%23203c56' d='M10 0h12M10 1h12M6 2h4M22 2h4M6 3h4M22 3h4M4 4h2M12 4h8M26 4h2M4 5h2M12 5h8M26 5h2M2 6h2M8 6h4M20 6h4M28 6h2M2 7h2M8 7h4M20 7h4M28 7h2M2 8h2M6 8h2M24 8h2M28 8h2M2 9h2M6 9h2M24 9h2M28 9h2M0 10h2M6 10h2M24 10h2M30 10h2M0 11h2M6 11h2M24 11h2M30 11h2M0 12h2M4 12h2M26 12h2M30 12h2M0 13h2M4 13h2M26 13h2M30 13h2M0 14h2M4 14h2M26 14h2M30 14h2M0 15h2M4 15h2M26 15h2M30 15h2M0 16h2M4 16h2M26 16h2M30 16h2M0 17h2M4 17h2M26 17h2M30 17h2M0 18h2M4 18h2M26 18h2M30 18h2M0 19h2M4 19h2M26 19h2M30 19h2M0 20h2M6 20h2M24 20h2M30 20h2M0 21h2M6 21h2M24 21h2M30 21h2M2 22h2M6 22h2M24 22h2M28 22h2M2 23h2M6 23h2M24 23h2M28 23h2M2 24h2M8 24h4M20 24h4M28 24h2M2 25h2M8 25h4M20 25h4M28 25h2M4 26h2M12 26h8M26 26h2M4 27h2M12 27h8M26 27h2M6 28h4M22 28h4M6 29h4M22 29h4M10 30h12M10 31h12' /%3E%3Cpath stroke='%23d08159' d='M10 2h12M10 3h12M6 4h6M20 4h6M6 5h6M20 5h6M4 6h4M24 6h4M4 7h4M24 7h4M4 8h2M26 8h2M4 9h2M14 9h4M26 9h2M2 10h4M13 10h6M26 10h4M2 11h4M13 11h6M26 11h4M2 12h2M13 12h6M28 12h2M2 13h2M13 13h6M28 13h2M2 14h2M14 14h4M28 14h2M2 15h2M28 15h2M2 16h2M28 16h2M2 17h2M12 17h8M28 17h2M2 18h2M11 18h10M28 18h2M2 19h2M10 19h12M28 19h2M2 20h4M10 20h12M26 20h4M2 21h4M11 21h10M26 21h4M4 22h2M12 22h2M18 22h2M26 22h2M4 23h2M26 23h2M4 24h4M24 24h4M4 25h4M24 25h4M6 26h6M20 26h6M6 27h6M20 27h6M10 28h12M10 29h12' /%3E%3Cpath stroke='%23544e68' d='M12 6h8M8 8h4M20 8h4M8 9h1M23 9h1M8 10h1M23 10h1M8 11h1M23 11h1M6 12h1M25 12h1M6 13h1M25 13h1M6 14h1M25 14h1M6 15h1M25 15h1M6 16h1M25 16h1M6 17h1M25 17h1M6 18h1M25 18h1M6 19h1M25 19h1M8 20h1M23 20h1M8 21h1M23 21h1M8 22h1M23 22h1M8 23h4M20 23h4M12 25h8' /%3E%3Cpath stroke='%238d697a' d='M12 7h8M12 8h8M9 9h5M18 9h5M9 10h4M19 10h4M9 11h4M19 11h4M7 12h6M19 12h6M7 13h6M19 13h6M7 14h7M18 14h7M7 15h18M7 16h18M7 17h5M20 17h5M7 18h4M21 18h4M7 19h3M22 19h3M9 20h1M22 20h1M9 21h2M21 21h2M9 22h3M14 22h4M20 22h3M12 23h8M12 24h8' /%3E%3C/svg%3E\")}"]}),n})();function FV(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-calibrate-item",7),h.NdJ("changes",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.reloadItems())}),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("lastItem",t.lastItem)}}let LV=(()=>{class n{constructor(t){this.itemsService=t,this.items=[],this.auth=(0,h.f3M)(Uo)}ngOnInit(){this.reloadItems()}reloadItems(){this.getItems(),this.getLastItem()}getItems(){this.itemsService.itemsControllerGetItems().subscribe(t=>this.items=t)}getLastItem(){this.itemsService.itemsControllerGetLastItem().subscribe(t=>this.lastItem=t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:2,consts:[[1,"topbar"],[1,"login-block"],[1,"card"],[1,"card-content"],[3,"changes"],[3,"items"],[3,"lastItem","changes",4,"ngIf"],[3,"lastItem","changes"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"app-login",1),h.qZA(),h.TgZ(2,"div",2)(3,"div",3)(4,"app-add-item",4),h.NdJ("changes",function(){return r.reloadItems()}),h.qZA(),h._UZ(5,"app-list",5),h.qZA()(),h.TgZ(6,"div",2)(7,"div",3),h.YNc(8,FV,1,1,"app-calibrate-item",6),h.qZA()(),h.TgZ(9,"div",2)(10,"div",3)(11,"app-pairs",4),h.NdJ("changes",function(){return r.reloadItems()}),h.qZA()()()),2&t&&(h.xp6(5),h.Q6J("items",r.items),h.xp6(3),h.Q6J("ngIf",!!r.lastItem))},dependencies:[Zi,fI,CS,w_,gM,kV],styles:['@import"https://fonts.googleapis.com/css2?family=PT+Mono&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}*[_ngcontent-%COMP%]:focus{outline:none!important}[_ngcontent-%COMP%]::placeholder{color:#8d697a;opacity:1}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:5px 10px;margin:5px 0;border:none;border-radius:.25rem}button[_ngcontent-%COMP%]{color:#ffaa5e}button[_ngcontent-%COMP%]:disabled{color:#d08159;border-color:#d08159}button[_ngcontent-%COMP%]:hover:not(:disabled){color:#0d2b45;background-color:#ffaa5e;border-color:#ffaa5e}button[_ngcontent-%COMP%]:active:not(:disabled){background-color:#ffcb9a;border-color:#ffcb9a}input[_ngcontent-%COMP%]{border:1px solid #544E68;background-color:#0d2b45;color:#ffecd6}input[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:focus{border:1px solid #8D697A}html[_ngcontent-%COMP%]{background-color:#0d2b45;color:#ffecd6;font-family:"PT Serif",serif;padding:5px}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-family:"PT Serif",serif}button[_ngcontent-%COMP%]{background-color:transparent;color:#ffaa5e;border:1px solid #FFAA5E}h2[_ngcontent-%COMP%]{color:#544e68}body[_ngcontent-%COMP%]{padding:0;margin:0}.card[_ngcontent-%COMP%]{border:12px solid;max-width:800px;margin:10px auto;border-image:url(border.e99fa6d0aa6dd683.png) 30%/1 stretch}.card-content[_ngcontent-%COMP%]{background-color:#203c56;padding:5px;width:available}.topbar[_ngcontent-%COMP%]{display:flex}.login-block[_ngcontent-%COMP%]{margin-left:auto;padding:5px;width:-moz-fit-content;width:fit-content}']}),n})(),VV=(()=>{class n extends lI{constructor(t,r){super(t,r)}appControllerGetHello$Response(t,r){const s=new Ga(this.rootUrl,n.AppControllerGetHelloPath,"get");return this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(Qn(u=>u instanceof yi),(0,yt.U)(u=>u.clone({body:void 0})))}appControllerGetHello(t,r){return this.appControllerGetHello$Response(t,r).pipe((0,yt.U)(s=>s.body))}}return n.AppControllerGetHelloPath="/",n.\u0275fac=function(t){return new(t||n)(h.LFG(bh),h.LFG(na))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UV=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:bh,useValue:t}]}}constructor(t,r){if(t)throw new Error("ApiModule is already loaded. Import in your base AppModule only.");if(!r)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12),h.LFG(na,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[VV,$u,bh]}),n})();var jV=F(655),wx=F(3008);class oE{constructor(e){return e}}const bk="analytics",Tk=hn.nk.async,HV=(0,hn.u3)(wx.IH,!0),zV=(0,hn.u3)(wx.Kz,!0),GV=(0,hn.u3)(wx.Iv,!0);let Ix=(()=>{class n{constructor(t,r,s){let u;this.disposables=[],(0,io.KN)("angularfire",hn.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(l=>{u=l})),Tk().then(()=>{const l=s.get(oE);l?this.disposables=[tI(t).subscribe(g=>{GV(l,g?.uid),u()})]:u()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Uo),h.LFG(h.R0b),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Sk="firebase_screen_id",Dx="outlet",aE="screen_class",Mk="screen_name";let rU=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const Cx={},iU=n=>{const e=[n[aE],n[Dx]].join("#");if(Cx.hasOwnProperty(e))return Cx[e];{const t=rU++;return Cx[e]=t,t}};let Ak=(()=>{class n{constructor(t,r,s,u,l,g){(0,io.KN)("angularfire",hn.q4.full,"screen-tracking"),Tk().then(()=>{const _=g.get(oE);!t||!_||u.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(Qn(s=>s instanceof Jc)).pipe(Ur(s=>{var u;const g=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,Q=>Q.replace("://",":///"))).root.children[s.snapshot.outlet])||void 0===u?void 0:u.toString())||"",_=n.routerState.root.children.map(Q=>Q).find(Q=>Q.outlet===s.snapshot.outlet);if(!_)return Tt(null);let D=_;for(;D.firstChild;)D=D.firstChild;const b=D.pathFromRoot.map(Q=>{var me;return null===(me=Q.routeConfig)||void 0===me?void 0:me.path}).filter(Q=>Q).join("/")||"/",N={[Mk]:b,page_path:`/${g}`,firebase_event_origin:"auto",firebase_screen:b,[Dx]:s.snapshot.outlet};e&&(N.page_title=e.getTitle());let $=_.component;if($){if($===rh){let Q=s.snapshot;for(;Q.firstChild;)Q=Q.firstChild;$=Q.component}}else $=s.snapshot.component;if("string"==typeof $)return Tt(Object.assign(Object.assign({},N),{[aE]:$}));if($){const Q=t.resolveComponentFactory($);return Tt(Object.assign(Object.assign({},N),{[aE]:Q.selector}))}return Tt(null)}),Qn(s=>!!s),(0,yt.U)(s=>Object.assign({firebase_screen_class:s[aE],[Sk]:iU(s)},s)),function BV(n,e,t,r){return(0,Hr.e)((s,u)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:r}=e):l=e;const g=new Map,_=me=>{g.forEach(me),me(u)},D=me=>_(He=>He.error(me));let b=0,N=!1;const $=new Vr.Q(u,me=>{try{const He=n(me);let We=g.get(He);if(!We){g.set(He,We=r?r():new no.x);const nt=function Q(me,He){const We=new ns.y(nt=>{b++;const ht=He.subscribe(nt);return()=>{ht.unsubscribe(),0==--b&&N&&$.unsubscribe()}});return We.key=me,We}(He,We);if(u.next(nt),t){const ht=(0,Vr.x)(We,()=>{We.complete(),ht?.unsubscribe()},void 0,void 0,()=>g.delete(He));$.add((0,ks.Xf)(t(nt)).subscribe(ht))}}We.next(l?l(me):me)}catch(He){D(He)}},()=>_(me=>me.complete()),D,()=>g.clear(),()=>(N=!0,0===b));s.subscribe($)})}(s=>s[Dx]),(0,Yr.z)(s=>s.pipe(Gu((u,l)=>JSON.stringify(u)===JSON.stringify(l)),rs(void 0),$h(),(0,yt.U)(([u,l])=>u?Object.assign({firebase_previous_class:u[aE],firebase_previous_screen:u[Mk],firebase_previous_id:u[Sk]},l):l)))))(t,r,s).pipe(Ur(D=>(0,jV.mG)(this,void 0,void 0,function*(){return l&&(yield l.initialized),zV(_,"screen_view",D)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ws,8),h.LFG(Rc,8),h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(Ix,8),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const bx=new h.OlP("angularfire2.analytics-instances");function aU(n){return(e,t)=>{if(!hn.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new oE(r)}}const uU={provide:class $V{constructor(){return(0,hn.vb)(bk)}},deps:[[new h.FiY,bx]]},cU={provide:oE,useFactory:function oU(n,e){if(!hn.nk.sync())return null;const t=(0,hn.JM)(bk,n,e);return t&&new oE(t)},deps:[[new h.FiY,bx],ol]};let lU=(()=>{class n{constructor(t,r){(0,io.KN)("angularfire",hn.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ak,8),h.LFG(Ix,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[cU,uU,{provide:h.ip1,useValue:hn.nk.async,multi:!0}]}),n})();function dU(n,...e){return{ngModule:lU,providers:[{provide:bx,useFactory:aU(n),multi:!0,deps:[h.R0b,h.zs3,hn.HU,bv,...e]}]}}function xk(n,e){const t="object"==typeof e;return new Promise((r,s)=>{let l,u=!1;n.subscribe({next:g=>{l=g,u=!0},error:s,complete:()=>{u?r(l):t?r(e.defaultValue):s(new p)}})})}let hU=(()=>{class n{constructor(t){this.fireAuthService=t}intercept(t,r){return(0,cr.D)(this.handle(t,r))}handle(t,r){var s=this;return(0,Ee.Z)(function*(){const u=yield s.fireAuthService.getToken();if(!u)return yield xk(r.handle(t));const l=t.clone({headers:t.headers.set("Authorization",`Bearer ${u}`)});return yield xk(r.handle(l))})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ex))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[LV]}),n.\u0275inj=h.cJS({providers:[Ex,{provide:ra,useClass:hU,multi:!0},Ak,Ix],imports:[xc,Vd,dM.withConfig({warnOnNgModelWithFormControl:"always"}),UV.forRoot({rootUrl:ia_application_apiUrl}),Gx,uo.hO.initializeApp(ia_firebase),Mw(()=>(console.log("*********MODULE*********",ia_firebase),kT(ia_firebase))),dU(()=>HV()),eI(()=>sN())]}),n})();Sd().bootstrapModule(fU).catch(n=>console.error(n))},9751:(Dt,ke,F)=>{F.d(ke,{y:()=>Ce});var h=F(2961),V=F(727),k=F(8822),ne=F(9635),ge=F(2416),ce=F(576),ve=F(2806);let Ce=(()=>{class q{constructor(we){we&&(this._subscribe=we)}lift(we){const Qe=new q;return Qe.source=this,Qe.operator=we,Qe}subscribe(we,Qe,Et){const fe=function z(q){return q&&q instanceof h.Lv||function W(q){return q&&(0,ce.m)(q.next)&&(0,ce.m)(q.error)&&(0,ce.m)(q.complete)}(q)&&(0,V.Nn)(q)}(we)?we:new h.Hp(we,Qe,Et);return(0,ve.x)(()=>{const{operator:Fe,source:ze}=this;fe.add(Fe?Fe.call(fe,ze):ze?this._subscribe(fe):this._trySubscribe(fe))}),fe}_trySubscribe(we){try{return this._subscribe(we)}catch(Qe){we.error(Qe)}}forEach(we,Qe){return new(Qe=_e(Qe))((Et,fe)=>{const Fe=new h.Hp({next:ze=>{try{we(ze)}catch(Ze){fe(Ze),Fe.unsubscribe()}},error:fe,complete:Et});this.subscribe(Fe)})}_subscribe(we){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(we)}[k.L](){return this}pipe(...we){return(0,ne.U)(we)(this)}toPromise(we){return new(we=_e(we))((Qe,Et)=>{let fe;this.subscribe(Fe=>fe=Fe,Fe=>Et(Fe),()=>Qe(fe))})}}return q.create=xe=>new q(xe),q})();function _e(q){var xe;return null!==(xe=q??ge.config.Promise)&&void 0!==xe?xe:Promise}},7579:(Dt,ke,F)=>{F.d(ke,{x:()=>ve});var h=F(9751),V=F(727);const ne=(0,F(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(8737),ce=F(2806);let ve=(()=>{class _e extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const q=new Ce(this,this);return q.operator=z,q}_throwIfClosed(){if(this.closed)throw new ne}next(z){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(z)}})}error(z){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:q}=this;for(;q.length;)q.shift().error(z)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:q,isStopped:xe,observers:we}=this;return q||xe?V.Lc:(this.currentObservers=null,we.push(z),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(we,z)}))}_checkFinalizedStatuses(z){const{hasError:q,thrownError:xe,isStopped:we}=this;q?z.error(xe):we&&z.complete()}asObservable(){const z=new h.y;return z.source=this,z}}return _e.create=(W,z)=>new Ce(W,z),_e})();class Ce extends ve{constructor(W,z){super(),this.destination=W,this.source=z}next(W){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===q||q.call(z,W)}error(W){var z,q;null===(q=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===q||q.call(z,W)}complete(){var W,z;null===(z=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===z||z.call(W)}_subscribe(W){var z,q;return null!==(q=null===(z=this.source)||void 0===z?void 0:z.subscribe(W))&&void 0!==q?q:V.Lc}}},2961:(Dt,ke,F)=>{F.d(ke,{Hp:()=>Et,Lv:()=>q});var h=F(576),V=F(727),k=F(2416),ne=F(7849);function ge(){}const ce=_e("C",void 0,void 0);function _e(be,De,Te){return{kind:be,value:De,error:Te}}var W=F(3410),z=F(2806);class q extends V.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,V.Nn)(De)&&De.add(this)):this.destination=Ze}static create(De,Te,Be){return new Et(De,Te,Be)}next(De){this.isStopped?ze(function Ce(be){return _e("N",be,void 0)}(De),this):this._next(De)}error(De){this.isStopped?ze(function ve(be){return _e("E",void 0,be)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?ze(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xe=Function.prototype.bind;function we(be,De){return xe.call(be,De)}class Qe{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Te}=this;if(Te.next)try{Te.next(De)}catch(Be){fe(Be)}}error(De){const{partialObserver:Te}=this;if(Te.error)try{Te.error(De)}catch(Be){fe(Be)}else fe(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Te){fe(Te)}}}class Et extends q{constructor(De,Te,Be){let Se;if(super(),(0,h.m)(De)||!De)Se={next:De??void 0,error:Te??void 0,complete:Be??void 0};else{let J;this&&k.config.useDeprecatedNextContext?(J=Object.create(De),J.unsubscribe=()=>this.unsubscribe(),Se={next:De.next&&we(De.next,J),error:De.error&&we(De.error,J),complete:De.complete&&we(De.complete,J)}):Se=De}this.destination=new Qe(Se)}}function fe(be){k.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(be):(0,ne.h)(be)}function ze(be,De){const{onStoppedNotification:Te}=k.config;Te&&W.z.setTimeout(()=>Te(be,De))}const Ze={closed:!0,next:ge,error:function Fe(be){throw be},complete:ge}},727:(Dt,ke,F)=>{F.d(ke,{Lc:()=>ce,w0:()=>ge,Nn:()=>ve});var h=F(576);const k=(0,F(3888).d)(_e=>function(z){_e(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((q,xe)=>`${xe+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ne=F(8737);class ge{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const we of z)we.remove(this);else z.remove(this);const{initialTeardown:q}=this;if((0,h.m)(q))try{q()}catch(we){W=we instanceof k?we.errors:[we]}const{_finalizers:xe}=this;if(xe){this._finalizers=null;for(const we of xe)try{Ce(we)}catch(Qe){W=W??[],Qe instanceof k?W=[...W,...Qe.errors]:W.push(Qe)}}if(W)throw new k(W)}}add(W){var z;if(W&&W!==this)if(this.closed)Ce(W);else{if(W instanceof ge){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(W)}}_hasParent(W){const{_parentage:z}=this;return z===W||Array.isArray(z)&&z.includes(W)}_addParent(W){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(W),z):z?[z,W]:W}_removeParent(W){const{_parentage:z}=this;z===W?this._parentage=null:Array.isArray(z)&&(0,ne.P)(z,W)}remove(W){const{_finalizers:z}=this;z&&(0,ne.P)(z,W),W instanceof ge&&W._removeParent(this)}}ge.EMPTY=(()=>{const _e=new ge;return _e.closed=!0,_e})();const ce=ge.EMPTY;function ve(_e){return _e instanceof ge||_e&&"closed"in _e&&(0,h.m)(_e.remove)&&(0,h.m)(_e.add)&&(0,h.m)(_e.unsubscribe)}function Ce(_e){(0,h.m)(_e)?_e():_e.unsubscribe()}},2416:(Dt,ke,F)=>{F.d(ke,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Dt,ke,F)=>{F.d(ke,{E:()=>V});const V=new(F(9751).y)(ge=>ge.complete())},8996:(Dt,ke,F)=>{F.d(ke,{D:()=>De});var h=F(8421),V=F(5363),k=F(9468),ce=F(9751),Ce=F(2202),_e=F(576),W=F(9672);function q(Te,Be){if(!Te)throw new Error("Iterable cannot be null");return new ce.y(Se=>{(0,W.f)(Se,Be,()=>{const J=Te[Symbol.asyncIterator]();(0,W.f)(Se,Be,()=>{J.next().then(st=>{st.done?Se.complete():Se.next(st.value)})},0,!0)})})}var xe=F(3670),we=F(8239),Qe=F(1144),Et=F(6495),fe=F(2206),Fe=F(4532),ze=F(3260);function De(Te,Be){return Be?function be(Te,Be){if(null!=Te){if((0,xe.c)(Te))return function ne(Te,Be){return(0,h.Xf)(Te).pipe((0,k.R)(Be),(0,V.Q)(Be))}(Te,Be);if((0,Qe.z)(Te))return function ve(Te,Be){return new ce.y(Se=>{let J=0;return Be.schedule(function(){J===Te.length?Se.complete():(Se.next(Te[J++]),Se.closed||this.schedule())})})}(Te,Be);if((0,we.t)(Te))return function ge(Te,Be){return(0,h.Xf)(Te).pipe((0,k.R)(Be),(0,V.Q)(Be))}(Te,Be);if((0,fe.D)(Te))return q(Te,Be);if((0,Et.T)(Te))return function z(Te,Be){return new ce.y(Se=>{let J;return(0,W.f)(Se,Be,()=>{J=Te[Ce.h](),(0,W.f)(Se,Be,()=>{let st,Xe;try{({value:st,done:Xe}=J.next())}catch(cn){return void Se.error(cn)}Xe?Se.complete():Se.next(st)},0,!0)}),()=>(0,_e.m)(J?.return)&&J.return()})}(Te,Be);if((0,ze.L)(Te))return function Ze(Te,Be){return q((0,ze.Q)(Te),Be)}(Te,Be)}throw(0,Fe.z)(Te)}(Te,Be):(0,h.Xf)(Te)}},8421:(Dt,ke,F)=>{F.d(ke,{Xf:()=>xe});var h=F(655),V=F(1144),k=F(8239),ne=F(9751),ge=F(3670),ce=F(2206),ve=F(4532),Ce=F(6495),_e=F(3260),W=F(576),z=F(7849),q=F(8822);function xe(be){if(be instanceof ne.y)return be;if(null!=be){if((0,ge.c)(be))return function we(be){return new ne.y(De=>{const Te=be[q.L]();if((0,W.m)(Te.subscribe))return Te.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,V.z)(be))return function Qe(be){return new ne.y(De=>{for(let Te=0;Te<be.length&&!De.closed;Te++)De.next(be[Te]);De.complete()})}(be);if((0,k.t)(be))return function Et(be){return new ne.y(De=>{be.then(Te=>{De.closed||(De.next(Te),De.complete())},Te=>De.error(Te)).then(null,z.h)})}(be);if((0,ce.D)(be))return Fe(be);if((0,Ce.T)(be))return function fe(be){return new ne.y(De=>{for(const Te of be)if(De.next(Te),De.closed)return;De.complete()})}(be);if((0,_e.L)(be))return function ze(be){return Fe((0,_e.Q)(be))}(be)}throw(0,ve.z)(be)}function Fe(be){return new ne.y(De=>{(function Ze(be,De){var Te,Be,Se,J;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Te=(0,h.KL)(be);!(Be=yield Te.next()).done;)if(De.next(Be.value),De.closed)return}catch(st){Se={error:st}}finally{try{Be&&!Be.done&&(J=Te.return)&&(yield J.call(Te))}finally{if(Se)throw Se.error}}De.complete()})})(be,De).catch(Te=>De.error(Te))})}},6451:(Dt,ke,F)=>{F.d(ke,{T:()=>ce});var h=F(8189),V=F(8421),k=F(515),ne=F(7669),ge=F(8996);function ce(...ve){const Ce=(0,ne.yG)(ve),_e=(0,ne._6)(ve,1/0),W=ve;return W.length?1===W.length?(0,V.Xf)(W[0]):(0,h.J)(_e)((0,ge.D)(W,Ce)):k.E}},5403:(Dt,ke,F)=>{F.d(ke,{Q:()=>k,x:()=>V});var h=F(2961);function V(ne,ge,ce,ve,Ce){return new k(ne,ge,ce,ve,Ce)}class k extends h.Lv{constructor(ge,ce,ve,Ce,_e,W){super(ge),this.onFinalize=_e,this.shouldUnsubscribe=W,this._next=ce?function(z){try{ce(z)}catch(q){ge.error(q)}}:super._next,this._error=Ce?function(z){try{Ce(z)}catch(q){ge.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(z){ge.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4004:(Dt,ke,F)=>{F.d(ke,{U:()=>k});var h=F(4482),V=F(5403);function k(ne,ge){return(0,h.e)((ce,ve)=>{let Ce=0;ce.subscribe((0,V.x)(ve,_e=>{ve.next(ne.call(ge,_e,Ce++))}))})}},8189:(Dt,ke,F)=>{F.d(ke,{J:()=>k});var h=F(5577),V=F(4671);function k(ne=1/0){return(0,h.z)(V.y,ne)}},5577:(Dt,ke,F)=>{F.d(ke,{z:()=>Ce});var h=F(4004),V=F(8421),k=F(4482),ne=F(9672),ge=F(5403),ve=F(576);function Ce(_e,W,z=1/0){return(0,ve.m)(W)?Ce((q,xe)=>(0,h.U)((we,Qe)=>W(q,we,xe,Qe))((0,V.Xf)(_e(q,xe))),z):("number"==typeof W&&(z=W),(0,k.e)((q,xe)=>function ce(_e,W,z,q,xe,we,Qe,Et){const fe=[];let Fe=0,ze=0,Ze=!1;const be=()=>{Ze&&!fe.length&&!Fe&&W.complete()},De=Be=>Fe<q?Te(Be):fe.push(Be),Te=Be=>{we&&W.next(Be),Fe++;let Se=!1;(0,V.Xf)(z(Be,ze++)).subscribe((0,ge.x)(W,J=>{xe?.(J),we?De(J):W.next(J)},()=>{Se=!0},void 0,()=>{if(Se)try{for(Fe--;fe.length&&Fe<q;){const J=fe.shift();Qe?(0,ne.f)(W,Qe,()=>Te(J)):Te(J)}be()}catch(J){W.error(J)}}))};return _e.subscribe((0,ge.x)(W,De,()=>{Ze=!0,be()})),()=>{Et?.()}}(q,xe,_e,z)))}},5363:(Dt,ke,F)=>{F.d(ke,{Q:()=>ne});var h=F(9672),V=F(4482),k=F(5403);function ne(ge,ce=0){return(0,V.e)((ve,Ce)=>{ve.subscribe((0,k.x)(Ce,_e=>(0,h.f)(Ce,ge,()=>Ce.next(_e),ce),()=>(0,h.f)(Ce,ge,()=>Ce.complete(),ce),_e=>(0,h.f)(Ce,ge,()=>Ce.error(_e),ce)))})}},3099:(Dt,ke,F)=>{F.d(ke,{B:()=>ge});var h=F(8421),V=F(7579),k=F(2961),ne=F(4482);function ge(ve={}){const{connector:Ce=(()=>new V.x),resetOnError:_e=!0,resetOnComplete:W=!0,resetOnRefCountZero:z=!0}=ve;return q=>{let xe,we,Qe,Et=0,fe=!1,Fe=!1;const ze=()=>{we?.unsubscribe(),we=void 0},Ze=()=>{ze(),xe=Qe=void 0,fe=Fe=!1},be=()=>{const De=xe;Ze(),De?.unsubscribe()};return(0,ne.e)((De,Te)=>{Et++,!Fe&&!fe&&ze();const Be=Qe=Qe??Ce();Te.add(()=>{Et--,0===Et&&!Fe&&!fe&&(we=ce(be,z))}),Be.subscribe(Te),!xe&&Et>0&&(xe=new k.Hp({next:Se=>Be.next(Se),error:Se=>{Fe=!0,ze(),we=ce(Ze,_e,Se),Be.error(Se)},complete:()=>{fe=!0,ze(),we=ce(Ze,W),Be.complete()}}),(0,h.Xf)(De).subscribe(xe))})(q)}}function ce(ve,Ce,..._e){if(!0===Ce)return void ve();if(!1===Ce)return;const W=new k.Hp({next:()=>{W.unsubscribe(),ve()}});return(0,h.Xf)(Ce(..._e)).subscribe(W)}},9468:(Dt,ke,F)=>{F.d(ke,{R:()=>V});var h=F(4482);function V(k,ne=0){return(0,h.e)((ge,ce)=>{ce.add(k.schedule(()=>ge.subscribe(ce),ne))})}},8505:(Dt,ke,F)=>{F.d(ke,{b:()=>ge});var h=F(576),V=F(4482),k=F(5403),ne=F(4671);function ge(ce,ve,Ce){const _e=(0,h.m)(ce)||ve||Ce?{next:ce,error:ve,complete:Ce}:ce;return _e?(0,V.e)((W,z)=>{var q;null===(q=_e.subscribe)||void 0===q||q.call(_e);let xe=!0;W.subscribe((0,k.x)(z,we=>{var Qe;null===(Qe=_e.next)||void 0===Qe||Qe.call(_e,we),z.next(we)},()=>{var we;xe=!1,null===(we=_e.complete)||void 0===we||we.call(_e),z.complete()},we=>{var Qe;xe=!1,null===(Qe=_e.error)||void 0===Qe||Qe.call(_e,we),z.error(we)},()=>{var we,Qe;xe&&(null===(we=_e.unsubscribe)||void 0===we||we.call(_e)),null===(Qe=_e.finalize)||void 0===Qe||Qe.call(_e)}))}):ne.y}},4408:(Dt,ke,F)=>{F.d(ke,{o:()=>ge});var h=F(727);class V extends h.w0{constructor(ve,Ce){super()}schedule(ve,Ce=0){return this}}const k={setInterval(ce,ve,...Ce){const{delegate:_e}=k;return _e?.setInterval?_e.setInterval(ce,ve,...Ce):setInterval(ce,ve,...Ce)},clearInterval(ce){const{delegate:ve}=k;return(ve?.clearInterval||clearInterval)(ce)},delegate:void 0};var ne=F(8737);class ge extends V{constructor(ve,Ce){super(ve,Ce),this.scheduler=ve,this.work=Ce,this.pending=!1}schedule(ve,Ce=0){var _e;if(this.closed)return this;this.state=ve;const W=this.id,z=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(z,W,Ce)),this.pending=!0,this.delay=Ce,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(z,this.id,Ce),this}requestAsyncId(ve,Ce,_e=0){return k.setInterval(ve.flush.bind(ve,this),_e)}recycleAsyncId(ve,Ce,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return Ce;null!=Ce&&k.clearInterval(Ce)}execute(ve,Ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ve,Ce);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Ce){let W,_e=!1;try{this.work(ve)}catch(z){_e=!0,W=z||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Ce}=this,{actions:_e}=Ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(_e,this),null!=ve&&(this.id=this.recycleAsyncId(Ce,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(Dt,ke,F)=>{F.d(ke,{v:()=>k});var h=F(6063);class V{constructor(ge,ce=V.now){this.schedulerActionCtor=ge,this.now=ce}schedule(ge,ce=0,ve){return new this.schedulerActionCtor(this,ge).schedule(ve,ce)}}V.now=h.l.now;class k extends V{constructor(ge,ce=V.now){super(ge,ce),this.actions=[],this._active=!1}flush(ge){const{actions:ce}=this;if(this._active)return void ce.push(ge);let ve;this._active=!0;do{if(ve=ge.execute(ge.state,ge.delay))break}while(ge=ce.shift());if(this._active=!1,ve){for(;ge=ce.shift();)ge.unsubscribe();throw ve}}}},4986:(Dt,ke,F)=>{F.d(ke,{z:()=>k});var h=F(4408);const k=new(F(7565).v)(h.o)},6063:(Dt,ke,F)=>{F.d(ke,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(Dt,ke,F)=>{F.d(ke,{z:()=>h});const h={setTimeout(V,k,...ne){const{delegate:ge}=h;return ge?.setTimeout?ge.setTimeout(V,k,...ne):setTimeout(V,k,...ne)},clearTimeout(V){const{delegate:k}=h;return(k?.clearTimeout||clearTimeout)(V)},delegate:void 0}},2202:(Dt,ke,F)=>{F.d(ke,{h:()=>V});const V=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Dt,ke,F)=>{F.d(ke,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Dt,ke,F)=>{F.d(ke,{_6:()=>ce,jO:()=>ne,yG:()=>ge});var h=F(576);function k(ve){return ve[ve.length-1]}function ne(ve){return(0,h.m)(k(ve))?ve.pop():void 0}function ge(ve){return function V(ve){return ve&&(0,h.m)(ve.schedule)}(k(ve))?ve.pop():void 0}function ce(ve,Ce){return"number"==typeof k(ve)?ve.pop():Ce}},8737:(Dt,ke,F)=>{function h(V,k){if(V){const ne=V.indexOf(k);0<=ne&&V.splice(ne,1)}}F.d(ke,{P:()=>h})},3888:(Dt,ke,F)=>{function h(V){const ne=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(ke,{d:()=>h})},2806:(Dt,ke,F)=>{F.d(ke,{O:()=>ne,x:()=>k});var h=F(2416);let V=null;function k(ge){if(h.config.useDeprecatedSynchronousErrorHandling){const ce=!V;if(ce&&(V={errorThrown:!1,error:null}),ge(),ce){const{errorThrown:ve,error:Ce}=V;if(V=null,ve)throw Ce}}else ge()}function ne(ge){h.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},9672:(Dt,ke,F)=>{function h(V,k,ne,ge=0,ce=!1){const ve=k.schedule(function(){ne(),ce?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(ve),!ce)return ve}F.d(ke,{f:()=>h})},4671:(Dt,ke,F)=>{function h(V){return V}F.d(ke,{y:()=>h})},1144:(Dt,ke,F)=>{F.d(ke,{z:()=>h});const h=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(Dt,ke,F)=>{F.d(ke,{D:()=>V});var h=F(576);function V(k){return Symbol.asyncIterator&&(0,h.m)(k?.[Symbol.asyncIterator])}},576:(Dt,ke,F)=>{function h(V){return"function"==typeof V}F.d(ke,{m:()=>h})},3670:(Dt,ke,F)=>{F.d(ke,{c:()=>k});var h=F(8822),V=F(576);function k(ne){return(0,V.m)(ne[h.L])}},6495:(Dt,ke,F)=>{F.d(ke,{T:()=>k});var h=F(2202),V=F(576);function k(ne){return(0,V.m)(ne?.[h.h])}},8239:(Dt,ke,F)=>{F.d(ke,{t:()=>V});var h=F(576);function V(k){return(0,h.m)(k?.then)}},3260:(Dt,ke,F)=>{F.d(ke,{L:()=>ne,Q:()=>k});var h=F(655),V=F(576);function k(ge){return(0,h.FC)(this,arguments,function*(){const ve=ge.getReader();try{for(;;){const{value:Ce,done:_e}=yield(0,h.qq)(ve.read());if(_e)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Ce)}}finally{ve.releaseLock()}})}function ne(ge){return(0,V.m)(ge?.getReader)}},4482:(Dt,ke,F)=>{F.d(ke,{A:()=>V,e:()=>k});var h=F(576);function V(ne){return(0,h.m)(ne?.lift)}function k(ne){return ge=>{if(V(ge))return ge.lift(function(ce){try{return ne(ce,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(Dt,ke,F)=>{F.d(ke,{U:()=>k,z:()=>V});var h=F(4671);function V(...ne){return k(ne)}function k(ne){return 0===ne.length?h.y:1===ne.length?ne[0]:function(ce){return ne.reduce((ve,Ce)=>Ce(ve),ce)}}},7849:(Dt,ke,F)=>{F.d(ke,{h:()=>k});var h=F(2416),V=F(3410);function k(ne){V.z.setTimeout(()=>{const{onUnhandledError:ge}=h.config;if(!ge)throw ne;ge(ne)})}},4532:(Dt,ke,F)=>{function h(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(ke,{z:()=>h})},655:(Dt,ke,F)=>{function ne(pe,ye){var Ne={};for(var Le in pe)Object.prototype.hasOwnProperty.call(pe,Le)&&ye.indexOf(Le)<0&&(Ne[Le]=pe[Le]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(Le=Object.getOwnPropertySymbols(pe);Je<Le.length;Je++)ye.indexOf(Le[Je])<0&&Object.prototype.propertyIsEnumerable.call(pe,Le[Je])&&(Ne[Le[Je]]=pe[Le[Je]])}return Ne}function q(pe,ye,Ne,Le){return new(Ne||(Ne=Promise))(function(je,Ae){function ut(bt){try{wt(Le.next(bt))}catch(Ht){Ae(Ht)}}function _n(bt){try{wt(Le.throw(bt))}catch(Ht){Ae(Ht)}}function wt(bt){bt.done?je(bt.value):function Je(je){return je instanceof Ne?je:new Ne(function(Ae){Ae(je)})}(bt.value).then(ut,_n)}wt((Le=Le.apply(pe,ye||[])).next())})}function be(pe){return this instanceof be?(this.v=pe,this):new be(pe)}function De(pe,ye,Ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,Le=Ne.apply(pe,ye||[]),je=[];return Je={},Ae("next"),Ae("throw"),Ae("return"),Je[Symbol.asyncIterator]=function(){return this},Je;function Ae(rn){Le[rn]&&(Je[rn]=function(mn){return new Promise(function(tr,An){je.push([rn,mn,tr,An])>1||ut(rn,mn)})})}function ut(rn,mn){try{!function _n(rn){rn.value instanceof be?Promise.resolve(rn.value.v).then(wt,bt):Ht(je[0][2],rn)}(Le[rn](mn))}catch(tr){Ht(je[0][3],tr)}}function wt(rn){ut("next",rn)}function bt(rn){ut("throw",rn)}function Ht(rn,mn){rn(mn),je.shift(),je.length&&ut(je[0][0],je[0][1])}}function Be(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,ye=pe[Symbol.asyncIterator];return ye?ye.call(pe):(pe=function Et(pe){var ye="function"==typeof Symbol&&Symbol.iterator,Ne=ye&&pe[ye],Le=0;if(Ne)return Ne.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&Le>=pe.length&&(pe=void 0),{value:pe&&pe[Le++],done:!pe}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),Ne={},Le("next"),Le("throw"),Le("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne);function Le(je){Ne[je]=pe[je]&&function(Ae){return new Promise(function(ut,_n){!function Je(je,Ae,ut,_n){Promise.resolve(_n).then(function(wt){je({value:wt,done:ut})},Ae)}(ut,_n,(Ae=pe[je](Ae)).done,Ae.value)})}}}F.d(ke,{FC:()=>De,KL:()=>Be,_T:()=>ne,mG:()=>q,qq:()=>be})},2223:(Dt,ke,F)=>{F.d(ke,{$8M:()=>kd,$WT:()=>Wt,$Z:()=>OT,AFp:()=>sw,AaK:()=>Ce,CHM:()=>yu,CRH:()=>VD,D6c:()=>v0,EJc:()=>JD,EpF:()=>$u,F4k:()=>fI,FYo:()=>jp,FiY:()=>jc,GfV:()=>ko,Gpc:()=>z,HDt:()=>IC,JOm:()=>vs,KtG:()=>Wf,LFG:()=>Jt,Lbi:()=>fv,Lck:()=>$N,MMx:()=>Yt,MR2:()=>av,NdJ:()=>Jv,Ojb:()=>lT,OlP:()=>vn,Oqu:()=>Hu,P3R:()=>nl,PXZ:()=>Tm,Q6J:()=>aI,QGY:()=>Qv,Qsj:()=>mw,R0b:()=>Ai,RDi:()=>Hb,Rgc:()=>qu,SBq:()=>Bp,Sil:()=>GM,Suo:()=>LD,TTD:()=>Dc,TgZ:()=>Kv,X6Q:()=>hC,XFs:()=>vt,Xpm:()=>Zi,Xts:()=>ih,Y36:()=>dh,YKP:()=>mD,YNc:()=>mS,Yjl:()=>X,Yz7:()=>bt,Z0I:()=>tr,ZZ4:()=>g0,_Bn:()=>$h,_UZ:()=>cI,_Vd:()=>ch,_c5:()=>EC,_uU:()=>FS,aQg:()=>m0,c2e:()=>J_,cJS:()=>rn,cg1:()=>Sg,dDg:()=>o0,dqk:()=>rt,eFA:()=>u0,eJc:()=>om,ekj:()=>fg,eoX:()=>uf,f3M:()=>Lt,g9A:()=>ow,h0i:()=>Gu,hGG:()=>Qt,iGM:()=>$_,ifc:()=>S,ip1:()=>QD,jDz:()=>bl,kL8:()=>WS,lG2:()=>U,lqb:()=>Oo,lri:()=>Fl,n5z:()=>Pd,oAB:()=>os,oxw:()=>Xv,q4F:()=>vw,qFp:()=>sA,qLn:()=>$a,qOj:()=>jv,qZA:()=>Zv,rWj:()=>s0,sBO:()=>Mm,s_b:()=>Wr,soG:()=>kl,tb:()=>Cm,tp0:()=>Oa,uIk:()=>Ih,vHH:()=>fe,vpe:()=>co,wAp:()=>jt,xp6:()=>AT,z2F:()=>eu,zSh:()=>lv,zs3:()=>Uu});var h=F(7579),V=F(727),k=F(9751),ne=F(6451),ge=F(3099);function ce(i){for(let o in i)if(i[o]===ce)return o;throw Error("Could not find renamed property on target object.")}function ve(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function _e(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const W=ce({__forward_ref__:ce});function z(i){return i.__forward_ref__=z,i.toString=function(){return Ce(this())},i}function q(i){return xe(i)?i():i}function xe(i){return"function"==typeof i&&i.hasOwnProperty(W)&&i.__forward_ref__===z}function we(i){return i&&!!i.\u0275providers}const Et="https://g.co/ng/security#xss";class fe extends Error{constructor(o,a){super(function Fe(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function ze(i){return"string"==typeof i?i:null==i?"":String(i)}function Be(i,o){throw new fe(-201,!1)}function je(i,o){null==i&&function Ae(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function bt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function rn(i){return{providers:i.providers||[],imports:i.imports||[]}}function mn(i){return An(i,Ln)||An(i,di)}function tr(i){return null!==mn(i)}function An(i,o){return i.hasOwnProperty(o)?i[o]:null}function nr(i){return i&&(i.hasOwnProperty(Zn)||i.hasOwnProperty(Pr))?i[Zn]:null}const Ln=ce({\u0275prov:ce}),Zn=ce({\u0275inj:ce}),di=ce({ngInjectableDef:ce}),Pr=ce({ngInjectorDef:ce});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Cn;function On(i){const o=Cn;return Cn=i,o}function Kt(i,o,a){const c=mn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&vt.Optional?null:void 0!==o?o:void Be(Ce(i))}const rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),bn={},tn="__NG_DI_FLAG__",fr="ngTempTokenPath",Dr=/\n/gm,nn="__source";let Wn;function kn(i){const o=Wn;return Wn=i,o}function $n(i,o=vt.Default){if(void 0===Wn)throw new fe(-203,!1);return null===Wn?Kt(i,void 0,o):Wn.get(i,o&vt.Optional?null:void 0,o)}function Jt(i,o=vt.Default){return(function dr(){return Cn}()||$n)(q(i),o)}function Lt(i,o=vt.Default){return Jt(i,Vn(o))}function Vn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Lr(i){const o=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new fe(900,!1);let d,f=vt.Default;for(let y=0;y<c.length;y++){const E=c[y],I=ni(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}o.push(Jt(d,f))}else o.push(Jt(c))}return o}function pr(i,o){return i[tn]=o,i.prototype[tn]=o,i}function ni(i){return i[tn]}function R(i){return{toString:i}.toString()}var O=(()=>((O=O||{})[O.OnPush=0]="OnPush",O[O.Default=1]="Default",O))(),S=(()=>{return(i=S||(S={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",S;var i})();const K={},ie=[],G=ce({\u0275cmp:ce}),ae=ce({\u0275dir:ce}),de=ce({\u0275pipe:ce}),Ge=ce({\u0275mod:ce}),Ie=ce({\u0275fac:ce}),it=ce({__NG_ELEMENT_ID__:ce}),et=ce({__NG_ENV_ID__:ce});function kt(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function Ut(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],E=a[c++];i.setAttribute(o,y,E,f)}else{const f=d,y=a[++c];ee(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),c++}}return c}function se(i){return 3===i||4===i||6===i}function ee(i){return 64===i.charCodeAt(0)}function Pe(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||mt(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function mt(i,o,a,c,d){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const It="ng-template";function Gt(i,o,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==kt(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function on(i){return 4===i.type&&i.value!==It}function Cr(i,o,a){return o===(4!==i.type||a?i.value:It)}function Fn(i,o,a){let c=4;const d=i.attrs||[],f=function go(i){for(let o=0;o<i.length;o++)if(se(i[o]))return o;return i.length}(d);let y=!1;for(let E=0;E<o.length;E++){const I=o[E];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!Cr(i,I,a)||""===I&&1===o.length){if(rr(c))return!1;y=!0}}else{const C=8&c?I:o[++E];if(8&c&&null!==i.attrs){if(!Gt(i.attrs,C,a)){if(rr(c))return!1;y=!0}continue}const L=qi(8&c?"class":I,d,on(i),a);if(-1===L){if(rr(c))return!1;y=!0;continue}if(""!==C){let Z;Z=L>f?"":d[L+1].toLowerCase();const te=8&c?Z:null;if(te&&-1!==kt(te,C,0)||2&c&&C!==Z){if(rr(c))return!1;y=!0}}}}else{if(!y&&!rr(c)&&!rr(I))return!1;if(y&&rr(I))continue;y=!1,c=I|1&c}}return rr(c)||y}function rr(i){return 0==(1&i)}function qi(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function wi(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function ir(i,o,a=!1){for(let c=0;c<o.length;c++)if(Fn(i,o[c],a))return!0;return!1}function ya(i,o){return i?":not("+o.trim()+")":o}function Ki(i){let o=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const E=i[++a];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!rr(y)&&(o+=ya(f,d),d=""),c=y,f=f||!rr(c);a++}return""!==d&&(o+=ya(f,d)),o}function Zi(i){return R(()=>{const o=Hn(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===O.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||S.Emulated,styles:i.styles||ie,_:null,schemas:i.schemas||null,tView:null,id:""};sr(a);const c=i.dependencies;return a.directiveDefs=or(c,!1),a.pipeDefs=or(c,!0),a.id=function od(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function yo(i){return oe(i)||tt(i)}function vo(i){return null!==i}function os(i){return R(()=>({type:i.type,bootstrap:i.bootstrap||ie,declarations:i.declarations||ie,imports:i.imports||ie,exports:i.exports||ie,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function _o(i,o){if(null==i)return K;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,o&&(o[d]=f)}return a}function U(i){return R(()=>{const o=Hn(i);return sr(o),o})}function X(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function oe(i){return i[G]||null}function tt(i){return i[ae]||null}function Pt(i){return i[de]||null}function Wt(i){const o=oe(i)||tt(i)||Pt(i);return null!==o&&o.standalone}function Nt(i,o){const a=i[Ge]||null;if(!a&&!0===o)throw new Error(`Type ${Ce(i)} does not have '\u0275mod' property.`);return a}function Hn(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||ie,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_o(i.inputs,o),outputs:_o(i.outputs)}}function sr(i){i.features?.forEach(o=>o(i))}function or(i,o){if(!i)return null;const a=o?Pt:yo;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(vo)}const ar=0,ct=1,Bt=2,zn=3,ri=4,us=5,Or=6,As=7,Kn=8,xs=9,Yi=10,Ot=11,hi=12,Eo=13,zs=14,Sn=15,Gs=16,cs=17,fi=18,ls=19,ad=20,ds=21,Qi=22,Ws=23,wo=24,qt=25,ud=1,Ns=2,Ji=7,_a=8,Ii=9,gr=11;function pi(i){return Array.isArray(i)&&"object"==typeof i[ud]}function gi(i){return Array.isArray(i)&&!0===i[ud]}function Ea(i){return 0!=(4&i.flags)}function es(i){return i.componentOffset>-1}function Io(i){return 1==(1&i.flags)}function ii(i){return!!i.template}function cu(i){return 0!=(512&i[Bt])}function si(i,o){return i.hasOwnProperty(Ie)?i[Ie]:null}let Lf=rt.WeakRef??class Ic{constructor(o){this.ref=o}deref(){return this.ref}},j=0,re=null,Re=!1;function Oe(i){const o=re;return re=i,o}class gt{constructor(){this.id=j++,this.ref=function A(i){return new Lf(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,a]of this.producers){const c=a.producerNode.deref();if(void 0!==c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=Re;Re=!0;try{for(const[a,c]of this.consumers){const d=c.consumerNode.deref();void 0!==d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),d?.producers.delete(this.id))}}finally{Re=o}}producerAccessed(){if(Re)throw new Error("");if(null===re)return;let o=re.producers.get(this.id);void 0===o?(o={consumerNode:re.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:re.trackingVersion},re.producers.set(this.id,o),this.consumers.set(re.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=re.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==re?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let Rs=null;const ay=()=>{};class Vf extends gt{constructor(o,a,c){super(),this.watch=o,this.schedule=a,this.dirty=!1,this.cleanupFn=ay,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=Oe(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ay,this.watch(this.registerOnCleanup)}finally{Oe(o)}}cleanup(){this.cleanupFn()}}class uE{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Dc(){return uy}function uy(i){return i.type.prototype.ngOnChanges&&(i.setInput=cE),Uf}function Uf(){const i=cy(this),o=i?.current;if(o){const a=i.previous;if(a===K)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function cE(i,o,a,c){const d=this.declaredInputs[a],f=cy(i)||function gd(i,o){return i[pd]=o}(i,{previous:K,current:null}),y=f.current||(f.current={}),E=f.previous,I=E[d];y[d]=new uE(I&&I.currentValue,o,E===K),i[c]=o}Dc.ngInherit=!0;const pd="__ngSimpleChanges__";function cy(i){return i[pd]||null}const Ps=function(i,o,a){};function ur(i){for(;Array.isArray(i);)i=i[ar];return i}function fu(i,o){return ur(o[i])}function ki(i,o){return ur(o[i.index])}function jf(i,o){return i.data[o]}function Fi(i,o){const a=o[i];return pi(a)?a:a[ar]}function bc(i){return 128==(128&i[Bt])}function gs(i,o){return null==o?null:i[o]}function hy(i){i[cs]=0}function Tc(i){1024&i[Bt]||(i[Bt]|=1024,Hf(i,1))}function $f(i){1024&i[Bt]&&(i[Bt]&=-1025,Hf(i,-1))}function Hf(i,o){let a=i[zn];if(null===a)return;a[us]+=o;let c=a;for(a=a[zn];null!==a&&(1===o&&1===c[us]||-1===o&&0===c[us]);)a[us]+=o,c=a,a=a[zn]}const zt={lFrame:Nc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ed(){return zt.bindingsEnabled}function $e(){return zt.lFrame.lView}function an(){return zt.lFrame.tView}function yu(i){return zt.lFrame.contextLView=i,i[Kn]}function Wf(i){return zt.lFrame.contextLView=null,i}function oi(){let i=Dd();for(;null!==i&&64===i.type;)i=i.parent;return i}function Dd(){return zt.lFrame.currentTNode}function Li(i,o){const a=zt.lFrame;a.currentTNode=i,a.isParent=o}function Cd(){return zt.lFrame.isParent}function Zs(){return zt.lFrame.bindingIndex++}function yy(i,o){const a=zt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Sd(o)}function Sd(i){zt.lFrame.currentDirectiveIndex=i}function Ac(){return zt.lFrame.currentQueryIndex}function To(i){zt.lFrame.currentQueryIndex=i}function xc(i){const o=i[ct];return 2===o.type?o.declTNode:1===o.type?i[Or]:null}function vy(i,o,a){if(a&vt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&vt.Host||(d=xc(f),null===d||(f=f[zs],10&d.type))););if(null===d)return!1;o=d,i=f}const c=zt.lFrame=Zf();return c.currentTNode=o,c.lView=i,!0}function _u(i){const o=Zf(),a=i[ct];zt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Zf(){const i=zt.lFrame,o=null===i?null:i.child;return null===o?Nc(i):o}function Nc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Rc(){const i=zt.lFrame;return zt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Eu=Rc;function ms(){const i=Rc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ai(){return zt.lFrame.selectedIndex}function Ys(i){zt.lFrame.selectedIndex=i}function yr(){const i=zt.lFrame;return jf(i.tView,i.selectedIndex)}let Iy=!0;function Md(){return Iy}function Xo(i){Iy=i}function Ad(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:M}=f;y&&(i.contentHooks??=[]).push(-a,y),E&&((i.contentHooks??=[]).push(a,E),(i.contentCheckHooks??=[]).push(a,E)),I&&(i.viewHooks??=[]).push(-a,I),C&&((i.viewHooks??=[]).push(a,C),(i.viewCheckHooks??=[]).push(a,C)),null!=M&&(i.destroyHooks??=[]).push(a,M)}}function xd(i,o,a){Dy(i,o,3,a)}function Oc(i,o,a,c){(3&i[Bt])===a&&Dy(i,o,a,c)}function kc(i,o){let a=i[Bt];(3&a)===o&&(a&=4095,a+=1,i[Bt]=a)}function Dy(i,o,a,c){const f=c??-1,y=o.length-1;let E=0;for(let I=void 0!==c?65535&i[cs]:0;I<y;I++)if("number"==typeof o[I+1]){if(E=o[I],null!=c&&E>=c)break}else o[I]<0&&(i[cs]+=65536),(E<f||-1==f)&&(gE(i,a,o,I),i[cs]=(4294901760&i[cs])+I+2),I++}function Qf(i,o){Ps(4,i,o);const a=Oe(null);try{o.call(i)}finally{Oe(a),Ps(5,i,o)}}function gE(i,o,a,c){const d=a[c]<0,f=a[c+1],E=i[d?-a[c]:a[c]];d?i[Bt]>>12<i[cs]>>16&&(3&i[Bt])===o&&(i[Bt]+=4096,Qf(E,f)):Qf(E,f)}const wu=-1;class Fc{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Qs(i){return i!==wu}function Hr(i){return 32767&i}function Qn(i,o){let a=function Vr(i){return i>>16}(i),c=o;for(;a>0;)c=c[zs],a--;return c}let yt=!0;function ks(i){const o=yt;return yt=i,o}const Iu=255,Lc=5;let Vi=0;const Fs={};function Vc(i,o){const a=Xf(i,o);if(-1!==a)return a;const c=o[ct];c.firstCreatePass&&(i.injectorIndex=o.length,Du(c.data,i),Du(o,null),Du(c.blueprint,null));const d=Ma(i,o),f=i.injectorIndex;if(Qs(d)){const y=Hr(d),E=Qn(d,o),I=E[ct].data;for(let C=0;C<8;C++)o[f+C]=E[y+C]|I[y+C]}return o[f+8]=d,f}function Du(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Xf(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ma(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Od(d),null===c)return wu;if(a++,d=d[zs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return wu}function Aa(i,o,a){!function Cy(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(it)&&(c=a[it]),null==c&&(c=a[it]=Vi++);const d=c&Iu;o.data[i+(d>>Lc)]|=1<<d}(i,o,a)}function Nd(i,o,a){if(a&vt.Optional||void 0!==i)return i;Be()}function ep(i,o,a,c){if(a&vt.Optional&&void 0===c&&(c=null),!(a&(vt.Self|vt.Host))){const d=i[xs],f=On(void 0);try{return d?d.get(o,c,a&vt.Optional):Kt(o,c,a&vt.Optional)}finally{On(f)}}return Nd(c,0,a)}function xa(i,o,a,c=vt.Default,d){if(null!==i){if(2048&o[Bt]&&!(c&vt.Self)){const y=function na(i,o,a,c,d){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[Bt]&&!(512&y[Bt]);){const E=Rd(f,y,a,c|vt.Self,Fs);if(E!==Fs)return E;let I=f.parent;if(!I){const C=y[ad];if(C){const M=C.get(a,Fs,c);if(M!==Fs)return M}I=Od(y),y=y[zs]}f=I}return d}(i,o,a,c,Fs);if(y!==Fs)return y}const f=Rd(i,o,a,c,Fs);if(f!==Fs)return f}return ep(o,a,c,d)}function Rd(i,o,a,c,d){const f=function So(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(it)?i[it]:void 0;return"number"==typeof o?o>=0?o&Iu:yi:o}(a);if("function"==typeof f){if(!vy(o,i,c))return c&vt.Host?Nd(d,0,c):ep(o,a,c,d);try{const y=f(c);if(null!=y||c&vt.Optional)return y;Be()}finally{Eu()}}else if("number"==typeof f){let y=null,E=Xf(i,o),I=wu,C=c&vt.Host?o[Sn][Or]:null;for((-1===E||c&vt.SkipSelf)&&(I=-1===E?Ma(i,o):o[E+8],I!==wu&&Cu(c,!1)?(y=o[ct],E=Hr(I),o=Qn(I,o)):E=-1);-1!==E;){const M=o[ct];if(br(f,E,M.data)){const L=tp(E,o,a,y,c,C);if(L!==Fs)return L}I=o[E+8],I!==wu&&Cu(c,o[ct].data[E+8]===C)&&br(f,E,o)?(y=M,E=Hr(I),o=Qn(I,o)):E=-1}}return d}function tp(i,o,a,c,d,f){const y=o[ct],E=y.data[i+8],M=ta(E,y,a,null==c?es(E)&&yt:c!=y&&0!=(3&E.type),d&vt.Host&&f===E);return null!==M?Js(o,y,M,E):Fs}function ta(i,o,a,c,d){const f=i.providerIndexes,y=o.data,E=1048575&f,I=i.directiveStart,M=f>>20,Z=d?E+M:i.directiveEnd;for(let te=c?E:E+M;te<Z;te++){const Me=y[te];if(te<I&&a===Me||te>=I&&Me.type===a)return te}if(d){const te=y[I];if(te&&ii(te)&&te.type===a)return I}return null}function Js(i,o,a,c){let d=i[a];const f=o.data;if(function Jf(i){return i instanceof Fc}(d)){const y=d;y.resolving&&function be(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new fe(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ze(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ze(i)}(f[a]));const E=ks(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?On(y.injectImpl):null;vy(i,c,vt.Default);try{d=i[a]=y.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Yf(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=uy(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==I&&On(I),ks(E),y.resolving=!1,Eu()}}return d}function br(i,o,a){return!!(a[o+(i>>Lc)]&1<<i)}function Cu(i,o){return!(i&vt.Self||i&vt.Host&&o)}class Xs{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return xa(this._tNode,this._lView,o,Vn(c),a)}}function yi(){return new Xs(oi(),$e())}function Pd(i){return R(()=>{const o=i.prototype.constructor,a=o[Ie]||bu(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Ie]||bu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function bu(i){return xe(i)?()=>{const o=bu(q(i));return o&&o()}:si(i)}function Od(i){const o=i[ct],a=o.type;return 2===a?o.declTNode:1===a?i[Or]:null}function kd(i){return function ys(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(se(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(oi(),i)}const ra="__parameters__";function eo(i,o,a){return R(()=>{const c=function Fd(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(I,C,M){const L=I.hasOwnProperty(ra)?I[ra]:Object.defineProperty(I,ra,{value:[]})[ra];for(;L.length<=M;)L.push(null);return(L[M]=L[M]||[]).push(y),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Su(i,o){i.forEach(a=>Array.isArray(a)?Su(a,o):o(a))}function Uc(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Bc(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function yn(i,o,a){let c=Pa(i,o);return c>=0?i[1|c]=a:(c=~c,function Ry(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Ao(i,o){const a=Pa(i,o);if(a>=0)return i[1|a]}function Pa(i,o){return function Mu(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(o===y)return f<<a;y>o?d=f:c=f+1}return~(d<<a)}(i,o,1)}const jc=pr(eo("Optional"),8),Oa=pr(eo("SkipSelf"),4);function xo(i){return 128==(128&i.flags)}var vs=(()=>((vs=vs||{})[vs.Important=1]="Important",vs[vs.DashCase=2]="DashCase",vs))();const jy=new Map;let qc=0;const cp="__ngContext__";function bi(i,o){pi(o)?(i[cp]=o[ls],function Nb(i){jy.set(i[ls],i)}(o)):i[cp]=o}let ku;function Wd(i,o){return ku(i,o)}function La(i){const o=i[zn];return gi(o)?o[zn]:o}function Yc(i){return lp(i[hi])}function Gy(i){return lp(i[ri])}function lp(i){for(;null!==i&&!gi(i);)i=i[ri];return i}function sa(i,o,a,c,d){if(null!=c){let f,y=!1;gi(c)?f=c:pi(c)&&(y=!0,c=c[ar]);const E=ur(c);0===i&&null!==a?null==d?Yy(o,a,E):Va(o,a,E,d||null,!0):1===i&&null!==a?Va(o,a,E,d||null,!0):2===i?function fp(i,o,a){const c=Qd(i,o);c&&function Yd(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,y):3===i&&o.destroyNode(E),null!=f&&function Fu(i,o,a,c,d){const f=a[Ji];f!==ur(a)&&sa(o,i,c,f,d);for(let E=gr;E<a.length;E++){const I=a[E];ua(I[ct],I,i,o,c,f)}}(o,i,f,a,d)}}function dp(i,o,a){return i.createElement(o,a)}function AE(i,o){const a=i[Ii],c=a.indexOf(o);$f(o),a.splice(c,1)}function Zy(i,o){if(i.length<=gr)return;const a=gr+o,c=i[a];if(c){const d=c[Gs];null!==d&&d!==i&&AE(d,c),o>0&&(i[a-1][ri]=c[ri]);const f=Bc(i,gr+o);!function Ob(i,o){ua(i,o,o[Ot],2,null,null),o[ar]=null,o[Or]=null}(c[ct],c);const y=f[fi];null!==y&&y.detachView(f[ct]),c[zn]=null,c[ri]=null,c[Bt]&=-129}return c}function xE(i,o){if(!(256&o[Bt])){const a=o[Ot];o[Ws]?.destroy(),o[wo]?.destroy(),a.destroyNode&&ua(i,o,a,3,null,null),function Fb(i){let o=i[hi];if(!o)return hp(i[ct],i);for(;o;){let a=null;if(pi(o))a=o[hi];else{const c=o[gr];c&&(a=c)}if(!a){for(;o&&!o[ri]&&o!==i;)pi(o)&&hp(o[ct],o),o=o[zn];null===o&&(o=i),pi(o)&&hp(o[ct],o),a=o&&o[ri]}o=a}}(o)}}function hp(i,o){if(!(256&o[Bt])){o[Bt]&=-129,o[Bt]|=256,function Ub(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Fc)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],I=f[y+1];Ps(4,E,I);try{I.call(E)}finally{Ps(5,E,I)}}else{Ps(4,d,f);try{f.call(d)}finally{Ps(5,d,f)}}}}}(i,o),function NE(i,o){const a=i.cleanup,c=o[As];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[As]=null);const d=o[ds];if(null!==d){o[ds]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[ct].type&&o[Ot].destroy();const a=o[Gs];if(null!==a&&gi(o[zn])){a!==o[zn]&&AE(a,o);const c=o[fi];null!==c&&c.detachView(i)}!function DE(i){jy.delete(i[ls])}(o)}}function oa(i,o,a){return function RE(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[ar];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===S.None||f===S.Emulated)return null}return ki(c,a)}}(i,o.parent,a)}function Va(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Yy(i,o,a){i.appendChild(o,a)}function Zd(i,o,a,c,d){null!==c?Va(i,o,a,c,d):Yy(i,o,a)}function Qd(i,o){return i.parentNode(o)}let Qy,ev,nh,FE=function Jd(i,o,a){return 40&i.type?ki(i,a):null};function Xd(i,o,a,c){const d=oa(i,c,o),f=o[Ot],E=function kE(i,o,a){return FE(i,o,a)}(c.parent||o[Or],c,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Zd(f,d,a[I],E,!1);else Zd(f,d,a,E,!1);void 0!==Qy&&Qy(f,c,o,a,d)}function aa(i,o){if(null!==o){const a=o.type;if(3&a)return ki(o,i);if(4&a)return eh(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return aa(i,c);{const d=i[o.index];return gi(d)?eh(-1,d):ur(d)}}if(32&a)return Wd(o,i)()||ur(i[o.index]);{const c=VE(i,o);return null!==c?Array.isArray(c)?c[0]:aa(La(i[Sn]),c):aa(i,o.next)}}return null}function VE(i,o){return null!==o?i[Sn][Or].projection[o.projection]:null}function eh(i,o){const a=gr+i+1;if(a<o.length){const c=o[a],d=c[ct].firstChild;if(null!==d)return aa(c,d)}return o[Ji]}function pp(i,o,a,c,d,f,y){for(;null!=a;){const E=c[a.index],I=a.type;if(y&&0===o&&(E&&bi(ur(E),c),a.flags|=2),32!=(32&a.flags))if(8&I)pp(i,o,a.child,c,d,f,!1),sa(o,i,d,E,f);else if(32&I){const C=Wd(a,c);let M;for(;M=C();)sa(o,i,d,M,f);sa(o,i,d,E,f)}else 16&I?gp(i,o,c,a,d,f):sa(o,i,d,E,f);a=y?a.projectionNext:a.next}}function ua(i,o,a,c,d,f){pp(a,c,i.firstChild,o,d,f,!1)}function gp(i,o,a,c,d,f){const y=a[Sn],I=y[Or].projection[c.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)sa(o,i,d,I[C],f);else{let C=I;const M=y[zn];xo(c)&&(C.flags|=128),pp(i,o,C,M,d,f,!0)}}function yp(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function UE(i,o,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&Ut(i,o,c),null!==d&&yp(i,o,d),null!==f&&function th(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function Hb(i){ev=i}function tv(i){return function BE(){if(void 0===nh&&(nh=null,rt.trustedTypes))try{nh=rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return nh}()?.createScriptURL(i)||i}class _p{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Et})`}}function Ua(i){return i instanceof _p?i.changingThisBreaksApplicationSecurity:i}function Po(i,o){const a=function zE(i){return i instanceof _p&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${Et})`)}return a===o}const wp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var vr=(()=>((vr=vr||{})[vr.NONE=0]="NONE",vr[vr.HTML=1]="HTML",vr[vr.STYLE=2]="STYLE",vr[vr.SCRIPT=3]="SCRIPT",vr[vr.URL=4]="URL",vr[vr.RESOURCE_URL=5]="RESOURCE_URL",vr))();function YE(i){const o=ha();return o?o.sanitize(vr.URL,i)||"":Po(i,"URL")?Ua(i):function Ip(i){return(i=String(i)).match(wp)?i:"unsafe:"+i}(ze(i))}function ov(i){const o=ha();if(o)return tv(o.sanitize(vr.RESOURCE_URL,i)||"");if(Po(i,"ResourceURL"))return tv(Ua(i));throw new fe(904,!1)}function nl(i,o,a){return function tl(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?ov:YE}(o,a)(i)}function ha(){const i=$e();return i&&i[Yi].sanitizer}class vn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=bt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ih=new vn("ENVIRONMENT_INITIALIZER"),QE=new vn("INJECTOR",-1),JE=new vn("INJECTOR_DEF_TYPES");class XE{get(o,a=bn){if(a===bn){const c=new Error(`NullInjectorError: No provider for ${Ce(o)}!`);throw c.name="NullInjectorError",c}return a}}function av(i){return{\u0275providers:i}}function nT(...i){return{\u0275providers:rT(0,i),\u0275fromNgModule:!0}}function rT(i,...o){const a=[],c=new Set;let d;return Su(o,f=>{const y=f;Sp(y,a,[],c)&&(d||=[],d.push(y))}),void 0!==d&&ew(d,a),a}function ew(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Ba(d,f=>{o.push(f)})}}function Sp(i,o,a,c){if(!(i=q(i)))return!1;let d=null,f=nr(i);const y=!f&&oe(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const I=i.ngModule;if(f=nr(I),!f)return!1;d=I}const E=c.has(d);if(y){if(E)return!1;if(c.add(d),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const C of I)Sp(C,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let C;c.add(d);try{Su(f.imports,M=>{Sp(M,o,a,c)&&(C||=[],C.push(M))})}finally{}void 0!==C&&ew(C,o)}if(!E){const C=si(d)||(()=>new d);o.push({provide:d,useFactory:C,deps:ie},{provide:JE,useValue:d,multi:!0},{provide:ih,useValue:()=>Jt(d),multi:!0})}const I=f.providers;null==I||E||Ba(I,M=>{o.push(M)})}}return d!==i&&void 0!==i.providers}function Ba(i,o){for(let a of i)we(a)&&(a=a.\u0275providers),Array.isArray(a)?Ba(a,o):o(a)}const iT=ce({provide:String,useValue:ce});function cv(i){return null!==i&&"object"==typeof i&&iT in i}function Lu(i){return"function"==typeof i}const lv=new vn("Set Injector scope."),Mp={},oT={};let Ap;function xp(){return void 0===Ap&&(Ap=new XE),Ap}class Oo{}class Np extends Oo{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rp(o,y=>this.processProvider(y)),this.records.set(QE,rl(void 0,this)),d.has("environment")&&this.records.set(Oo,rl(void 0,this));const f=this.records.get(lv);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(JE.multi,ie,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=kn(this),c=On(void 0);try{return o()}finally{kn(a),On(c)}}get(o,a=bn,c=vt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(et))return o[et](this);c=Vn(c);const d=kn(this),f=On(void 0);try{if(!(c&vt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const I=function hv(i){return"function"==typeof i||"object"==typeof i&&i instanceof vn}(o)&&mn(o);E=I&&this.injectableDefInScope(I)?rl(ja(o),Mp):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&vt.Self?xp():this.parent).get(o,a=c&vt.Optional&&a===bn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[fr]=y[fr]||[]).unshift(Ce(o)),d)throw y;return function H(i,o,a,c){const d=i[fr];throw o[nn]&&d.unshift(o[nn]),i.message=function B(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Ce(o);if(Array.isArray(o))d=o.map(Ce).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):Ce(E)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Dr,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[fr]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{On(f),kn(d)}}resolveInjectorInitializers(){const o=kn(this),a=On(void 0);try{const c=this.get(ih.multi,ie,vt.Self);for(const d of c)d()}finally{kn(o),On(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Ce(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(o){let a=Lu(o=q(o))?o:q(o&&o.provide);const c=function aT(i){return cv(i)?rl(void 0,i.useValue):rl(iw(i),Mp)}(o);if(Lu(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=rl(void 0,Mp,!0),d.factory=()=>Lr(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Mp&&(a.value=oT,a.value=a.factory()),"object"==typeof a.value&&a.value&&function uT(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function ja(i){const o=mn(i),a=null!==o?o.factory:si(i);if(null!==a)return a;if(i instanceof vn)throw new fe(204,!1);if(i instanceof Function)return function rw(i){const o=i.length;if(o>0)throw function to(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new fe(204,!1);const a=function Ir(i){return i&&(i[Ln]||i[di])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new fe(204,!1)}function iw(i,o,a){let c;if(Lu(i)){const d=q(i);return si(d)||ja(d)}if(cv(i))c=()=>q(i.useValue);else if(function nw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Lr(i.deps||[]));else if(function tw(i){return!(!i||!i.useExisting)}(i))c=()=>Jt(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function dv(i){return!!i.deps}(i))return si(d)||ja(d);c=()=>new d(...Lr(i.deps))}return c}function rl(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Rp(i,o){for(const a of i)Array.isArray(a)?Rp(a,o):a&&we(a)?Rp(a.\u0275providers,o):o(a)}const sw=new vn("AppId",{providedIn:"root",factory:()=>cT}),cT="ng",ow=new vn("Platform Initializer"),fv=new vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),lT=new vn("CSP nonce",{providedIn:"root",factory:()=>function Jc(){if(void 0!==ev)return ev;if(typeof document<"u")return document;throw new fe(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let vv=(i,o)=>null;function _v(i,o){return vv(i,o)}class pT{}class hw{}class gT{resolveComponentFactory(o){throw function ws(i){const o=Error(`No component factory found for ${Ce(i)}.`);return o.ngComponent=i,o}(o)}}let ch=(()=>{class i{}return i.NULL=new gT,i})();function gw(){return lh(oi(),$e())}function lh(i,o){return new Bp(ki(i,o))}let Bp=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=gw,i})();function mT(i){return i instanceof Bp?i.nativeElement:i}class jp{}let mw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Ux(){const i=$e(),a=Fi(oi().index,i);return(pi(a)?a:i)[Ot]}(),i})(),yw=(()=>{class i{}return i.\u0275prov=bt({token:i,providedIn:"root",factory:()=>null}),i})();class ko{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const vw=new ko("16.0.3"),_w={};function $p(i){for(;i;){i[Bt]|=64;const o=La(i);if(cu(i)&&!o)return i;i=o}return null}function Hp(i){return i.ngOriginalError}class $a{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Hp(o);for(;a&&Hp(a);)a=Hp(a);return a||null}}const _T=new vn("",{providedIn:"root",factory:()=>!1});function fa(i){return i instanceof Function?i():i}class bw extends gt{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){$p(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,a,c){const d=Oe(this);this.trackingVersion++;try{o(a,c)}finally{Oe(d)}}destroy(){this.trackingVersion++}}let Cv=null;function TT(){return Cv??=new bw,Cv}function ST(i,o){return i[o]??TT()}function MT(i,o){const a=TT();a.hasReadASignal&&(i[o]=Cv,a.lView=i,Cv=new bw)}const en={};function AT(i){Tw(an(),$e(),ai()+i,!1)}function Tw(i,o,a,c){if(!c)if(3==(3&o[Bt])){const f=i.preOrderCheckHooks;null!==f&&xd(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Oc(o,f,0,a)}Ys(a)}function Sw(i,o=null,a=null,c){const d=Mw(i,o,a,c);return d.resolveInjectorInitializers(),d}function Mw(i,o=null,a=null,c,d=new Set){const f=[a||ie,nT(i)];return c=c||("object"==typeof i?void 0:Ce(i)),new Np(f,o||xp(),c||null,d)}let Uu=(()=>{class i{static create(a,c){if(Array.isArray(a))return Sw({name:""},c,a,"");{const d=a.name??"";return Sw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=bn,i.NULL=new XE,i.\u0275prov=bt({token:i,providedIn:"any",factory:()=>Jt(QE)}),i.__NG_ELEMENT_ID__=-1,i})();function dh(i,o=vt.Default){const a=$e();return null===a?Jt(i,o):xa(oi(),a,q(i),o)}function OT(){throw new Error("invalid")}function Tv(i,o,a,c,d,f,y,E,I,C,M){const L=o.blueprint.slice();return L[ar]=d,L[Bt]=140|c,(null!==C||i&&2048&i[Bt])&&(L[Bt]|=2048),hy(L),L[zn]=L[zs]=i,L[Kn]=a,L[Yi]=y||i&&i[Yi],L[Ot]=E||i&&i[Ot],L[xs]=I||i&&i[xs]||null,L[Or]=f,L[ls]=function xb(){return qc++}(),L[Qi]=M,L[ad]=C,L[Sn]=2==o.type?i[Sn]:L,L}function hh(i,o,a,c,d){let f=i.data[o];if(null===f)f=function Aw(i,o,a,c,d){const f=Dd(),y=Cd(),I=i.data[o]=function BT(i,o,a,c,d,f){let y=o?o.injectorIndex:-1,E=0;return function ba(){return null!==zt.skipHydrationRootTNode}()&&(E|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I,I.prev=f)),I}(i,o,a,c,d),function bd(){return zt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function Mc(){const i=zt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Li(f,!0),f}function Ee(i,o,a,c){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function Ha(i,o,a,c,d){const f=ST(o,Ws),y=ai(),E=2&c;try{if(Ys(-1),E&&o.length>qt&&Tw(i,o,qt,!1),Ps(E?2:0,d),E)f.runInContext(a,c,d);else{const C=Oe(null);try{a(c,d)}finally{Oe(C)}}}finally{E&&null===o[Ws]&&MT(o,Ws),Ys(y),Ps(E?3:1,d)}}function al(i,o,a){if(Ea(o)){const c=Oe(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const E=i.data[y];E.contentQueries&&E.contentQueries(1,a[y],y)}}finally{Oe(c)}}}function En(i,o,a){Ed()&&(function HT(i,o,a,c){const d=a.directiveStart,f=a.directiveEnd;es(a)&&function GT(i,o,a){const c=ki(o,i),y=yh(i,Tv(i,Wp(a),null,a.onPush?64:16,c,o,null,i[Yi].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=y}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||Vc(a,o),bi(c,o);const y=a.initialInputs;for(let E=d;E<f;E++){const I=i.data[E],C=Js(o,i,E,a);bi(C,o),null!==y&&WT(0,E-d,C,I,0,y),ii(I)&&(Fi(a.index,o)[Kn]=Js(o,i,E,a))}}(i,o,a,ki(a,o)),64==(64&a.flags)&&Rw(i,o,a))}function Fo(i,o,a=ki){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?a(o,i):i[y];i[d++]=E}}}function Wp(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=qp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function qp(i,o,a,c,d,f,y,E,I,C,M){const L=qt+c,Z=L+d,te=function FT(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:en);return a}(L,Z),Me="function"==typeof C?C():C;return te[ct]={type:i,blueprint:te,template:a,queries:null,viewQuery:E,declTNode:o,data:te.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:Z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Me,incompleteFirstPass:!1,ssrId:M}}let fh=i=>null;function Mv(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?xw(a,o,d,f):c.hasOwnProperty(d)&&xw(a,o,c[d],f)}return a}function xw(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function ph(i,o,a,c){if(Ed()){const d=null===c?null:{"":-1},f=function zT(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(ir(o,y.selectors,!1))if(c||(c=[]),ii(y))if(null!==y.findHostDirectiveDefs){const E=[];d=d||new Map,y.findHostDirectiveDefs(y,E,d),c.unshift(...E,y),xv(i,o,E.length)}else c.unshift(y),xv(i,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,E;null===f?y=E=null:[y,E]=f,null!==y&&gh(i,o,a,y,d,E),d&&function mh(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new fe(-301,!1);c.push(o[d],f)}}}(a,c,d)}a.mergedAttrs=Pe(a.mergedAttrs,a.attrs)}function gh(i,o,a,c,d,f){for(let C=0;C<c.length;C++)Aa(Vc(a,o),i,c[C].type);!function Yp(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let C=0;C<c.length;C++){const M=c[C];M.providersResolver&&M.providersResolver(M)}let y=!1,E=!1,I=Ee(i,o,c.length,null);for(let C=0;C<c.length;C++){const M=c[C];a.mergedAttrs=Pe(a.mergedAttrs,M.hostAttrs),kw(i,a,o,I,M),Ow(I,M,d),null!==M.contentQueries&&(a.flags|=4),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=64);const L=M.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!E&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),E=!0),I++}!function jT(i,o,a){const d=o.directiveEnd,f=i.data,y=o.attrs,E=[];let I=null,C=null;for(let M=o.directiveStart;M<d;M++){const L=f[M],Z=a?a.get(L):null,Me=Z?Z.outputs:null;I=Mv(L.inputs,M,I,Z?Z.inputs:null),C=Mv(L.outputs,M,C,Me);const qe=null===I||null===y||on(o)?null:Pv(I,M,y);E.push(qe)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=I,o.outputs=C}(i,a,f)}function Rw(i,o,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Td(){return zt.lFrame.currentDirectiveIndex}();try{Ys(f);for(let E=c;E<d;E++){const I=i.data[E],C=o[E];Sd(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Pw(I,C)}}finally{Ys(-1),Sd(y)}}function Pw(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function xv(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function Ow(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;ii(o)&&(a[""]=i)}}function kw(i,o,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=si(d.type)),y=new Fc(f,ii(d),dh);i.blueprint[c]=y,a[c]=y,function Zp(i,o,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const E=~o.index;(function Av(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=E&&y.push(E),y.push(a,c,f)}}(i,o,c,Ee(i,a,d.hostVars,en),d)}function Lo(i,o,a,c,d,f){const y=ki(i,o);!function Nv(i,o,a,c,d,f,y){if(null==f)i.removeAttribute(o,d,a);else{const E=null==y?ze(f):y(f,c||"",d);i.setAttribute(o,d,E,a)}}(o[Ot],y,f,i.value,a,c,d)}function WT(i,o,a,c,d,f){const y=f[o];if(null!==y)for(let E=0;E<y.length;)Rv(c,a,y[E++],y[E++],y[E++])}function Rv(i,o,a,c,d){const f=Oe(null);try{null!==i.setInput?i.setInput(o,d,a,c):o[c]=d}finally{Oe(f)}}function Pv(i,o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let E=0;E<y.length;E+=2)if(y[E]===o){c.push(f,y[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Ov(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function Qp(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];To(a[c]),y.contentQueries(2,o[f],f)}}}function yh(i,o){return i[hi]?i[Eo][ri]=o:i[hi]=o,i[Eo]=o,o}function Bu(i,o,a){To(0);const c=Oe(null);try{o(i,a)}finally{Oe(c)}}function Jp(i){return i[As]||(i[As]=[])}function Xp(i){return i.cleanup||(i.cleanup=[])}function eg(i,o){const a=i[xs],c=a?a.get($a,null):null;c&&c.handleError(o)}function vh(i,o,a,c,d){for(let f=0;f<a.length;){const y=a[f++],E=a[f++];Rv(i.data[y],o[y],c,E,d)}}function kv(i,o){const a=Fi(o,i),c=a[ct];!function qT(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const d=a[ar];null!==d&&null===a[Qi]&&(a[Qi]=_v(d,a[xs])),Fv(c,a,a[Kn])}function Fv(i,o,a){_u(o);try{const c=i.viewQuery;null!==c&&Bu(1,c,a);const d=i.template;null!==d&&Ha(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Qp(i,o),i.staticViewQueries&&Bu(2,i.viewQuery,a);const f=i.components;null!==f&&function KT(i,o){for(let a=0;a<o.length;a++)kv(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Bt]&=-5,ms()}}let ng=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const f=typeof Zone>"u"?null:Zone.current,y=new Vf(a,C=>{this.all.has(C)&&this.queue.set(C,f)},d);let E;this.all.add(y),y.notify();const I=()=>{y.cleanup(),E?.(),this.all.delete(y),this.queue.delete(y)};return E=c?.onDestroy(I),{destroy:I}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return i.\u0275prov=bt({token:i,providedIn:"root",factory:()=>new i}),i})();function ul(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=_e(d,E):2==f&&(c=_e(c,E+": "+o[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function cl(i,o,a,c,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&c.push(ur(f)),gi(f)){for(let E=gr;E<f.length;E++){const I=f[E],C=I[ct].firstChild;null!==C&&cl(I[ct],I,C,c)}f[Ji]!==f[ar]&&c.push(f[Ji])}const y=a.type;if(8&y)cl(i,o,a.child,c);else if(32&y){const E=Wd(a,o);let I;for(;I=E();)c.push(I)}else if(16&y){const E=VE(o,a);if(Array.isArray(E))c.push(...E);else{const I=La(o[Sn]);cl(I[ct],I,E,c,!0)}}a=d?a.projectionNext:a.next}return c}function rg(i,o,a,c=!0){const d=o[Yi].rendererFactory;d.begin&&d.begin();try{_h(i,o,i.template,a)}catch(y){throw c&&eg(o,y),y}finally{d.end&&d.end(),o[Yi].effectManager?.flush()}}function _h(i,o,a,c){const d=o[Bt];if(256!=(256&d)){o[Yi].effectManager?.flush(),_u(o);try{hy(o),function my(i){return zt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ha(i,o,a,2,c);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&xd(o,C,null)}else{const C=i.preOrderHooks;null!==C&&Oc(o,C,0,null),kc(o,0)}if(function JT(i){for(let o=Yc(i);null!==o;o=Gy(o)){if(!o[Ns])continue;const a=o[Ii];for(let c=0;c<a.length;c++){Tc(a[c])}}}(o),function QT(i){for(let o=Yc(i);null!==o;o=Gy(o))for(let a=gr;a<o.length;a++){const c=o[a],d=c[ct];bc(c)&&_h(d,c,d.template,c[Kn])}}(o),null!==i.contentQueries&&Qp(i,o),y){const C=i.contentCheckHooks;null!==C&&xd(o,C)}else{const C=i.contentHooks;null!==C&&Oc(o,C,1),kc(o,1)}!function kT(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=ST(o,wo);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)Ys(~f);else{const y=f,E=a[++d],I=a[++d];yy(E,y),c.runInContext(I,2,o[y])}}}finally{null===o[wo]&&MT(o,wo),Ys(-1)}}(i,o);const E=i.components;null!==E&&function eS(i,o){for(let a=0;a<o.length;a++)XT(i,o[a])}(o,E);const I=i.viewQuery;if(null!==I&&Bu(2,I,c),y){const C=i.viewCheckHooks;null!==C&&xd(o,C)}else{const C=i.viewHooks;null!==C&&Oc(o,C,2),kc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Bt]&=-73,$f(o)}finally{ms()}}}function XT(i,o){const a=Fi(o,i);if(bc(a)){const c=a[ct];80&a[Bt]?_h(c,a,c.template,a[Kn]):a[us]>0&&Uv(a)}}function Uv(i){for(let c=Yc(i);null!==c;c=Gy(c))for(let d=gr;d<c.length;d++){const f=c[d];if(bc(f))if(1024&f[Bt]){const y=f[ct];_h(y,f,y.template,f[Kn])}else f[us]>0&&Uv(f)}const a=i[ct].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Fi(a[c],i);bc(d)&&d[us]>0&&Uv(d)}}class Eh{get rootNodes(){const o=this._lView,a=o[ct];return cl(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kn]}set context(o){this._lView[Kn]=o}get destroyed(){return 256==(256&this._lView[Bt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[zn];if(gi(o)){const a=o[_a],c=a?a.indexOf(this):-1;c>-1&&(Zy(o,c),Bc(a,c))}this._attachedToViewContainer=!1}xE(this._lView[ct],this._lView)}onDestroy(o){!function fy(i,o){if(256==(256&i[Bt]))throw new fe(911,!1);null===i[ds]&&(i[ds]=[]),i[ds].push(o)}(this._lView,o)}markForCheck(){$p(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bt]&=-129}reattach(){this._lView[Bt]|=128}detectChanges(){rg(this._lView[ct],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kb(i,o){ua(i,o,o[Ot],2,null,null)}(this._lView[ct],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=o}}class tS extends Eh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;rg(o[ct],o,o[Kn],!1)}checkNoChanges(){}get context(){return null}}class Lw extends ch{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=oe(o);return new dl(a,this.ngModule)}}function Vw(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Uw{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Vn(c);const d=this.injector.get(o,_w,c);return d!==_w||a===_w?d:this.parentInjector.get(o,a,c)}}class dl extends hw{get inputs(){return Vw(this.componentDef.inputs)}get outputs(){return Vw(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function qn(i){return i.map(Ki).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let f=(d=d||this.ngModule)instanceof Oo?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Uw(o,f):o,E=y.get(jp,null);if(null===E)throw new fe(407,!1);const M={rendererFactory:E,sanitizer:y.get(yw,null),effectManager:y.get(ng,null)},L=E.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",te=c?function kr(i,o,a,c){const f=c.get(_T,!1)||a===S.ShadowDom,y=i.selectRootElement(o,f);return function LT(i){fh(i)}(y),y}(L,c,this.componentDef.encapsulation,y):dp(L,Z,function ig(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(Z)),Me=this.componentDef.onPush?576:528,qe=qp(0,null,null,1,0,null,null,null,null,null,null),ot=Tv(null,qe,null,Me,null,null,M,L,y,null,null);let xt,Ue;_u(ot);try{const Vt=this.componentDef;let fn,jn=null;Vt.findHostDirectiveDefs?(fn=[],jn=new Map,Vt.findHostDirectiveDefs(Vt,fn,jn),fn.push(Vt)):fn=[Vt];const fo=function nS(i,o){const a=i[ct],c=qt;return i[c]=o,hh(a,c,2,"#host",null)}(ot,te),SC=function rS(i,o,a,c,d,f,y){const E=d[ct];!function Bw(i,o,a,c){for(const d of i)o.mergedAttrs=Pe(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(ul(o,o.mergedAttrs,!0),null!==a&&UE(c,a,o))}(c,i,o,y);let I=null;null!==o&&(I=_v(o,d[xs]));const C=f.rendererFactory.createRenderer(o,a),M=Tv(d,Wp(a),null,a.onPush?64:16,d[i.index],i,f,C,null,null,I);return E.firstCreatePass&&xv(E,i,c.length-1),yh(d,M),d[i.index]=M}(fo,te,Vt,fn,ot,M,L);Ue=jf(qe,qt),te&&function $w(i,o,a,c){if(c)Ut(i,a,["ng-version",vw.full]);else{const{attrs:d,classes:f}=function va(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++c]):8===d&&a.push(f);else{if(!rr(d))break;d=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Ut(i,a,d),f&&f.length>0&&yp(i,a,f.join(" "))}}(L,Vt,te,c),void 0!==a&&function Hw(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Ue,this.ngContentSelectors,a),xt=function jw(i,o,a,c,d,f){const y=oi(),E=d[ct],I=ki(y,d);gh(E,d,y,a,null,c);for(let M=0;M<a.length;M++)bi(Js(d,E,y.directiveStart+M,y),d);Rw(E,d,y),I&&bi(I,d);const C=Js(d,E,y.directiveStart+y.componentOffset,y);if(i[Kn]=d[Kn]=C,null!==f)for(const M of f)M(C,o);return al(E,y,i),C}(SC,Vt,fn,jn,ot,[zw]),Fv(qe,ot,null)}finally{ms()}return new Bv(this.componentType,xt,lh(Ue,ot),ot,Ue)}}class Bv extends pT{constructor(o,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new tS(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;vh(f[ct],f,d,o,a),this.previousInputValues.set(o,a),$p(Fi(this._tNode.index,f))}}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function zw(){const i=oi();Ad($e()[ct],i)}function jv(i){let o=function iS(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(ii(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new fe(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Gw(i.inputs),y.declaredInputs=Gw(i.declaredInputs),y.outputs=Gw(i.outputs);const E=d.hostBindings;E&&Qx(i,E);const I=d.viewQuery,C=d.contentQueries;if(I&&$v(i,I),C&&Yx(i,C),ve(i.inputs,d.inputs),ve(i.declaredInputs,d.declaredInputs),ve(i.outputs,d.outputs),ii(d)&&d.data.animation){const M=i.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const E=f[y];E&&E.ngInherit&&E(i),E===jv&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Zx(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Pe(d.hostAttrs,a=Pe(a,d.hostAttrs))}}(c)}function Gw(i){return i===K?{}:i===ie?[]:i}function $v(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Yx(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{o(c,d,f),a(c,d,f)}:o}function Qx(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function Hv(i){return!!Zw(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Zw(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Bi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Ih(i,o,a,c){const d=$e();return Bi(d,Zs(),o)&&(an(),Lo(yr(),d,i,o,a,c)),Ih}function mS(i,o,a,c,d,f,y,E){const I=$e(),C=an(),M=i+qt,L=C.firstCreatePass?function vN(i,o,a,c,d,f,y,E,I){const C=o.consts,M=hh(o,i,4,y||null,gs(C,E));ph(o,a,M,gs(C,I)),Ad(o,M);const L=M.tView=qp(2,M,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C,null);return null!==o.queries&&(o.queries.template(o,M),L.queries=o.queries.embeddedTView(M)),M}(M,C,I,o,a,c,d,f,y):C.data[M];Li(L,!1);const Z=yS(C,I,L,i);Md()&&Xd(C,I,Z,L),bi(Z,I),yh(I,I[M]=Ov(Z,I,Z,L)),Io(L)&&En(C,I,L),null!=y&&Fo(I,L,E)}let yS=function vS(i,o,a,c){return Xo(!0),o[Ot].createComment("")};function aI(i,o,a){const c=$e();return Bi(c,Zs(),o)&&function Is(i,o,a,c,d,f,y,E){const I=ki(o,a);let M,C=o.inputs;!E&&null!=C&&(M=C[c])?(vh(i,a,M,c,d),es(o)&&function vi(i,o){const a=Fi(o,i);16&a[Bt]||(a[Bt]|=64)}(a,o.index)):3&o.type&&(c=function $T(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,o.value||"",c):d,f.setProperty(I,c,d))}(an(),yr(),c,i,o,c[Ot],a,!1),aI}function uI(i,o,a,c,d){const y=d?"class":"style";vh(i,a,o.inputs[y],y,c)}function Kv(i,o,a,c){const d=$e(),f=an(),y=qt+i,E=d[Ot],I=f.firstCreatePass?function DN(i,o,a,c,d,f){const y=o.consts,I=hh(o,i,2,c,gs(y,d));return ph(o,a,I,gs(y,f)),null!==I.attrs&&ul(I,I.attrs,!1),null!==I.mergedAttrs&&ul(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(y,f,d,o,a,c):f.data[y],C=_S(f,d,I,E,o,i);d[y]=C;const M=Io(I);return Li(I,!0),UE(E,C,I),32!=(32&I.flags)&&Md()&&Xd(f,d,C,I),0===function Co(){return zt.lFrame.elementDepthCount}()&&bi(C,d),function mu(){zt.lFrame.elementDepthCount++}(),M&&(En(f,d,I),al(f,I,d)),null!==c&&Fo(d,I),Kv}function Zv(){let i=oi();Cd()?function vu(){zt.lFrame.isParent=!1}():(i=i.parent,Li(i,!1));const o=i;(function lE(i){return zt.skipHydrationRootTNode===i})(o)&&function Id(){zt.skipHydrationRootTNode=null}(),function _d(){zt.lFrame.elementDepthCount--}();const a=an();return a.firstCreatePass&&(Ad(a,i),Ea(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Tt(i){return 0!=(8&i.flags)}(o)&&uI(a,o,$e(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ns(i){return 0!=(16&i.flags)}(o)&&uI(a,o,$e(),o.stylesWithoutHost,!1),Zv}function cI(i,o,a,c){return Kv(i,o,a,c),Zv(),cI}let _S=(i,o,a,c,d,f)=>(Xo(!0),dp(c,d,function Pc(){return zt.lFrame.currentNamespace}()));function $u(){return $e()}function Qv(i){return!!i&&"function"==typeof i.then}function fI(i){return!!i&&"function"==typeof i.subscribe}function Jv(i,o,a,c){const d=$e(),f=an(),y=oi();return function gI(i,o,a,c,d,f,y){const E=Io(c),C=i.firstCreatePass&&Xp(i),M=o[Kn],L=Jp(o);let Z=!0;if(3&c.type||y){const qe=ki(c,o),ot=y?y(qe):qe,xt=L.length,Ue=y?fn=>y(ur(fn[c.index])):c.index;let Vt=null;if(!y&&E&&(Vt=function IS(i,o,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const E=o[As],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof y&&(f+=2)}return null}(i,o,d,c.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=f,Vt.__ngLastListenerFn__=f,Z=!1;else{f=yI(c,o,M,f,!1);const fn=a.listen(ot,d,f);L.push(f,fn),C&&C.push(d,Ue,xt,xt+1)}}else f=yI(c,o,M,f,!1);const te=c.outputs;let Me;if(Z&&null!==te&&(Me=te[d])){const qe=Me.length;if(qe)for(let ot=0;ot<qe;ot+=2){const jn=o[Me[ot]][Me[ot+1]].subscribe(f),fo=L.length;L.push(f,jn),C&&C.push(d,c.index,fo,-(fo+1))}}}(f,d,d[Ot],y,i,o,c),Jv}function mI(i,o,a,c){try{return Ps(6,o,a),!1!==a(c)}catch(d){return eg(i,d),!1}finally{Ps(7,o,a)}}function yI(i,o,a,c,d){return function f(y){if(y===Function)return c;$p(i.componentOffset>-1?Fi(i.index,o):o);let I=mI(o,a,c,y),C=f.__ngNextListenerFn__;for(;C;)I=mI(o,a,C,y)&&I,C=C.__ngNextListenerFn__;return d&&!1===I&&y.preventDefault(),I}}function Xv(i=1){return function _y(i){return(zt.lFrame.contextLView=function Ey(i,o){for(;i>0;)o=o[zs],i--;return o}(i,zt.lFrame.contextLView))[Kn]}(i)}function Mh(i,o){return i<<17|o<<2}function Tr(i){return i>>17&32767}function n_(i){return 2|i}function qa(i){return(131068&i)>>2}function lg(i,o){return-131069&i|o<<2}function dg(i){return 1|i}function Ah(i,o,a,c,d){const f=i[a+1],y=null===o;let E=c?Tr(f):qa(f),I=!1;for(;0!==E&&(!1===I||y);){const M=i[E+1];bI(i[E],o)&&(I=!0,i[E+1]=c?dg(M):n_(M)),E=c?Tr(M):qa(M)}I&&(i[a+1]=c?n_(f):dg(f))}function bI(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Pa(i,o)>=0}function fg(i,o){return function Bo(i,o,a,c){const d=$e(),f=an(),y=function bo(i){const o=zt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function pg(i,o,a,c){const d=i.data;if(null===d[a+1]){const f=d[ai()],y=function c_(i,o){return o>=i.expandoStartIndex}(i,a);(function kS(i,o){return 0!=(i.flags&(o?8:16))})(f,c)&&null===o&&!y&&(o=!1),o=function gg(i,o,a,c){const d=function Sa(i){const o=zt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=mg(a=NI(null,i,o,a,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=NI(d,i,o,a,c),null===f){let I=function NS(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==qa(c))return i[Tr(c)]}(i,o,c);void 0!==I&&Array.isArray(I)&&(I=NI(null,i,o,I[1],c),I=mg(I,o.attrs,c),function l_(i,o,a,c){i[Tr(a?o.classBindings:o.styleBindings)]=c}(i,o,c,I))}else f=function RS(i,o,a){let c;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)c=mg(c,i[f].hostAttrs,a);return mg(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,c),function DI(i,o,a,c,d,f){let y=f?o.classBindings:o.styleBindings,E=Tr(y),I=qa(y);i[c]=a;let M,C=!1;if(Array.isArray(a)?(M=a[1],(null===M||Pa(a,M)>0)&&(C=!0)):M=a,d)if(0!==I){const Z=Tr(i[E+1]);i[c+1]=Mh(Z,E),0!==Z&&(i[Z+1]=lg(i[Z+1],c)),i[E+1]=function TS(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=Mh(E,0),0!==E&&(i[E+1]=lg(i[E+1],c)),E=c;else i[c+1]=Mh(I,0),0===E?E=c:i[I+1]=lg(i[I+1],c),I=c;C&&(i[c+1]=n_(i[c+1])),Ah(i,M,c,!0),Ah(i,M,c,!1),function CI(i,o,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Pa(f,o)>=0&&(a[c+1]=dg(a[c+1]))}(o,M,i,c,f),y=Mh(E,I),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,c)}}(f,i,y,c),o!==en&&Bi(d,y,o)&&function OS(i,o,a,c,d,f,y,E){if(!(3&o.type))return;const I=i.data,C=I[E+1],M=function II(i){return 1==(1&i)}(C)?RI(I,o,a,d,qa(C),y):void 0;Nh(M)||(Nh(f)||function Wa(i){return 2==(2&i)}(C)&&(f=RI(I,null,a,d,E,y)),function mp(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:vs.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=vs.Important),i.setStyle(a,c,d,f))}}(c,y,fu(ai(),a),d,f))}(f,f.data[ai()],d,d[Ot],i,d[y+1]=function SN(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Ce(Ua(i)))),i}(o,a),c,y)}(i,o,null,!0),fg}function NI(i,o,a,c,d){let f=null;const y=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<y&&(f=o[E],c=mg(c,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function mg(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),yn(i,y,!!a||o[++f]))}return void 0===i?null:i}function RI(i,o,a,c,d,f){const y=null===o;let E;for(;d>0;){const I=i[d],C=Array.isArray(I),M=C?I[1]:I,L=null===M;let Z=a[d+1];Z===en&&(Z=L?ie:void 0);let te=L?Ao(Z,c):M===c?Z:void 0;if(C&&!Nh(te)&&(te=Ao(I,c)),Nh(te)&&(E=te,y))return E;const Me=i[d+1];d=y?Tr(Me):qa(Me)}if(null!==o){let I=f?o.residualClasses:o.residualStyles;null!=I&&(E=Ao(I,c))}return E}function Nh(i){return void 0!==i}function FS(i,o=""){const a=$e(),c=an(),d=i+qt,f=c.firstCreatePass?hh(c,d,1,o,null):c.data[d],y=yl(c,a,f,o,i);a[d]=y,Md()&&Xd(c,a,y,f),Li(f,!1)}let yl=(i,o,a,c,d)=>(Xo(!0),function Kd(i,o){return i.createText(o)}(o[Ot],c));function Hu(i){return Rh("",i,""),Hu}function Rh(i,o,a){const c=$e(),d=function pl(i,o,a,c){return Bi(i,Zs(),a)?o+ze(a)+c:en}(c,i,o,a);return d!==en&&function so(i,o,a){const c=fu(o,i);!function Wy(i,o,a){i.setValue(o,a)}(i[Ot],c,a)}(c,ai(),d),Rh}const wl=void 0;var Fh=["en",[["a","p"],["AM","PM"],wl],[["AM","PM"],wl,wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wl,"{1} 'at' {0}",wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zS(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ya={};function Sg(i){const o=function NN(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=$I(o);if(a)return a;const c=o.split("-")[0];if(a=$I(c),a)return a;if("en"===c)return Fh;throw new fe(701,!1)}function WS(i){return Sg(i)[jt.PluralCase]}function $I(i){return i in Ya||(Ya[i]=rt.ng&&rt.ng.common&&rt.ng.common.locales&&rt.ng.common.locales[i]),Ya[i]}var jt=(()=>((jt=jt||{})[jt.LocaleId=0]="LocaleId",jt[jt.DayPeriodsFormat=1]="DayPeriodsFormat",jt[jt.DayPeriodsStandalone=2]="DayPeriodsStandalone",jt[jt.DaysFormat=3]="DaysFormat",jt[jt.DaysStandalone=4]="DaysStandalone",jt[jt.MonthsFormat=5]="MonthsFormat",jt[jt.MonthsStandalone=6]="MonthsStandalone",jt[jt.Eras=7]="Eras",jt[jt.FirstDayOfWeek=8]="FirstDayOfWeek",jt[jt.WeekendRange=9]="WeekendRange",jt[jt.DateFormat=10]="DateFormat",jt[jt.TimeFormat=11]="TimeFormat",jt[jt.DateTimeFormat=12]="DateTimeFormat",jt[jt.NumberSymbols=13]="NumberSymbols",jt[jt.NumberFormats=14]="NumberFormats",jt[jt.CurrencyCode=15]="CurrencyCode",jt[jt.CurrencySymbol=16]="CurrencySymbol",jt[jt.CurrencyName=17]="CurrencyName",jt[jt.Currencies=18]="Currencies",jt[jt.Directionality=19]="Directionality",jt[jt.PluralCase=20]="PluralCase",jt[jt.ExtraData=21]="ExtraData",jt))();const Il="en-US";let zI=Il;function Lg(i,o,a,c,d){if(i=q(i),Array.isArray(i))for(let f=0;f<i.length;f++)Lg(i[f],o,a,c,d);else{const f=an(),y=$e();let E=Lu(i)?i:q(i.provide),I=iw(i);const C=oi(),M=1048575&C.providerIndexes,L=C.directiveStart,Z=C.providerIndexes>>20;if(Lu(i)||!i.multi){const te=new Fc(I,d,dh),Me=Ug(E,o,d?M:M+Z,L);-1===Me?(Aa(Vc(C,y),f,E),Vg(f,i,o.length),o.push(E),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(te),y.push(te)):(a[Me]=te,y[Me]=te)}else{const te=Ug(E,o,M+Z,L),Me=Ug(E,o,M,M+Z),ot=Me>=0&&a[Me];if(d&&!ot||!d&&!(te>=0&&a[te])){Aa(Vc(C,y),f,E);const xt=function IM(i,o,a,c,d){const f=new Fc(i,a,dh);return f.multi=[],f.index=o,f.componentProviders=0,b_(f,d,c&&!a),f}(d?T_:pD,a.length,d,c,I);!d&&ot&&(a[Me].providerFactory=xt),Vg(f,i,o.length,0),o.push(E),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(xt),y.push(xt)}else Vg(f,i,te>-1?te:Me,b_(a[d?Me:te],I,!d&&c));!d&&c&&ot&&a[Me].componentProviders++}}}function Vg(i,o,a,c){const d=Lu(o),f=function sT(i){return!!i.useClass}(o);if(d||f){const I=(f?q(o.useClass):o).prototype.ngOnDestroy;if(I){const C=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const M=C.indexOf(a);-1===M?C.push(a,[c,I]):C[M+1].push(c,I)}else C.push(a,I)}}}function b_(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Ug(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function pD(i,o,a,c){return gD(this.multi,[])}function T_(i,o,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Js(a,a[ct],this.providerFactory.index,c);f=E.slice(0,y),gD(d,f);for(let I=y;I<E.length;I++)f.push(E[I])}else f=[],gD(d,f);return f}function gD(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function $h(i,o=[]){return a=>{a.providersResolver=(c,d)=>function fD(i,o,a){const c=an();if(c.firstCreatePass){const d=ii(i);Lg(a,c.data,c.blueprint,d,!0),Lg(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Gu{}class mD{}function $N(i,o){return new S_(i,o??null,[])}class S_ extends Gu{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Lw(this);const d=Nt(o);this._bootstrapComponents=fa(d.bootstrap),this._r3Injector=Mw(o,a,[{provide:Gu,useValue:this},{provide:ch,useValue:this.componentFactoryResolver},...c],Ce(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ds extends mD{constructor(o){super(),this.moduleType=o}create(o){return new S_(this.moduleType,o,[])}}class Bg extends Gu{constructor(o){super(),this.componentFactoryResolver=new Lw(this),this.instance=null;const a=new Np([...o.providers,{provide:Gu,useValue:this},{provide:ch,useValue:this.componentFactoryResolver}],o.parent||xp(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Yt(i,o,a=null){return new Bg({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let jg=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=rT(0,a.type),d=c.length>0?Yt([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=bt({token:i,providedIn:"environment",factory:()=>new i(Jt(Oo))}),i})();function bl(i){i.getStandaloneInjector=o=>o.get(jg).getOrCreateStandaloneInjector(i)}function Qg(i){return o=>{setTimeout(i,void 0,o)}}const co=class bD extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,f=a||(()=>null),y=c;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),f=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(f=Qg(f),d&&(d=Qg(d)),y&&(y=Qg(y)));const E=super.subscribe({next:d,error:f,complete:y});return o instanceof V.w0&&o.add(E),E}};function Jg(){return this._results[Symbol.iterator]()}class qh{get changes(){return this._changes||(this._changes=new co)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=qh.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Jg)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Di(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Ld(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=o[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let qu=(()=>{class i{}return i.__NG_ELEMENT_ID__=TD,i})();const P_=qu,O_=class extends P_{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a,null)}createEmbeddedViewImpl(o,a,c){const d=this._declarationTContainer.tView,f=Tv(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,a||null,c||null);f[Gs]=this._declarationLView[this._declarationTContainer.index];const E=this._declarationLView[fi];return null!==E&&(f[fi]=E.createEmbeddedView(d)),Fv(d,f,o),new Eh(f)}};function TD(){return Kh(oi(),$e())}function Kh(i,o){return 4&i.type?new O_(o,i,lh(i,o)):null}let Wr=(()=>{class i{}return i.__NG_ELEMENT_ID__=em,i})();function em(){return U_(oi(),$e())}const L_=Wr,ND=class extends L_{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return lh(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ma(this._hostTNode,this._hostLView);if(Qs(o)){const a=Qn(o,this._hostLView),c=Hr(o);return new Xs(a[ct].data[c+8],a)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=RD(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-gr}createEmbeddedView(o,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const E=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(E,d,false),E}createComponent(o,a,c,d,f){const y=o&&!function Ra(i){return"function"==typeof i}(o);let E;if(y)E=a;else{const qe=a||{};E=qe.index,c=qe.injector,d=qe.projectableNodes,f=qe.environmentInjector||qe.ngModuleRef}const I=y?o:new dl(oe(o)),C=c||this.parentInjector;if(!f&&null==I.ngModule){const ot=(y?C:this.parentInjector).get(Oo,null);ot&&(f=ot)}oe(I.componentType??{});const te=I.create(C,d,null,f);return this.insertImpl(te.hostView,E,false),te}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const d=o._lView,f=d[ct];if(function vd(i){return gi(i[zn])}(d)){const I=this.indexOf(o);if(-1!==I)this.detach(I);else{const C=d[zn],M=new ND(C,C[Or],C[zn]);M.detach(M.indexOf(o))}}const y=this._adjustIndex(a),E=this._lContainer;if(function Lb(i,o,a,c){const d=gr+c,f=a.length;c>0&&(a[d-1][ri]=o),c<f-gr?(o[ri]=a[d],Uc(a,gr+c,o)):(a.push(o),o[ri]=null),o[zn]=a;const y=o[Gs];null!==y&&a!==y&&function Vb(i,o){const a=i[Ii];o[Sn]!==o[zn][zn][Sn]&&(i[Ns]=!0),null===a?i[Ii]=[o]:a.push(o)}(y,o);const E=o[fi];null!==E&&E.insertView(i),o[Bt]|=128}(f,d,E,y),!c){const I=eh(y,E),C=d[Ot],M=Qd(C,E[Ji]);null!==M&&function Ky(i,o,a,c,d,f){c[ar]=d,c[Or]=o,ua(i,c,a,1,d,f)}(f,E[Or],C,d,M,I)}return o.attachToViewContainerRef(),Uc(V_(E),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=RD(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Zy(this._lContainer,a);c&&(Bc(V_(this._lContainer),a),xE(c[ct],c))}detach(o){const a=this._adjustIndex(o,-1),c=Zy(this._lContainer,a);return c&&null!=Bc(V_(this._lContainer),a)?new Eh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function RD(i){return i[_a]}function V_(i){return i[_a]||(i[_a]=[])}function U_(i,o){let a;const c=o[i.index];return gi(c)?a=c:(a=Ov(c,o,null,i),o[i.index]=a,yh(o,a)),PD(a,o,i,c),new ND(a,i,o)}let PD=function OD(i,o,a,c){if(i[Ji])return;let d;d=8&a.type?ur(c):function NM(i,o){const a=i[Ot],c=a.createComment(""),d=ki(o,i);return Va(a,Qd(a,d),c,function OE(i,o){return i.nextSibling(o)}(a,d),!1),c}(o,a),i[Ji]=d};class Jh{constructor(o){this.queryList=o,this.matches=null}clone(){return new Jh(this.queryList)}setDirty(){this.queryList.setDirty()}}class tm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new tm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==H_(o,a).matches&&this.queries[a].setDirty()}}class kD{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Sl{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Sl(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Xh{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Xh(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,a,B_(a,f)),this.matchTNodeWithReadOption(o,a,ta(a,o,f,!1,!1))}else c===qu?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,ta(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Bp||d===Wr||d===qu&&4&a.type)this.addMatch(a.index,-2);else{const f=ta(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function B_(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function RM(i,o,a,c){return-1===a?function FD(i,o){return 11&i.type?lh(i,o):4&i.type?Kh(i,o):null}(o,i):-2===a?function ef(i,o,a){return a===Bp?lh(o,i):a===qu?Kh(o,i):a===Wr?U_(o,i):void 0}(i,o,c):Js(i,i[ct],a,o)}function j_(i,o,a,c){const d=o[fi].queries[c];if(null===d.matches){const f=i.data,y=a.matches,E=[];for(let I=0;I<y.length;I+=2){const C=y[I];E.push(C<0?null:RM(o,f[C],y[I+1],a.metadata.read))}d.matches=E}return d.matches}function nm(i,o,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=j_(i,o,d,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)c.push(y[E/2]);else{const C=f[E+1],M=o[-I];for(let L=gr;L<M.length;L++){const Z=M[L];Z[Gs]===Z[zn]&&nm(Z[ct],Z,C,c)}if(null!==M[Ii]){const L=M[Ii];for(let Z=0;Z<L.length;Z++){const te=L[Z];nm(te[ct],te,C,c)}}}}}return c}function $_(i){const o=$e(),a=an(),c=Ac();To(c+1);const d=H_(a,c);if(i.dirty&&function Cc(i){return 4==(4&i[Bt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?nm(a,o,c,[]):j_(a,o,d,c);i.reset(f,mT),i.notifyOnChanges()}return!0}return!1}function LD(i,o,a,c){const d=an();if(d.firstCreatePass){const f=oi();(function BD(i,o,a){null===i.queries&&(i.queries=new Sl),i.queries.track(new Xh(o,a))})(d,new kD(o,a,c),f.index),function Ku(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function UD(i,o,a){const c=new qh(4==(4&a));(function UT(i,o,a,c){const d=Jp(o);d.push(a),i.firstCreatePass&&Xp(i).push(c,d.length-1)})(i,o,c,c.destroy),null===o[fi]&&(o[fi]=new tm),o[fi].queries.push(new Jh(c))}(d,$e(),a)}function VD(){return function Ml(i,o){return i[fi].queries[o].queryList}($e(),Ac())}function H_(i,o){return i.queries.getByIndex(o)}function om(i){return!!Nt(i)}const QD=new vn("Application Initializer");let pm=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Lt(QD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(Qv(f))a.push(f);else if(fI(f)){const y=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),J_=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const kl=new vn("LocaleId",{providedIn:"root",factory:()=>Lt(kl,vt.Optional|vt.SkipSelf)||function X_(){return typeof $localize<"u"&&$localize.locale||Il}()}),JD=new vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class zM{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let GM=(()=>{class i{compileModuleSync(a){return new Ds(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=fa(Nt(a).declarations).reduce((y,E)=>{const I=oe(E);return I&&y.push(new dl(I)),y},[]);return new zM(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const WM=(()=>Promise.resolve(0))();function Er(i){typeof Zone>"u"?WM.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}function t0(...i){}class Ai{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new co(!1),this.onMicrotaskEmpty=new co(!1),this.onStable=new co(!1),this.onError=new co(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function qM(){let i=rt.requestAnimationFrame,o=rt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function wm(i){const o=()=>{!function eC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Im(i),i.isCheckStableRunning=!0,Em(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Im(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,E)=>{try{return lo(i),a.invokeTask(d,f,y,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),n0(i)}},onInvoke:(a,c,d,f,y,E,I)=>{try{return lo(i),a.invoke(d,f,y,E,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),n0(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Im(i),Em(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ai.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(Ai.isInAngularZone())throw new fe(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,XD,t0,t0);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const XD={};function Em(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Im(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function lo(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function n0(i){i._nesting--,Em(i)}class KM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new co,this.onMicrotaskEmpty=new co,this.onStable=new co,this.onError=new co}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const r0=new vn("",{providedIn:"root",factory:Dm});function Dm(){const i=Lt(Ai);let o=!0;const a=new k.y(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new k.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Ai.assertNotInAngularZone(),Er(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Ai.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ne.T)(a,c.pipe((0,ge.B)()))}const Fl=new vn(""),s0=new vn("");let Ll,o0=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ll||(function tC(i){Ll=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ai.assertNotInAngularZone(),Er(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Er(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Jt(Ai),Jt(uf),Jt(s0))},i.\u0275prov=bt({token:i,factory:i.\u0275fac}),i})(),uf=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Ll?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ja=null;const a0=new vn("AllowMultipleToken"),ec=new vn("PlatformDestroyListeners"),Cm=new vn("appBootstrapListener");class Tm{constructor(o,a){this.name=o,this.token=a}}function u0(i,o,a=[]){const c=`Platform: ${o}`,d=new vn(c);return(f=[])=>{let y=Hi();if(!y||y.injector.get(a0,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function sC(i){if(Ja&&!Ja.get(a0,!1))throw new fe(400,!1);(function bm(){!function Da(i){Rs=i}(()=>{throw new fe(600,!1)})})(),Ja=i;const o=i.get(d0);(function Xa(i){i.get(ow,null)?.forEach(a=>a())})(i)}(function c0(i=[],o){return Uu.create({name:o,providers:[{provide:lv,useValue:"platform"},{provide:ec,useValue:new Set([()=>Ja=null])},...i]})}(E,c))}return function aC(i){const o=Hi();if(!o)throw new fe(401,!1);return o}()}}function Hi(){return Ja?.get(d0)??null}let d0=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function Vl(i="zone.js",o){return"noop"===i?new KM:"zone.js"===i?new Ai(o):i}(c?.ngZone,function h0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const f=function ft(i,o,a){return new S_(i,o,a)}(a.moduleType,this.injector,function tc(i){return[{provide:Ai,useFactory:i},{provide:ih,multi:!0,useFactory:()=>{const o=Lt(lC,{optional:!0});return()=>o.initialize()}},{provide:Sm,useFactory:zo},{provide:r0,useFactory:Dm}]}(()=>d)),y=f.injector.get($a,null);return d.runOutsideAngular(()=>{const E=d.onError.subscribe({next:I=>{y.handleError(I)}});f.onDestroy(()=>{Rn(this._modules,f),E.unsubscribe()})}),function uC(i,o,a){try{const c=a();return Qv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const E=f.injector.get(pm);return E.runInitializers(),E.donePromise.then(()=>(function g_(i){je(i,"Expected localeId to be defined"),"string"==typeof i&&(zI=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(kl,Il)||Il),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const d=js({},c);return function nC(i,o,a){const c=new Ds(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(eu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new fe(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(ec,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Jt(Uu))},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function js(i,o){return Array.isArray(o)?o.reduce(js,i):{...i,...o}}let eu=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Lt(Sm),this.componentTypes=[],this.components=[],this.isStable=Lt(r0),this._injector=Lt(Oo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof hw;if(!this._injector.get(pm).done)throw!d&&Wt(a),new fe(405,!1);let y;y=d?a:this._injector.get(ch).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const E=function iC(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Gu),C=y.create(Uu.NULL,[],c||y.selector,E),M=C.location.nativeElement,L=C.injector.get(Fl,null);return L?.registerApplication(M),C.onDestroy(()=>{this.detachView(C.hostView),Rn(this.components,C),L?.unregisterApplication(M)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Rn(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Cm,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Rn(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new fe(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Rn(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const Sm=new vn("",{providedIn:"root",factory:()=>Lt($a).handleError.bind(void 0)});function zo(){const i=Lt(Ai),o=Lt($a);return a=>i.runOutsideAngular(()=>o.handleError(a))}let lC=(()=>{class i{constructor(){this.zone=Lt(Ai),this.applicationRef=Lt(eu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function hC(){return!1}let Mm=(()=>{class i{}return i.__NG_ELEMENT_ID__=lf,i})();function lf(i){return function Am(i,o,a){if(es(i)&&!a){const c=Fi(i.index,o);return new Eh(c,c)}return 47&i.type?new Eh(o[Sn],o):null}(oi(),$e(),16==(16&i))}class Cs{constructor(){}supports(o){return Hv(o)}create(o){return new _t(o)}}const p0=(i,o)=>o;class _t{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||p0}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<he(c,d,f)?a:c,E=he(y,d,f),I=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const C=E-d,M=I-d;if(C!=M){for(let Z=0;Z<C;Z++){const te=Z<f.length?f[Z]:f[Z]=0,Me=te+Z;M<=Me&&Me<C&&(f[Z]=te+1)}f[y.previousIndex]=M-C}}E!==I&&o(y,E,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Hv(o))throw new fe(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,E),c=!0),a=a._next}else d=0,function cS(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,E,y,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new Mt(a,c),f,d),o}_verifyReinsertion(o,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new lt),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new lt),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Mt{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class XM{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class lt{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new XM,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function he(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class Ve{constructor(){}supports(o){return o instanceof Map||Zw(o)}create(){return new Xr}}class Xr{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Zw(o)))throw new fe(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new mC(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class mC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yC(){return new g0([new Cs])}let g0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||yC()),deps:[[i,new Oa,new jc]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new fe(901,!1)}}return i.\u0275prov=bt({token:i,providedIn:"root",factory:yC}),i})();function vC(){return new m0([new Ve])}let m0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||vC()),deps:[[i,new Oa,new jc]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new fe(901,!1)}}return i.\u0275prov=bt({token:i,providedIn:"root",factory:vC}),i})();const EC=u0(null,"core",[]);let Qt=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Jt(eu))},i.\u0275mod=os({type:i}),i.\u0275inj=rn({}),i})(),IC=(()=>{class i{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=Lt(Ai),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(a=>{this.resolve=a})})}add(){if(this.completed)return-1;const a=this.taskId++;return this.collection.add(a),a}remove(a){this.completed||(this.collection.delete(a),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function v0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function sA(i){const o=oe(i);if(!o)return null;const a=new dl(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone}}}},3942:(Dt,ke,F)=>{F.d(ke,{Z:()=>Qe});var h=F(2090),V=F(4859),k=F(6881),ne=F(1877);class ge{constructor(fe,Fe){this._delegate=fe,this.firebase=Fe,(0,k._addComponent)(fe,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,Fe=k._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(fe);return!Ze.isInitialized()&&"EXPLICIT"===(null===(ze=Ze.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Fe})}_removeServiceInstance(fe,Fe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Fe)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function _e(){const Et=function Ce(Et){const fe={},Fe={__esModule:!0,initializeApp:function be(Se,J={}){const st=k.initializeApp(Se,J);if((0,h.r3)(fe,st.name))return fe[st.name];const Xe=new Et(st,Fe);return fe[st.name]=Xe,Xe},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Te(Se){const J=Se.name,st=J.replace("-compat","");if(k._registerComponent(Se)&&"PUBLIC"===Se.type){const Xe=(cn=Ze())=>{if("function"!=typeof cn[st])throw ve.create("invalid-app-argument",{appName:J});return cn[st]()};void 0!==Se.serviceProps&&(0,h.ZB)(Xe,Se.serviceProps),Fe[st]=Xe,Et.prototype[st]=function(...cn){return this._getService.bind(this,J).apply(this,Se.multipleInstances?cn:[])}}return"PUBLIC"===Se.type?Fe[st]:null},removeApp:function ze(Se){delete fe[Se]},useAsService:function Be(Se,J){return"serverAuth"===J?null:J},modularAPIs:k}};function Ze(Se){if(!(0,h.r3)(fe,Se=Se||k._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Se});return fe[Se]}return Fe.default=Fe,Object.defineProperty(Fe,"apps",{get:function De(){return Object.keys(fe).map(Se=>fe[Se])}}),Ze.App=Et,Fe}(ge);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function fe(Fe){(0,h.ZB)(Et,Fe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Et}(),z=new ne.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=W;!function we(Et){(0,k.registerVersion)("@firebase/app-compat","0.2.12",Et)}()},6881:(Dt,ke,F)=>{F.r(ke),F.d(ke,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Wn,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>xn,_addOrOverwriteComponent:()=>hr,_apps:()=>rt,_clearComponents:()=>sn,_components:()=>Yn,_getProvider:()=>tn,_registerComponent:()=>bn,_removeServiceInstance:()=>fr,deleteApp:()=>Jt,getApp:()=>kn,getApps:()=>$n,initializeApp:()=>$r,onLog:()=>Vn,registerVersion:()=>Lt,setLogLevel:()=>Lr});var h=F(5861),V=F(4859),k=F(1877),ne=F(2090);const ge=(se,ee)=>ee.some(Pe=>se instanceof Pe);let ce,ve;const W=new WeakMap,z=new WeakMap,q=new WeakMap,xe=new WeakMap,we=new WeakMap;let fe={get(se,ee,Pe){if(se instanceof IDBTransaction){if("done"===ee)return z.get(se);if("objectStoreNames"===ee)return se.objectStoreNames||q.get(se);if("store"===ee)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return be(se[ee])},set:(se,ee,Pe)=>(se[ee]=Pe,!0),has:(se,ee)=>se instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in se};function Ze(se){return"function"==typeof se?function ze(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ee){return se.apply(De(this),ee),be(W.get(this))}:function(...ee){return be(se.apply(De(this),ee))}:function(ee,...Pe){const mt=se.call(De(this),ee,...Pe);return q.set(mt,ee.sort?ee.sort():[ee]),be(mt)}}(se):(se instanceof IDBTransaction&&function Et(se){if(z.has(se))return;const ee=new Promise((Pe,mt)=>{const It=()=>{se.removeEventListener("complete",Gt),se.removeEventListener("error",on),se.removeEventListener("abort",on)},Gt=()=>{Pe(),It()},on=()=>{mt(se.error||new DOMException("AbortError","AbortError")),It()};se.addEventListener("complete",Gt),se.addEventListener("error",on),se.addEventListener("abort",on)});z.set(se,ee)}(se),ge(se,function Ce(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,fe):se)}function be(se){if(se instanceof IDBRequest)return function Qe(se){const ee=new Promise((Pe,mt)=>{const It=()=>{se.removeEventListener("success",Gt),se.removeEventListener("error",on)},Gt=()=>{Pe(be(se.result)),It()},on=()=>{mt(se.error),It()};se.addEventListener("success",Gt),se.addEventListener("error",on)});return ee.then(Pe=>{Pe instanceof IDBCursor&&W.set(Pe,se)}).catch(()=>{}),we.set(ee,se),ee}(se);if(xe.has(se))return xe.get(se);const ee=Ze(se);return ee!==se&&(xe.set(se,ee),we.set(ee,se)),ee}const De=se=>we.get(se),Se=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],st=new Map;function Xe(se,ee){if(!(se instanceof IDBDatabase)||ee in se||"string"!=typeof ee)return;if(st.get(ee))return st.get(ee);const Pe=ee.replace(/FromIndex$/,""),mt=ee!==Pe,It=J.includes(Pe);if(!(Pe in(mt?IDBIndex:IDBObjectStore).prototype)||!It&&!Se.includes(Pe))return;const Gt=function(){var on=(0,h.Z)(function*(Cr,...Fn){const rr=this.transaction(Cr,It?"readwrite":"readonly");let qi=rr.store;return mt&&(qi=qi.index(Fn.shift())),(yield Promise.all([qi[Pe](...Fn),It&&rr.done]))[0]});return function(Fn){return on.apply(this,arguments)}}();return st.set(ee,Gt),Gt}!function Fe(se){fe=se(fe)}(se=>({...se,get:(ee,Pe,mt)=>Xe(ee,Pe)||se.get(ee,Pe,mt),has:(ee,Pe)=>!!Xe(ee,Pe)||se.has(ee,Pe)}));class cn{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function Xn(se){const ee=se.getComponent();return"VERSION"===ee?.type}(Pe)){const mt=Pe.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(Pe=>Pe).join(" ")}}const er="@firebase/app",pe=new k.Yd("@firebase/app"),Kt="[DEFAULT]",pt={[er]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rt=new Map,Yn=new Map;function xn(se,ee){try{se.container.addComponent(ee)}catch(Pe){pe.debug(`Component ${ee.name} failed to register with FirebaseApp ${se.name}`,Pe)}}function hr(se,ee){se.container.addOrOverwriteComponent(ee)}function bn(se){const ee=se.name;if(Yn.has(ee))return pe.debug(`There were multiple attempts to register component ${ee}.`),!1;Yn.set(ee,se);for(const Pe of rt.values())xn(Pe,se);return!0}function tn(se,ee){const Pe=se.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),se.container.getProvider(ee)}function fr(se,ee,Pe=Kt){tn(se,ee).clearInstance(Pe)}function sn(){Yn.clear()}const Ft=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class nn{constructor(ee,Pe,mt){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw Ft.create("app-deleted",{appName:this._name})}}const Wn="9.22.2";function $r(se,ee={}){let Pe=se;"object"!=typeof ee&&(ee={name:ee});const mt=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},ee),It=mt.name;if("string"!=typeof It||!It)throw Ft.create("bad-app-name",{appName:String(It)});if(Pe||(Pe=(0,ne.aH)()),!Pe)throw Ft.create("no-options");const Gt=rt.get(It);if(Gt){if((0,ne.vZ)(Pe,Gt.options)&&(0,ne.vZ)(mt,Gt.config))return Gt;throw Ft.create("duplicate-app",{appName:It})}const on=new V.H0(It);for(const Fn of Yn.values())on.addComponent(Fn);const Cr=new nn(Pe,mt,on);return rt.set(It,Cr),Cr}function kn(se=Kt){const ee=rt.get(se);if(!ee&&se===Kt&&(0,ne.aH)())return $r();if(!ee)throw Ft.create("no-app",{appName:se});return ee}function $n(){return Array.from(rt.values())}function Jt(se){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(se){const ee=se.name;rt.has(ee)&&(rt.delete(ee),yield Promise.all(se.container.getProviders().map(Pe=>Pe.delete())),se.isDeleted=!0)})).apply(this,arguments)}function Lt(se,ee,Pe){var mt;let It=null!==(mt=pt[se])&&void 0!==mt?mt:se;Pe&&(It+=`-${Pe}`);const Gt=It.match(/\s|\//),on=ee.match(/\s|\//);if(Gt||on){const Cr=[`Unable to register library "${It}" with version "${ee}":`];return Gt&&Cr.push(`library name "${It}" contains illegal characters (whitespace or "/")`),Gt&&on&&Cr.push("and"),on&&Cr.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void pe.warn(Cr.join(" "))}bn(new V.wA(`${It}-version`,()=>({library:It,version:ee}),"VERSION"))}function Vn(se,ee){if(null!==se&&"function"!=typeof se)throw Ft.create("invalid-log-argument");(0,k.Am)(se,ee)}function Lr(se){(0,k.Ub)(se)}const pr="firebase-heartbeat-database",ni=1,H="firebase-heartbeat-store";let B=null;function R(){return B||(B=function Te(se,ee,{blocked:Pe,upgrade:mt,blocking:It,terminated:Gt}={}){const on=indexedDB.open(se,ee),Cr=be(on);return mt&&on.addEventListener("upgradeneeded",Fn=>{mt(be(on.result),Fn.oldVersion,Fn.newVersion,be(on.transaction),Fn)}),Pe&&on.addEventListener("blocked",Fn=>Pe(Fn.oldVersion,Fn.newVersion,Fn)),Cr.then(Fn=>{Gt&&Fn.addEventListener("close",()=>Gt()),It&&Fn.addEventListener("versionchange",rr=>It(rr.oldVersion,rr.newVersion,rr))}).catch(()=>{}),Cr}(pr,ni,{upgrade:(se,ee)=>{0===ee&&se.createObjectStore(H)}}).catch(se=>{throw Ft.create("idb-open",{originalErrorMessage:se.message})})),B}function S(){return(S=(0,h.Z)(function*(se){try{return yield(yield R()).transaction(H).objectStore(H).get(G(se))}catch(ee){if(ee instanceof ne.ZR)pe.warn(ee.message);else{const Pe=Ft.create("idb-get",{originalErrorMessage:ee?.message});pe.warn(Pe.message)}}})).apply(this,arguments)}function K(se,ee){return ie.apply(this,arguments)}function ie(){return(ie=(0,h.Z)(function*(se,ee){try{const mt=(yield R()).transaction(H,"readwrite");yield mt.objectStore(H).put(ee,G(se)),yield mt.done}catch(Pe){if(Pe instanceof ne.ZR)pe.warn(Pe.message);else{const mt=Ft.create("idb-set",{originalErrorMessage:Pe?.message});pe.warn(mt.message)}}})).apply(this,arguments)}function G(se){return`${se.name}!${se.options.appId}`}class Ge{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new et(Pe),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var ee=this;return(0,h.Z)(function*(){const mt=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),It=Ie();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==It&&!ee._heartbeatsCache.heartbeats.some(Gt=>Gt.date===It))return ee._heartbeatsCache.heartbeats.push({date:It,agent:mt}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Gt=>{const on=new Date(Gt.date).valueOf();return Date.now()-on<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,h.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Pe=Ie(),{heartbeatsToSend:mt,unsentEntries:It}=function it(se,ee=1024){const Pe=[];let mt=se.slice();for(const It of se){const Gt=Pe.find(on=>on.agent===It.agent);if(Gt){if(Gt.dates.push(It.date),kt(Pe)>ee){Gt.dates.pop();break}}else if(Pe.push({agent:It.agent,dates:[It.date]}),kt(Pe)>ee){Pe.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:mt}}(ee._heartbeatsCache.heartbeats),Gt=(0,ne.L)(JSON.stringify({version:2,heartbeats:mt}));return ee._heartbeatsCache.lastSentHeartbeatDate=Pe,It.length>0?(ee._heartbeatsCache.heartbeats=It,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Gt})()}}function Ie(){return(new Date).toISOString().substring(0,10)}class et{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,h.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function O(se){return S.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Pe=this;return(0,h.Z)(function*(){var mt;if(yield Pe._canUseIndexedDBPromise){const Gt=yield Pe.read();return K(Pe.app,{lastSentHeartbeatDate:null!==(mt=ee.lastSentHeartbeatDate)&&void 0!==mt?mt:Gt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Pe=this;return(0,h.Z)(function*(){var mt;if(yield Pe._canUseIndexedDBPromise){const Gt=yield Pe.read();return K(Pe.app,{lastSentHeartbeatDate:null!==(mt=ee.lastSentHeartbeatDate)&&void 0!==mt?mt:Gt.lastSentHeartbeatDate,heartbeats:[...Gt.heartbeats,...ee.heartbeats]})}})()}}function kt(se){return(0,ne.L)(JSON.stringify({version:2,heartbeats:se})).length}!function Ut(se){bn(new V.wA("platform-logger",ee=>new cn(ee),"PRIVATE")),bn(new V.wA("heartbeat",ee=>new Ge(ee),"PRIVATE")),Lt(er,"0.9.12",se),Lt(er,"0.9.12","esm2017"),Lt("fire-js","")}("")},4859:(Dt,ke,F)=>{F.d(ke,{H0:()=>Ce,wA:()=>k});var h=F(5861),V=F(2090);class k{constructor(W,z,q){this.name=W,this.instanceFactory=z,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ne="[DEFAULT]";class ge{constructor(W,z){this.name=W,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(z)){const q=new V.BH;if(this.instancesDeferred.set(z,q),this.isInitialized(z)||this.shouldAutoInitialize())try{const xe=this.getOrInitializeService({instanceIdentifier:z});xe&&q.resolve(xe)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(W){var z;const q=this.normalizeInstanceIdentifier(W?.identifier),xe=null!==(z=W?.optional)&&void 0!==z&&z;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(we){if(xe)return null;throw we}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ve(_e){return"EAGER"===_e.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[z,q]of this.instancesDeferred.entries()){const xe=this.normalizeInstanceIdentifier(z);try{const we=this.getOrInitializeService({instanceIdentifier:xe});q.resolve(we)}catch{}}}}clearInstance(W=ne){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,h.Z)(function*(){const z=Array.from(W.instances.values());yield Promise.all([...z.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...z.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ne){return this.instances.has(W)}getOptions(W=ne){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:z={}}=W,q=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const xe=this.getOrInitializeService({instanceIdentifier:q,options:z});for(const[we,Qe]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(we)&&Qe.resolve(xe);return xe}onInit(W,z){var q;const xe=this.normalizeInstanceIdentifier(z),we=null!==(q=this.onInitCallbacks.get(xe))&&void 0!==q?q:new Set;we.add(W),this.onInitCallbacks.set(xe,we);const Qe=this.instances.get(xe);return Qe&&W(Qe,xe),()=>{we.delete(W)}}invokeOnInitCallbacks(W,z){const q=this.onInitCallbacks.get(z);if(q)for(const xe of q)try{xe(W,z)}catch{}}getOrInitializeService({instanceIdentifier:W,options:z={}}){let q=this.instances.get(W);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=W,_e===ne?void 0:_e),options:z}),this.instances.set(W,q),this.instancesOptions.set(W,z),this.invokeOnInitCallbacks(q,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,q)}catch{}var _e;return q||null}normalizeInstanceIdentifier(W=ne){return this.component?this.component.multipleInstances?W:ne:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const z=this.getProvider(W.name);if(z.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);z.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const z=new ge(W,this);return this.providers.set(W,z),z}getProviders(){return Array.from(this.providers.values())}}},4727:(Dt,ke,F)=>{var h=F(5861),V=F(6881),k=F(4859),ne=F(2090);const ge=(U,X)=>X.some(oe=>U instanceof oe);let ce,ve;const W=new WeakMap,z=new WeakMap,q=new WeakMap,xe=new WeakMap,we=new WeakMap;let fe={get(U,X,oe){if(U instanceof IDBTransaction){if("done"===X)return z.get(U);if("objectStoreNames"===X)return U.objectStoreNames||q.get(U);if("store"===X)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return be(U[X])},set:(U,X,oe)=>(U[X]=oe,!0),has:(U,X)=>U instanceof IDBTransaction&&("done"===X||"store"===X)||X in U};function Ze(U){return"function"==typeof U?function ze(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...X){return U.apply(De(this),X),be(W.get(this))}:function(...X){return be(U.apply(De(this),X))}:function(X,...oe){const tt=U.call(De(this),X,...oe);return q.set(tt,X.sort?X.sort():[X]),be(tt)}}(U):(U instanceof IDBTransaction&&function Et(U){if(z.has(U))return;const X=new Promise((oe,tt)=>{const Pt=()=>{U.removeEventListener("complete",Wt),U.removeEventListener("error",Nt),U.removeEventListener("abort",Nt)},Wt=()=>{oe(),Pt()},Nt=()=>{tt(U.error||new DOMException("AbortError","AbortError")),Pt()};U.addEventListener("complete",Wt),U.addEventListener("error",Nt),U.addEventListener("abort",Nt)});z.set(U,X)}(U),ge(U,function Ce(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,fe):U)}function be(U){if(U instanceof IDBRequest)return function Qe(U){const X=new Promise((oe,tt)=>{const Pt=()=>{U.removeEventListener("success",Wt),U.removeEventListener("error",Nt)},Wt=()=>{oe(be(U.result)),Pt()},Nt=()=>{tt(U.error),Pt()};U.addEventListener("success",Wt),U.addEventListener("error",Nt)});return X.then(oe=>{oe instanceof IDBCursor&&W.set(oe,U)}).catch(()=>{}),we.set(X,U),X}(U);if(xe.has(U))return xe.get(U);const X=Ze(U);return X!==U&&(xe.set(U,X),we.set(X,U)),X}const De=U=>we.get(U),Se=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],st=new Map;function Xe(U,X){if(!(U instanceof IDBDatabase)||X in U||"string"!=typeof X)return;if(st.get(X))return st.get(X);const oe=X.replace(/FromIndex$/,""),tt=X!==oe,Pt=J.includes(oe);if(!(oe in(tt?IDBIndex:IDBObjectStore).prototype)||!Pt&&!Se.includes(oe))return;const Wt=function(){var Nt=(0,h.Z)(function*(Hn,...sr){const or=this.transaction(Hn,Pt?"readwrite":"readonly");let as=or.store;return tt&&(as=as.index(sr.shift())),(yield Promise.all([as[oe](...sr),Pt&&or.done]))[0]});return function(sr){return Nt.apply(this,arguments)}}();return st.set(X,Wt),Wt}!function Fe(U){fe=U(fe)}(U=>({...U,get:(X,oe,tt)=>Xe(X,oe)||U.get(X,oe,tt),has:(X,oe)=>!!Xe(X,oe)||U.has(X,oe)}));const cn="@firebase/installations",Xn="0.6.4",er=1e4,Ei=`w:${Xn}`,pe="FIS_v2",ye="https://firebaseinstallations.googleapis.com/v1",Ne=36e5,Ae=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ut(U){return U instanceof ne.ZR&&U.code.includes("request-failed")}function _n({projectId:U}){return`${ye}/projects/${U}/installations`}function wt(U){return{token:U.token,requestStatus:2,expiresIn:Ir(U.expiresIn),creationTime:Date.now()}}function bt(U,X){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,h.Z)(function*(U,X){const tt=(yield X.json()).error;return Ae.create("request-failed",{requestName:U,serverCode:tt.code,serverMessage:tt.message,serverStatus:tt.status})})).apply(this,arguments)}function rn({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function tr(U){return An.apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(U){const X=yield U();return X.status>=500&&X.status<600?U():X})).apply(this,arguments)}function Ir(U){return Number(U.replace("s","000"))}function Zn(){return(Zn=(0,h.Z)(function*({appConfig:U,heartbeatServiceProvider:X},{fid:oe}){const tt=_n(U),Pt=rn(U),Wt=X.getImmediate({optional:!0});if(Wt){const or=yield Wt.getHeartbeatsHeader();or&&Pt.append("x-firebase-client",or)}const Hn={method:"POST",headers:Pt,body:JSON.stringify({fid:oe,authVersion:pe,appId:U.appId,sdkVersion:Ei})},sr=yield tr(()=>fetch(tt,Hn));if(sr.ok){const or=yield sr.json();return{fid:or.fid||oe,registrationStatus:2,refreshToken:or.refreshToken,authToken:wt(or.authToken)}}throw yield bt("Create Installation",sr)})).apply(this,arguments)}function di(U){return new Promise(X=>{setTimeout(X,U)})}const vt=/^[cdef][\w-]{21}$/,Cn="";function dr(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const oe=function On(U){return function Pr(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return vt.test(oe)?oe:Cn}catch{return Cn}}function Kt(U){return`${U.appName}!${U.appId}`}const pt=new Map;function rt(U,X){const oe=Kt(U);hr(oe,X),function bn(U,X){const oe=function fr(){return!tn&&"BroadcastChannel"in self&&(tn=new BroadcastChannel("[Firebase] FID Change"),tn.onmessage=U=>{hr(U.data.key,U.data.fid)}),tn}();oe&&oe.postMessage({key:U,fid:X}),function sn(){0===pt.size&&tn&&(tn.close(),tn=null)}()}(oe,X)}function hr(U,X){const oe=pt.get(U);if(oe)for(const tt of oe)tt(X)}let tn=null;const Dr="firebase-installations-database",Ft=1,nn="firebase-installations-store";let Wn=null;function $r(){return Wn||(Wn=function Te(U,X,{blocked:oe,upgrade:tt,blocking:Pt,terminated:Wt}={}){const Nt=indexedDB.open(U,X),Hn=be(Nt);return tt&&Nt.addEventListener("upgradeneeded",sr=>{tt(be(Nt.result),sr.oldVersion,sr.newVersion,be(Nt.transaction))}),oe&&Nt.addEventListener("blocked",()=>oe()),Hn.then(sr=>{Wt&&sr.addEventListener("close",()=>Wt()),Pt&&sr.addEventListener("versionchange",()=>Pt())}).catch(()=>{}),Hn}(Dr,Ft,{upgrade:(U,X)=>{0===X&&U.createObjectStore(nn)}})),Wn}function kn(U,X){return $n.apply(this,arguments)}function $n(){return($n=(0,h.Z)(function*(U,X){const oe=Kt(U),Pt=(yield $r()).transaction(nn,"readwrite"),Wt=Pt.objectStore(nn),Nt=yield Wt.get(oe);return yield Wt.put(X,oe),yield Pt.done,(!Nt||Nt.fid!==X.fid)&&rt(U,X.fid),X})).apply(this,arguments)}function Jt(U){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(U){const X=Kt(U),tt=(yield $r()).transaction(nn,"readwrite");yield tt.objectStore(nn).delete(X),yield tt.done})).apply(this,arguments)}function Lt(U,X){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)(function*(U,X){const oe=Kt(U),Pt=(yield $r()).transaction(nn,"readwrite"),Wt=Pt.objectStore(nn),Nt=yield Wt.get(oe),Hn=X(Nt);return void 0===Hn?yield Wt.delete(oe):yield Wt.put(Hn,oe),yield Pt.done,Hn&&(!Nt||Nt.fid!==Hn.fid)&&rt(U,Hn.fid),Hn})).apply(this,arguments)}function Lr(U){return pr.apply(this,arguments)}function pr(){return pr=(0,h.Z)(function*(U){let X;const oe=yield Lt(U.appConfig,tt=>{const Pt=function ni(U){return ie(U||{fid:dr(),registrationStatus:0})}(tt),Wt=function H(U,X){if(0===X.registrationStatus){if(!navigator.onLine)return{installationEntry:X,registrationPromise:Promise.reject(Ae.create("app-offline"))};const oe={fid:X.fid,registrationStatus:1,registrationTime:Date.now()},tt=function B(U,X){return R.apply(this,arguments)}(U,oe);return{installationEntry:oe,registrationPromise:tt}}return 1===X.registrationStatus?{installationEntry:X,registrationPromise:O(U)}:{installationEntry:X}}(U,Pt);return X=Wt.registrationPromise,Wt.installationEntry});return oe.fid===Cn?{installationEntry:yield X}:{installationEntry:oe,registrationPromise:X}}),pr.apply(this,arguments)}function R(){return R=(0,h.Z)(function*(U,X){try{const oe=yield function Ln(U,X){return Zn.apply(this,arguments)}(U,X);return kn(U.appConfig,oe)}catch(oe){throw ut(oe)&&409===oe.customData.serverCode?yield Jt(U.appConfig):yield kn(U.appConfig,{fid:X.fid,registrationStatus:0}),oe}}),R.apply(this,arguments)}function O(U){return S.apply(this,arguments)}function S(){return(S=(0,h.Z)(function*(U){let X=yield K(U.appConfig);for(;1===X.registrationStatus;)yield di(100),X=yield K(U.appConfig);if(0===X.registrationStatus){const{installationEntry:oe,registrationPromise:tt}=yield Lr(U);return tt||oe}return X})).apply(this,arguments)}function K(U){return Lt(U,X=>{if(!X)throw Ae.create("installation-not-found");return ie(X)})}function ie(U){return function G(U){return 1===U.registrationStatus&&U.registrationTime+er<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function de(){return(de=(0,h.Z)(function*({appConfig:U,heartbeatServiceProvider:X},oe){const tt=function Ge(U,{fid:X}){return`${_n(U)}/${X}/authTokens:generate`}(U,oe),Pt=function mn(U,{refreshToken:X}){const oe=rn(U);return oe.append("Authorization",function nr(U){return`${pe} ${U}`}(X)),oe}(U,oe),Wt=X.getImmediate({optional:!0});if(Wt){const or=yield Wt.getHeartbeatsHeader();or&&Pt.append("x-firebase-client",or)}const Hn={method:"POST",headers:Pt,body:JSON.stringify({installation:{sdkVersion:Ei,appId:U.appId}})},sr=yield tr(()=>fetch(tt,Hn));if(sr.ok)return wt(yield sr.json());throw yield bt("Generate Auth Token",sr)})).apply(this,arguments)}function Ie(U){return it.apply(this,arguments)}function it(){return it=(0,h.Z)(function*(U,X=!1){let oe;const tt=yield Lt(U.appConfig,Wt=>{if(!Pe(Wt))throw Ae.create("not-registered");const Nt=Wt.authToken;if(!X&&function mt(U){return 2===U.requestStatus&&!function It(U){const X=Date.now();return X<U.creationTime||U.creationTime+U.expiresIn<X+Ne}(U)}(Nt))return Wt;if(1===Nt.requestStatus)return oe=function et(U,X){return kt.apply(this,arguments)}(U,X),Wt;{if(!navigator.onLine)throw Ae.create("app-offline");const Hn=function Gt(U){const X={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:X})}(Wt);return oe=function se(U,X){return ee.apply(this,arguments)}(U,Hn),Hn}});return oe?yield oe:tt.authToken}),it.apply(this,arguments)}function kt(){return(kt=(0,h.Z)(function*(U,X){let oe=yield Ut(U.appConfig);for(;1===oe.authToken.requestStatus;)yield di(100),oe=yield Ut(U.appConfig);const tt=oe.authToken;return 0===tt.requestStatus?Ie(U,X):tt})).apply(this,arguments)}function Ut(U){return Lt(U,X=>{if(!Pe(X))throw Ae.create("not-registered");return function on(U){return 1===U.requestStatus&&U.requestTime+er<Date.now()}(X.authToken)?Object.assign(Object.assign({},X),{authToken:{requestStatus:0}}):X})}function ee(){return ee=(0,h.Z)(function*(U,X){try{const oe=yield function ae(U,X){return de.apply(this,arguments)}(U,X),tt=Object.assign(Object.assign({},X),{authToken:oe});return yield kn(U.appConfig,tt),oe}catch(oe){if(!ut(oe)||401!==oe.customData.serverCode&&404!==oe.customData.serverCode){const tt=Object.assign(Object.assign({},X),{authToken:{requestStatus:0}});yield kn(U.appConfig,tt)}else yield Jt(U.appConfig);throw oe}}),ee.apply(this,arguments)}function Pe(U){return void 0!==U&&2===U.registrationStatus}function Fn(){return(Fn=(0,h.Z)(function*(U){const X=U,{installationEntry:oe,registrationPromise:tt}=yield Lr(X);return tt?tt.catch(console.error):Ie(X).catch(console.error),oe.fid})).apply(this,arguments)}function qi(){return qi=(0,h.Z)(function*(U,X=!1){const oe=U;return yield function ir(U){return po.apply(this,arguments)}(oe),(yield Ie(oe,X)).token}),qi.apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(U){const{registrationPromise:X}=yield Lr(U);X&&(yield X)})).apply(this,arguments)}function mo(U){return Ae.create("missing-app-config-values",{valueName:U})}const yo="installations",os=U=>{const X=U.getProvider("app").getImmediate(),oe=function Zi(U){if(!U||!U.options)throw mo("App Configuration");if(!U.name)throw mo("App Name");const X=["projectId","apiKey","appId"];for(const oe of X)if(!U.options[oe])throw mo(oe);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(X);return{app:X,appConfig:oe,heartbeatServiceProvider:(0,V._getProvider)(X,"heartbeat"),_delete:()=>Promise.resolve()}},Ko=U=>{const X=U.getProvider("app").getImmediate(),oe=(0,V._getProvider)(X,yo).getImmediate();return{getId:()=>function Cr(U){return Fn.apply(this,arguments)}(oe),getToken:Pt=>function rr(U){return qi.apply(this,arguments)}(oe,Pt)}};(function _o(){(0,V._registerComponent)(new k.wA(yo,os,"PUBLIC")),(0,V._registerComponent)(new k.wA("installations-internal",Ko,"PRIVATE"))})(),(0,V.registerVersion)(cn,Xn),(0,V.registerVersion)(cn,Xn,"esm2017")},1877:(Dt,ke,F)=>{F.d(ke,{Am:()=>_e,Ub:()=>Ce,Yd:()=>ve,in:()=>V});const h=[];var V=(()=>((V=V||{})[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V))();const k={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ce=(W,z,...q)=>{if(z<W.logLevel)return;const xe=(new Date).toISOString(),we=ge[z];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[we](`[${xe}]  ${W.name}:`,...q)};class ve{constructor(z){this.name=z,this._logLevel=ne,this._logHandler=ce,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in V))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...z),this._logHandler(this,V.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...z),this._logHandler(this,V.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,V.INFO,...z),this._logHandler(this,V.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,V.WARN,...z),this._logHandler(this,V.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...z),this._logHandler(this,V.ERROR,...z)}}function Ce(W){h.forEach(z=>{z.setLogLevel(W)})}function _e(W,z){for(const q of h){let xe=null;z&&z.level&&(xe=k[z.level]),q.userLogHandler=null===W?null:(we,Qe,...Et)=>{const fe=Et.map(Fe=>{if(null==Fe)return null;if("string"==typeof Fe)return Fe;if("number"==typeof Fe||"boolean"==typeof Fe)return Fe.toString();if(Fe instanceof Error)return Fe.message;try{return JSON.stringify(Fe)}catch{return null}}).filter(Fe=>Fe).join(" ");Qe>=(xe??we.logLevel)&&W({level:V[Qe].toLowerCase(),message:fe,args:Et,type:we.name})}}}},3008:(Dt,ke,F)=>{F.d(ke,{IH:()=>kn,Gb:()=>Jt,Kz:()=>R,Iv:()=>pr});var h=F(5861),V=F(6881),k=F(1877),ne=F(2090),ge=F(4859);F(4727);const ve="analytics",Ce="firebase_id",_e="origin",W=6e4,z="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",q="https://www.googletagmanager.com/gtag/js",xe=new k.Yd("@firebase/analytics"),Qe=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Et(G){if(!G.startsWith(q)){const ae=Qe.create("invalid-gtag-resource",{gtagURL:G});return xe.warn(ae.message),""}return G}function fe(G){return Promise.all(G.map(ae=>ae.catch(de=>de)))}function De(){return(De=(0,h.Z)(function*(G,ae,de,Ge,Ie,it){const et=Ge[Ie];try{if(et)yield ae[et];else{const Ut=(yield fe(de)).find(se=>se.measurementId===Ie);Ut&&(yield ae[Ut.appId])}}catch(kt){xe.error(kt)}G("config",Ie,it)})).apply(this,arguments)}function Be(){return(Be=(0,h.Z)(function*(G,ae,de,Ge,Ie){try{let it=[];if(Ie&&Ie.send_to){let et=Ie.send_to;Array.isArray(et)||(et=[et]);const kt=yield fe(de);for(const Ut of et){const se=kt.find(Pe=>Pe.measurementId===Ut),ee=se&&ae[se.appId];if(!ee){it=[];break}it.push(ee)}}0===it.length&&(it=Object.values(ae)),yield Promise.all(it),G("event",Ge,Ie||{})}catch(it){xe.error(it)}})).apply(this,arguments)}const Xe=30,er=new class Xn{constructor(ae={},de=1e3){this.throttleMetadata=ae,this.intervalMillis=de}getThrottleMetadata(ae){return this.throttleMetadata[ae]}setThrottleMetadata(ae,de){this.throttleMetadata[ae]=de}deleteThrottleMetadata(ae){delete this.throttleMetadata[ae]}};function Ei(G){return new Headers({Accept:"application/json","x-goog-api-key":G})}function ye(){return(ye=(0,h.Z)(function*(G){var ae;const{appId:de,apiKey:Ge}=G,Ie={method:"GET",headers:Ei(Ge)},it=z.replace("{app-id}",de),et=yield fetch(it,Ie);if(200!==et.status&&304!==et.status){let kt="";try{const Ut=yield et.json();null!==(ae=Ut.error)&&void 0!==ae&&ae.message&&(kt=Ut.error.message)}catch{}throw Qe.create("config-fetch-failed",{httpStatus:et.status,responseMessage:kt})}return et.json()})).apply(this,arguments)}function Le(){return(Le=(0,h.Z)(function*(G,ae=er,de){const{appId:Ge,apiKey:Ie,measurementId:it}=G.options;if(!Ge)throw Qe.create("no-app-id");if(!Ie){if(it)return{measurementId:it,appId:Ge};throw Qe.create("no-api-key")}const et=ae.getThrottleMetadata(Ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},kt=new _n;return setTimeout((0,h.Z)(function*(){kt.abort()}),void 0!==de?de:W),Je({appId:Ge,apiKey:Ie,measurementId:it},et,kt,ae)})).apply(this,arguments)}function Je(G,ae,de){return je.apply(this,arguments)}function je(){return je=(0,h.Z)(function*(G,{throttleEndTimeMillis:ae,backoffCount:de},Ge,Ie=er){var it;const{appId:et,measurementId:kt}=G;try{yield function Ae(G,ae){return new Promise((de,Ge)=>{const Ie=Math.max(ae-Date.now(),0),it=setTimeout(de,Ie);G.addEventListener(()=>{clearTimeout(it),Ge(Qe.create("fetch-throttle",{throttleEndTimeMillis:ae}))})})}(Ge,ae)}catch(Ut){if(kt)return xe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kt} provided in the "measurementId" field in the local Firebase config. [${Ut?.message}]`),{appId:et,measurementId:kt};throw Ut}try{const Ut=yield function pe(G){return ye.apply(this,arguments)}(G);return Ie.deleteThrottleMetadata(et),Ut}catch(Ut){const se=Ut;if(!function ut(G){if(!(G instanceof ne.ZR&&G.customData))return!1;const ae=Number(G.customData.httpStatus);return 429===ae||500===ae||503===ae||504===ae}(se)){if(Ie.deleteThrottleMetadata(et),kt)return xe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${kt} provided in the "measurementId" field in the local Firebase config. [${se?.message}]`),{appId:et,measurementId:kt};throw Ut}const ee=503===Number(null===(it=se?.customData)||void 0===it?void 0:it.httpStatus)?(0,ne.$s)(de,Ie.intervalMillis,Xe):(0,ne.$s)(de,Ie.intervalMillis),Pe={throttleEndTimeMillis:Date.now()+ee,backoffCount:de+1};return Ie.setThrottleMetadata(et,Pe),xe.debug(`Calling attemptFetch again in ${ee} millis`),Je(G,Pe,Ge,Ie)}}),je.apply(this,arguments)}class _n{constructor(){this.listeners=[]}addEventListener(ae){this.listeners.push(ae)}abort(){this.listeners.forEach(ae=>ae())}}let wt,vt;function Ht(){return(Ht=(0,h.Z)(function*(G,ae,de,Ge,Ie){if(Ie&&Ie.global)G("event",de,Ge);else{const it=yield ae;G("event",de,Object.assign(Object.assign({},Ge),{send_to:it}))}})).apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(G,ae,de,Ge){if(Ge&&Ge.global)return G("set",{user_id:de}),Promise.resolve();G("config",yield ae,{update:!0,user_id:de})})).apply(this,arguments)}function Kt(){return(Kt=(0,h.Z)(function*(){if(!(0,ne.hl)())return xe.warn(Qe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(G){return xe.warn(Qe.create("indexeddb-unavailable",{errorInfo:G?.toString()}).message),!1}return!0})).apply(this,arguments)}function rt(){return rt=(0,h.Z)(function*(G,ae,de,Ge,Ie,it,et){var kt;const Ut=function Ne(G){return Le.apply(this,arguments)}(G);Ut.then(It=>{de[It.measurementId]=It.appId,G.options.measurementId&&It.measurementId!==G.options.measurementId&&xe.warn(`The measurement ID in the local Firebase config (${G.options.measurementId}) does not match the measurement ID fetched from the server (${It.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(It=>xe.error(It)),ae.push(Ut);const se=function On(){return Kt.apply(this,arguments)}().then(It=>{if(It)return Ge.getId()}),[ee,Pe]=yield Promise.all([Ut,se]);(function st(G){const ae=window.document.getElementsByTagName("script");for(const de of Object.values(ae))if(de.src&&de.src.includes(q)&&de.src.includes(G))return de;return null})(it)||function ze(G,ae){const de=function Fe(G,ae){let de;return window.trustedTypes&&(de=window.trustedTypes.createPolicy(G,ae)),de}("firebase-js-sdk-policy",{createScriptURL:Et}),Ge=document.createElement("script"),Ie=`${q}?l=${G}&id=${ae}`;Ge.src=de?de?.createScriptURL(Ie):Ie,Ge.async=!0,document.head.appendChild(Ge)}(it,ee.measurementId),vt&&(Ie("consent","default",vt),function Cn(G){vt=G}(void 0)),Ie("js",new Date);const mt=null!==(kt=et?.config)&&void 0!==kt?kt:{};return mt[_e]="firebase",mt.update=!0,null!=Pe&&(mt[Ce]=Pe),Ie("config",ee.measurementId,mt),wt&&(Ie("set",wt),function dr(G){wt=G}(void 0)),ee.measurementId}),rt.apply(this,arguments)}class Yn{constructor(ae){this.app=ae}_delete(){return delete xn[this.app.options.appId],Promise.resolve()}}let xn={},hr=[];const bn={};let sn,Dr,tn="dataLayer",Ft=!1;function $r(G,ae,de){!function Wn(){const G=[];if((0,ne.ru)()&&G.push("This is a browser extension environment."),(0,ne.zI)()||G.push("Cookies are not available."),G.length>0){const ae=G.map((Ge,Ie)=>`(${Ie+1}) ${Ge}`).join(" "),de=Qe.create("invalid-analytics-context",{errorInfo:ae});xe.warn(de.message)}}();const Ge=G.options.appId;if(!Ge)throw Qe.create("no-app-id");if(!G.options.apiKey){if(!G.options.measurementId)throw Qe.create("no-api-key");xe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${G.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xn[Ge])throw Qe.create("already-exists",{id:Ge});if(!Ft){!function Ze(G){let ae=[];Array.isArray(window[G])?ae=window[G]:window[G]=ae}(tn);const{wrappedGtag:it,gtagCore:et}=function J(G,ae,de,Ge,Ie){let it=function(...et){window[Ge].push(arguments)};return window[Ie]&&"function"==typeof window[Ie]&&(it=window[Ie]),window[Ie]=function Se(G,ae,de,Ge){function it(){return it=(0,h.Z)(function*(et,...kt){try{if("event"===et){const[Ut,se]=kt;yield function Te(G,ae,de,Ge,Ie){return Be.apply(this,arguments)}(G,ae,de,Ut,se)}else if("config"===et){const[Ut,se]=kt;yield function be(G,ae,de,Ge,Ie,it){return De.apply(this,arguments)}(G,ae,de,Ge,Ut,se)}else if("consent"===et){const[Ut]=kt;G("consent","update",Ut)}else if("get"===et){const[Ut,se,ee]=kt;G("get",Ut,se,ee)}else if("set"===et){const[Ut]=kt;G("set",Ut)}else G(et,...kt)}catch(Ut){xe.error(Ut)}}),it.apply(this,arguments)}return function Ie(et){return it.apply(this,arguments)}}(it,G,ae,de),{gtagCore:it,wrappedGtag:window[Ie]}}(xn,hr,bn,tn,"gtag");Dr=it,sn=et,Ft=!0}return xn[Ge]=function pt(G,ae,de,Ge,Ie,it,et){return rt.apply(this,arguments)}(G,hr,bn,ae,sn,tn,de),new Yn(G)}function kn(G=(0,V.getApp)()){G=(0,ne.m9)(G);const ae=(0,V._getProvider)(G,ve);return ae.isInitialized()?ae.getImmediate():function $n(G,ae={}){const de=(0,V._getProvider)(G,ve);if(de.isInitialized()){const Ie=de.getImmediate();if((0,ne.vZ)(ae,de.getOptions()))return Ie;throw Qe.create("already-initialized")}return de.initialize({options:ae})}(G)}function Jt(){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}function pr(G,ae,de){G=(0,ne.m9)(G),function tr(G,ae,de,Ge){return An.apply(this,arguments)}(Dr,xn[G.app.options.appId],ae,de).catch(Ge=>xe.error(Ge))}function R(G,ae,de,Ge){G=(0,ne.m9)(G),function bt(G,ae,de,Ge,Ie){return Ht.apply(this,arguments)}(Dr,xn[G.app.options.appId],ae,de,Ge).catch(Ie=>xe.error(Ie))}const S="@firebase/analytics",K="0.10.0";!function ie(){(0,V._registerComponent)(new ge.wA(ve,(ae,{options:de})=>$r(ae.getProvider("app").getImmediate(),ae.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,V._registerComponent)(new ge.wA("analytics-internal",function G(ae){try{const de=ae.getProvider(ve).getImmediate();return{logEvent:(Ge,Ie,it)=>R(de,Ge,Ie,it)}}catch(de){throw Qe.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,V.registerVersion)(S,K),(0,V.registerVersion)(S,K,"esm2017")}()},259:(Dt,ke,F)=>{F.d(ke,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=F(6881);(0,h.registerVersion)("firebase","9.22.2","app")},9260:(Dt,ke,F)=>{F.d(ke,{Z:()=>h.Z});var h=F(3942);h.Z.registerVersion("firebase","9.22.2","app-compat")},9568:(Dt,ke,F)=>{F.r(ke);var h=F(5861),V=F(3942),k=F(1389),ne=F(2090),ve=(F(6881),F(1877),F(4859));function Ce(){return window}function z(){return z=(0,h.Z)(function*(R,O,S){var K;const{BuildInfo:ie}=Ce();(0,k.as)(O.sessionId,"AuthEvent did not contain a session ID");const G=yield function Fe(R){return ze.apply(this,arguments)}(O.sessionId),ae={};return(0,k.at)()?ae.ibi=ie.packageName:(0,k.au)()?ae.apn=ie.packageName:(0,k.av)(R,"operation-not-supported-in-this-environment"),ie.displayName&&(ae.appDisplayName=ie.displayName),ae.sessionId=G,(0,k.aw)(R,S,O.type,void 0,null!==(K=O.eventId)&&void 0!==K?K:void 0,ae)}),z.apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(R){const{BuildInfo:O}=Ce(),S={};(0,k.at)()?S.iosBundleId=O.packageName:(0,k.au)()?S.androidPackageName=O.packageName:(0,k.av)(R,"operation-not-supported-in-this-environment"),yield(0,k.ax)(R,S)})).apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(R,O,S){const{cordova:K}=Ce();let ie=()=>{};try{yield new Promise((G,ae)=>{let de=null;function Ge(){var et;G();const kt=null===(et=K.plugins.browsertab)||void 0===et?void 0:et.close;"function"==typeof kt&&kt(),"function"==typeof S?.close&&S.close()}function Ie(){de||(de=window.setTimeout(()=>{ae((0,k.az)(R,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&Ie()}O.addPassiveListener(Ge),document.addEventListener("resume",Ie,!1),(0,k.au)()&&document.addEventListener("visibilitychange",it,!1),ie=()=>{O.removePassiveListener(Ge),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",it,!1),de&&window.clearTimeout(de)}})}finally{ie()}})).apply(this,arguments)}function ze(){return(ze=(0,h.Z)(function*(R){const O=function Ze(R){if((0,k.as)(/[0-9a-zA-Z]+/.test(R),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(R);const O=new ArrayBuffer(R.length),S=new Uint8Array(O);for(let K=0;K<R.length;K++)S[K]=R.charCodeAt(K);return S}(R),S=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(S)).map(ie=>ie.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class De extends k.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(S=>S(O)),super.onEvent(O)}initialized(){var O=this;return(0,h.Z)(function*(){yield O.initPromise})()}}function Se(R){return J.apply(this,arguments)}function J(){return(J=(0,h.Z)(function*(R){const O=yield cn()._get(Xn(R));return O&&(yield cn()._remove(Xn(R))),O})).apply(this,arguments)}function Xe(){const R=[];for(let S=0;S<20;S++){const K=Math.floor(62*Math.random());R.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(K))}return R.join("")}function cn(){return(0,k.aC)(k.b)}function Xn(R){return(0,k.aD)("authEvent",R.config.apiKey,R.name)}function pe(R){if(!R?.includes("?"))return{};const[O,...S]=R.split("?");return(0,ne.zd)(S.join("?"))}const Le=class Ne{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(O){var S=this;return(0,h.Z)(function*(){const K=O._key();let ie=S.eventManagers.get(K);return ie||(ie=new De(O),S.eventManagers.set(K,ie),S.attachCallbackListeners(O,ie)),ie})()}_openPopup(O){(0,k.av)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,S,K,ie){var G=this;return(0,h.Z)(function*(){!function fe(R){var O,S,K,ie,G,ae,de,Ge,Ie,it;const et=Ce();(0,k.aA)("function"==typeof(null===(O=et?.universalLinks)||void 0===O?void 0:O.subscribe),R,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aA)(typeof(null===(S=et?.BuildInfo)||void 0===S?void 0:S.packageName)<"u",R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aA)("function"==typeof(null===(G=null===(ie=null===(K=et?.cordova)||void 0===K?void 0:K.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===G?void 0:G.openUrl),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(Ge=null===(de=null===(ae=et?.cordova)||void 0===ae?void 0:ae.plugins)||void 0===de?void 0:de.browsertab)||void 0===Ge?void 0:Ge.isAvailable),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(it=null===(Ie=et?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===it?void 0:it.open),R,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const ae=yield G._initialize(O);yield ae.initialized(),ae.resetRedirect(),(0,k.aG)(),yield G._originValidation(O);const de=function Te(R,O,S=null){return{type:O,eventId:S,urlResponse:null,sessionId:Xe(),postBody:null,tenantId:R.tenantId,error:(0,k.az)(R,"no-auth-event")}}(O,K,ie);yield function Be(R,O){return cn()._set(Xn(R),O)}(O,de);const Ge=yield function W(R,O,S){return z.apply(this,arguments)}(O,de,S),Ie=yield function we(R){const{cordova:O}=Ce();return new Promise(S=>{O.plugins.browsertab.isAvailable(K=>{let ie=null;K?O.plugins.browsertab.openUrl(R):ie=O.InAppBrowser.open(R,(0,k.ay)()?"_blank":"_system","location=yes"),S(ie)})})}(Ge);return function Qe(R,O,S){return Et.apply(this,arguments)}(O,ae,Ie)})()}_isIframeWebStorageSupported(O,S){throw new Error("Method not implemented.")}_originValidation(O){const S=O._key();return this.originValidationPromises[S]||(this.originValidationPromises[S]=function q(R){return xe.apply(this,arguments)}(O)),this.originValidationPromises[S]}attachCallbackListeners(O,S){const{universalLinks:K,handleOpenURL:ie,BuildInfo:G}=Ce(),ae=setTimeout((0,h.Z)(function*(){yield Se(O),S.onEvent(Je())}),500),de=function(){var it=(0,h.Z)(function*(et){clearTimeout(ae);const kt=yield Se(O);let Ut=null;kt&&et?.url&&(Ut=function st(R,O){var S,K;const ie=function Ei(R){const O=pe(R),S=O.link?decodeURIComponent(O.link):void 0,K=pe(S).link,ie=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return pe(ie).link||ie||K||S||R}(O);if(ie.includes("/__/auth/callback")){const G=pe(ie),ae=G.firebaseError?function er(R){try{return JSON.parse(R)}catch{return null}}(decodeURIComponent(G.firebaseError)):null,de=null===(K=null===(S=ae?.code)||void 0===S?void 0:S.split("auth/"))||void 0===K?void 0:K[1],Ge=de?(0,k.az)(de):null;return Ge?{type:R.type,eventId:R.eventId,tenantId:R.tenantId,error:Ge,urlResponse:null,sessionId:null,postBody:null}:{type:R.type,eventId:R.eventId,tenantId:R.tenantId,sessionId:R.sessionId,urlResponse:ie,postBody:null}}return null}(kt,et.url)),S.onEvent(Ut||Je())});return function(kt){return it.apply(this,arguments)}}();typeof K<"u"&&"function"==typeof K.subscribe&&K.subscribe(null,de);const Ge=ie,Ie=`${G.packageName.toLowerCase()}://`;Ce().handleOpenURL=function(){var it=(0,h.Z)(function*(et){if(et.toLowerCase().startsWith(Ie)&&de({url:et}),"function"==typeof Ge)try{Ge(et)}catch(kt){console.error(kt)}});return function(et){return it.apply(this,arguments)}}()}};function Je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.az)("no-auth-event")}}function wt(){var R;return(null===(R=self?.location)||void 0===R?void 0:R.protocol)||null}function Ht(R=(0,ne.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()&&"capacitor:"!==wt()||!R.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){try{const R=self.localStorage,O=k.aL();if(R)return R.setItem(O,"1"),R.removeItem(O),!function An(R=(0,ne.z$)()){return function mn(){return(0,ne.w1)()&&11===document?.documentMode}()||function tr(R=(0,ne.z$)()){return/Edge\/\d+/.test(R)}(R)}()||(0,ne.hl)()}catch{return nr()&&(0,ne.hl)()}return!1}function nr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ln(){return(function bt(){return"http:"===wt()||"https:"===wt()}()||(0,ne.ru)()||Ht())&&!function rn(){return(0,ne.b$)()||(0,ne.UG)()}()&&Ir()&&!nr()}function Zn(){return Ht()&&typeof document<"u"}function Pr(){return(Pr=(0,h.Z)(function*(){return!!Zn()&&new Promise(R=>{const O=setTimeout(()=>{R(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),R(!0)})})})).apply(this,arguments)}const Cn={LOCAL:"local",NONE:"none",SESSION:"session"},dr=k.aA,On="persistence";function pt(R){return rt.apply(this,arguments)}function rt(){return(rt=(0,h.Z)(function*(R){yield R._initializationPromise;const O=xn(),S=k.aD(On,R.config.apiKey,R.name);O&&O.setItem(S,R._getPersistence())})).apply(this,arguments)}function xn(){var R;try{return(null===(R=function vt(){return typeof window<"u"?window:null}())||void 0===R?void 0:R.sessionStorage)||null}catch{return null}}const hr=k.aA;class bn{constructor(){this.browserResolver=k.aC(k.k),this.cordovaResolver=k.aC(Le),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(O){var S=this;return(0,h.Z)(function*(){return yield S.selectUnderlyingResolver(),S.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,S,K,ie){var G=this;return(0,h.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openPopup(O,S,K,ie)})()}_openRedirect(O,S,K,ie){var G=this;return(0,h.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openRedirect(O,S,K,ie)})()}_isIframeWebStorageSupported(O,S){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,S)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return Zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hr(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,h.Z)(function*(){if(O.underlyingResolver)return;const S=yield function di(){return Pr.apply(this,arguments)}();O.underlyingResolver=S?O.cordovaResolver:O.browserResolver})()}}function tn(R){return R.unwrap()}function sn(R){return Ft(R)}function Ft(R){const{_tokenResponse:O}=R instanceof ne.ZR?R.customData:R;if(!O)return null;if(!(R instanceof ne.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return k.P.credentialFromResult(R);const S=O.providerId;if(!S||S===k.p.PASSWORD)return null;let K;switch(S){case k.p.GOOGLE:K=k.V;break;case k.p.FACEBOOK:K=k.U;break;case k.p.GITHUB:K=k.W;break;case k.p.TWITTER:K=k.Z;break;default:const{oauthIdToken:ie,oauthAccessToken:G,oauthTokenSecret:ae,pendingToken:de,nonce:Ge}=O;return G||ae||ie||de?de?S.startsWith("saml.")?k.aO._create(S,de):k.L._fromParams({providerId:S,signInMethod:S,pendingToken:de,idToken:ie,accessToken:G}):new k.X(S).credential({idToken:ie,accessToken:G,rawNonce:Ge}):null}return R instanceof ne.ZR?K.credentialFromError(R):K.credentialFromResult(R)}function nn(R,O){return O.catch(S=>{throw S instanceof ne.ZR&&function Dr(R,O){var S;const K=null===(S=O.customData)||void 0===S?void 0:S._tokenResponse;if("auth/multi-factor-auth-required"===O?.code)O.resolver=new kn(R,k.aq(R,O));else if(K){const ie=Ft(O),G=O;ie&&(G.credential=ie,G.tenantId=K.tenantId||void 0,G.email=K.email||void 0,G.phoneNumber=K.phoneNumber||void 0)}}(R,S),S}).then(S=>{const ie=S.user;return{operationType:S.operationType,credential:sn(S),additionalUserInfo:k.ao(S),user:$n.getOrCreate(ie)}})}function Wn(R,O){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*(R,O){const S=yield O;return{verificationId:S.verificationId,confirm:K=>nn(R,S.confirm(K))}})).apply(this,arguments)}class kn{constructor(O,S){this.resolver=S,this.auth=function fr(R){return R.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return nn(tn(this.auth),this.resolver.resolveSignIn(O))}}class $n{constructor(O){this._delegate=O,this.multiFactor=k.ar(O)}static getOrCreate(O){return $n.USER_MAP.has(O)||$n.USER_MAP.set(O,new $n(O)),$n.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var S=this;return(0,h.Z)(function*(){return nn(S.auth,k.a0(S._delegate,O))})()}linkWithPhoneNumber(O,S){var K=this;return(0,h.Z)(function*(){return Wn(K.auth,k.l(K._delegate,O,S))})()}linkWithPopup(O){var S=this;return(0,h.Z)(function*(){return nn(S.auth,k.d(S._delegate,O,bn))})()}linkWithRedirect(O){var S=this;return(0,h.Z)(function*(){return yield pt(k.aH(S.auth)),k.g(S._delegate,O,bn)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var S=this;return(0,h.Z)(function*(){return nn(S.auth,k.a1(S._delegate,O))})()}reauthenticateWithPhoneNumber(O,S){return Wn(this.auth,k.r(this._delegate,O,S))}reauthenticateWithPopup(O){return nn(this.auth,k.e(this._delegate,O,bn))}reauthenticateWithRedirect(O){var S=this;return(0,h.Z)(function*(){return yield pt(k.aH(S.auth)),k.h(S._delegate,O,bn)})()}sendEmailVerification(O){return k.ae(this._delegate,O)}unlink(O){var S=this;return(0,h.Z)(function*(){return yield k.an(S._delegate,O),S})()}updateEmail(O){return k.aj(this._delegate,O)}updatePassword(O){return k.ak(this._delegate,O)}updatePhoneNumber(O){return k.u(this._delegate,O)}updateProfile(O){return k.ai(this._delegate,O)}verifyBeforeUpdateEmail(O,S){return k.af(this._delegate,O,S)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$n.USER_MAP=new WeakMap;const Jt=k.aA;let Tn=(()=>{class R{constructor(S,K){if(this.app=S,K.isInitialized())return this._delegate=K.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ie}=S.options;Jt(ie,"invalid-api-key",{appName:S.name}),Jt(ie,"invalid-api-key",{appName:S.name});const G=typeof window<"u"?bn:void 0;this._delegate=K.initialize({options:{persistence:Vn(ie,S.name),popupRedirectResolver:G}}),this._delegate._updateErrorMap(k.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$n.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(S){this._delegate.languageCode=S}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(S){this._delegate.tenantId=S}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(S,K){k.I(this._delegate,S,K)}applyActionCode(S){return k.a5(this._delegate,S)}checkActionCode(S){return k.a6(this._delegate,S)}confirmPasswordReset(S,K){return k.a4(this._delegate,S,K)}createUserWithEmailAndPassword(S,K){var ie=this;return(0,h.Z)(function*(){return nn(ie._delegate,k.a8(ie._delegate,S,K))})()}fetchProvidersForEmail(S){return this.fetchSignInMethodsForEmail(S)}fetchSignInMethodsForEmail(S){return k.ad(this._delegate,S)}isSignInWithEmailLink(S){return k.ab(this._delegate,S)}getRedirectResult(){var S=this;return(0,h.Z)(function*(){Jt(Ln(),S._delegate,"operation-not-supported-in-this-environment");const K=yield k.j(S._delegate,bn);return K?nn(S._delegate,Promise.resolve(K)):{credential:null,user:null}})()}addFrameworkForLogging(S){!function je(R,O){(0,k.aH)(R)._logFramework(O)}(this._delegate,S)}onAuthStateChanged(S,K,ie){const{next:G,error:ae,complete:de}=Lt(S,K,ie);return this._delegate.onAuthStateChanged(G,ae,de)}onIdTokenChanged(S,K,ie){const{next:G,error:ae,complete:de}=Lt(S,K,ie);return this._delegate.onIdTokenChanged(G,ae,de)}sendSignInLinkToEmail(S,K){return k.aa(this._delegate,S,K)}sendPasswordResetEmail(S,K){return k.a3(this._delegate,S,K||void 0)}setPersistence(S){var K=this;return(0,h.Z)(function*(){let ie;switch(function Kt(R,O){dr(Object.values(Cn).includes(O),R,"invalid-persistence-type"),(0,ne.b$)()?dr(O!==Cn.SESSION,R,"unsupported-persistence-type"):(0,ne.UG)()?dr(O===Cn.NONE,R,"unsupported-persistence-type"):nr()?dr(O===Cn.NONE||O===Cn.LOCAL&&(0,ne.hl)(),R,"unsupported-persistence-type"):dr(O===Cn.NONE||Ir(),R,"unsupported-persistence-type")}(K._delegate,S),S){case Cn.SESSION:ie=k.a;break;case Cn.LOCAL:ie=(yield k.aC(k.i)._isAvailable())?k.i:k.b;break;case Cn.NONE:ie=k.N;break;default:return k.av("argument-error",{appName:K._delegate.name})}return K._delegate.setPersistence(ie)})()}signInAndRetrieveDataWithCredential(S){return this.signInWithCredential(S)}signInAnonymously(){return nn(this._delegate,k._(this._delegate))}signInWithCredential(S){return nn(this._delegate,k.$(this._delegate,S))}signInWithCustomToken(S){return nn(this._delegate,k.a2(this._delegate,S))}signInWithEmailAndPassword(S,K){return nn(this._delegate,k.a9(this._delegate,S,K))}signInWithEmailLink(S,K){return nn(this._delegate,k.ac(this._delegate,S,K))}signInWithPhoneNumber(S,K){return Wn(this._delegate,k.s(this._delegate,S,K))}signInWithPopup(S){var K=this;return(0,h.Z)(function*(){return Jt(Ln(),K._delegate,"operation-not-supported-in-this-environment"),nn(K._delegate,k.c(K._delegate,S,bn))})()}signInWithRedirect(S){var K=this;return(0,h.Z)(function*(){return Jt(Ln(),K._delegate,"operation-not-supported-in-this-environment"),yield pt(K._delegate),k.f(K._delegate,S,bn)})()}updateCurrentUser(S){return this._delegate.updateCurrentUser(S)}verifyPasswordResetCode(S){return k.a7(this._delegate,S)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return R.Persistence=Cn,R})();function Lt(R,O,S){let K=R;"function"!=typeof R&&({next:K,error:O,complete:S}=R);const ie=K;return{next:ae=>ie(ae&&$n.getOrCreate(ae)),error:O,complete:S}}function Vn(R,O){const S=function Yn(R,O){const S=xn();if(!S)return[];const K=k.aD(On,R,O);switch(S.getItem(K)){case Cn.NONE:return[k.N];case Cn.LOCAL:return[k.i,k.a];case Cn.SESSION:return[k.a];default:return[]}}(R,O);if(typeof self<"u"&&!S.includes(k.i)&&S.push(k.i),typeof window<"u")for(const K of[k.b,k.a])S.includes(K)||S.push(K);return S.includes(k.N)||S.push(k.N),S}class Lr{constructor(){this.providerId="phone",this._delegate=new k.P(tn(V.Z.auth()))}static credential(O,S){return k.P.credential(O,S)}verifyPhoneNumber(O,S){return this._delegate.verifyPhoneNumber(O,S)}unwrap(){return this._delegate}}Lr.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Lr.PROVIDER_ID=k.P.PROVIDER_ID;const pr=k.aA;class ni{constructor(O,S,K=V.Z.app()){var ie;pr(null===(ie=K.options)||void 0===ie?void 0:ie.apiKey,"invalid-api-key",{appName:K.name}),this._delegate=new k.R(O,S,K.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function B(R){R.INTERNAL.registerComponent(new ve.wA("auth-compat",O=>{const S=O.getProvider("app-compat").getImmediate(),K=O.getProvider("auth");return new Tn(S,K)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.Q,FacebookAuthProvider:k.U,GithubAuthProvider:k.W,GoogleAuthProvider:k.V,OAuthProvider:k.X,SAMLAuthProvider:k.Y,PhoneAuthProvider:Lr,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:ni,TwitterAuthProvider:k.Z,Auth:Tn,AuthCredential:k.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),R.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},5861:(Dt,ke,F)=>{function h(k,ne,ge,ce,ve,Ce,_e){try{var W=k[Ce](_e),z=W.value}catch(q){return void ge(q)}W.done?ne(z):Promise.resolve(z).then(ce,ve)}function V(k){return function(){var ne=this,ge=arguments;return new Promise(function(ce,ve){var Ce=k.apply(ne,ge);function _e(z){h(Ce,ce,ve,_e,W,"next",z)}function W(z){h(Ce,ce,ve,_e,W,"throw",z)}_e(void 0)})}}F.d(ke,{Z:()=>V})}},Dt=>{Dt(Dt.s=3791)}]);