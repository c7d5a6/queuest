"use strict";(self.webpackChunkqueuest_frontend=self.webpackChunkqueuest_frontend||[]).push([[179],{2011:(It,Oe,F)=>{F.d(Oe,{Dh:()=>Ce,GT:()=>ce,cc:()=>we,hO:()=>xe,on:()=>W,pX:()=>ge,xv:()=>_e});var h=F(2223),V=F(9260),k=F(3324);It=F.hmd(It);const ne=["ngOnDestroy"],ge=(Le,ze,Ze,Te={})=>new Proxy(Le,{get:(De,Se)=>Ze.runOutsideAngular(()=>{var Ue;if(Le[Se])return!(null===(Ue=Te?.spy)||void 0===Ue)&&Ue.get&&Te.spy.get(Se,Le[Se]),Le[Se];if(ne.indexOf(Se)>-1)return()=>{};const Me=ze.toPromise().then(J=>{const st=J&&J[Se];return"function"==typeof st?st.bind(J):st&&st.then?st.then(et=>Ze.run(()=>et)):Ze.run(()=>st)});return new Proxy(()=>{},{get:(J,st)=>Me[st],apply:(J,st,et)=>Me.then(un=>{var Qn;const Jn=un&&un(...et);return!(null===(Qn=Te?.spy)||void 0===Qn)&&Qn.apply&&Te.spy.apply(Se,et,Jn),Jn})})})}),ce=(Le,ze)=>{ze.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Te=>{Object.defineProperty(Le.prototype,Te,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Te))})})};class ve{constructor(ze){return ze}}const Ce=new h.OlP("angularfire2.app.options"),_e=new h.OlP("angularfire2.app.name");function W(Le,ze,Ze){const De="object"==typeof Ze&&Ze||{};De.name=De.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ue=V.Z.apps.filter(Me=>Me&&Me.name===De.name)[0]||ze.runOutsideAngular(()=>V.Z.initializeApp(Le,De));try{JSON.stringify(Le)!==JSON.stringify(Ue.options)&&z("error",`${Ue.name} Firebase App already initialized with different options${It.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Ue)}const z=(Le,...ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Le](...ze)},K={provide:ve,useFactory:W,deps:[Ce,h.R0b,[new h.FiY,_e]]};let xe=(()=>{class Le{constructor(Ze){V.Z.registerVersion("angularfire",k.q4.full,"core"),V.Z.registerVersion("angularfire",k.q4.full,"app-compat"),V.Z.registerVersion("angular",h.q4F.full,Ze.toString())}static initializeApp(Ze,Te){return{ngModule:Le,providers:[{provide:Ce,useValue:Ze},{provide:_e,useValue:Te}]}}}return Le.\u0275fac=function(Ze){return new(Ze||Le)(h.LFG(h.Lbi))},Le.\u0275mod=h.oAB({type:Le}),Le.\u0275inj=h.cJS({providers:[K]}),Le})();function we(Le,ze,Ze,Te,De){const[,Se,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Me=>Me[0]===Le)||[];if(Se)return function Qe(Le,ze){try{return Le.toString()===ze.toString()}catch{return Le===ze}}(De,Ue)||(he("error",`${ze} was already initialized on the ${Ze} Firebase App with different settings.${Et?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:De,was:Ue})),Se;{const Me=Te();return globalThis.\u0275AngularfireInstanceCache.push([Le,Me,De]),Me}}const Et=!!It.hot,he=(Le,...ze)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Le](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3324:(It,Oe,F)=>{F.d(Oe,{q4:()=>Gr,iC:()=>Ln,HU:()=>dc,vb:()=>cc,JM:()=>hu,nk:()=>ud,u3:()=>Lf});var h=F(2223),V=F(259),k=F(5861),ne=F(6881),ge=F(2090),ce=F(4859),ve=F(1877);F(4727);const _e="@firebase/remote-config",W="0.4.4",we=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ye{constructor(x,j,re,Ne){this.client=x,this.storage=j,this.storageCache=re,this.logger=Ne}isCachedDataFresh(x,j){if(!j)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-j,Ne=re<=x;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${x}. Is cache hit: ${Ne}.`),Ne}fetch(x){var j=this;return(0,k.Z)(function*(){const[re,Ne]=yield Promise.all([j.storage.getLastSuccessfulFetchTimestampMillis(),j.storage.getLastSuccessfulFetchResponse()]);if(Ne&&j.isCachedDataFresh(x.cacheMaxAgeMillis,re))return Ne;x.eTag=Ne&&Ne.eTag;const ke=yield j.client.fetch(x),pt=[j.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ke.status&&pt.push(j.storage.setLastSuccessfulFetchResponse(ke)),yield Promise.all(pt),ke})()}}function Re(A=navigator){return A.languages&&A.languages[0]||A.language}class Ve{constructor(x,j,re,Ne,ke,pt){this.firebaseInstallations=x,this.sdkVersion=j,this.namespace=re,this.projectId=Ne,this.apiKey=ke,this.appId=pt}fetch(x){var j=this;return(0,k.Z)(function*(){const[re,Ne]=yield Promise.all([j.firebaseInstallations.getId(),j.firebaseInstallations.getToken()]),pt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${j.projectId}/namespaces/${j.namespace}:fetch?key=${j.apiKey}`,Sn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":x.eTag||"*"},hn={sdk_version:j.sdkVersion,app_instance_id:re,app_instance_id_token:Ne,app_id:j.appId,language_code:Re()},xn={method:"POST",headers:Sn,body:JSON.stringify(hn)},cn=fetch(pt,xn),qt=new Promise((Qi,Ks)=>{x.signal.addEventListener(()=>{const Ia=new Error("The operation was aborted.");Ia.name="AbortError",Ks(Ia)})});let qs;try{yield Promise.race([cn,qt]),qs=yield cn}catch(Qi){let Ks="fetch-client-network";throw"AbortError"===Qi?.name&&(Ks="fetch-timeout"),we.create(Ks,{originalErrorMessage:Qi?.message})}let Os=qs.status;const hs=qs.headers.get("ETag")||void 0;let wa,fs;if(200===qs.status){let Qi;try{Qi=yield qs.json()}catch(Ks){throw we.create("fetch-client-parse",{originalErrorMessage:Ks?.message})}wa=Qi.entries,fs=Qi.state}if("INSTANCE_STATE_UNSPECIFIED"===fs?Os=500:"NO_CHANGE"===fs?Os=304:("NO_TEMPLATE"===fs||"EMPTY_CONFIG"===fs)&&(wa={}),304!==Os&&200!==Os)throw we.create("fetch-status",{httpStatus:Os});return{status:Os,eTag:hs,config:wa}})()}}class Ae{constructor(x,j){this.client=x,this.storage=j}fetch(x){var j=this;return(0,k.Z)(function*(){const re=(yield j.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return j.attemptFetch(x,re)})()}attemptFetch(x,{throttleEndTimeMillis:j,backoffCount:re}){var Ne=this;return(0,k.Z)(function*(){yield function Je(A,x){return new Promise((j,re)=>{const Ne=Math.max(x-Date.now(),0),ke=setTimeout(j,Ne);A.addEventListener(()=>{clearTimeout(ke),re(we.create("fetch-throttle",{throttleEndTimeMillis:x}))})})}(x.signal,j);try{const ke=yield Ne.client.fetch(x);return yield Ne.storage.deleteThrottleMetadata(),ke}catch(ke){if(!function Be(A){if(!(A instanceof ge.ZR&&A.customData))return!1;const x=Number(A.customData.httpStatus);return 429===x||500===x||503===x||504===x}(ke))throw ke;const pt={throttleEndTimeMillis:Date.now()+(0,ge.$s)(re),backoffCount:re+1};return yield Ne.storage.setThrottleMetadata(pt),Ne.attemptFetch(x,pt)}})()}}class wt{constructor(x,j,re,Ne,ke){this.app=x,this._client=j,this._storageCache=re,this._storage=Ne,this._logger=ke,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Tt(A,x){const j=A.target.error||void 0;return we.create(x,{originalErrorMessage:j&&j?.message})}const jt="app_namespace_store";class Mn{constructor(x,j,re,Ne=function Xn(){return new Promise((A,x)=>{try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=re=>{x(Tt(re,"storage-open"))},j.onsuccess=re=>{A(re.target.result)},j.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore(jt,{keyPath:"compositeKey"})}}catch(j){x(we.create("storage-open",{originalErrorMessage:j?.message}))}})}()){this.appId=x,this.appName=j,this.namespace=re,this.openDbPromise=Ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(x){return this.set("last_fetch_status",x)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(x){return this.set("last_successful_fetch_timestamp_millis",x)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(x){return this.set("last_successful_fetch_response",x)}getActiveConfig(){return this.get("active_config")}setActiveConfig(x){return this.set("active_config",x)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(x){return this.set("active_config_etag",x)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(x){return this.set("throttle_metadata",x)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(x){var j=this;return(0,k.Z)(function*(){const re=yield j.openDbPromise;return new Promise((Ne,ke)=>{const Sn=re.transaction([jt],"readonly").objectStore(jt),hn=j.createCompositeKey(x);try{const xn=Sn.get(hn);xn.onerror=cn=>{ke(Tt(cn,"storage-get"))},xn.onsuccess=cn=>{const qt=cn.target.result;Ne(qt?qt.value:void 0)}}catch(xn){ke(we.create("storage-get",{originalErrorMessage:xn?.message}))}})})()}set(x,j){var re=this;return(0,k.Z)(function*(){const Ne=yield re.openDbPromise;return new Promise((ke,pt)=>{const hn=Ne.transaction([jt],"readwrite").objectStore(jt),xn=re.createCompositeKey(x);try{const cn=hn.put({compositeKey:xn,value:j});cn.onerror=qt=>{pt(Tt(qt,"storage-set"))},cn.onsuccess=()=>{ke()}}catch(cn){pt(we.create("storage-set",{originalErrorMessage:cn?.message}))}})})()}delete(x){var j=this;return(0,k.Z)(function*(){const re=yield j.openDbPromise;return new Promise((Ne,ke)=>{const Sn=re.transaction([jt],"readwrite").objectStore(jt),hn=j.createCompositeKey(x);try{const xn=Sn.delete(hn);xn.onerror=cn=>{ke(Tt(cn,"storage-delete"))},xn.onsuccess=()=>{Ne()}}catch(xn){ke(we.create("storage-delete",{originalErrorMessage:xn?.message}))}})})()}createCompositeKey(x){return[this.appId,this.appName,this.namespace,x].join()}}class yr{constructor(x){this.storage=x}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var x=this;return(0,k.Z)(function*(){const j=x.storage.getLastFetchStatus(),re=x.storage.getLastSuccessfulFetchTimestampMillis(),Ne=x.storage.getActiveConfig(),ke=yield j;ke&&(x.lastFetchStatus=ke);const pt=yield re;pt&&(x.lastSuccessfulFetchTimestampMillis=pt);const Sn=yield Ne;Sn&&(x.activeConfig=Sn)})()}setLastFetchStatus(x){return this.lastFetchStatus=x,this.storage.setLastFetchStatus(x)}setLastSuccessfulFetchTimestampMillis(x){return this.lastSuccessfulFetchTimestampMillis=x,this.storage.setLastSuccessfulFetchTimestampMillis(x)}setActiveConfig(x){return this.activeConfig=x,this.storage.setActiveConfig(x)}}function si(){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,k.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch{return!1}})).apply(this,arguments)}!function er(){(0,ne._registerComponent)(new ce.wA("remote-config",function A(x,{instanceIdentifier:j}){const re=x.getProvider("app").getImmediate(),Ne=x.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw we.create("registration-window");if(!(0,ge.hl)())throw we.create("indexed-db-unavailable");const{projectId:ke,apiKey:pt,appId:Sn}=re.options;if(!ke)throw we.create("registration-project-id");if(!pt)throw we.create("registration-api-key");if(!Sn)throw we.create("registration-app-id");const hn=new Mn(Sn,re.name,j=j||"firebase"),xn=new yr(hn),cn=new ve.Yd(_e);cn.logLevel=ve.in.ERROR;const qt=new Ve(Ne,ne.SDK_VERSION,j,ke,pt,Sn),qs=new Ae(qt,hn),Os=new ye(qs,hn,xn,cn),hs=new wt(re,Os,xn,hn,cn);return function Ue(A){const x=(0,ge.m9)(A);x._initializePromise||(x._initializePromise=x._storageCache.loadFromStorage().then(()=>{x._isInitializationComplete=!0}))}(hs),hs},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(_e,W),(0,ne.registerVersion)(_e,W,"esm2017")}();const vt=(A,x)=>x.some(j=>A instanceof j);let Dn,ar;const ft=new WeakMap,rt=new WeakMap,Kn=new WeakMap,An=new WeakMap,ur=new WeakMap;let cr={get(A,x,j){if(A instanceof IDBTransaction){if("done"===x)return rt.get(A);if("objectStoreNames"===x)return A.objectStoreNames||Kn.get(A);if("store"===x)return j.objectStoreNames[1]?void 0:j.objectStore(j.objectStoreNames[0])}return en(A[x])},set:(A,x,j)=>(A[x]=j,!0),has:(A,x)=>A instanceof IDBTransaction&&("done"===x||"store"===x)||x in A};function kt(A){return"function"==typeof A?function vr(A){return A!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Wt(){return ar||(ar=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(A)?function(...x){return A.apply(Hn(this),x),en(ft.get(this))}:function(...x){return en(A.apply(Hn(this),x))}:function(x,...j){const re=A.call(Hn(this),x,...j);return Kn.set(re,x.sort?x.sort():[x]),en(re)}}(A):(A instanceof IDBTransaction&&function Xt(A){if(rt.has(A))return;const x=new Promise((j,re)=>{const Ne=()=>{A.removeEventListener("complete",ke),A.removeEventListener("error",pt),A.removeEventListener("abort",pt)},ke=()=>{j(),Ne()},pt=()=>{re(A.error||new DOMException("AbortError","AbortError")),Ne()};A.addEventListener("complete",ke),A.addEventListener("error",pt),A.addEventListener("abort",pt)});rt.set(A,x)}(A),vt(A,function Nn(){return Dn||(Dn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(A,cr):A)}function en(A){if(A instanceof IDBRequest)return function Cn(A){const x=new Promise((j,re)=>{const Ne=()=>{A.removeEventListener("success",ke),A.removeEventListener("error",pt)},ke=()=>{j(en(A.result)),Ne()},pt=()=>{re(A.error),Ne()};A.addEventListener("success",ke),A.addEventListener("error",pt)});return x.then(j=>{j instanceof IDBCursor&&ft.set(j,A)}).catch(()=>{}),ur.set(x,A),x}(A);if(An.has(A))return An.get(A);const x=kt(A);return x!==A&&(An.set(A,x),ur.set(x,A)),x}const Hn=A=>ur.get(A);function Br(A,x,{blocked:j,upgrade:re,blocking:Ne,terminated:ke}={}){const pt=indexedDB.open(A,x),Sn=en(pt);return re&&pt.addEventListener("upgradeneeded",hn=>{re(en(pt.result),hn.oldVersion,hn.newVersion,en(pt.transaction))}),j&&pt.addEventListener("blocked",()=>j()),Sn.then(hn=>{ke&&hn.addEventListener("close",()=>ke()),Ne&&hn.addEventListener("versionchange",()=>Ne())}).catch(()=>{}),Sn}function Pn(A,{blocked:x}={}){const j=indexedDB.deleteDatabase(A);return x&&j.addEventListener("blocked",()=>x()),en(j).then(()=>{})}const Un=["get","getKey","getAll","getAllKeys","count"],Yt=["put","add","delete","clear"],bn=new Map;function Ft(A,x){if(!(A instanceof IDBDatabase)||x in A||"string"!=typeof x)return;if(bn.get(x))return bn.get(x);const j=x.replace(/FromIndex$/,""),re=x!==j,Ne=Yt.includes(j);if(!(j in(re?IDBIndex:IDBObjectStore).prototype)||!Ne&&!Un.includes(j))return;const ke=function(){var pt=(0,k.Z)(function*(Sn,...hn){const xn=this.transaction(Sn,Ne?"readwrite":"readonly");let cn=xn.store;return re&&(cn=cn.index(hn.shift())),(yield Promise.all([cn[j](...hn),Ne&&xn.done]))[0]});return function(hn){return pt.apply(this,arguments)}}();return bn.set(x,ke),ke}!function nn(A){cr=A(cr)}(A=>({...A,get:(x,j,re)=>Ft(x,j)||A.get(x,j,re),has:(x,j)=>!!Ft(x,j)||A.has(x,j)}));const Fn="/firebase-messaging-sw.js",Fr="/firebase-cloud-messaging-push-scope",lr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Yr="https://fcmregistrations.googleapis.com/v1",H="google.c.a.c_id",B="google.c.a.c_l",N="google.c.a.ts";var Z=(()=>((Z=Z||{}).PUSH_RECEIVED="push-received",Z.NOTIFICATION_CLICKED="notification-clicked",Z))();function ie(A){const x=new Uint8Array(A);return btoa(String.fromCharCode(...x)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function G(A){const j=(A+"=".repeat((4-A.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(j),Ne=new Uint8Array(re.length);for(let ke=0;ke<re.length;++ke)Ne[ke]=re.charCodeAt(ke);return Ne}const ae="fcm_token_details_db",de=5,Ge="fcm_token_object_Store";function it(){return it=(0,k.Z)(function*(A){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ke=>ke.name).includes(ae))return null;let x=null;return(yield Br(ae,de,{upgrade:(re=(0,k.Z)(function*(Ne,ke,pt,Sn){var hn;if(ke<2||!Ne.objectStoreNames.contains(Ge))return;const xn=Sn.objectStore(Ge),cn=yield xn.index("fcmSenderId").get(A);if(yield xn.clear(),cn)if(2===ke){const qt=cn;if(!qt.auth||!qt.p256dh||!qt.endpoint)return;x={token:qt.fcmToken,createTime:null!==(hn=qt.createTime)&&void 0!==hn?hn:Date.now(),subscriptionOptions:{auth:qt.auth,p256dh:qt.p256dh,endpoint:qt.endpoint,swScope:qt.swScope,vapidKey:"string"==typeof qt.vapidKey?qt.vapidKey:ie(qt.vapidKey)}}}else if(3===ke){const qt=cn;x={token:qt.fcmToken,createTime:qt.createTime,subscriptionOptions:{auth:ie(qt.auth),p256dh:ie(qt.p256dh),endpoint:qt.endpoint,swScope:qt.swScope,vapidKey:ie(qt.vapidKey)}}}else if(4===ke){const qt=cn;x={token:qt.fcmToken,createTime:qt.createTime,subscriptionOptions:{auth:ie(qt.auth),p256dh:ie(qt.p256dh),endpoint:qt.endpoint,swScope:qt.swScope,vapidKey:ie(qt.vapidKey)}}}}),function(ke,pt,Sn,hn){return re.apply(this,arguments)})})).close(),yield Pn(ae),yield Pn("fcm_vapid_details_db"),yield Pn("undefined"),function tt(A){if(!A||!A.subscriptionOptions)return!1;const{subscriptionOptions:x}=A;return"number"==typeof A.createTime&&A.createTime>0&&"string"==typeof A.token&&A.token.length>0&&"string"==typeof x.auth&&x.auth.length>0&&"string"==typeof x.p256dh&&x.p256dh.length>0&&"string"==typeof x.endpoint&&x.endpoint.length>0&&"string"==typeof x.swScope&&x.swScope.length>0&&"string"==typeof x.vapidKey&&x.vapidKey.length>0}(x)?x:null;var re}),it.apply(this,arguments)}const Pt="firebase-messaging-database",Lt=1,se="firebase-messaging-store";let ee=null;function Pe(){return ee||(ee=Br(Pt,Lt,{upgrade:(A,x)=>{0===x&&A.createObjectStore(se)}})),ee}function mt(A){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,k.Z)(function*(A){const x=tr(A),re=yield(yield Pe()).transaction(se).objectStore(se).get(x);if(re)return re;{const Ne=yield function Ie(A){return it.apply(this,arguments)}(A.appConfig.senderId);if(Ne)return yield Ht(A,Ne),Ne}}),Dt.apply(this,arguments)}function Ht(A,x){return rn.apply(this,arguments)}function rn(){return(rn=(0,k.Z)(function*(A,x){const j=tr(A),Ne=(yield Pe()).transaction(se,"readwrite");return yield Ne.objectStore(se).put(x,j),yield Ne.done,x})).apply(this,arguments)}function On(){return(On=(0,k.Z)(function*(A){const x=tr(A),re=(yield Pe()).transaction(se,"readwrite");yield re.objectStore(se).delete(x),yield re.done})).apply(this,arguments)}function tr({appConfig:A}){return A.appId}const nr=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function co(A,x){return lo.apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(A,x){const j=yield ma(A),re=ho(x),Ne={method:"POST",headers:j,body:JSON.stringify(re)};let ke;try{ke=yield(yield fetch(zn(A.appConfig),Ne)).json()}catch(pt){throw nr.create("token-subscribe-failed",{errorInfo:pt?.toString()})}if(ke.error)throw nr.create("token-subscribe-failed",{errorInfo:ke.error.message});if(!ke.token)throw nr.create("token-subscribe-no-token");return ke.token})).apply(this,arguments)}function xs(){return(xs=(0,k.Z)(function*(A,x){const j=yield ma(A),re=ho(x.subscriptionOptions),Ne={method:"PATCH",headers:j,body:JSON.stringify(re)};let ke;try{ke=yield(yield fetch(`${zn(A.appConfig)}/${x.token}`,Ne)).json()}catch(pt){throw nr.create("token-update-failed",{errorInfo:pt?.toString()})}if(ke.error)throw nr.create("token-update-failed",{errorInfo:ke.error.message});if(!ke.token)throw nr.create("token-update-no-token");return ke.token})).apply(this,arguments)}function ga(A,x){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,k.Z)(function*(A,x){const re={method:"DELETE",headers:yield ma(A)};try{const ke=yield(yield fetch(`${zn(A.appConfig)}/${x}`,re)).json();if(ke.error)throw nr.create("token-unsubscribe-failed",{errorInfo:ke.error.message})}catch(Ne){throw nr.create("token-unsubscribe-failed",{errorInfo:Ne?.toString()})}})).apply(this,arguments)}function zn({projectId:A}){return`${Yr}/projects/${A}/registrations`}function ma(A){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,k.Z)(function*({appConfig:A,installations:x}){const j=yield x.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A.apiKey,"x-goog-firebase-installations-auth":`FIS ${j}`})})).apply(this,arguments)}function ho({p256dh:A,auth:x,endpoint:j,vapidKey:re}){const Ne={web:{endpoint:j,auth:x,p256dh:A}};return re!==lr&&(Ne.web.applicationPubKey=re),Ne}const fo=6048e5;function ss(){return ss=(0,k.Z)(function*(A){const x=yield function Rt(A,x){return zt.apply(this,arguments)}(A.swRegistration,A.vapidKey),j={vapidKey:A.vapidKey,swScope:A.swRegistration.scope,endpoint:x.endpoint,auth:ie(x.getKey("auth")),p256dh:ie(x.getKey("p256dh"))},re=yield mt(A.firebaseDependencies);if(re){if(function At(A,x){return x.vapidKey===A.vapidKey&&x.endpoint===A.endpoint&&x.auth===A.auth&&x.p256dh===A.p256dh}(re.subscriptionOptions,j))return Date.now()>=re.createTime+fo?function U(A,x){return X.apply(this,arguments)}(A,{token:re.token,createTime:Date.now(),subscriptionOptions:j}):re.token;try{yield ga(A.firebaseDependencies,re.token)}catch(Ne){console.warn(Ne)}return oe(A.firebaseDependencies,j)}return oe(A.firebaseDependencies,j)}),ss.apply(this,arguments)}function go(){return go=(0,k.Z)(function*(A){const x=yield mt(A.firebaseDependencies);x&&(yield ga(A.firebaseDependencies,x.token),yield function _r(A){return On.apply(this,arguments)}(A.firebaseDependencies));const j=yield A.swRegistration.pushManager.getSubscription();return!j||j.unsubscribe()}),go.apply(this,arguments)}function X(){return X=(0,k.Z)(function*(A,x){try{const j=yield function vi(A,x){return xs.apply(this,arguments)}(A.firebaseDependencies,x),re=Object.assign(Object.assign({},x),{token:j,createTime:Date.now()});return yield Ht(A.firebaseDependencies,re),j}catch(j){throw yield function Go(A){return go.apply(this,arguments)}(A),j}}),X.apply(this,arguments)}function oe(A,x){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,k.Z)(function*(A,x){const re={token:yield co(A,x),createTime:Date.now(),subscriptionOptions:x};return yield Ht(A,re),re.token})).apply(this,arguments)}function zt(){return(zt=(0,k.Z)(function*(A,x){return(yield A.pushManager.getSubscription())||A.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:G(x)})})).apply(this,arguments)}function Bn(A){const x={from:A.from,collapseKey:A.collapse_key,messageId:A.fcmMessageId};return function rr(A,x){if(!x.notification)return;A.notification={};const j=x.notification.title;j&&(A.notification.title=j);const re=x.notification.body;re&&(A.notification.body=re);const Ne=x.notification.image;Ne&&(A.notification.image=Ne);const ke=x.notification.icon;ke&&(A.notification.icon=ke)}(x,A),function ir(A,x){x.data&&(A.data=x.data)}(x,A),function os(A,x){var j,re,Ne,ke,pt;if(!(x.fcmOptions||null!==(j=x.notification)&&void 0!==j&&j.click_action))return;A.fcmOptions={};const Sn=null!==(Ne=null===(re=x.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==Ne?Ne:null===(ke=x.notification)||void 0===ke?void 0:ke.click_action;Sn&&(A.fcmOptions.link=Sn);const hn=null===(pt=x.fcmOptions)||void 0===pt?void 0:pt.analytics_label;hn&&(A.fcmOptions.analyticsLabel=hn)}(x,A),x}function sr(A,x){const j=[];for(let re=0;re<A.length;re++)j.push(A.charAt(re)),re<x.length&&j.push(x.charAt(re));return j.join("")}function Vt(A){return nr.create("missing-app-config-values",{valueName:A})}sr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class jn{constructor(x,j,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ne=function ut(A){if(!A||!A.options)throw Vt("App Configuration Object");if(!A.name)throw Vt("App Name");const x=["projectId","apiKey","appId","messagingSenderId"],{options:j}=A;for(const re of x)if(!j[re])throw Vt(re);return{appName:A.name,projectId:j.projectId,apiKey:j.apiKey,appId:j.appId,senderId:j.messagingSenderId}}(x);this.firebaseDependencies={app:x,appConfig:Ne,installations:j,analyticsProvider:re}}_delete(){return Promise.resolve()}}function as(){return(as=(0,k.Z)(function*(A){try{A.swRegistration=yield navigator.serviceWorker.register(Fn,{scope:Fr}),A.swRegistration.update().catch(()=>{})}catch(x){throw nr.create("failed-service-worker-registration",{browserErrorMessage:x?.message})}})).apply(this,arguments)}function Rs(){return(Rs=(0,k.Z)(function*(A,x){if(!x&&!A.swRegistration&&(yield function Qr(A){return as.apply(this,arguments)}(A)),x||!A.swRegistration){if(!(x instanceof ServiceWorkerRegistration))throw nr.create("invalid-sw-registration");A.swRegistration=x}})).apply(this,arguments)}function Ns(){return(Ns=(0,k.Z)(function*(A,x){x?A.vapidKey=x:A.vapidKey||(A.vapidKey=lr)})).apply(this,arguments)}function Nt(){return Nt=(0,k.Z)(function*(A,x){if(!navigator)throw nr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw nr.create("permission-blocked");return yield function Gn(A,x){return Ns.apply(this,arguments)}(A,x?.vapidKey),yield function Ar(A,x){return Rs.apply(this,arguments)}(A,x?.serviceWorkerRegistration),function po(A){return ss.apply(this,arguments)}(A)}),Nt.apply(this,arguments)}function mo(){return(mo=(0,k.Z)(function*(A,x,j){const re=function zs(A){switch(A){case Z.NOTIFICATION_CLICKED:return"notification_open";case Z.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(x);(yield A.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:j[H],message_name:j[B],message_time:j[N],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Gs(){return Gs=(0,k.Z)(function*(A,x){const j=x.data;if(!j.isFirebaseMessaging)return;A.onMessageHandler&&j.messageType===Z.PUSH_RECEIVED&&("function"==typeof A.onMessageHandler?A.onMessageHandler(Bn(j)):A.onMessageHandler.next(Bn(j)));const re=j.data;(function nd(A){return"object"==typeof A&&!!A&&H in A})(re)&&"1"===re["google.c.a.e"]&&(yield function oi(A,x,j){return mo.apply(this,arguments)}(A,j.messageType,re))}),Gs.apply(this,arguments)}const us="@firebase/messaging",cs=A=>{const x=new jn(A.getProvider("app").getImmediate(),A.getProvider("installations-internal").getImmediate(),A.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",j=>function Tn(A,x){return Gs.apply(this,arguments)}(x,j)),x},rd=A=>{const x=A.getProvider("messaging").getImmediate();return{getToken:re=>function qi(A,x){return Nt.apply(this,arguments)}(x,re)}};function Pi(){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,k.Z)(function*(){try{yield(0,ge.eu)()}catch{return!1}return typeof window<"u"&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ls(){(0,ne._registerComponent)(new ce.wA("messaging",cs,"PUBLIC")),(0,ne._registerComponent)(new ce.wA("messaging-internal",rd,"PRIVATE")),(0,ne.registerVersion)(us,"0.12.4"),(0,ne.registerVersion)(us,"0.12.4","esm2017")}();var Zi=F(3008),dr=F(4408),ui=F(7565);const va=new class ci extends ui.v{}(class sd extends dr.o{constructor(x,j){super(x,j),this.scheduler=x,this.work=j}schedule(x,j=0){return j>0?super.schedule(x,j):(this.delay=j,this.state=x,this.scheduler.flush(this),this)}execute(x,j){return j>0||this.closed?super.execute(x,j):this._execute(x,j)}requestAsyncId(x,j,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(x,j,re):(x.flush(this),0)}});var vo=F(4986),Jr=F(9751),cu=F(8505),Wo=F(9468),lu=F(5363);const Gr=new h.GfV("7.6.1"),_a="__angularfire_symbol__analyticsIsSupportedValue",qo="__angularfire_symbol__analyticsIsSupported",Ea="__angularfire_symbol__remoteConfigIsSupportedValue",Ko="__angularfire_symbol__remoteConfigIsSupported",ac="__angularfire_symbol__messagingIsSupportedValue",du="__angularfire_symbol__messagingIsSupported";globalThis[qo]||(globalThis[qo]=(0,Zi.Gb)().then(A=>globalThis[_a]=A).catch(()=>globalThis[_a]=!1)),globalThis[du]||(globalThis[du]=Pi().then(A=>globalThis[ac]=A).catch(()=>globalThis[ac]=!1)),globalThis[Ko]||(globalThis[Ko]=si().then(A=>globalThis[Ea]=A).catch(()=>globalThis[Ea]=!1));const ud={async:()=>globalThis[qo],sync:()=>{const A=globalThis[_a];if(void 0===A)throw new Error((A=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${A} in the constructor, first ensure that ${A} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${A})\`.`)("Analytics"));return A}};function hu(A,x,j){if(x){if(1===x.length)return x[0];const ke=x.filter(pt=>pt.app===j);if(1===ke.length)return ke[0]}return j.container.getProvider(A).getImmediate({optional:!0})}const cc=(A,x)=>{const j=x?[x]:(0,V.C6)(),re=[];return j.forEach(Ne=>{Ne.container.getProvider(A).instances.forEach(pt=>{re.includes(pt)||re.push(pt)})}),re};function _o(){}class Zo{constructor(x,j=va){this.zone=x,this.delegate=j}now(){return this.delegate.now()}schedule(x,j,re){const Ne=this.zone;return this.delegate.schedule(function(pt){Ne.runGuarded(()=>{x.apply(this,[pt])})},j,re)}}class lc{constructor(x){this.zone=x,this.task=null}call(x,j){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_o,{},_o,_o)),j.pipe((0,cu.b)({next:re,complete:re,error:re})).subscribe(x).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dc=(()=>{class A{constructor(j){this.ngZone=j,this.outsideAngular=j.runOutsideAngular(()=>new Zo(Zone.current)),this.insideAngular=j.run(()=>new Zo(Zone.current,vo.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return A.\u0275fac=function(j){return new(j||A)(h.LFG(h.R0b))},A.\u0275prov=h.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();function ds(){const A=globalThis.\u0275AngularFireScheduler;if(!A)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return A}function Xr(A){return ds().ngZone.run(()=>A())}function Ln(A){return ds(),function cd(A){return function(j){return(j=j.lift(new lc(A.ngZone))).pipe((0,Wo.R)(A.outsideAngular),(0,lu.Q)(A.insideAngular))}}(ds())(A)}const pc=(A,x)=>function(){const re=arguments;return x&&setTimeout(()=>{"scheduled"===x.state&&x.invoke()},10),Xr(()=>A.apply(void 0,re))},Lf=(A,x)=>function(){let j;const re=arguments;for(let ke=0;ke<arguments.length;ke++)"function"==typeof re[ke]&&(x&&(j||(j=Xr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_o,{},_o,_o)))),re[ke]=pc(re[ke],j));const Ne=function hc(A){return ds().ngZone.runOutsideAngular(()=>A())}(()=>A.apply(this,re));if(!x){if(Ne instanceof Jr.y){const ke=ds();return Ne.pipe((0,Wo.R)(ke.outsideAngular),(0,lu.Q)(ke.insideAngular))}return Xr(()=>Ne)}return Ne instanceof Jr.y?Ne.pipe(Ln):Ne instanceof Promise?Xr(()=>new Promise((ke,pt)=>Ne.then(Sn=>Xr(()=>ke(Sn)),Sn=>Xr(()=>pt(Sn))))):"function"==typeof Ne&&j?function(){return setTimeout(()=>{j&&"scheduled"===j.state&&j.invoke()},10),Ne.apply(this,arguments)}:Xr(()=>Ne)}},1389:(It,Oe,F)=>{F.d(Oe,{$:()=>ds,A:()=>z,D:()=>we,I:()=>fo,J:()=>U,L:()=>Tn,N:()=>lr,P:()=>mn,Q:()=>ya,R:()=>wu,U:()=>sd,V:()=>ui,W:()=>ci,X:()=>dr,Y:()=>Jr,Z:()=>cu,_:()=>qo,a:()=>vu,a0:()=>Xr,a1:()=>Ff,a2:()=>Lf,a3:()=>ke,a4:()=>Sn,a5:()=>xn,a6:()=>qt,a7:()=>Os,a8:()=>wa,a9:()=>Qi,aA:()=>J,aB:()=>IE,aC:()=>Fn,aD:()=>Yr,aE:()=>dy,aF:()=>Cu,aG:()=>Er,aH:()=>zn,aL:()=>Ca,aO:()=>Yi,aa:()=>Ks,ab:()=>Tb,ac:()=>Wm,ad:()=>qm,ae:()=>gE,af:()=>Km,ai:()=>ks,aj:()=>Zm,ak:()=>or,an:()=>uc,ao:()=>pd,aq:()=>gd,ar:()=>je,as:()=>et,at:()=>de,au:()=>ie,av:()=>Te,aw:()=>Na,ax:()=>gy,ay:()=>Ge,az:()=>De,b:()=>Fi,c:()=>xc,d:()=>Sa,e:()=>Xf,f:()=>Ad,g:()=>Xo,h:()=>xd,i:()=>Ys,j:()=>Nd,k:()=>Ld,l:()=>Zn,m:()=>Pa,o:()=>by,p:()=>Ce,r:()=>Li,s:()=>Sb,u:()=>Lr,x:()=>Hf});var h=F(5861),V=F(2090),k=F(6881),ne=F(655),ge=F(1877),ce=F(4859);const Ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const we=function K(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Qe=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Et=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Le=new ge.Yd("@firebase/auth");function Ze(E,...p){Le.logLevel<=ge.in.ERROR&&Le.error(`Auth (${k.SDK_VERSION}): ${E}`,...p)}function Te(E,...p){throw Me(E,...p)}function De(E,...p){return Me(E,...p)}function Se(E,p,m){const w=Object.assign(Object.assign({},Qe()),{[p]:m});return new V.LL("auth","Firebase",w).create(p,{appName:E.name})}function Ue(E,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Te(E,"argument-error"),Se(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Me(E,...p){if("string"!=typeof E){const m=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=E.name),E._errorFactory.create(m,...w)}return Et.create(E,...p)}function J(E,p,...m){if(!E)throw Me(p,...m)}function st(E){const p="INTERNAL ASSERTION FAILED: "+E;throw Ze(p),new Error(p)}function et(E,p){E||st(p)}function un(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Qn(){return"http:"===Jn()||"https:"===Jn()}function Jn(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class ye{constructor(p,m){this.shortDelay=p,this.longDelay=m,et(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function yi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Qn()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Re(E,p){et(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Ve{static initialize(p,m,w){this.fetchImpl=p,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void st("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void st("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void st("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Be=new ye(3e4,6e4);function Ae(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function at(E,p,m,w){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(E,p,m,w,T={}){return wt(E,T,(0,h.Z)(function*(){let P={},Y={};w&&("GET"===p?Y=w:P={body:JSON.stringify(w)});const le=(0,V.xO)(Object.assign({key:E.config.apiKey},Y)).slice(1),Ye=yield E._getAdditionalHeaders();return Ye["Content-Type"]="application/json",E.languageCode&&(Ye["X-Firebase-Locale"]=E.languageCode),Ve.fetch()(gn(E,E.config.apiHost,m,le),Object.assign({method:p,headers:Ye,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function wt(E,p,m){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,h.Z)(function*(E,p,m){E._canInitEmulator=!1;const w=Object.assign(Object.assign({},Je),p);try{const T=new Xn(E),P=yield Promise.race([m(),T.promise]);T.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw Mn(E,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const le=P.ok?Y.errorMessage:Y.error.message,[Ye,ct]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ye)throw Mn(E,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ye)throw Mn(E,"email-already-in-use",Y);if("USER_DISABLED"===Ye)throw Mn(E,"user-disabled",Y);const bt=w[Ye]||Ye.toLowerCase().replace(/[_\s]+/g,"-");if(ct)throw Se(E,bt,ct);Te(E,bt)}}catch(T){if(T instanceof V.ZR)throw T;Te(E,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function jt(E,p,m,w){return tn.apply(this,arguments)}function tn(){return(tn=(0,h.Z)(function*(E,p,m,w,T={}){const P=yield at(E,p,m,w,T);return"mfaPendingCredential"in P&&Te(E,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function gn(E,p,m,w){const T=`${p}${m}?${w}`;return E.config.emulator?Re(E.config,T):`${E.config.apiScheme}://${T}`}class Xn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(De(this.auth,"network-request-failed")),Be.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mn(E,p,m){const w={appName:E.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const T=De(E,p,w);return T.customData._tokenResponse=m,T}function er(){return(er=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function qn(){return(qn=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Mr(){return(Mr=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function vt(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Nn(){return(Nn=(0,h.Z)(function*(E,p=!1){const m=(0,V.m9)(E),w=yield m.getIdToken(p),T=ft(w);J(T&&T.exp&&T.auth_time&&T.iat,m.auth,"internal-error");const P="object"==typeof T.firebase?T.firebase:void 0,Y=P?.sign_in_provider;return{claims:T,token:w,authTime:vt(Wt(T.auth_time)),issuedAtTime:vt(Wt(T.iat)),expirationTime:vt(Wt(T.exp)),signInProvider:Y||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function Wt(E){return 1e3*Number(E)}function ft(E){const[p,m,w]=E.split(".");if(void 0===p||void 0===m||void 0===w)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,V.tV)(m);return T?JSON.parse(T):(Ze("Failed to decode base64 JWT payload"),null)}catch(T){return Ze("Caught error parsing JWT payload as JSON",T?.toString()),null}}function Kn(E,p){return An.apply(this,arguments)}function An(){return(An=(0,h.Z)(function*(E,p,m=!1){if(m)return p;try{return yield p}catch(w){throw w instanceof V.ZR&&function ur({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(w)&&E.auth.currentUser===E&&(yield E.auth.signOut()),w}})).apply(this,arguments)}class Cn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const T=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Xt{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=vt(this.lastLoginAt),this.creationTime=vt(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function cr(E){return nn.apply(this,arguments)}function nn(){return nn=(0,h.Z)(function*(E){var p;const m=E.auth,w=yield E.getIdToken(),T=yield Kn(E,function si(E,p){return Mr.apply(this,arguments)}(m,{idToken:w}));J(T?.users.length,m,"internal-error");const P=T.users[0];E._notifyReloadListener(P);const Y=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?function Hn(E){return E.map(p=>{var{providerId:m}=p,w=(0,ne._T)(p,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(P.providerUserInfo):[],le=function en(E,p){return[...E.filter(w=>!p.some(T=>T.providerId===w.providerId)),...p]}(E.providerData,Y),bt=!!E.isAnonymous&&!(E.email&&P.passwordHash||le?.length),ln={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:le,metadata:new Xt(P.createdAt,P.lastLoginAt),isAnonymous:bt};Object.assign(E,ln)}),nn.apply(this,arguments)}function kt(){return(kt=(0,h.Z)(function*(E){const p=(0,V.m9)(E);yield cr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(E,p){const m=yield wt(E,{},(0,h.Z)(function*(){const w=(0,V.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:T,apiKey:P}=E.config,Y=gn(E,T,"/v1/token",`key=${P}`),le=yield E._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",Ve.fetch()(Y,{method:"POST",headers:le,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Un{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){J(p.idToken,"internal-error"),J(typeof p.idToken<"u","internal-error"),J(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function rt(E){const p=ft(E);return J(p,"internal-error"),J(typeof p.exp<"u","internal-error"),J(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var w=this;return(0,h.Z)(function*(){return J(!w.accessToken||w.refreshToken,p,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var w=this;return(0,h.Z)(function*(){const{accessToken:T,refreshToken:P,expiresIn:Y}=yield function Br(E,p){return Pn.apply(this,arguments)}(p,m);w.updateTokensAndExpiration(T,P,Number(Y))})()}updateTokensAndExpiration(p,m,w){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,m){const{refreshToken:w,accessToken:T,expirationTime:P}=m,Y=new Un;return w&&(J("string"==typeof w,"internal-error",{appName:p}),Y.refreshToken=w),T&&(J("string"==typeof T,"internal-error",{appName:p}),Y.accessToken=T),P&&(J("number"==typeof P,"internal-error",{appName:p}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Un,this.toJSON())}_performRefresh(){return st("not implemented")}}function Yt(E,p){J("string"==typeof E||typeof E>"u","internal-error",{appName:p})}class bn{constructor(p){var{uid:m,auth:w,stsTokenManager:T}=p,P=(0,ne._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Xt(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const w=yield Kn(m,m.stsTokenManager.getToken(m.auth,p));return J(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(p){return function ar(E){return Nn.apply(this,arguments)}(this,p)}reload(){return function vr(E){return kt.apply(this,arguments)}(this)}_assign(p){this!==p&&(J(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new bn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var w=this;return(0,h.Z)(function*(){let T=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),T=!0),m&&(yield cr(w)),yield w.auth._persistUserIfCurrent(w),T&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield Kn(p,function yr(E,p){return er.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var w,T,P,Y,le,Ye,ct,bt;const ln=null!==(w=m.displayName)&&void 0!==w?w:void 0,$r=null!==(T=m.email)&&void 0!==T?T:void 0,Xi=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,ys=null!==(Y=m.photoURL)&&void 0!==Y?Y:void 0,Nu=null!==(le=m.tenantId)&&void 0!==le?le:void 0,Lc=null!==(Ye=m._redirectEventId)&&void 0!==Ye?Ye:void 0,vs=null!==(ct=m.createdAt)&&void 0!==ct?ct:void 0,Wr=null!==(bt=m.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:Di,emailVerified:Bd,isAnonymous:To,providerData:So,stsTokenManager:_s}=m;J(Di&&_s,p,"internal-error");const Ty=Un.fromJSON(this.name,_s);J("string"==typeof Di,p,"internal-error"),Yt(ln,p.name),Yt($r,p.name),J("boolean"==typeof Bd,p,"internal-error"),J("boolean"==typeof To,p,"internal-error"),Yt(Xi,p.name),Yt(ys,p.name),Yt(Nu,p.name),Yt(Lc,p.name),Yt(vs,p.name),Yt(Wr,p.name);const Pu=new bn({uid:Di,auth:p,email:$r,emailVerified:Bd,displayName:ln,isAnonymous:To,photoURL:ys,phoneNumber:Xi,tenantId:Nu,stsTokenManager:Ty,createdAt:vs,lastLoginAt:Wr});return So&&Array.isArray(So)&&(Pu.providerData=So.map(Qt=>Object.assign({},Qt))),Lc&&(Pu._redirectEventId=Lc),Pu}static _fromIdTokenResponse(p,m,w=!1){return(0,h.Z)(function*(){const T=new Un;T.updateFromServerResponse(m);const P=new bn({uid:m.localId,auth:p,stsTokenManager:T,isAnonymous:w});return yield cr(P),P})()}}const Ft=new Map;function Fn(E){et(E instanceof Function,"Expected a class definition");let p=Ft.get(E);return p?(et(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,Ft.set(E,p),p)}const lr=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var T=this;return(0,h.Z)(function*(){T.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=w.storage[m];return void 0===T?null:T})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return E.type="NONE",E})();function Yr(E,p,m){return`firebase:${E}:${p}:${m}`}class H{constructor(p,m,w){this.persistence=p,this.auth=m,this.userKey=w;const{config:T,name:P}=this.auth;this.fullUserKey=Yr(this.userKey,T.apiKey,P),this.fullPersistenceKey=Yr("persistence",T.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?bn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new H(Fn(lr),p,w);const T=(yield Promise.all(m.map(function(){var ct=(0,h.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return ct.apply(this,arguments)}}()))).filter(ct=>ct);let P=T[0]||Fn(lr);const Y=Yr(w,p.config.apiKey,p.name);let le=null;for(const ct of m)try{const bt=yield ct._get(Y);if(bt){const ln=bn._fromJSON(p,bt);ct!==P&&(le=ln),P=ct;break}}catch{}const Ye=T.filter(ct=>ct._shouldAllowMigration);return P._shouldAllowMigration&&Ye.length?(P=Ye[0],le&&(yield P._set(Y,le.toJSON())),yield Promise.all(m.map(function(){var ct=(0,h.Z)(function*(bt){if(bt!==P)try{yield bt._remove(Y)}catch{}});return function(bt){return ct.apply(this,arguments)}}())),new H(P,p,w)):new H(P,p,w)})()}}function B(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Z(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(N(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(G(p))return"Blackberry";if(ae(p))return"Webos";if(O(p))return"Safari";if((p.includes("chrome/")||M(p))&&!p.includes("edge/"))return"Chrome";if(ie(p))return"Android";{const w=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function N(E=(0,V.z$)()){return/firefox\//i.test(E)}function O(E=(0,V.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function M(E=(0,V.z$)()){return/crios\//i.test(E)}function Z(E=(0,V.z$)()){return/iemobile/i.test(E)}function ie(E=(0,V.z$)()){return/android/i.test(E)}function G(E=(0,V.z$)()){return/blackberry/i.test(E)}function ae(E=(0,V.z$)()){return/webos/i.test(E)}function de(E=(0,V.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function Ge(E=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function tt(E=(0,V.z$)()){return de(E)||ie(E)||ae(E)||G(E)||/windows phone/i.test(E)||Z(E)}function Lt(E,p=[]){let m;switch(E){case"Browser":m=B((0,V.z$)());break;case"Worker":m=`${B((0,V.z$)())}-${E}`;break;default:m=E}const w=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${k.SDK_VERSION}/${w}`}function ee(){return(ee=(0,h.Z)(function*(E){return(yield at(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pe(E,p){return mt.apply(this,arguments)}function mt(){return(mt=(0,h.Z)(function*(E,p){return at(E,"GET","/v2/recaptchaConfig",Ae(E,p))})).apply(this,arguments)}function Dt(E){return void 0!==E&&void 0!==E.getResponse}function Ht(E){return void 0!==E&&void 0!==E.enterprise}class rn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function On(E){return new Promise((p,m)=>{const w=document.createElement("script");w.setAttribute("src",E),w.onload=p,w.onerror=T=>{const P=De("internal-error");P.customData=T,m(P)},w.type="text/javascript",w.charset="UTF-8",function _r(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(w)})}function tr(E){return`__${E}${Math.floor(1e6*Math.random())}`}class lo{constructor(p){this.type="recaptcha-enterprise",this.auth=zn(p)}verify(p="verify",m=!1){var w=this;return(0,h.Z)(function*(){function P(){return P=(0,h.Z)(function*(le){if(!m){if(null==le.tenantId&&null!=le._agentRecaptchaConfig)return le._agentRecaptchaConfig.siteKey;if(null!=le.tenantId&&void 0!==le._tenantRecaptchaConfigs[le.tenantId])return le._tenantRecaptchaConfigs[le.tenantId].siteKey}return new Promise(function(){var Ye=(0,h.Z)(function*(ct,bt){Pe(le,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ln=>{if(void 0!==ln.recaptchaKey){const $r=new rn(ln);return null==le.tenantId?le._agentRecaptchaConfig=$r:le._tenantRecaptchaConfigs[le.tenantId]=$r,ct($r.siteKey)}bt(new Error("recaptcha Enterprise site key undefined"))}).catch(ln=>{bt(ln)})});return function(ct,bt){return Ye.apply(this,arguments)}}())}),P.apply(this,arguments)}function Y(le,Ye,ct){const bt=window.grecaptcha;Ht(bt)?bt.enterprise.ready(()=>{bt.enterprise.execute(le,{action:p}).then(ln=>{Ye(ln)}).catch(()=>{Ye("NO_RECAPTCHA")})}):ct(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((le,Ye)=>{(function T(le){return P.apply(this,arguments)})(w.auth).then(ct=>{if(!m&&Ht(window.grecaptcha))Y(ct,le,Ye);else{if(typeof window>"u")return void Ye(new Error("RecaptchaVerifier is only supported in browser"));On("https://www.google.com/recaptcha/enterprise.js?render="+ct).then(()=>{Y(ct,le,Ye)}).catch(bt=>{Ye(bt)})}}).catch(ct=>{Ye(ct)})})})()}}function vi(E,p,m){return xs.apply(this,arguments)}function xs(){return(xs=(0,h.Z)(function*(E,p,m,w=!1){const T=new lo(E);let P;try{P=yield T.verify(m)}catch{P=yield T.verify(m,!0)}const Y=Object.assign({},p);return Object.assign(Y,w?{captchaResp:P}:{captchaResponse:P}),Object.assign(Y,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Y,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Y})).apply(this,arguments)}class ga{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const w=P=>new Promise((Y,le)=>{try{Y(p(P))}catch(Ye){le(Ye)}});w.onAbort=m,this.queue.push(w);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const w=[];try{for(const T of m.queue)yield T(p),T.onAbort&&w.push(T.onAbort)}catch(T){w.reverse();for(const P of w)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class Wi{constructor(p,m,w,T){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=w,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ma(this),this.idTokenSubscription=new ma(this),this.beforeStateQueue=new ga(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Et,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,m){var w=this;return m&&(this._popupRedirectResolver=Fn(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var T,P;if(!w._deleted&&(w.persistenceManager=yield H.create(w,p),!w._deleted)){if(null!==(T=w._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var w;const T=yield m.assertedPersistence.getCurrentUser();let P=T,Y=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Ye=P?._redirectEventId,ct=yield m.tryRedirectSignIn(p);(!le||le===Ye)&&ct?.user&&(P=ct.user,Y=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield m.beforeStateQueue.runMiddleware(P)}catch(le){P=T,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(le))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return J(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield cr(p)}catch(w){if("auth/network-request-failed"!==w?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function pe(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const w=p?(0,V.m9)(p):null;return w&&J(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(p,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return p&&J(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(Fn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,h.Z)(function*(){const m=yield Pe(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new rn(m);null==p.tenantId?p._agentRecaptchaConfig=w:p._tenantRecaptchaConfigs[p.tenantId]=w,w.emailPasswordEnabled&&new lo(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new V.LL("auth","Firebase",p())}onAuthStateChanged(p,m,w){return this.registerStateListener(this.authStateSubscription,p,m,w)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,w){return this.registerStateListener(this.idTokenSubscription,p,m,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var w=this;return(0,h.Z)(function*(){const T=yield w.getOrInitRedirectPersistenceManager(m);return null===p?T.removeCurrentUser():T.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=p&&Fn(p)||m._popupRedirectResolver;J(w,m,"argument-error"),m.redirectPersistenceManager=yield H.create(m,[Fn(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var w,T;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===p?m._currentUser:(null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,w,T){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return J(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,w,T):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Lt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const T=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();T&&(w["X-Firebase-Client"]=T);const P=yield p._getAppCheckToken();return P&&(w["X-Firebase-AppCheck"]=P),w})()}_getAppCheckToken(){var p=this;return(0,h.Z)(function*(){var m;const w=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return w?.error&&function ze(E,...p){Le.logLevel<=ge.in.WARN&&Le.warn(`Auth (${k.SDK_VERSION}): ${E}`,...p)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function zn(E){return(0,V.m9)(E)}class ma{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,V.ne)(m=>this.observer=m)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function fo(E,p,m){const w=zn(E);J(w._canInitEmulator,w,"emulator-config-failed"),J(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const T=!!m?.disableWarnings,P=po(p),{host:Y,port:le}=function ss(E){const p=po(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(w);if(T){const P=T[1];return{host:P,port:Go(w.substr(P.length+1))}}{const[P,Y]=w.split(":");return{host:P,port:Go(Y)}}}(p);w.config.emulator={url:`${P}//${Y}${null===le?"":`:${le}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Y,port:le,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function go(){function E(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function po(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function Go(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class U{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return st("not implemented")}_getIdTokenResponse(p){return st("not implemented")}_linkToIdToken(p,m){return st("not implemented")}_getReauthenticationResolver(p){return st("not implemented")}}function X(E,p){return oe.apply(this,arguments)}function oe(){return(oe=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:resetPassword",Ae(E,p))})).apply(this,arguments)}function Xe(E,p){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function At(){return(At=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:update",Ae(E,p))})).apply(this,arguments)}function Bn(E,p){return rr.apply(this,arguments)}function rr(){return(rr=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signInWithPassword",Ae(E,p))})).apply(this,arguments)}function ir(E,p){return os.apply(this,arguments)}function os(){return(os=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:sendOobCode",Ae(E,p))})).apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(E,p){return ir(E,p)})).apply(this,arguments)}function ut(E,p){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(E,p){return ir(E,p)})).apply(this,arguments)}function jn(E,p){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(E,p){return ir(E,p)})).apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(E,p){return ir(E,p)})).apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signInWithEmailLink",Ae(E,p))})).apply(this,arguments)}function qi(){return(qi=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signInWithEmailLink",Ae(E,p))})).apply(this,arguments)}class Nt extends U{constructor(p,m,w,T=null){super("password",w),this._email=p,this._password=m,this._tenantId=T}static _fromEmailAndPassword(p,m){return new Nt(p,m,"password")}static _fromEmailAndCode(p,m,w=null){return new Nt(p,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){var w;switch(m.signInMethod){case"password":const T={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const P=yield vi(p,T,"signInWithPassword");return Bn(p,P)}return Bn(p,T).catch(function(){var P=(0,h.Z)(function*(Y){if("auth/missing-recaptcha-token"===Y.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const le=yield vi(p,T,"signInWithPassword");return Bn(p,le)}return Promise.reject(Y)});return function(Y){return P.apply(this,arguments)}}());case"emailLink":return function Rs(E,p){return Gn.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Te(p,"internal-error")}})()}_linkToIdToken(p,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return Xe(p,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ns(E,p){return qi.apply(this,arguments)}(p,{idToken:m,email:w._email,oobCode:w._password});default:Te(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function oi(E,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signInWithIdp",Ae(E,p))})).apply(this,arguments)}class Tn extends U{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Tn(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Te("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:T}=m,P=(0,ne._T)(m,["providerId","signInMethod"]);if(!w||!T)return null;const Y=new Tn(w,T);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(p){return oi(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,oi(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,oi(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,V.xO)(m)}return p}}function us(){return(us=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:sendVerificationCode",Ae(E,p))})).apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signInWithPhoneNumber",Ae(E,p))})).apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(E,p){const m=yield jt(E,"POST","/v1/accounts:signInWithPhoneNumber",Ae(E,p));if(m.temporaryProof)throw Mn(E,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Pi={USER_NOT_FOUND:"user-not-found"};function yo(){return(yo=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signInWithPhoneNumber",Ae(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Pi)})).apply(this,arguments)}class Gt extends U{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Gt({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Gt({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function ai(E,p){return cs.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function rd(E,p){return ls.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ws(E,p){return yo.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:w,verificationCode:T}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:w,code:T}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:P}=p;return w||m||T||P?new Gt({verificationId:m,verificationCode:w,phoneNumber:T,temporaryProof:P}):null}}class Ps{constructor(p){var m,w,T,P,Y,le;const Ye=(0,V.zd)((0,V.pd)(p)),ct=null!==(m=Ye.apiKey)&&void 0!==m?m:null,bt=null!==(w=Ye.oobCode)&&void 0!==w?w:null,ln=function kf(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ye.mode)&&void 0!==T?T:null);J(ct&&bt&&ln,"argument-error"),this.apiKey=ct,this.operation=ln,this.code=bt,this.continueUrl=null!==(P=Ye.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Ye.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(le=Ye.tenantId)&&void 0!==le?le:null}static parseLink(p){const m=function id(E){const p=(0,V.zd)((0,V.pd)(E)).link,m=p?(0,V.zd)((0,V.pd)(p)).deep_link_id:null,w=(0,V.zd)((0,V.pd)(E)).deep_link_id;return(w?(0,V.zd)((0,V.pd)(w)).link:null)||w||m||p||E}(p);try{return new Ps(m)}catch{return null}}}let ya=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(m,w){return Nt._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const T=Ps.parseLink(w);return J(T,"argument-error"),Nt._fromEmailAndCode(m,T.code,T.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class _i{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Zi extends _i{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class dr extends Zi{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return J("providerId"in m&&"signInMethod"in m,"argument-error"),Tn._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return J(p.idToken||p.accessToken,"argument-error"),Tn._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return dr.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return dr.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:T,pendingToken:P,nonce:Y,providerId:le}=p;if(!w&&!T&&!m&&!P||!le)return null;try{return new dr(le)._credential({idToken:m,accessToken:w,nonce:Y,pendingToken:P})}catch{return null}}}let sd=(()=>{class E extends Zi{constructor(){super("facebook.com")}static credential(m){return Tn._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),ui=(()=>{class E extends Zi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Tn._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:T}=m;if(!w&&!T)return null;try{return E.credential(w,T)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),ci=(()=>{class E extends Zi{constructor(){super("github.com")}static credential(m){return Tn._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Yi extends U{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return oi(p,this.buildRequest())}_linkToIdToken(p,m){const w=this.buildRequest();return w.idToken=m,oi(p,w)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,oi(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:T,pendingToken:P}=m;return w&&T&&P&&w===T?new Yi(w,P):null}static _create(p,m){return new Yi(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Jr extends _i{constructor(p){J(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Jr.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Jr.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Yi.fromJSON(p);return J(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:w}=p;if(!m||!w)return null;try{return Yi._create(w,m)}catch{return null}}}let cu=(()=>{class E extends Zi{constructor(){super("twitter.com")}static credential(m,w){return Tn._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:T}=m;if(!w||!T)return null;try{return E.credential(w,T)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Wo(E,p){return lu.apply(this,arguments)}function lu(){return(lu=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signUp",Ae(E,p))})).apply(this,arguments)}class Gr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,w,T=!1){return(0,h.Z)(function*(){const P=yield bn._fromIdTokenResponse(p,w,T),Y=_a(w);return new Gr({user:P,providerId:Y,_tokenResponse:w,operationType:m})})()}static _forOperation(p,m,w){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const T=_a(w);return new Gr({user:p,providerId:T,_tokenResponse:w,operationType:m})})()}}function _a(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function qo(E){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,h.Z)(function*(E){var p;const m=zn(E);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Gr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield Wo(m,{returnSecureToken:!0}),T=yield Gr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ko extends V.ZR{constructor(p,m,w,T){var P;super(m.code,m.message),this.operationType=w,this.user=T,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,m,w,T){return new Ko(p,m,w,T)}}function ac(E,p,m,w){return("reauthenticate"===p?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ko._fromErrorAndOperation(E,P,p,w):P})}function du(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function uc(E,p){return od.apply(this,arguments)}function od(){return od=(0,h.Z)(function*(E,p){const m=(0,V.m9)(E);yield hu(!0,m,p);const{providerUserInfo:w}=yield function kn(E,p){return qn.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),T=du(w||[]);return m.providerData=m.providerData.filter(P=>T.has(P.providerId)),T.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),od.apply(this,arguments)}function ad(E,p){return ud.apply(this,arguments)}function ud(){return(ud=(0,h.Z)(function*(E,p,m=!1){const w=yield Kn(E,p._linkToIdToken(E.auth,yield E.getIdToken()),m);return Gr._forOperation(E,"link",w)})).apply(this,arguments)}function hu(E,p,m){return cc.apply(this,arguments)}function cc(){return(cc=(0,h.Z)(function*(E,p,m){yield cr(p);const T=!1===E?"provider-already-linked":"no-such-provider";J(du(p.providerData).has(m)===E,p.auth,T)})).apply(this,arguments)}function _o(E,p){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(E,p,m=!1){const{auth:w}=E,T="reauthenticate";try{const P=yield Kn(E,ac(w,T,p,E),m);J(P.idToken,w,"internal-error");const Y=ft(P.idToken);J(Y,w,"internal-error");const{sub:le}=Y;return J(E.uid===le,w,"user-mismatch"),Gr._forOperation(E,T,P)}catch(P){throw"auth/user-not-found"===P?.code&&Te(w,"user-mismatch"),P}})).apply(this,arguments)}function lc(E,p){return dc.apply(this,arguments)}function dc(){return(dc=(0,h.Z)(function*(E,p,m=!1){const w="signIn",T=yield ac(E,w,p),P=yield Gr._fromIdTokenResponse(E,w,T);return m||(yield E._updateCurrentUser(P.user)),P})).apply(this,arguments)}function ds(E,p){return hc.apply(this,arguments)}function hc(){return(hc=(0,h.Z)(function*(E,p){return lc(zn(E),p)})).apply(this,arguments)}function Xr(E,p){return fc.apply(this,arguments)}function fc(){return(fc=(0,h.Z)(function*(E,p){const m=(0,V.m9)(E);return yield hu(!1,m,p.providerId),ad(m,p)})).apply(this,arguments)}function Ff(E,p){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(E,p){return _o((0,V.m9)(E),p)})).apply(this,arguments)}function pc(){return(pc=(0,h.Z)(function*(E,p){return jt(E,"POST","/v1/accounts:signInWithCustomToken",Ae(E,p))})).apply(this,arguments)}function Lf(E,p){return A.apply(this,arguments)}function A(){return A=(0,h.Z)(function*(E,p){const m=zn(E),w=yield function cd(E,p){return pc.apply(this,arguments)}(m,{token:p,returnSecureToken:!0}),T=yield Gr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(T.user),T}),A.apply(this,arguments)}class x{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?j._fromServerResponse(p,m):"totpInfo"in m?re._fromServerResponse(p,m):Te(p,"internal-error")}}class j extends x{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new j(m)}}class re extends x{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new re(m)}}function Ne(E,p,m){var w;J((null===(w=m.url)||void 0===w?void 0:w.length)>0,E,"invalid-continue-uri"),J(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(J(m.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(J(m.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function ke(E,p,m){return pt.apply(this,arguments)}function pt(){return pt=(0,h.Z)(function*(E,p,m){var w;const T=zn(E),P={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const Y=yield vi(T,P,"getOobCode",!0);m&&Ne(T,Y,m),yield ut(T,Y)}else m&&Ne(T,P,m),yield ut(T,P).catch(function(){var Y=(0,h.Z)(function*(le){if("auth/missing-recaptcha-token"!==le.code)return Promise.reject(le);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ye=yield vi(T,P,"getOobCode",!0);m&&Ne(T,Ye,m),yield ut(T,Ye)}});return function(le){return Y.apply(this,arguments)}}())}),pt.apply(this,arguments)}function Sn(E,p,m){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(E,p,m){yield X((0,V.m9)(E),{oobCode:p,newPassword:m})})).apply(this,arguments)}function xn(E,p){return cn.apply(this,arguments)}function cn(){return cn=(0,h.Z)(function*(E,p){yield function zt(E,p){return At.apply(this,arguments)}((0,V.m9)(E),{oobCode:p})}),cn.apply(this,arguments)}function qt(E,p){return qs.apply(this,arguments)}function qs(){return(qs=(0,h.Z)(function*(E,p){const m=(0,V.m9)(E),w=yield X(m,{oobCode:p}),T=w.requestType;switch(J(T,m,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(w.mfaInfo,m,"internal-error");default:J(w.email,m,"internal-error")}let P=null;return w.mfaInfo&&(P=x._fromServerResponse(zn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:T}})).apply(this,arguments)}function Os(E,p){return hs.apply(this,arguments)}function hs(){return(hs=(0,h.Z)(function*(E,p){const{data:m}=yield qt((0,V.m9)(E),p);return m.email})).apply(this,arguments)}function wa(E,p,m){return fs.apply(this,arguments)}function fs(){return fs=(0,h.Z)(function*(E,p,m){var w;const T=zn(E),P={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Y;if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ct=yield vi(T,P,"signUpPassword");Y=Wo(T,ct)}else Y=Wo(T,P).catch(function(){var ct=(0,h.Z)(function*(bt){if("auth/missing-recaptcha-token"===bt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ln=yield vi(T,P,"signUpPassword");return Wo(T,ln)}return Promise.reject(bt)});return function(bt){return ct.apply(this,arguments)}}());const le=yield Y.catch(ct=>Promise.reject(ct)),Ye=yield Gr._fromIdTokenResponse(T,"signIn",le);return yield T._updateCurrentUser(Ye.user),Ye}),fs.apply(this,arguments)}function Qi(E,p,m){return ds((0,V.m9)(E),ya.credential(p,m))}function Ks(E,p,m){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,h.Z)(function*(E,p,m){var w;const T=zn(E),P={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Y(le,Ye){J(Ye.handleCodeInApp,T,"argument-error"),Ye&&Ne(T,le,Ye)}if(null!==(w=T._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const le=yield vi(T,P,"getOobCode",!0);Y(le,m),yield jn(T,le)}else Y(P,m),yield jn(T,P).catch(function(){var le=(0,h.Z)(function*(Ye){if("auth/missing-recaptcha-token"!==Ye.code)return Promise.reject(Ye);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ct=yield vi(T,P,"getOobCode",!0);Y(ct,m),yield jn(T,ct)}});return function(Ye){return le.apply(this,arguments)}}())}),Ia.apply(this,arguments)}function Tb(E,p){const m=Ps.parseLink(p);return"EMAIL_SIGNIN"===m?.operation}function Wm(E,p,m){return Vf.apply(this,arguments)}function Vf(){return(Vf=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E),T=ya.credentialWithLink(p,m||un());return J(T._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),ds(w,T)})).apply(this,arguments)}function gc(){return(gc=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:createAuthUri",Ae(E,p))})).apply(this,arguments)}function qm(E,p){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,h.Z)(function*(E,p){const w={identifier:p,continueUri:Qn()?un():"http://localhost"},{signinMethods:T}=yield function pE(E,p){return gc.apply(this,arguments)}((0,V.m9)(E),w);return T||[]}),Uf.apply(this,arguments)}function gE(E,p){return ld.apply(this,arguments)}function ld(){return ld=(0,h.Z)(function*(E,p){const m=(0,V.m9)(E),T={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&Ne(m.auth,T,p);const{email:P}=yield function nd(E,p){return sr.apply(this,arguments)}(m.auth,T);P!==E.email&&(yield E.reload())}),ld.apply(this,arguments)}function Km(E,p,m){return dd.apply(this,arguments)}function dd(){return dd=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};m&&Ne(w.auth,P,m);const{email:Y}=yield function as(E,p){return Ar.apply(this,arguments)}(w.auth,P);Y!==E.email&&(yield E.reload())}),dd.apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(E,p){return at(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ks(E,p){return fd.apply(this,arguments)}function fd(){return fd=(0,h.Z)(function*(E,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const w=(0,V.m9)(E),P={idToken:yield w.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Y=yield Kn(w,function Bf(E,p){return hd.apply(this,arguments)}(w.auth,P));w.displayName=Y.displayName||null,w.photoURL=Y.photoUrl||null;const le=w.providerData.find(({providerId:Ye})=>"password"===Ye);le&&(le.displayName=w.displayName,le.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Y)}),fd.apply(this,arguments)}function Zm(E,p){return Ym((0,V.m9)(E),p,null)}function or(E,p){return Ym((0,V.m9)(E),null,p)}function Ym(E,p,m){return fu.apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(E,p,m){const{auth:w}=E,P={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const Y=yield Kn(E,Xe(w,P));yield E._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class pu{constructor(p,m,w={}){this.isNewUser=p,this.providerId=m,this.profile=w}}class jf extends pu{constructor(p,m,w,T){super(p,m,w),this.username=T}}class gu extends pu{constructor(p,m){super(p,"facebook.com",m)}}class ki extends jf{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class mc extends pu{constructor(p,m){super(p,"google.com",m)}}class yc extends jf{constructor(p,m,w){super(p,"twitter.com",m,w)}}function pd(E){const{user:p,_tokenResponse:m}=E;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Oi(E){var p,m;if(!E)return null;const{providerId:w}=E,T=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},P=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!w&&E?.idToken){const Y=null===(m=null===(p=ft(E.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Y)return new pu(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!w)return null;switch(w){case"facebook.com":return new gu(P,T);case"github.com":return new ki(P,T);case"google.com":return new mc(P,T);case"twitter.com":return new yc(P,T,E.screenName||null);case"custom":case"anonymous":return new pu(P,null);default:return new pu(P,w,T)}}(m)}function Hf(E,p,m,w){return(0,V.m9)(E).onAuthStateChanged(p,m,w)}class Eo{constructor(p,m,w){this.type=p,this.credential=m,this.auth=w}static _fromIdtoken(p,m){return new Eo("enroll",p,m)}static _fromMfaPendingCredential(p){return new Eo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,w;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return Eo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return Eo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class mu{constructor(p,m,w){this.session=p,this.hints=m,this.signInResolver=w}static _fromError(p,m){const w=zn(p),T=m.customData._serverResponse,P=(T.mfaInfo||[]).map(le=>x._fromServerResponse(w,le));J(T.mfaPendingCredential,w,"internal-error");const Y=Eo._fromMfaPendingCredential(T.mfaPendingCredential);return new mu(Y,P,function(){var le=(0,h.Z)(function*(Ye){const ct=yield Ye._process(w,Y);delete T.mfaInfo,delete T.mfaPendingCredential;const bt=Object.assign(Object.assign({},T),{idToken:ct.idToken,refreshToken:ct.refreshToken});switch(m.operationType){case"signIn":const ln=yield Gr._fromIdTokenResponse(w,m.operationType,bt);return yield w._updateCurrentUser(ln.user),ln;case"reauthenticate":return J(m.user,w,"internal-error"),Gr._forOperation(m.user,m.operationType,bt);default:Te(w,"internal-error")}});return function(Ye){return le.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function gd(E,p){var m;const w=(0,V.m9)(E),T=p;return J(p.customData.operationType,w,"argument-error"),J(null===(m=T.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),mu._fromError(w,T)}class yd{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>x._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new yd(p)}getSession(){var p=this;return(0,h.Z)(function*(){return Eo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var w=this;return(0,h.Z)(function*(){const T=p,P=yield w.getSession(),Y=yield Kn(w.user,T._process(w.user.auth,P,m));return yield w.user._updateTokensIfNecessary(Y),w.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const w="string"==typeof p?p:p.uid,T=yield m.user.getIdToken();try{const P=yield Kn(m.user,function ey(E,p){return at(E,"POST","/v2/accounts/mfaEnrollment:withdraw",Ae(E,p))}(m.user.auth,{idToken:T,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Y})=>Y!==w),yield m.user._updateTokensIfNecessary(P),yield m.user.reload()}catch(P){throw P}})()}}const vd=new WeakMap;function je(E){const p=(0,V.m9)(E);return vd.has(p)||vd.set(p,yd._fromUser(p)),vd.get(p)}const sn="__sak";class yu{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(sn,"1"),this.storage.removeItem(sn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fi=(()=>{class E extends yu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Wf(){const E=(0,V.z$)();return O(E)||de(E)}()&&function Pt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=tt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const T=this.storage.getItem(w),P=this.localCache[w];T!==P&&m(w,P,T)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((le,Ye,ct)=>{this.notifyListeners(le,ct)});const T=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(T);if(m.newValue!==le)null!==m.newValue?this.storage.setItem(T,m.newValue):this.storage.removeItem(T);else if(this.localCache[T]===m.newValue&&!w)return}const P=()=>{const le=this.storage.getItem(T);!w&&this.localCache[T]===le||this.notifyListeners(T,le)},Y=this.storage.getItem(T);!function it(){return(0,V.w1)()&&10===document.documentMode}()||Y===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var T=()=>super._set,P=this;return(0,h.Z)(function*(){yield T().call(P,m,w),P.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,T=this;return(0,h.Z)(function*(){const P=yield w().call(T,m);return T.localCache[m]=JSON.stringify(P),P})()}_remove(m){var w=()=>super._remove,T=this;return(0,h.Z)(function*(){yield w().call(T,m),delete T.localCache[m]})()}}return E.type="LOCAL",E})(),vu=(()=>{class E extends yu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return E.type="SESSION",E})();let yE=(()=>{class E{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(P=>P.isListeningto(m));if(w)return w;const T=new E(m);return this.receivers.push(T),T}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const T=m,{eventId:P,eventType:Y,data:le}=T.data,Ye=w.handlersMap[Y];if(!Ye?.size)return;T.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const ct=Array.from(Ye).map(function(){var ln=(0,h.Z)(function*($r){return $r(T.origin,le)});return function($r){return ln.apply(this,arguments)}}()),bt=yield function qf(E){return Promise.all(E.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return p.apply(this,arguments)}}()))}(ct);T.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:bt})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Ca(E="",p=10){let m="";for(let w=0;w<p;w++)m+=Math.floor(10*Math.random());return E+m}class li{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,w=50){var T=this;return(0,h.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,le;return new Promise((Ye,ct)=>{const bt=Ca("",20);P.port1.start();const ln=setTimeout(()=>{ct(new Error("unsupported_event"))},w);le={messageChannel:P,onMessage($r){const Xi=$r;if(Xi.data.eventId===bt)switch(Xi.data.status){case"ack":clearTimeout(ln),Y=setTimeout(()=>{ct(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ye(Xi.data.response);break;default:clearTimeout(ln),clearTimeout(Y),ct(new Error("invalid_response"))}}},T.handlers.add(le),P.port1.addEventListener("message",le.onMessage),T.target.postMessage({eventType:p,eventId:bt,data:m},[P.port2])}).finally(()=>{le&&T.removeMessageHandler(le)})})()}}function $n(){return window}function Zs(){return typeof $n().WorkerGlobalScope<"u"&&"function"==typeof $n().importScripts}function wd(){return(wd=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Id="firebaseLocalStorageDb",ba="firebaseLocalStorage",wc="fbase_key";class Io{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Ic(E,p){return E.transaction([ba],p?"readwrite":"readonly").objectStore(ba)}function _u(){const E=indexedDB.open(Id,1);return new Promise((p,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const w=E.result;try{w.createObjectStore(ba,{keyPath:wc})}catch(T){m(T)}}),E.addEventListener("success",(0,h.Z)(function*(){const w=E.result;w.objectStoreNames.contains(ba)?p(w):(w.close(),yield function ry(){const E=indexedDB.deleteDatabase(Id);return new Io(E).toPromise()}(),p(yield _u()))}))})}function Zf(E,p,m){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,h.Z)(function*(E,p,m){const w=Ic(E,!0).put({[wc]:p,value:m});return new Io(w).toPromise()})).apply(this,arguments)}function Eu(){return(Eu=(0,h.Z)(function*(E,p){const m=Ic(E,!1).get(p),w=yield new Io(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function gs(E,p){const m=Ic(E,!0).delete(p);return new Io(m).toPromise()}const Ys=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield _u()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let T=0;for(;;)try{const P=yield w._openDb();return yield m(P)}catch(P){if(T++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Zs()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=yE._getInstance(function ny(){return Zs()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(T,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(T,P){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(T,P){return["keyChanged"]});return function(T,P){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,T;if(m.activeServiceWorker=yield function wo(){return wd.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new li(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);P&&null!==(w=P[0])&&void 0!==w&&w.fulfilled&&null!==(T=P[0])&&void 0!==T&&T.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Kf(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield _u();return yield Zf(m,sn,"1"),yield gs(m,sn),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var T=this;return(0,h.Z)(function*(){return T._withPendingWrite((0,h.Z)(function*(){return yield T._withRetries(P=>Zf(P,m,w)),T.localCache[m]=w,T.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const T=yield w._withRetries(P=>function Cc(E,p){return Eu.apply(this,arguments)}(P,m));return w.localCache[m]=T,T})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(T=>gs(T,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(Y=>{const le=Ic(Y,!1).getAll();return new Io(le).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const T=[],P=new Set;for(const{fbase_key:Y,value:le}of w)P.add(Y),JSON.stringify(m.localCache[Y])!==JSON.stringify(le)&&(m.notifyListeners(Y,le),T.push(Y));for(const Y of Object.keys(m.localCache))m.localCache[Y]&&!P.has(Y)&&(m.notifyListeners(Y,null),T.push(Y));return T})()}notifyListeners(m,w){this.localCache[m]=w;const T=this.listeners[m];if(T)for(const P of Array.from(T))P(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),bc=1e12;class uy{constructor(p){this.auth=p,this.counter=bc,this._widgets=new Map}render(p,m){const w=this.counter;return this._widgets.set(w,new Cd(p,this.auth.name,m||{})),this.counter++,w}reset(p){var m;const w=p||bc;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(p){var m;return(null===(m=this._widgets.get(p||bc))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(p||bc))||void 0===w||w.execute(),""})()}}class Cd{constructor(p,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof p?document.getElementById(p):p;J(T,"argument-error",{appName:m}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Yo(E){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<E;w++)p.push(m.charAt(Math.floor(62*Math.random())));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yf=tr("rcb"),bd=new ye(3e4,6e4);class Tc{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=$n().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return J(function Sc(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Dt($n().grecaptcha)?Promise.resolve($n().grecaptcha):new Promise((w,T)=>{const P=$n().setTimeout(()=>{T(De(p,"network-request-failed"))},bd.get());$n()[Yf]=()=>{$n().clearTimeout(P),delete $n()[Yf];const le=$n().grecaptcha;if(!le||!Dt(le))return void T(De(p,"internal-error"));const Ye=le.render;le.render=(ct,bt)=>{const ln=Ye(ct,bt);return this.counter++,ln},this.hostLanguage=m,w(le)},On(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:Yf,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),T(De(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=$n().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cy{load(p){return(0,h.Z)(function*(){return new uy(p)})()}clearedOneInstance(){}}const Qf="recaptcha",EE={theme:"light",type:"image"};class wu{constructor(p,m=Object.assign({},EE),w){this.parameters=m,this.type=Qf,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zn(w),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof p?document.getElementById(p):p;J(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cy:new Tc,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(m)||new Promise(P=>{const Y=le=>{le&&(p.tokenChangeListeners.delete(Y),P(le))};p.tokenChangeListeners.add(Y),p.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof p)p(m);else if("string"==typeof p){const w=$n()[p];"function"==typeof w&&w(m)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){J(Qn()&&!Zs(),p.auth,"internal-error"),yield function Mc(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function se(E){return ee.apply(this,arguments)}(p.auth);J(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jf{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Gt._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Sb(E,p,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(E,p,m){const w=zn(E),T=yield Ei(w,p,(0,V.m9)(m));return new Jf(T,P=>ds(w,P))})).apply(this,arguments)}function Zn(E,p,m){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E);yield hu(!1,w,"phone");const T=yield Ei(w.auth,p,(0,V.m9)(m));return new Jf(T,P=>Xr(w,P))})).apply(this,arguments)}function Li(E,p,m){return jr.apply(this,arguments)}function jr(){return(jr=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E),T=yield Ei(w.auth,p,(0,V.m9)(m));return new Jf(T,P=>Ff(w,P))})).apply(this,arguments)}function Ei(E,p,m){return Qs.apply(this,arguments)}function Qs(){return Qs=(0,h.Z)(function*(E,p,m){var w;const T=yield m.verify();try{let P;if(J("string"==typeof T,E,"argument-error"),J(m.type===Qf,E,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const Y=P.session;if("phoneNumber"in P)return J("enroll"===Y.type,E,"internal-error"),(yield function md(E,p){return at(E,"POST","/v2/accounts/mfaEnrollment:start",Ae(E,p))}(E,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{J("signin"===Y.type,E,"internal-error");const le=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return J(le,E,"missing-multi-factor-info"),(yield function hr(E,p){return at(E,"POST","/v2/accounts/mfaSignIn:start",Ae(E,p))}(E,{mfaPendingCredential:Y.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield function Gs(E,p){return us.apply(this,arguments)}(E,{phoneNumber:P.phoneNumber,recaptchaToken:T});return Y}}finally{m._reset()}}),Qs.apply(this,arguments)}function Lr(E,p){return xr.apply(this,arguments)}function xr(){return(xr=(0,h.Z)(function*(E,p){yield ad((0,V.m9)(E),p)})).apply(this,arguments)}let mn=(()=>{class E{constructor(m){this.providerId=E.PROVIDER_ID,this.auth=zn(m)}verifyPhoneNumber(m,w){return Ei(this.auth,m,(0,V.m9)(w))}static credential(m,w){return Gt._fromVerification(m,w)}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:T}=m;return w&&T?Gt._fromTokenResponse(w,T):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function gt(E,p){return p?Fn(p):(J(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Ji extends U{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return oi(p,this._buildIdpRequest())}_linkToIdToken(p,m){return oi(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return oi(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Rr(E){return lc(E.auth,new Ji(E),E.bypassAuthState)}function Iu(E){const{auth:p,user:m}=E;return J(m,p,"internal-error"),_o(m,new Ji(E),E.bypassAuthState)}function Ac(E){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,h.Z)(function*(E){const{auth:p,user:m}=E;return J(m,p,"internal-error"),ad(m,new Ji(E),E.bypassAuthState)})).apply(this,arguments)}class Ls{constructor(p,m,w,T,P=!1){this.auth=p,this.resolver=w,this.user=T,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(w,T){p.pendingPromise={resolve:w,reject:T};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(w,T){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:T,postBody:P,tenantId:Y,error:le,type:Ye}=p;if(le)return void m.reject(le);const ct={auth:m.auth,requestUri:w,sessionId:T,tenantId:Y||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ye)(ct))}catch(bt){m.reject(bt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Rr;case"linkViaPopup":case"linkViaRedirect":return Ac;case"reauthViaPopup":case"reauthViaRedirect":return Iu;default:Te(this.auth,"internal-error")}}resolve(p){et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){et(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ly=new ye(2e3,1e4);function xc(E,p,m){return Du.apply(this,arguments)}function Du(){return(Du=(0,h.Z)(function*(E,p,m){const w=zn(E);Ue(E,p,_i);const T=gt(w,m);return new Sd(w,"signInViaPopup",p,T).executeNotNull()})).apply(this,arguments)}function Xf(E,p,m){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E);Ue(w.auth,p,_i);const T=gt(w.auth,m);return new Sd(w.auth,"reauthViaPopup",p,T,w).executeNotNull()})).apply(this,arguments)}function Sa(E,p,m){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E);Ue(w.auth,p,_i);const T=gt(w.auth,m);return new Sd(w.auth,"linkViaPopup",p,T,w).executeNotNull()})).apply(this,arguments)}let Sd=(()=>{class E extends Ls{constructor(m,w,T,P,Y){super(m,w,P,Y),this.provider=T,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return J(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){et(1===m.filter.length,"Popup operations only handle one event");const w=Ca();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(T=>{m.reject(T)}),m.resolver._isIframeWebStorageSupported(m.auth,T=>{T||m.reject(De(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,T;this.pollId=null!==(T=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ly.get())};m()}}return E.currentPopupAction=null,E})();const ep="pendingRedirect",Ma=new Map;class Md extends Ls{constructor(p,m,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=Ma.get(m.auth._key());if(!w){try{const P=(yield function tp(E,p){return Qo.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;w=()=>Promise.resolve(P)}catch(T){w=()=>Promise.reject(T)}Ma.set(m.auth._key(),w)}return m.bypassAuthState||Ma.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(w,p);if("unknown"!==p.type){if(p.eventId){const T=yield w.auth._redirectUserForId(p.eventId);if(T)return w.user=T,m().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Qo(){return(Qo=(0,h.Z)(function*(E,p){const m=di(p),w=Xs(E);if(!(yield w._isAvailable()))return!1;const T="true"===(yield w._get(m));return yield w._remove(m),T})).apply(this,arguments)}function Js(E,p){return Do.apply(this,arguments)}function Do(){return(Do=(0,h.Z)(function*(E,p){return Xs(E)._set(di(p),"true")})).apply(this,arguments)}function Er(){Ma.clear()}function Cu(E,p){Ma.set(E._key(),p)}function Xs(E){return Fn(E._redirectPersistence)}function di(E){return Yr(ep,E.config.apiKey,E.name)}function Ad(E,p,m){return function bu(E,p,m){return Jo.apply(this,arguments)}(E,p,m)}function Jo(){return(Jo=(0,h.Z)(function*(E,p,m){const w=zn(E);Ue(E,p,_i),yield w._initializationPromise;const T=gt(w,m);return yield Js(T,w),T._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function xd(E,p,m){return function Rd(E,p,m){return Co.apply(this,arguments)}(E,p,m)}function Co(){return(Co=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E);Ue(w.auth,p,_i),yield w.auth._initializationPromise;const T=gt(w.auth,m);yield Js(T,w.auth);const P=yield wE(w);return T._openRedirect(w.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function Xo(E,p,m){return function Vs(E,p,m){return Tu.apply(this,arguments)}(E,p,m)}function Tu(){return(Tu=(0,h.Z)(function*(E,p,m){const w=(0,V.m9)(E);Ue(w.auth,p,_i),yield w.auth._initializationPromise;const T=gt(w.auth,m);yield hu(!1,w,p.providerId),yield Js(T,w.auth);const P=yield wE(w);return T._openRedirect(w.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function Nd(E,p){return eo.apply(this,arguments)}function eo(){return(eo=(0,h.Z)(function*(E,p){return yield zn(E)._initializationPromise,dy(E,p,!1)})).apply(this,arguments)}function dy(E,p){return np.apply(this,arguments)}function np(){return(np=(0,h.Z)(function*(E,p,m=!1){const w=zn(E),T=gt(w,p),Y=yield new Md(w,T,m).execute();return Y&&!m&&(delete Y.user._redirectEventId,yield w._persistUserIfCurrent(Y.user),yield w._setRedirectUser(null,p)),Y})).apply(this,arguments)}function wE(E){return hy.apply(this,arguments)}function hy(){return(hy=(0,h.Z)(function*(E){const p=Ca(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class IE{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(m=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Aa(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return py(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var w;if(p.error&&!py(p)){const T=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(De(this.auth,T))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const w=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fy(p))}saveEventToCache(p){this.cachedEventUids.add(fy(p)),this.lastProcessedEventTime=Date.now()}}function fy(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function py({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===p?.code}function gy(E){return my.apply(this,arguments)}function my(){return(my=(0,h.Z)(function*(E,p={}){return at(E,"GET","/v1/projects",p)})).apply(this,arguments)}const Vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yy=/^https?/;function Pd(){return(Pd=(0,h.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield gy(E);for(const m of p)try{if(wi(m))return}catch{}Te(E,"unauthorized-domain")})).apply(this,arguments)}function wi(E){const p=un(),{protocol:m,hostname:w}=new URL(p);if(E.startsWith("chrome-extension://")){const Y=new URL(E);return""===Y.hostname&&""===w?"chrome-extension:"===m&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Y.hostname===w}if(!yy.test(m))return!1;if(Vr.test(E))return w===E;const T=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(w)}const Su=new ye(3e4,6e4);function Rc(){const E=$n().___jsl;if(E?.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}let to=null;const DE=new ye(5e3,15e3),vy="__/auth/iframe",Ab="emulator/auth/iframe",yn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ra(E){const p=E.config;J(p.authDomain,E,"auth-domain-config-required");const m=p.emulator?Re(p,Ab):`https://${E.config.authDomain}/${vy}`,w={apiKey:p.apiKey,appName:E.name,v:k.SDK_VERSION},T=bo.get(E.config.apiHost);T&&(w.eid=T);const P=E._getFrameworks();return P.length&&(w.fw=P.join(",")),`${m}?${(0,V.xO)(w).slice(1)}`}function Mu(){return Mu=(0,h.Z)(function*(E){const p=yield function rp(E){return to=to||function Nc(E){return new Promise((p,m)=>{var w,T,P;function Y(){Rc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Rc(),m(De(E,"network-request-failed"))},timeout:Su.get()})}if(null!==(T=null===(w=$n().gapi)||void 0===w?void 0:w.iframes)&&void 0!==T&&T.Iframe)p(gapi.iframes.getContext());else{if(null===(P=$n().gapi)||void 0===P||!P.load){const le=tr("iframefcb");return $n()[le]=()=>{gapi.load?Y():m(De(E,"network-request-failed"))},On(`https://apis.google.com/js/api.js?onload=${le}`).catch(Ye=>m(Ye))}Y()}}).catch(p=>{throw to=null,p})}(E),to}(E),m=$n().gapi;return J(m,E,"internal-error"),p.open({where:document.body,url:Ra(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yn,dontclear:!0},w=>new Promise(function(){var T=(0,h.Z)(function*(P,Y){yield w.restyle({setHideOnLeave:!1});const le=De(E,"network-request-failed"),Ye=$n().setTimeout(()=>{Y(le)},DE.get());function ct(){$n().clearTimeout(Ye),P(w)}w.ping(ct).then(ct,()=>{Y(le)})});return function(P,Y){return T.apply(this,arguments)}}()))}),Mu.apply(this,arguments)}const _y={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ey{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Au="__/auth/handler",Pc="emulator/auth/handler",wy=encodeURIComponent("fac");function Na(E,p,m,w,T,P){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,h.Z)(function*(E,p,m,w,T,P){J(E.config.authDomain,E,"auth-domain-config-required"),J(E.config.apiKey,E,"invalid-api-key");const Y={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:w,v:k.SDK_VERSION,eventId:T};if(p instanceof _i){p.setDefaultLanguage(E.languageCode),Y.providerId=p.providerId||"",(0,V.xb)(p.getCustomParameters())||(Y.customParameters=JSON.stringify(p.getCustomParameters()));for(const[bt,ln]of Object.entries(P||{}))Y[bt]=ln}if(p instanceof Zi){const bt=p.getScopes().filter(ln=>""!==ln);bt.length>0&&(Y.scopes=bt.join(","))}E.tenantId&&(Y.tid=E.tenantId);const le=Y;for(const bt of Object.keys(le))void 0===le[bt]&&delete le[bt];const Ye=yield E._getAppCheckToken(),ct=Ye?`#${wy}=${encodeURIComponent(Ye)}`:"";return`${function ip({config:E}){return E.emulator?Re(E,Pc):`https://${E.authDomain}/${Au}`}(E)}?${(0,V.xO)(le).slice(1)}${ct}`})).apply(this,arguments)}const Oc="webStorageSupport",Ld=class ea{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vu,this._completeRedirectFn=dy,this._overrideRedirectResult=Cu}_openPopup(p,m,w,T){var P=this;return(0,h.Z)(function*(){var Y;et(null===(Y=P.eventManagers[p._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const le=yield Na(p,m,w,un(),T);return function Od(E,p,m,w=500,T=600){const P=Math.max((window.screen.availHeight-T)/2,0).toString(),Y=Math.max((window.screen.availWidth-w)/2,0).toString();let le="";const Ye=Object.assign(Object.assign({},_y),{width:w.toString(),height:T.toString(),top:P,left:Y}),ct=(0,V.z$)().toLowerCase();m&&(le=M(ct)?"_blank":m),N(ct)&&(p=p||"http://localhost",Ye.scrollbars="yes");const bt=Object.entries(Ye).reduce(($r,[Xi,ys])=>`${$r}${Xi}=${ys},`,"");if(function Ie(E=(0,V.z$)()){var p;return de(E)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(ct)&&"_self"!==le)return function kd(E,p){const m=document.createElement("a");m.href=E,m.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(p||"",le),new Ey(null);const ln=window.open(p||"",le,bt);J(ln,E,"popup-blocked");try{ln.focus()}catch{}return new Ey(ln)}(p,le,Ca())})()}_openRedirect(p,m,w,T){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(p),function ty(E){$n().location.href=E}(yield Na(p,m,w,un(),T)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:T,promise:P}=this.eventManagers[m];return T?Promise.resolve(T):(et(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(p);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const w=yield function xb(E){return Mu.apply(this,arguments)}(p),T=new IE(p);return w.register("authEvent",P=>(J(P?.authEvent,p,"invalid-auth-event"),{status:T.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:T},m.iframes[p._key()]=w,T})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Oc,{type:Oc},T=>{var P;const Y=null===(P=T?.[0])||void 0===P?void 0:P[Oc];void 0!==Y&&m(!!Y),Te(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function xa(E){return Pd.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return tt()||O()||de()}};class Ui{constructor(p){this.factorId=p}_process(p,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,w);case"signin":return this._finalizeSignIn(p,m.credential);default:return st("unexpected MultiFactorSessionType")}}}class Ii extends Ui{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ii(p)}_finalizeEnroll(p,m,w){return function Da(E,p){return at(E,"POST","/v2/accounts/mfaEnrollment:finalize",Ae(E,p))}(p,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function oy(E,p){return at(E,"POST","/v2/accounts/mfaSignIn:finalize",Ae(E,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Pa=(()=>{class E{constructor(){}static assertion(m){return Ii._fromCredential(m)}}return E.FACTOR_ID="phone",E})();var sp="@firebase/auth";class Dy{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(w=>{p(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);m&&(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const op=(0,V.Pz)("authIdTokenMaxAge")||300;let Fc=null;const ap=E=>function(){var p=(0,h.Z)(function*(m){const w=m&&(yield m.getIdTokenResult()),T=w&&((new Date).getTime()-Date.parse(w.issuedAtTime))/1e3;if(T&&T>op)return;const P=w?.token;Fc!==P&&(Fc=P,yield fetch(E,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function by(E=(0,k.getApp)()){const p=(0,k._getProvider)(E,"auth");if(p.isInitialized())return p.getImmediate();const m=function Ni(E,p){const m=(0,k._getProvider)(E,"auth");if(m.isInitialized()){const T=m.getImmediate(),P=m.getOptions();if((0,V.vZ)(P,p??{}))return T;Te(T,"already-initialized")}return m.initialize({options:p})}(E,{popupRedirectResolver:Ld,persistence:[Ys,Fi,vu]}),w=(0,V.Pz)("authTokenSyncURL");if(w){const P=ap(w);(function $f(E,p,m){(0,V.m9)(E).beforeAuthStateChanged(p,m)})(m,P,()=>P(m.currentUser)),function vc(E,p,m,w){(0,V.m9)(E).onIdTokenChanged(p,m,w)}(m,Y=>P(Y))}const T=(0,V.q4)("auth");return T&&fo(m,`http://${T}`),m}!function Ud(E){(0,k._registerComponent)(new ce.wA("auth",(p,{options:m})=>{const w=p.getProvider("app").getImmediate(),T=p.getProvider("heartbeat"),P=p.getProvider("app-check-internal"),{apiKey:Y,authDomain:le}=w.options;J(Y&&!Y.includes(":"),"invalid-api-key",{appName:w.name});const Ye={apiKey:Y,authDomain:le,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lt(E)},ct=new Wi(w,T,P,Ye);return function ho(E,p){const m=p?.persistence||[],w=(Array.isArray(m)?m:[m]).map(Fn);p?.errorMap&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(w,p?.popupRedirectResolver)}(ct,m),ct},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,w)=>{p.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ce.wA("auth-internal",p=>{const m=zn(p.getProvider("auth").getImmediate());return new Dy(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(sp,"0.23.2",function Cy(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,k.registerVersion)(sp,"0.23.2","esm2017")}("Browser")},2090:(It,Oe,F)=>{F.d(Oe,{$s:()=>Fn,BH:()=>Se,G6:()=>Re,L:()=>_e,LL:()=>_n,Pz:()=>De,Sg:()=>Ue,UG:()=>st,US:()=>ce,ZB:()=>K,ZR:()=>at,aH:()=>Te,b$:()=>Qn,eu:()=>Je,hl:()=>Ve,jU:()=>et,m9:()=>Yr,ne:()=>Kn,pd:()=>ft,q4:()=>ze,r3:()=>kn,ru:()=>un,tV:()=>W,uI:()=>J,vZ:()=>vt,w1:()=>yi,xO:()=>Nn,xb:()=>si,z$:()=>Me,zI:()=>Be,zd:()=>Wt});const ne=function(H){const B=[];let N=0;for(let O=0;O<H.length;O++){let M=H.charCodeAt(O);M<128?B[N++]=M:M<2048?(B[N++]=M>>6|192,B[N++]=63&M|128):55296==(64512&M)&&O+1<H.length&&56320==(64512&H.charCodeAt(O+1))?(M=65536+((1023&M)<<10)+(1023&H.charCodeAt(++O)),B[N++]=M>>18|240,B[N++]=M>>12&63|128,B[N++]=M>>6&63|128,B[N++]=63&M|128):(B[N++]=M>>12|224,B[N++]=M>>6&63|128,B[N++]=63&M|128)}return B},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,B){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,O=[];for(let M=0;M<H.length;M+=3){const Z=H[M],ie=M+1<H.length,G=ie?H[M+1]:0,ae=M+2<H.length,de=ae?H[M+2]:0;let it=(15&G)<<2|de>>6,tt=63&de;ae||(tt=64,ie||(it=64)),O.push(N[Z>>2],N[(3&Z)<<4|G>>4],N[it],N[tt])}return O.join("")},encodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(H):this.encodeByteArray(ne(H),B)},decodeString(H,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(H):function(H){const B=[];let N=0,O=0;for(;N<H.length;){const M=H[N++];if(M<128)B[O++]=String.fromCharCode(M);else if(M>191&&M<224){const Z=H[N++];B[O++]=String.fromCharCode((31&M)<<6|63&Z)}else if(M>239&&M<365){const ae=((7&M)<<18|(63&H[N++])<<12|(63&H[N++])<<6|63&H[N++])-65536;B[O++]=String.fromCharCode(55296+(ae>>10)),B[O++]=String.fromCharCode(56320+(1023&ae))}else{const Z=H[N++],ie=H[N++];B[O++]=String.fromCharCode((15&M)<<12|(63&Z)<<6|63&ie)}}return B.join("")}(this.decodeStringToByteArray(H,B))},decodeStringToByteArray(H,B){this.init_();const N=B?this.charToByteMapWebSafe_:this.charToByteMap_,O=[];for(let M=0;M<H.length;){const Z=N[H.charAt(M++)],G=M<H.length?N[H.charAt(M)]:0;++M;const de=M<H.length?N[H.charAt(M)]:64;++M;const Ie=M<H.length?N[H.charAt(M)]:64;if(++M,null==Z||null==G||null==de||null==Ie)throw new ve;O.push(Z<<2|G>>4),64!==de&&(O.push(G<<4&240|de>>2),64!==Ie&&O.push(de<<6&192|Ie))}return O},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _e=function(H){return function(H){const B=ne(H);return ce.encodeByteArray(B,!0)}(H).replace(/\./g,"")},W=function(H){try{return ce.decodeString(H,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function K(H,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return B}for(const N in B)!B.hasOwnProperty(N)||!xe(N)||(H[N]=K(H[N],B[N]));return H}function xe(H){return"__proto__"!==H}const Le=()=>{try{return function we(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const H=process.env.__FIREBASE_DEFAULTS__;return H?JSON.parse(H):void 0})()||(()=>{if(typeof document>"u")return;let H;try{H=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=H&&W(H[1]);return B&&JSON.parse(B)})()}catch(H){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${H}`)}},ze=H=>{var B,N;return null===(N=null===(B=Le())||void 0===B?void 0:B.emulatorHosts)||void 0===N?void 0:N[H]},Te=()=>{var H;return null===(H=Le())||void 0===H?void 0:H.config},De=H=>{var B;return null===(B=Le())||void 0===B?void 0:B[`_${H}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,N)=>{this.resolve=B,this.reject=N})}wrapCallback(B){return(N,O)=>{N?this.reject(N):this.resolve(O),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(N):B(N,O))}}}function Ue(H,B){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const O=B||"demo-project",M=H.iat||0,Z=H.sub||H.user_id;if(!Z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ie=Object.assign({iss:`https://securetoken.google.com/${O}`,aud:O,iat:M,exp:M+3600,auth_time:M,sub:Z,user_id:Z,firebase:{sign_in_provider:"custom",identities:{}}},H);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(ie)),""].join(".")}function Me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function J(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function st(){var H;const B=null===(H=Le())||void 0===H?void 0:H.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function et(){return"object"==typeof self&&self.self===self}function un(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Qn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yi(){const H=Me();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Re(){return!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Je(){return new Promise((H,B)=>{try{let N=!0;const O="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(O);M.onsuccess=()=>{M.result.close(),N||self.indexedDB.deleteDatabase(O),H(!0)},M.onupgradeneeded=()=>{N=!1},M.onerror=()=>{var Z;B((null===(Z=M.error)||void 0===Z?void 0:Z.message)||"")}}catch(N){B(N)}})}function Be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class at extends Error{constructor(B,N,O){super(N),this.code=B,this.customData=O,this.name="FirebaseError",Object.setPrototypeOf(this,at.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_n.prototype.create)}}class _n{constructor(B,N,O){this.service=B,this.serviceName=N,this.errors=O}create(B,...N){const O=N[0]||{},M=`${this.service}/${B}`,Z=this.errors[B],ie=Z?function wt(H,B){return H.replace(Tt,(N,O)=>{const M=B[O];return null!=M?String(M):`<${O}?>`})}(Z,O):"Error";return new at(M,`${this.serviceName}: ${ie} (${M}).`,O)}}const Tt=/\{\$([^}]+)}/g;function kn(H,B){return Object.prototype.hasOwnProperty.call(H,B)}function si(H){for(const B in H)if(Object.prototype.hasOwnProperty.call(H,B))return!1;return!0}function vt(H,B){if(H===B)return!0;const N=Object.keys(H),O=Object.keys(B);for(const M of N){if(!O.includes(M))return!1;const Z=H[M],ie=B[M];if(Dn(Z)&&Dn(ie)){if(!vt(Z,ie))return!1}else if(Z!==ie)return!1}for(const M of O)if(!N.includes(M))return!1;return!0}function Dn(H){return null!==H&&"object"==typeof H}function Nn(H){const B=[];for(const[N,O]of Object.entries(H))Array.isArray(O)?O.forEach(M=>{B.push(encodeURIComponent(N)+"="+encodeURIComponent(M))}):B.push(encodeURIComponent(N)+"="+encodeURIComponent(O));return B.length?"&"+B.join("&"):""}function Wt(H){const B={};return H.replace(/^\?/,"").split("&").forEach(O=>{if(O){const[M,Z]=O.split("=");B[decodeURIComponent(M)]=decodeURIComponent(Z)}}),B}function ft(H){const B=H.indexOf("?");if(!B)return"";const N=H.indexOf("#",B);return H.substring(B,N>0?N:void 0)}function Kn(H,B){const N=new An(H,B);return N.subscribe.bind(N)}class An{constructor(B,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{B(this)}).catch(O=>{this.error(O)})}next(B){this.forEachObserver(N=>{N.next(B)})}error(B){this.forEachObserver(N=>{N.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,N,O){let M;if(void 0===B&&void 0===N&&void 0===O)throw new Error("Missing Observer.");M=function Cn(H,B){if("object"!=typeof H||null===H)return!1;for(const N of B)if(N in H&&"function"==typeof H[N])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:N,complete:O},void 0===M.next&&(M.next=Xt),void 0===M.error&&(M.error=Xt),void 0===M.complete&&(M.complete=Xt);const Z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),Z}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,B)}sendOne(B,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{N(this.observers[B])}catch(O){typeof console<"u"&&console.error&&console.error(O)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xt(){}const Un=1e3,Yt=2,bn=144e5,Ft=.5;function Fn(H,B=Un,N=Yt){const O=B*Math.pow(N,H),M=Math.round(Ft*O*(Math.random()-.5)*2);return Math.min(bn,O+M)}function Yr(H){return H&&H._delegate?H._delegate:H}},8747:(It,Oe,F)=>{var h=F(2223);let V=null;function k(){return V}class ge{}const ce=new h.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(_e)},providedIn:"platform"}),n})();const Ce=new h.OlP("Location Initialized");let _e=(()=>{class n extends ve{constructor(){super(),this._doc=(0,h.f3M)(ce),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function W(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function z(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function K(n){return n&&"?"!==n[0]?"?"+n:n}let xe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Qe)},providedIn:"root"}),n})();const we=new h.OlP("appBaseHref");let Qe=(()=>{class n extends xe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return W(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+K(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+K(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+K(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ve),h.LFG(we,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Et=(()=>{class n extends xe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=W(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+K(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+K(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ve),h.LFG(we,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),he=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Te(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(z(Ze(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+K(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+K(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+K(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=K,n.joinWithSlash=W,n.stripTrailingSlash=z,n.\u0275fac=function(t){return new(t||n)(h.LFG(xe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Le(){return new he((0,h.LFG)(xe))}()},providedIn:"root"}),n})();function Ze(n){return n.replace(/\/index.html$/,"")}function Gi(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}class ga{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new ga(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,l),zn(g,s)}});for(let s=0,u=r.length;s<u;s++){const g=r.get(s).context;g.index=s,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{zn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function zn(n,e){n.context.$implicit=e.item}let Ni=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ho,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){fo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){fo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ho{constructor(){this.$implicit=null,this.ngIf=null}}function fo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let Xe=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),l=-1===s.indexOf("-")?void 0:h.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,s,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.aQg),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Pi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Ps(n){return"server"===n}let Zi=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new dr((0,h.LFG)(ce),window)}),n})();class dr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ui(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=sd(this.window.history)||sd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function sd(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class va{}class yc extends ge{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pd extends yc{static makeCurrent(){!function ne(n){V||(V=n)}(new pd)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Qm(){return ps=ps||document.querySelector("base"),ps?ps.getAttribute("href"):null}();return null==t?null:function $f(n){vc=vc||document.createElement("a"),vc.setAttribute("href",n);const e=vc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gi(document.cookie,e)}}let vc,ps=null,Jm=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const zf=new h.OlP("EventManagerPlugins");let $t=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new h.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zf),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Gf{constructor(e){this._doc=e}}const _c="ng-app-id";let Eo=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ps(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${_c}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(_c),u;{const l=this.doc.createElement("style");return this.nonce&&l.setAttribute("nonce",this.nonce),l.textContent=r,this.platformIsServer&&l.setAttribute(_c,this.appId),l}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const u=this.styleRef,l=u.get(r)?.elements;l?l.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(h.AFp),h.LFG(h.Ojb,8),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const mu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gd=/%COMP%/g,ey=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function je(n,e){return e.map(t=>t.replace(gd,n))}let sn=(()=>{class n{constructor(t,r,s,u,l,g,_,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.doc=l,this.platformId=g,this.ngZone=_,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=Ps(g),this.defaultRenderer=new yu(t,l,_,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===h.ifc.ShadowDom&&(r={...r,encapsulation:h.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof Ed?s.applyToHost(t):s instanceof Fi&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.doc,g=this.ngZone,_=this.eventManager,D=this.sharedStylesHost,b=this.removeStylesOnCompDestory,R=this.platformIsServer;switch(r.encapsulation){case h.ifc.Emulated:u=new Ed(_,D,r,this.appId,b,l,g,R);break;case h.ifc.ShadowDom:return new Ec(_,D,t,r,l,g,this.nonce,R);default:u=new Fi(_,D,r,b,l,g,R)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG($t),h.LFG(Eo),h.LFG(h.AFp),h.LFG(ey),h.LFG(ce),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(h.Ojb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class yu{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(mu[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_d(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_d(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new h.vHH(5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=mu[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=mu[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,s&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=k().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function _d(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ec extends yu{constructor(e,t,r,s,u,l,g,_){super(e,u,l,_),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=je(s.id,s.styles);for(const b of D){const R=document.createElement("style");g&&R.setAttribute("nonce",g),R.textContent=b,this.shadowRoot.appendChild(R)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Fi extends yu{constructor(e,t,r,s,u,l,g,_){super(e,u,l,g),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=_?je(_,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Ed extends Fi{constructor(e,t,r,s,u,l,g,_){const D=s+"-"+r.id;super(e,t,r,u,l,g,_,D),this.contentAttr=function yd(n){return"_ngcontent-%COMP%".replace(gd,n)}(D),this.hostAttr=function vd(n){return"_nghost-%COMP%".replace(gd,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let vu=(()=>{class n extends Gf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const qf=["alt","control","meta","shift"],yE={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ca={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let li=(()=>{class n extends Gf{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),qf.forEach(D=>{const b=r.indexOf(D);b>-1&&(r.splice(b,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=s,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let s=yE[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),qf.forEach(l=>{l!==s&&(0,Ca[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Dd=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function wd(){pd.makeCurrent()},multi:!0},{provide:ce,useFactory:function ny(){return(0,h.RDi)(document),document},deps:[]}]),ba=new h.OlP(""),wc=[{provide:h.rWj,useClass:class Hf{addToWindow(e){h.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new h.vHH(5103,!1);return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const s=h.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const g=function(_){l=l||_,u--,0==u&&r(l)};s.forEach(function(_){_.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Io=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Kf(){return new h.qLn},deps:[]},{provide:zf,useClass:vu,multi:!0,deps:[ce,h.R0b,h.Lbi]},{provide:zf,useClass:li,multi:!0,deps:[ce]},sn,Eo,$t,{provide:h.FYo,useExisting:sn},{provide:va,useClass:Jm,deps:[]},[]];let Ic=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ba,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Io,...wc],imports:[Pi,h.hGG]}),n})(),Cc=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Dc(){return new Cc((0,h.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Fs=F(7669),Zn=F(8996);function Ct(...n){const e=(0,Fs.yG)(n);return(0,Zn.D)(n,e)}var Li=F(9751),jr=F(5577),Ei=F(576);function Qs(n,e){return(0,Ei.m)(e)?(0,jr.z)(n,e,1):(0,jr.z)(n,1)}var Lr=F(4482),xr=F(5403);function mn(n,e){return(0,Lr.e)((t,r)=>{let s=0;t.subscribe((0,xr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var gt=F(4004),Ji=F(8421);function Rr(n,e){return(0,Lr.e)((t,r)=>{let s=null,u=0,l=!1;const g=()=>l&&!s&&r.complete();t.subscribe((0,xr.x)(r,_=>{s?.unsubscribe();let D=0;const b=u++;(0,Ji.Xf)(n(_,b)).subscribe(s=(0,xr.x)(r,R=>r.next(e?e(_,R,b,D++):R),()=>{s=null,g()}))},()=>{l=!0,g()}))})}class Iu{}class Ac{}class Vi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let s;if(s="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),s.length>0){const u=t.toLowerCase();this.headers.set(u,s),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Vi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Vi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Vi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ly{encodeKey(e){return Ta(e)}encodeValue(e){return Ta(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Du=/%(\d[a-f0-9])/gi,Xf={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ta(n){return encodeURIComponent(n).replace(Du,(e,t)=>Xf[t]??e)}function Sa(n){return`${n}`}class ms{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ly,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function xc(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],_=t.get(l)||[];_.push(g),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(Sa):[Sa(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new ms({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Sa(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(Sa(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ep{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function Md(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function tp(n){return typeof Blob<"u"&&n instanceof Blob}function Qo(n){return typeof FormData<"u"&&n instanceof FormData}class Do{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Ma(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Vi),this.context||(this.context=new ep),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new ms,this.urlWithParams=t}serializeBody(){return null===this.body?null:Md(this.body)||tp(this.body)||Qo(this.body)||function Js(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ms?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Qo(this.body)?null:tp(this.body)?this.body.type||null:Md(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ms?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let _=e.headers||this.headers,D=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(_=Object.keys(e.setHeaders).reduce((R,$)=>R.set($,e.setHeaders[$]),_)),e.setParams&&(D=Object.keys(e.setParams).reduce((R,$)=>R.set($,e.setParams[$]),D)),new Do(t,r,u,{params:D,headers:_,context:b,reportProgress:g,responseType:s,withCredentials:l})}}var Er=(()=>((Er=Er||{})[Er.Sent=0]="Sent",Er[Er.UploadProgress=1]="UploadProgress",Er[Er.ResponseHeader=2]="ResponseHeader",Er[Er.DownloadProgress=3]="DownloadProgress",Er[Er.Response=4]="Response",Er[Er.User=5]="User",Er))();class Cu{constructor(e,t=200,r="OK"){this.headers=e.headers||new Vi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Xs extends Cu{constructor(e={}){super(e),this.type=Er.ResponseHeader}clone(e={}){return new Xs({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class di extends Cu{constructor(e={}){super(e),this.type=Er.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new di({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ad extends Cu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function bu(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Jo=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof Do)u=t;else{let _,D;_=s.headers instanceof Vi?s.headers:new Vi(s.headers),s.params&&(D=s.params instanceof ms?s.params:new ms({fromObject:s.params})),u=new Do(t,r,void 0!==s.body?s.body:null,{headers:_,context:s.context,params:D,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=Ct(u).pipe(Qs(_=>this.handler.handle(_)));if(t instanceof Do||"events"===s.observe)return l;const g=l.pipe(mn(_=>_ instanceof di));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,gt.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return g.pipe((0,gt.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return g.pipe((0,gt.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return g.pipe((0,gt.U)(_=>_.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new ms).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,bu(s,r))}post(t,r,s={}){return this.request("POST",t,bu(s,r))}put(t,r,s={}){return this.request("PUT",t,bu(s,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Iu))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function xd(n,e){return e(n)}function Rd(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const Xo=new h.OlP(""),Vs=new h.OlP(""),Tu=new h.OlP("");function Nd(){let n=null;return(e,t)=>(null===n&&(n=((0,h.f3M)(Xo,{optional:!0})??[]).reduceRight(Rd,xd)),n(e,t))}let eo=(()=>{class n extends Iu{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Vs),...this.injector.get(Tu,[])]));this.chain=r.reduceRight((s,u)=>function Co(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(s,u,this.injector),xd)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ac),h.LFG(h.lqb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Vr=/^\)\]\}',?\n/;let xa=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new h.vHH(-2800,!1);const r=function Pd(){const n=()=>{};if(typeof Zone<"u"){const e=Zone.current,t=e.scheduleMacroTask("httpMacroTask",n,void 0,n,n);return()=>e.cancelTask(t)}return n}(),s=this.xhrFactory;return(s.\u0275loadImpl?(0,Zn.D)(s.\u0275loadImpl()):Ct(null)).pipe(Rr(()=>new Li.y(l=>{const g=s.build();if(g.open(t.method,t.urlWithParams),t.withCredentials&&(g.withCredentials=!0),t.headers.forEach((nt,lt)=>g.setRequestHeader(nt,lt.join(","))),t.headers.has("Accept")||g.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const nt=t.detectContentTypeHeader();null!==nt&&g.setRequestHeader("Content-Type",nt)}if(t.responseType){const nt=t.responseType.toLowerCase();g.responseType="json"!==nt?nt:"text"}const _=t.serializeBody();let D=null;const b=()=>{if(null!==D)return D;const nt=g.statusText||"OK",lt=new Vi(g.getAllResponseHeaders()),St=function yy(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(g)||t.url;return D=new Xs({headers:lt,status:g.status,statusText:nt,url:St}),D},R=()=>{let{headers:nt,status:lt,statusText:St,url:Bt}=b(),xt=null;204!==lt&&(xt=typeof g.response>"u"?g.responseText:g.response),0===lt&&(lt=xt?200:0);let pn=lt>=200&&lt<300;if("json"===t.responseType&&"string"==typeof xt){const Ri=xt;xt=xt.replace(Vr,"");try{xt=""!==xt?JSON.parse(xt):null}catch(oc){xt=Ri,pn&&(pn=!1,xt={error:oc,text:xt})}}pn?(l.next(new di({body:xt,headers:nt,status:lt,statusText:St,url:Bt||void 0})),l.complete()):l.error(new Ad({error:xt,headers:nt,status:lt,statusText:St,url:Bt||void 0}))},$=nt=>{const{url:lt}=b(),St=new Ad({error:nt,status:g.status||0,statusText:g.statusText||"Unknown Error",url:lt||void 0});l.error(St),r()};let Q=!1;const me=nt=>{Q||(l.next(b()),Q=!0);let lt={type:Er.DownloadProgress,loaded:nt.loaded};nt.lengthComputable&&(lt.total=nt.total),"text"===t.responseType&&g.responseText&&(lt.partialText=g.responseText),l.next(lt)},He=nt=>{let lt={type:Er.UploadProgress,loaded:nt.loaded};nt.lengthComputable&&(lt.total=nt.total),l.next(lt)};g.addEventListener("load",R),g.addEventListener("error",$),g.addEventListener("timeout",$),g.addEventListener("abort",$),t.reportProgress&&(g.addEventListener("progress",me),null!==_&&g.upload&&g.upload.addEventListener("progress",He));const We=()=>r();g.addEventListener("loadend",We);try{g.send(_)}catch(nt){$(nt)}return l.next({type:Er.Sent}),()=>{g.removeEventListener("loadend",We),g.removeEventListener("error",$),g.removeEventListener("abort",$),g.removeEventListener("load",R),g.removeEventListener("timeout",$),r(),t.reportProgress&&(g.removeEventListener("progress",me),null!==_&&g.upload&&g.upload.removeEventListener("progress",He)),g.readyState!==g.DONE&&g.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(va))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const wi=new h.OlP("XSRF_ENABLED"),Rc=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),to=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class rp{}let DE=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gi(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(h.Lbi),h.LFG(Rc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function vy(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(wi)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(rp).getToken(),s=(0,h.f3M)(to);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var yn=(()=>((yn=yn||{})[yn.Interceptors=0]="Interceptors",yn[yn.LegacyInterceptors=1]="LegacyInterceptors",yn[yn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",yn[yn.NoXsrfProtection=3]="NoXsrfProtection",yn[yn.JsonpSupport=4]="JsonpSupport",yn[yn.RequestsMadeViaParent=5]="RequestsMadeViaParent",yn))();function bo(n,e){return{\u0275kind:n,\u0275providers:e}}function Ra(...n){const e=[Jo,xa,eo,{provide:Iu,useExisting:eo},{provide:Ac,useExisting:xa},{provide:Vs,useValue:vy,multi:!0},{provide:wi,useValue:!0},{provide:rp,useClass:DE}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const Mu=new h.OlP("LEGACY_INTERCEPTOR_FN");let Od=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Ra(bo(yn.LegacyInterceptors,[{provide:Mu,useFactory:Nd},{provide:Vs,useExisting:Mu,multi:!0}]))]}),n})();const ea_firebase={projectId:"queuest-cb885",appId:"1:936633637141:web:9cc171d2c3bf1f5a5bb11c",storageBucket:"queuest-cb885.appspot.com",apiKey:"AIzaSyDPU4uUi8KAm_2VC1kZg7oIlPpQJvV7MQY",authDomain:"queuest-cb885.firebaseapp.com",messagingSenderId:"936633637141",measurementId:"G-P8DPMCNH7X"},ea_application_apiUrl="https://api.language.owlbeardm.com";var Ui=F(7579);class Ii extends Ui.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Pa}=Array,{getPrototypeOf:kc,prototype:Vd,keys:Iy}=Object;function Oa(n){if(1===n.length){const e=n[0];if(Pa(e))return{args:e,keys:null};if(function sp(n){return n&&"object"==typeof n&&kc(n)===Vd}(e)){const t=Iy(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xu=F(4671);const{isArray:Dy}=Array;function Ud(n){return(0,gt.U)(e=>function Cy(n,e){return Dy(e)?n(...e):n(e)}(n,e))}function Ru(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var op=F(9672);function Fc(...n){const e=(0,Fs.yG)(n),t=(0,Fs.jO)(n),{args:r,keys:s}=Oa(n);if(0===r.length)return(0,Zn.D)([],e);const u=new Li.y(function ap(n,e,t=xu.y){return r=>{by(e,()=>{const{length:s}=n,u=new Array(s);let l=s,g=s;for(let _=0;_<s;_++)by(e,()=>{const D=(0,Zn.D)(n[_],e);let b=!1;D.subscribe((0,xr.x)(r,R=>{u[_]=R,b||(b=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Ru(s,l):xu.y));return t?u.pipe(Ud(t)):u}function by(n,e,t){n?(0,op.f)(t,n,e):e()}const p=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var m=F(8189);function T(...n){return function w(){return(0,m.J)(1)}()((0,Zn.D)(n,(0,Fs.yG)(n)))}function P(n){return new Li.y(e=>{(0,Ji.Xf)(n()).subscribe(e)})}var Y=F(9635);function le(n,e){const t=(0,Ei.m)(n)?n:()=>n,r=s=>s.error(t());return new Li.y(e?s=>e.schedule(r,0,s):r)}var Ye=F(515),ct=F(727);function bt(){return(0,Lr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ln extends Li.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Lr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.w0.EMPTY)}return e}refCount(){return bt()(this)}}function $r(n){return n<=0?()=>Ye.E:(0,Lr.e)((e,t)=>{let r=0;e.subscribe((0,xr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Xi(...n){const e=(0,Fs.yG)(n);return(0,Lr.e)((t,r)=>{(e?T(n,t,e):T(n,t)).subscribe(r)})}function ys(n){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,xr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Nu(n=Lc){return(0,Lr.e)((e,t)=>{let r=!1;e.subscribe((0,xr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Lc(){return new p}function vs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mn((s,u)=>n(s,u,r)):xu.y,$r(1),t?ys(e):Nu(()=>new p))}var Wr=F(8505);function Di(n){return(0,Lr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,xr.x)(t,void 0,void 0,l=>{u=(0,Ji.Xf)(n(l,Di(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function To(n,e){return(0,Lr.e)(function Bd(n,e,t,r,s){return(u,l)=>{let g=t,_=e,D=0;u.subscribe((0,xr.x)(l,b=>{const R=D++;_=g?n(_,b,R):(g=!0,b),r&&l.next(_)},s&&(()=>{g&&l.next(_),l.complete()})))}}(n,e,arguments.length>=2,!0))}function So(n){return n<=0?()=>Ye.E:(0,Lr.e)((e,t)=>{let r=[];e.subscribe((0,xr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Pu(n){return(0,Lr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Qt="primary",Vc=Symbol("RouteTitle");class Sy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Uc(n){return new Sy(n)}function Rb(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))s[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function no(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!ME(n[s],e[s]))return!1;return!0}function ME(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function AE(n){return n.length>0?n[n.length-1]:null}function Ur(n){return function Ld(n){return!!n&&(n instanceof Li.y||(0,Ei.m)(n.lift)&&(0,Ei.m)(n.subscribe))}(n)?n:(0,h.QGY)(n)?(0,Zn.D)(Promise.resolve(n)):Ct(n)}const My={exact:function Bc(n,e,t){if(!Ou(n.segments,e.segments)||!jd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Bc(n.children[r],e.children[r],t))return!1;return!0},subset:xy},Ay={exact:function Ci(n,e){return no(n,e)},subset:function xE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ME(n[t],e[t]))},ignored:()=>!0};function up(n,e,t){return My[t.paths](n.root,e.root,t.matrixParams)&&Ay[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function xy(n,e,t){return RE(n,e,e.segments,t)}function RE(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Ou(s,t)||e.hasChildren()||!jd(s,t,r))}if(n.segments.length===t.length){if(!Ou(n.segments,t)||!jd(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!xy(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ou(n.segments,s)&&jd(n.segments,s,r)&&n.children[Qt])&&RE(n.children[Qt],e,u,r)}}function jd(n,e,t){return e.every((r,s)=>Ay[t](n[s].parameters,r.parameters))}class jc{constructor(e=new Vn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uc(this.queryParams)),this._queryParamMap}toString(){return Ob.serialize(this)}}class Vn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ka(this)}}class $d{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Uc(this.parameters)),this._parameterMap}toString(){return Ny(this)}}function Ou(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ku=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Hd},providedIn:"root"}),n})();class Hd{parse(e){const t=new kE(e);return new jc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${zd(e.root,!0)}`,r=function lp(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${$c(t)}=${$c(s)}`).join("&"):`${$c(t)}=${$c(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ry(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ob=new Hd;function ka(n){return n.segments.map(e=>Ny(e)).join("/")}function zd(n,e){if(!n.hasChildren())return ka(n);if(e){const t=n.children[Qt]?zd(n.children[Qt],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==Qt&&r.push(`${s}:${zd(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Pb(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Qt&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Qt&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Qt?[zd(n.children[Qt],!1)]:[`${s}:${zd(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${ka(n)}/${t[0]}`:`${ka(n)}/(${t.join("//")})`}}function PE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $c(n){return PE(n).replace(/%3B/gi,";")}function cp(n){return PE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ta(n){return decodeURIComponent(n)}function Gd(n){return ta(n.replace(/\+/g,"%20"))}function Ny(n){return`${cp(n.path)}${function Py(n){return Object.keys(n).map(e=>`;${cp(e)}=${cp(n[e])}`).join("")}(n.parameters)}`}const kb=/^[^\/()?;#]+/;function Oy(n){const e=n.match(kb);return e?e[0]:""}const Fb=/^[^\/()?;=#]+/,Vb=/^[^=?&#]+/,OE=/^[^&#]+/;class kE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vn([],{}):new Vn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new Vn(e,t)),r}parseSegment(){const e=Oy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new $d(ta(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function Lb(n){const e=n.match(Fb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Oy(this.remaining);s&&(r=s,this.capture(r))}e[ta(t)]=ta(r)}parseQueryParam(e){const t=function Ub(n){const e=n.match(Vb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function ky(n){const e=n.match(OE);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Gd(t),u=Gd(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Oy(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Qt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Qt]:new Vn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function dp(n){return n.segments.length>0?new Vn([],{[Qt]:n}):n}function FE(n){const e={};for(const r of Object.keys(n.children)){const u=FE(n.children[r]);if(r===Qt&&0===u.segments.length&&u.hasChildren())for(const[l,g]of Object.entries(u.children))e[l]=g;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Bb(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new Vn(n.segments.concat(e.segments),e.children)}return n}(new Vn(n.segments,e))}function na(n){return n instanceof jc}function Fa(n){let e;const s=dp(function t(u){const l={};for(const _ of u.children){const D=t(_);l[_.outlet]=D}const g=new Vn(u.url,l);return u===n&&(e=g),g}(n.root));return e??s}function Fy(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return VE(s,s,s,t,r);const u=function BE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new UE(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return Object.entries(u.outlets).forEach(([_,D])=>{g[_]="string"==typeof D?D.split("/"):D}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((g,_)=>{0==_&&"."===g||(0==_&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new UE(t,e,r)}(e);if(u.toRoot())return VE(s,s,new Vn([],{}),t,r);const l=function jE(n,e,t){if(n.isAbsolute)return new Zd(e,!0,0);if(!t)return new Zd(e,!1,NaN);if(null===t.parent)return new Zd(t,!0,0);const r=Wd(n.commands[0])?0:1;return function Ly(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new h.vHH(4005,!1);s=r.segments.length}return new Zd(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),g=l.processChildren?ra(l.segmentGroup,l.index,u.commands):Yd(l.segmentGroup,l.index,u.commands);return VE(s,l.segmentGroup,g,t,r)}function Wd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function qd(n){return"object"==typeof n&&null!=n&&n.outlets}function VE(n,e,t,r,s){let l,u={};r&&Object.entries(r).forEach(([_,D])=>{u[_]=Array.isArray(D)?D.map(b=>`${b}`):`${D}`}),l=n===e?t:Kd(n,e,t);const g=dp(FE(l));return new jc(g,u,s)}function Kd(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:Kd(u,e,t)}),new Vn(n.segments,r)}class UE{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wd(r[0]))throw new h.vHH(4003,!1);const s=r.find(qd);if(s&&s!==AE(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zd{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Yd(n,e,t){if(n||(n=new Vn([],{})),0===n.segments.length&&n.hasChildren())return ra(n,e,t);const r=function HE(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],g=t[r];if(qd(g))break;const _=`${g}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===_)break;if(_&&D&&"object"==typeof D&&void 0===D.outlets){if(!fp(_,D,l))return u;r+=2}else{if(!fp(_,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Vn(n.segments.slice(0,r.pathIndex),{});return u.children[Qt]=new Vn(n.segments.slice(r.pathIndex),n.children),ra(u,0,s)}return r.match&&0===s.length?new Vn(n.segments,{}):r.match&&!n.hasChildren()?Qd(n,e,t):r.match?ra(n,0,s):Qd(n,e,t)}function ra(n,e,t){if(0===t.length)return new Vn(n.segments,{});{const r=function $E(n){return qd(n[0])?n[0].outlets:{[Qt]:n}}(t),s={};if(!r[Qt]&&n.children[Qt]&&1===n.numberOfChildren&&0===n.children[Qt].segments.length){const u=ra(n.children[Qt],e,t);return new Vn(n.segments,u.children)}return Object.entries(r).forEach(([u,l])=>{"string"==typeof l&&(l=[l]),null!==l&&(s[u]=Yd(n.children[u],e,l))}),Object.entries(n.children).forEach(([u,l])=>{void 0===r[u]&&(s[u]=l)}),new Vn(n.segments,s)}}function Qd(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(qd(u)){const _=hp(u.outlets);return new Vn(r,_)}if(0===s&&Wd(t[0])){r.push(new $d(n.segments[e].path,Vy(t[0]))),s++;continue}const l=qd(u)?u.outlets[Qt]:`${u}`,g=s<t.length-1?t[s+1]:null;l&&g&&Wd(g)?(r.push(new $d(l,Vy(g))),s+=2):(r.push(new $d(l,{})),s++)}return new Vn(r,{})}function hp(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=Qd(new Vn([],{}),0,r))}),e}function Vy(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function fp(n,e,t){return n==t.path&&no(e,t.parameters)}const ia="imperative";class Mo{constructor(e,t){this.id=e,this.url=t}}class pp extends Mo{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fu extends Mo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gp extends Mo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jd extends Mo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class mp extends Mo{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class zE extends Mo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yp extends Mo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uy extends Mo{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hc extends Mo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jb extends Mo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $b{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Px{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class By{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zc{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xd{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class WE{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Gc,this.attachRef=null}}let Gc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new WE,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class jy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=vp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=vp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=$y(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return $y(e,this._root).map(t=>t.value)}}function vp(n,e){if(n===e.value)return e;for(const t of e.children){const r=vp(n,t);if(r)return r}return null}function $y(n,e){if(n===e.value)return[e];for(const t of e.children){const r=$y(n,t);if(r.length)return r.unshift(e),r}return[]}class sa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Wc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class qE extends jy{constructor(e,t){super(e),this.snapshot=t,YE(this,e)}toString(){return this.snapshot.toString()}}function KE(n,e){const t=function La(n,e){const l=new Hy([],{},{},"",{},Qt,e,null,{});return new Gb("",new sa(l,[]))}(0,e),r=new Ii([new $d("",{})]),s=new Ii({}),u=new Ii({}),l=new Ii({}),g=new Ii(""),_=new Ao(r,s,l,g,u,Qt,e,t.root);return _.snapshot=t.root,new qE(new sa(_,[]),t)}class Ao{constructor(e,t,r,s,u,l,g,_){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=l,this.component=g,this._futureSnapshot=_,this.title=this.dataSubject?.pipe((0,gt.U)(D=>D[Vc]))??Ct(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Uc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Uc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ZE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ox(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Hy{get title(){return this.data?.[Vc]}constructor(e,t,r,s,u,l,g,_,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.routeConfig=_,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Uc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Uc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gb extends jy{constructor(e,t){super(t),this.url=e,YE(this,t)}toString(){return Wb(this._root)}}function YE(n,e){e.value._routerState=n,e.children.forEach(t=>YE(n,t))}function Wb(n){const e=n.children.length>0?` { ${n.children.map(Wb).join(", ")} } `:"";return`${n.value}${e}`}function _p(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,no(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),no(e.params,t.params)||n.paramsSubject.next(t.params),function Nb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!no(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),no(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function zy(n,e){const t=no(n.params,e.params)&&function NE(n,e){return Ou(n,e)&&n.every((t,r)=>no(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zy(n.parent,e.parent))}let QE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Qt,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(Gc),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb),this.inputBinder=(0,h.f3M)(Ep,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,!1);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,_=new qb(t,g,s.injector);this.activated=s.createComponent(l,{index:s.length,injector:_,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class qb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ao?this.route:e===Gc?this.childContexts:this.parent.get(e,t)}}const Ep=new h.OlP("");let wp=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=Fc([r.queryParams,r.params,r.data]).pipe(Rr(([u,l,g],_)=>(g={...u,...l,...g},0===_?Ct(g):Promise.resolve(g)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const l=(0,h.qFp)(r.component);if(l)for(const{templateName:g}of l.inputs)t.activatedComponentRef.setInput(g,u[g]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function aa(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function JE(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return aa(n,r,s);return aa(n,r)})}(n,e,t);return new sa(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>aa(n,g)),l}}const r=function XE(n){return new Ao(new Ii(n.url),new Ii(n.params),new Ii(n.queryParams),new Ii(n.fragment),new Ii(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>aa(n,u));return new sa(r,s)}}const Ip="ngNavigationCancelingError";function Kb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Zb(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function Zb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Ip]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Yb(n){return Dp(n)&&na(n.url)}function Dp(n){return n&&n[Ip]}let eh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[QE],encapsulation:2}),n})();function Gy(n){const e=n.children&&n.children.map(Gy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=eh),t}function Es(n){return n.outlet||Qt}function fr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Wy{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),_p(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Wc(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Wc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Wc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=Wc(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new zc(u.value.snapshot))}),e.children.length&&this.forwardEvent(new By(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(_p(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),_p(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=fr(s.snapshot);l.attachRef=null,l.route=s,l.injector=g,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class qy{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class bp{constructor(e,t){this.component=e,this.route=t}}function tT(n,e,t){const r=n._root;return Kc(r,e?e._root:null,t,[r.value])}function qc(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Kc(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Wc(e);return n.children.forEach(l=>{(function Bx(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const _=function jx(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ou(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ou(n.url,e.url)||!no(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zy(n,e)||!no(n.queryParams,e.queryParams);default:return!zy(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);_?s.canActivateChecks.push(new qy(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Kc(n,e,u.component?g?g.children:null:t,r,s),_&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new bp(g.outlet.component,l))}else l&&ua(e,g,s),s.canActivateChecks.push(new qy(r)),Kc(n,null,u.component?g?g.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),Object.entries(u).forEach(([l,g])=>ua(g,t.getContext(l),s)),s}function ua(n,e,t){const r=Wc(n),s=n.value;Object.entries(r).forEach(([u,l])=>{ua(l,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new bp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function vn(n){return"function"==typeof n}function Tp(n){return n instanceof p||"EmptyError"===n?.name}const Zy=Symbol("INITIAL_VALUE");function Va(){return Rr(n=>Fc(n.map(e=>e.pipe($r(1),Xi(Zy)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===Zy)return Zy;if(!1===t||t instanceof jc)return t}return!0}),mn(e=>e!==Zy),$r(1)))}function Mp(n){return(0,Y.z)((0,Wr.b)(e=>{if(na(e))throw Kb(0,e)}),(0,gt.U)(e=>!0===e))}class xo{constructor(e){this.segmentGroup=e||null}}class xp{constructor(e){this.urlTree=e}}function Ua(n){return le(new xo(n))}function aw(n){return le(new xp(n))}class Zc{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new h.vHH(4002,!1)}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return Ct(r);if(s.numberOfChildren>1||!s.children[Qt])return le(new h.vHH(4e3,!1));s=s.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new jc(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&u.startsWith(":")){const g=u.substring(1);r[s]=t[g]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return Object.entries(t.children).forEach(([g,_])=>{l[g]=this.createSegmentGroup(e,_,r,s)}),new Vn(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new h.vHH(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const Jy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cT(n,e,t,r,s){const u=Xy(n,e,t);return u.matched?(r=function kx(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Ap(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?Ct(s.map(l=>{const g=qc(l,n);return Ur(function rT(n){return n&&vn(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Va(),Mp()):Ct(!0)}(r,e,t).pipe((0,gt.U)(l=>!0===l?u:{...Jy}))):Ct(u)}function Xy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Jy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||Rb)(t,n,e);if(!s)return{...Jy};const u={};Object.entries(s.posParams??{}).forEach(([g,_])=>{u[g]=_.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function Rp(n,e,t,r){return t.length>0&&function lw(n,e,t){return t.some(r=>tv(n,e,r)&&Es(r)!==Qt)}(n,t,r)?{segmentGroup:new Vn(e,lT(r,new Vn(t,n.children))),slicedSegments:[]}:0===t.length&&function ev(n,e,t){return t.some(r=>tv(n,e,r))}(n,t,r)?{segmentGroup:new Vn(n.segments,cw(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Vn(n.segments,n.children),slicedSegments:t}}function cw(n,e,t,r,s){const u={};for(const l of r)if(tv(n,t,l)&&!s[Es(l)]){const g=new Vn([],{});u[Es(l)]=g}return{...s,...u}}function lT(n,e){const t={};t[Qt]=e;for(const r of n)if(""===r.path&&Es(r)!==Qt){const s=new Vn([],{});t[Es(r)]=s}return t}function tv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Hx{constructor(e,t,r,s,u,l,g){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g,this.allowRedirects=!0,this.applyRedirects=new Zc(this.urlSerializer,this.urlTree)}noMatchError(e){return new h.vHH(4002,!1)}recognize(){const e=Rp(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Qt).pipe(Di(t=>{if(t instanceof xp)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof xo?this.noMatchError(t):t}),(0,gt.U)(t=>{const r=new Hy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Qt,this.rootComponentType,null,{}),s=new sa(r,t),u=new Gb("",s),l=function LE(n,e,t=null,r=null){return Fy(Fa(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return l.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(l),this.inheritParamsAndData(u._root),{state:u,tree:l}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Qt).pipe(Di(r=>{throw r instanceof xo?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=ZE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s,!0)}processChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Zn.D)(s).pipe(Qs(u=>{const l=r.children[u],g=function Xb(n,e){const t=n.filter(r=>Es(r)===e);return t.push(...n.filter(r=>Es(r)!==e)),t}(t,u);return this.processSegmentGroup(e,g,l,u)}),To((u,l)=>(u.push(...l),u)),ys(null),function _s(n,e){const t=arguments.length>=2;return r=>r.pipe(n?mn((s,u)=>n(s,u,r)):xu.y,So(1),t?ys(e):Nu(()=>new p))}(),(0,jr.z)(u=>{if(null===u)return Ua(r);const l=dw(u);return function zx(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(l),Ct(l)}))}processSegment(e,t,r,s,u,l){return(0,Zn.D)(t).pipe(Qs(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,l).pipe(Di(_=>{if(_ instanceof xo)return Ct(null);throw _}))),vs(g=>!!g),Di(g=>{if(Tp(g))return function dT(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?Ct([]):Ua(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,l,g){return function $x(n,e,t,r){return!!(Es(n)===r||r!==Qt&&tv(e,t,n))&&("**"===n.path||Xy(e,n,t).matched)}(r,s,u,l)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,l,g):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,l):Ua(s):Ua(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?aw(u):this.applyRedirects.lineralizeSegments(r,u).pipe((0,jr.z)(l=>{const g=new Vn(l,{});return this.processSegment(e,t,g,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:g,consumedSegments:_,remainingSegments:D,positionalParamSegments:b}=Xy(t,s,u);if(!g)return Ua(t);const R=this.applyRedirects.applyRedirectCommands(_,s.redirectTo,b);return s.redirectTo.startsWith("/")?aw(R):this.applyRedirects.lineralizeSegments(s,R).pipe((0,jr.z)($=>this.processSegment(e,r,t,$.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u,l){let g;if("**"===r.path){const _=s.length>0?AE(s).parameters:{};g=Ct({snapshot:new Hy(s,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pp(r),Es(r),r.component??r._loadedComponent??null,r,Yc(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else g=cT(t,r,s,e).pipe((0,gt.U)(({matched:_,consumedSegments:D,remainingSegments:b,parameters:R})=>_?{snapshot:new Hy(D,R,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pp(r),Es(r),r.component??r._loadedComponent??null,r,Yc(r)),consumedSegments:D,remainingSegments:b}:null));return g.pipe(Rr(_=>null===_?Ua(t):this.getChildConfig(e=r._injector??e,r,s).pipe(Rr(({routes:D})=>{const b=r._loadedInjector??e,{snapshot:R,consumedSegments:$,remainingSegments:Q}=_,{segmentGroup:me,slicedSegments:He}=Rp(t,$,Q,D);if(0===He.length&&me.hasChildren())return this.processChildren(b,D,me).pipe((0,gt.U)(nt=>null===nt?null:[new sa(R,nt)]));if(0===D.length&&0===He.length)return Ct([new sa(R,[])]);const We=Es(r)===u;return this.processSegment(b,D,me,He,We?Qt:u,!0).pipe((0,gt.U)(nt=>[new sa(R,nt)]))}))))}getChildConfig(e,t,r){return t.children?Ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function aT(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?Ct(!0):Ct(s.map(l=>{const g=qc(l,n);return Ur(function tw(n){return n&&vn(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Va(),Mp())}(e,t,r).pipe((0,jr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Wr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function uw(n){return le(Zb(!1,3))}())):Ct({routes:[],injector:e})}}function Np(n){const e=n.value.routeConfig;return e&&""===e.path}function dw(n){const e=[],t=new Set;for(const r of n){if(!Np(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=dw(r.children);e.push(new sa(r.value,s))}return e.filter(r=>!t.has(r))}function Pp(n){return n.data||{}}function Yc(n){return n.resolve||{}}function kp(n){return"string"==typeof n.title||null===n.title}function Qc(n){return Rr(e=>{const t=n(e);return t?(0,Zn.D)(t).pipe((0,gt.U)(()=>e)):Ct(e)})}const ih=new h.OlP("ROUTES");let sh=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Ur(t.loadComponent()).pipe((0,gt.U)(sv),(0,Wr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Pu(()=>{this.componentLoaders.delete(t)})),s=new ln(r,()=>new Ui.x).pipe(bt());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,D;return Array.isArray(g)?D=g:(_=g.create(t).injector,D=_.get(ih,[],h.XFs.Self|h.XFs.Optional).flat()),{routes:D.map(Gy),injector:_}}),Pu(()=>{this.childrenLoaders.delete(r)})),l=new ln(u,()=>new Ui.x).pipe(bt());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Ur(t()).pipe((0,gt.U)(sv),(0,jr.z)(r=>r instanceof h.YKP||Array.isArray(r)?Ct(r):(0,Zn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sv(n){return function iv(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Fp=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ui.x,this.configLoader=(0,h.f3M)(sh),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(ku),this.rootContexts=(0,h.f3M)(Gc),this.inputBindingEnabled=null!==(0,h.f3M)(Ep,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new Px(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new $b(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Ii({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ia,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mn(r=>0!==r.id),(0,gt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Rr(r=>{let s=!1,u=!1;return Ct(r).pipe((0,Wr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Rr(l=>{const g=t.browserUrlTree.toString(),_=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!_&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const b="";return this.events.next(new Jd(l.id,t.serializeUrl(r.rawUrl),b,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ye.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return pw(l.source)&&(t.browserUrlTree=l.extractedUrl),Ct(l).pipe(Rr(b=>{const R=this.transitions?.getValue();return this.events.next(new pp(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),R!==this.transitions?.getValue()?Ye.E:Promise.resolve(b)}),function nv(n,e,t,r,s,u){return(0,jr.z)(l=>function hT(n,e,t,r,s,u,l="emptyOnly"){return new Hx(n,e,t,r,s,l,u).recognize()}(n,e,t,r,l.extractedUrl,s,u).pipe((0,gt.U)(({state:g,tree:_})=>({...l,targetSnapshot:g,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Wr.b)(b=>{if(r.targetSnapshot=b.targetSnapshot,r.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!b.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);t.setBrowserUrl($,b)}t.browserUrlTree=b.urlAfterRedirects}const R=new zE(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(R)}));if(_&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:b,extractedUrl:R,source:$,restoredState:Q,extras:me}=l,He=new pp(b,this.urlSerializer.serialize(R),$,Q);this.events.next(He);const We=KE(0,this.rootComponentType).snapshot;return Ct(r={...l,targetSnapshot:We,urlAfterRedirects:R,extras:{...me,skipLocationChange:!1,replaceUrl:!1}})}{const b="";return this.events.next(new Jd(l.id,t.serializeUrl(r.extractedUrl),b,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Ye.E}}),(0,Wr.b)(l=>{const g=new yp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,gt.U)(l=>r={...l,guards:tT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function sT(n,e){return(0,jr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Ct({...t,guardsResult:!0}):function Yy(n,e,t,r){return(0,Zn.D)(n).pipe((0,jr.z)(s=>function Sp(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Ct(u.map(g=>{const _=fr(e)??s,D=qc(g,_);return Ur(function Ky(n){return n&&vn(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):_.runInContext(()=>D(n,e,t,r))).pipe(vs())})).pipe(Va()):Ct(!0)}(s.component,s.route,t,e,r)),vs(s=>!0!==s,!0))}(l,r,s,n).pipe((0,jr.z)(g=>g&&function th(n){return"boolean"==typeof n}(g)?function sw(n,e,t,r){return(0,Zn.D)(e).pipe(Qs(s=>T(function Lu(n,e){return null!==n&&e&&e(new Hb(n)),Ct(!0)}(s.route.parent,r),function ow(n,e){return null!==n&&e&&e(new zb(n)),Ct(!0)}(s.route,r),function Qy(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function nT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>P(()=>Ct(l.guards.map(_=>{const D=fr(l.node)??t,b=qc(_,D);return Ur(function rw(n){return n&&vn(n.canActivateChild)}(b)?b.canActivateChild(r,n):D.runInContext(()=>b(r,n))).pipe(vs())})).pipe(Va())));return Ct(u).pipe(Va())}(n,s.path,t),function oT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ct(!0);const s=r.map(u=>P(()=>{const l=fr(e)??t,g=qc(u,l);return Ur(function nw(n){return n&&vn(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(vs())}));return Ct(s).pipe(Va())}(n,s.route,t))),vs(s=>!0!==s,!0))}(r,u,n,e):Ct(g)),(0,gt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Wr.b)(l=>{if(r.guardsResult=l.guardsResult,na(l.guardsResult))throw Kb(0,l.guardsResult);const g=new Uy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),mn(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),Qc(l=>{if(l.guards.canActivateChecks.length)return Ct(l).pipe((0,Wr.b)(g=>{const _=new Hc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}),Rr(g=>{let _=!1;return Ct(g).pipe(function rv(n,e){return(0,jr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return Ct(t);let u=0;return(0,Zn.D)(s).pipe(Qs(l=>function nh(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!kp(s)&&(u[Vc]=s.title),function Op(n,e,t,r){const s=function rh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return Ct({});const u={};return(0,Zn.D)(s).pipe((0,jr.z)(l=>function fw(n,e,t,r){const s=fr(e)??r,u=qc(n,s);return Ur(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(vs(),(0,Wr.b)(g=>{u[l]=g}))),So(1),function Ty(n){return(0,gt.U)(()=>n)}(u),Di(l=>Tp(l)?Ye.E:le(l)))}(u,n,e,r).pipe((0,gt.U)(l=>(n._resolvedData=l,n.data=ZE(n,t).resolve,s&&kp(s)&&(n.data[Vc]=s.title),null)))}(l.route,r,n,e)),(0,Wr.b)(()=>u++),So(1),(0,jr.z)(l=>u===s.length?Ct(t):Ye.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Wr.b)({next:()=>_=!0,complete:()=>{_||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Wr.b)(g=>{const _=new jb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(_)}))}),Qc(l=>{const g=_=>{const D=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(_.routeConfig).pipe((0,Wr.b)(b=>{_.component=b}),(0,gt.U)(()=>{})));for(const b of _.children)D.push(...g(b));return D};return Fc(g(l.targetSnapshot.root)).pipe(ys(),$r(1))}),Qc(()=>this.afterPreactivation()),(0,gt.U)(l=>{const g=function oa(n,e,t){const r=aa(n,e._root,t?t._root:void 0);return new qE(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,Wr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t,r)=>(0,gt.U)(s=>(new Wy(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),$r(1),(0,Wr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Fu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Pu(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Di(l=>{if(u=!0,Dp(l)){Yb(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new gp(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),Yb(l)){const _=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||pw(r.source)};t.scheduleNavigation(_,ia,null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new mp(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(_){r.reject(_)}}return Ye.E}))}))}cancelNavigationTransition(t,r,s){const u=new gp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pw(n){return n!==ia}let ov=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Qt);return r}getResolvedTitleForRoute(t){return t.data[Vc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(gw)},providedIn:"root"}),n})(),gw=(()=>{class n extends ov{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Gx)},providedIn:"root"}),n})();class pT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Gx=(()=>{class n extends pT{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lp=new h.OlP("",{providedIn:"root",factory:()=>({})});let av=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(uv)},providedIn:"root"}),n})(),uv=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ws=(()=>((ws=ws||{})[ws.COMPLETE=0]="COMPLETE",ws[ws.FAILED=1]="FAILED",ws[ws.REDIRECTING=2]="REDIRECTING",ws))();function cv(n,e){n.events.pipe(mn(t=>t instanceof Fu||t instanceof gp||t instanceof mp||t instanceof Jd),(0,gt.U)(t=>t instanceof Fu||t instanceof Jd?ws.COMPLETE:t instanceof gp&&(0===t.code||1===t.code)?ws.REDIRECTING:ws.FAILED),mn(t=>t!==ws.REDIRECTING),$r(1)).subscribe(()=>{e()})}function lv(n){throw n}function Vp(n,e,t){return e.parse("/")}const gT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Is=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Lp,{optional:!0})||{},this.pendingTasks=(0,h.f3M)(h.HDt),this.errorHandler=this.options.errorHandler||lv,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Vp,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(av),this.routeReuseStrategy=(0,h.f3M)(fT),this.titleStrategy=(0,h.f3M)(ov),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,h.f3M)(ih,{optional:!0})?.flat()??[],this.navigationTransitions=(0,h.f3M)(Fp),this.urlSerializer=(0,h.f3M)(ku),this.location=(0,h.f3M)(he),this.componentInputBindingEnabled=!!(0,h.f3M)(Ep,{optional:!0}),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new jc,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=KE(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ia,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const _={...s};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Gy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:_}=r,D=_?this.currentUrlTree.fragment:l;let R,b=null;switch(g){case"merge":b={...this.currentUrlTree.queryParams,...u};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=u||null}null!==b&&(b=this.removeEmptyProps(b));try{R=Fa(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),R=this.currentUrlTree.root}return Fy(R,t,b,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=na(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,ia,null,r)}navigate(t,r={skipLocationChange:!1}){return function yw(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new h.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...gT}:!1===r?{...mw}:r,na(t))return up(this.currentUrlTree,t,s);const u=this.parseUrl(t);return up(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let g,_,D;l?(g=l.resolve,_=l.reject,D=l.promise):D=new Promise((R,$)=>{g=R,_=$});const b=this.pendingTasks.add();return cv(this,()=>{Promise.resolve().then(()=>this.pendingTasks.remove(b))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:_,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _w{}let yT=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(mn(t=>t instanceof Fu),Qs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,Zn.D)(s).pipe((0,m.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ct(null);const u=s.pipe((0,jr.z)(l=>null===l?Ct(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Zn.D)([u,l]).pipe((0,m.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Is),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(_w),h.LFG(sh))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bp=new h.OlP("");let Ew=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Jd&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Xd&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Xd(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ro(n,e){return{\u0275kind:n,\u0275providers:e}}function _T(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Is),s=n.get($p);1===n.get(Ba)&&r.initialNavigation(),n.get(bw,null,h.XFs.Optional)?.setUpPreloading(),n.get(Bp,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const $p=new h.OlP("",{factory:()=>new Ui.x}),Ba=new h.OlP("",{providedIn:"root",factory:()=>1}),bw=new h.OlP("");function wT(n){return Ro(0,[{provide:bw,useExisting:yT},{provide:_w,useExisting:n}])}const Vu=new h.OlP("ROUTER_FORROOT_GUARD"),ca=[he,{provide:ku,useClass:Hd},Is,Gc,{provide:Ao,useFactory:function ww(n){return n.routerState.root},deps:[Is]},sh,[]];function Tw(){return new h.PXZ("Router",Is)}let CT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[ca,[],{provide:ih,multi:!0,useValue:t},{provide:Vu,useFactory:Sw,deps:[[Is,new h.FiY,new h.tp0]]},{provide:Lp,useValue:r||{}},r?.useHash?{provide:xe,useClass:Et}:{provide:xe,useClass:Qe},{provide:Bp,useFactory:()=>{const n=(0,h.f3M)(Zi),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Lp),r=(0,h.f3M)(Fp),s=(0,h.f3M)(ku);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Ew(s,r,n,e,t)}},r?.preloadingStrategy?wT(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:Tw},r?.initialNavigation?Mw(r):[],r?.bindToComponentInputs?Ro(8,[wp,{provide:Ep,useExisting:wp}]).\u0275providers:[],[{provide:TT,useFactory:_T},{provide:h.tb,multi:!0,useExisting:TT}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ih,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Vu,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Sw(n){return"guarded"}function Mw(n){return["disabled"===n.initialNavigation?Ro(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Is);return()=>{e.setUpLocationChangeListener()}}},{provide:Ba,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ro(2,[{provide:Ba,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(Ce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Is),u=e.get($p);cv(s,()=>{r(!0)}),e.get(Fp).afterPreactivation=()=>(r(!0),u.closed?Ct(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const TT=new h.OlP(""),xw=[];let Jx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[CT.forRoot(xw),CT]}),n})();var dn=F(3324),ro=F(259);class Jc{constructor(e){return e}}class hv{constructor(){return(0,ro.C6)()}}const zp=new h.OlP("angularfire2._apps"),PT={provide:Jc,useFactory:function NT(n){return n&&1===n.length?n[0]:new Jc((0,ro.Mq)())},deps:[[new h.FiY,zp]]},OT={provide:hv,deps:[[new h.FiY,zp]]};function Xx(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Jc(r)}}let Rw=(()=>{class n{constructor(t){(0,ro.KN)("angularfire",dn.q4.full,"core"),(0,ro.KN)("angularfire",dn.q4.full,"app"),(0,ro.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[PT,OT]}),n})();function Nw(n,...e){return{ngModule:Rw,providers:[{provide:zp,useFactory:Xx(n),multi:!0,deps:[h.R0b,h.zs3,dn.HU,...e]}]}}const FT=(0,dn.u3)(ro.ZF,!0);var Ee=F(5861),ja=F(6881),Xc=F(4859),En=F(2090),No=F(1877);const Gp=new Map,Wp={activated:!1,tokenObservers:[]},LT={initialized:!1,enabled:!1};function Nr(n){return Gp.get(n)||Object.assign({},Wp)}function lh(){return LT}const pv="https://content-firebaseappcheck.googleapis.com/v1",jT="exchangeDebugToken",gv={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class $T{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new En.BH,yield function HT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new En.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const hi=new En.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function kw(n){if(!Nr(n).activated)throw hi.create("use-before-activation",{appName:n.name})}function Kp(n,e){return mv.apply(this,arguments)}function mv(){return(mv=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const R=yield s.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(R){throw hi.create("fetch-network-error",{originalErrorMessage:R?.message})}if(200!==l.status)throw hi.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(R){throw hi.create("fetch-parse-error",{originalErrorMessage:R?.message})}const _=g.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const D=1e3*Number(_[1]),b=Date.now();return{token:g.token,expireTimeMillis:b+D,issuedAtTimeMillis:b}})).apply(this,arguments)}function Lw(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${pv}/projects/${t}/apps/${r}:${jT}?key=${s}`,body:{debug_token:e}}}const GT="firebase-app-check-database",yv=1,fh="firebase-app-check-store";let Zp=null;function Ev(){return(Ev=(0,Ee.Z)(function*(n,e){const r=(yield function Uw(){return Zp||(Zp=new Promise((n,e)=>{try{const t=indexedDB.open(GT,yv);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(hi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(fh,{keyPath:"compositeKey"})}}catch(t){e(hi.create("storage-open",{originalErrorMessage:t?.message}))}}),Zp)}()).transaction(fh,"readwrite"),u=r.objectStore(fh).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=_=>{l()},r.onerror=_=>{var D;g(hi.create("storage-set",{originalErrorMessage:null===(D=_.target.error)||void 0===D?void 0:D.message}))}})})).apply(this,arguments)}const Bu=new No.Yd("@firebase/app-check");function Jp(n,e){return(0,En.hl)()?function Po(n,e){return function _v(n,e){return Ev.apply(this,arguments)}(function ph(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Bu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function gh(){return lh().enabled}function io(){return Iv.apply(this,arguments)}function Iv(){return(Iv=(0,Ee.Z)(function*(){const n=lh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Dv={error:"UNKNOWN_ERROR"};function ZT(n){return En.US.encodeString(JSON.stringify(n),!1)}function eg(n){return Cv.apply(this,arguments)}function Cv(){return(Cv=(0,Ee.Z)(function*(n,e=!1){const t=n.app;kw(t);const r=Nr(t);let u,s=r.token;if(s&&!nl(s)&&(r.token=void 0,s=void 0),!s){const _=yield r.cachedTokenPromise;_&&(nl(_)?s=_:yield Jp(t,void 0))}if(!e&&s&&nl(s))return{token:s.token};let g,l=!1;if(gh()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Kp(Lw(t,yield io()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield Jp(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Nr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Bu.warn(_.message):Bu.error(_),u=_}return s?u?g=nl(s)?{token:s.token,internalError:u}:mh(u):(g={token:s.token},r.token=s,yield Jp(t,s)):g=mh(u),l&&function QT(n,e){const t=Nr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g})).apply(this,arguments)}function YT(n){return tg.apply(this,arguments)}function tg(){return(tg=(0,Ee.Z)(function*(n){const e=n.app;kw(e);const{provider:t}=Nr(e);if(gh()){const r=yield io(),{token:s}=yield Kp(Lw(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function el(n,e){const t=Nr(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function tl(n){const{app:e}=n,t=Nr(e);let r=t.tokenRefresher;r||(r=function ng(n){const{app:e}=n;return new $T((0,Ee.Z)(function*(){let r;if(r=Nr(e).token?yield eg(n,!0):yield eg(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Nr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},gv.RETRIAL_MIN_WAIT,gv.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function nl(n){return n.expireTimeMillis-Date.now()>0}function mh(n){return{token:ZT(Dv),error:n}}class JT{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Nr(this.app);for(const t of e)el(this.app,t.next);return Promise.resolve()}}const Yw="app-check-internal";!function aS(){(0,ja._registerComponent)(new Xc.wA("app-check",n=>function XT(n,e){return new JT(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Yw).initialize()})),(0,ja._registerComponent)(new Xc.wA(Yw,n=>function eS(n){return{getToken:e=>eg(n,e),getLimitedUseToken:()=>YT(n),addTokenListener:e=>function bv(n,e,t,r){const{app:s}=n,u=Nr(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&nl(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),tl(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>tl(n))}(n,"INTERNAL",e),removeTokenListener:e=>el(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ja.registerVersion)("@firebase/app-check","0.8.0")}();class vh{constructor(){return(0,dn.vb)("app-check")}}typeof window<"u"&&window;var _h=F(1389);function sl(n){return new Li.y(function(e){return{unsubscribe:(0,_h.x)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}class ko{constructor(e){return e}}const $a=new h.OlP("angularfire2.auth-instances");function eI(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ko(r)}}const tI={provide:class al{constructor(){return(0,dn.vb)("auth")}},deps:[[new h.FiY,$a]]},nI={provide:ko,useFactory:function ul(n,e){const t=(0,dn.JM)("auth",n,e);return t&&new ko(t)},deps:[[new h.FiY,$a],Jc]};let rI=(()=>{class n{constructor(){(0,ro.KN)("angularfire",dn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[nI,tI]}),n})();function iI(n,...e){return{ngModule:rI,providers:[{provide:$a,useFactory:eI(n),multi:!0,deps:[h.R0b,h.zs3,dn.HU,hv,[new h.FiY,vh],...e]}]}}const sI=(0,dn.u3)(sl,!0),hR=(0,dn.u3)(_h.o,!0);let Ih=(()=>{class n{constructor(){this.rootUrl=""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pI=(()=>{class n{constructor(t,r){this.config=t,this.http=r,this._rootUrl=""}get rootUrl(){return this._rootUrl||this.config.rootUrl}set rootUrl(t){this._rootUrl=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ih),h.LFG(Jo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Lv=new class IS{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};class Dh{constructor(e,t,r,s,u){this.name=e,this.value=t,this.options=r,this.options=r||{},null==this.options.style&&(this.options.style=s),null==this.options.explode&&(this.options.explode=u)}serializeValue(e,t=","){if(null==e)return"";if(e instanceof Array)return e.map(r=>this.serializeValue(r).split(t).join(encodeURIComponent(t))).join(t);if("object"==typeof e){const r=[];for(const s of Object.keys(e)){let u=e[s];null!=u&&(u=this.serializeValue(u).split(t).join(encodeURIComponent(t)),this.options.explode?r.push(`${s}=${u}`):(r.push(s),r.push(u)))}return r.join(t)}return String(e)}}class gI extends Dh{constructor(e,t,r){super(e,t,r,"simple",!1)}append(e){let t=this.value;null==t&&(t="");let r="label"===this.options.style?".":"",s=this.options.explode?""===r?",":r:",",u=!1;return"matrix"===this.options.style&&(r=`;${this.name}=`,this.options.explode&&"object"==typeof t&&(r=";",t instanceof Array?(t=t.map(l=>`${this.name}=${this.serializeValue(l,";")}`),t=t.join(";"),u=!0):(t=this.serializeValue(t,";"),u=!0))),t=r+(u?t:this.serializeValue(t,s)),(e=e.replace(`{${this.name}}`,t)).replace(`{${r}${this.name}${this.options.explode?"*":""}}`,t)}serializeValue(e,t=","){var r="string"==typeof e?encodeURIComponent(e):super.serializeValue(e,t);return(r=(r=r.replace(/%3D/g,"=")).replace(/%3B/g,";")).replace(/%2C/g,",")}}class mI extends Dh{constructor(e,t,r){super(e,t,r,"form",!0)}append(e){if(this.value instanceof Array){if(!this.options.explode)return e.append(this.name,this.serializeValue(this.value,"spaceDelimited"===this.options.style?" ":"pipeDelimited"===this.options.style?"|":","));for(const t of this.value)e=e.append(this.name,this.serializeValue(t))}else if(null!==this.value&&"object"==typeof this.value)if("deepObject"===this.options.style)for(const t of Object.keys(this.value)){const r=this.value[t];null!=r&&(e=e.append(`${this.name}[${t}]`,this.serializeValue(r)))}else if(this.options.explode)for(const t of Object.keys(this.value)){const r=this.value[t];null!=r&&(e=e.append(t,this.serializeValue(r)))}else{const t=[];for(const r of Object.keys(this.value)){const s=this.value[r];null!=s&&(t.push(r),t.push(s))}e=e.append(this.name,this.serializeValue(t))}else null!=this.value&&(e=e.append(this.name,this.serializeValue(this.value)));return e}}class DS extends Dh{constructor(e,t,r){super(e,t,r,"simple",!1)}append(e){if(null!=this.value)if(this.value instanceof Array)for(const t of this.value)e=e.append(this.name,this.serializeValue(t));else e=e.append(this.name,this.serializeValue(this.value));return e}}class Ha{constructor(e,t,r){this.rootUrl=e,this.operationPath=t,this.method=r,this._path=new Map,this._query=new Map,this._header=new Map}path(e,t,r){this._path.set(e,new gI(e,t,r||{}))}query(e,t,r){this._query.set(e,new mI(e,t,r||{}))}header(e,t,r){this._header.set(e,new DS(e,t,r||{}))}body(e,t="application/json"){if(this._bodyContentType=e instanceof Blob?e.type:t,"application/x-www-form-urlencoded"===this._bodyContentType&&null!==e&&"object"==typeof e){const r=[];for(const s of Object.keys(e)){let u=e[s];u instanceof Array||(u=[u]);for(const l of u){const g=this.formDataValue(l);null!==g&&r.push([s,g])}}this._bodyContent=r.map(s=>`${encodeURIComponent(s[0])}=${encodeURIComponent(s[1])}`).join("&")}else if("multipart/form-data"===this._bodyContentType){const r=new FormData;if(null!=e)for(const s of Object.keys(e)){const u=e[s];if(u instanceof Array)for(const l of u){const g=this.formDataValue(l);null!==g&&r.append(s,g)}else{const l=this.formDataValue(u);null!==l&&r.set(s,l)}}this._bodyContent=r}else this._bodyContent=e}formDataValue(e){return null==e?null:e instanceof Blob?e:"object"==typeof e?JSON.stringify(e):String(e)}build(e){e=e||{};let t=this.operationPath;for(const l of this._path.values())t=l.append(t);const r=this.rootUrl+t;let s=new ms({encoder:Lv});for(const l of this._query.values())s=l.append(s);let u=new Vi;e.accept&&(u=u.append("Accept",e.accept));for(const l of this._header.values())u=l.append(u);return this._bodyContentType&&!(this._bodyContent instanceof FormData)&&(u=u.set("Content-Type",this._bodyContentType)),new Do(this.method.toUpperCase(),r,this._bodyContent,{params:s,headers:u,responseType:e.responseType,reportProgress:e.reportProgress,context:e.context})}}let $u=(()=>{class n extends pI{constructor(t,r){super(t,r)}itemsControllerGetItems$Response(t,r){const s=new Ha(this.rootUrl,n.ItemsControllerGetItemsPath,"get");return this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u))}itemsControllerGetItems(t,r){return this.itemsControllerGetItems$Response(t,r).pipe((0,gt.U)(s=>s.body))}itemsControllerAddItem$Response(t,r){const s=new Ha(this.rootUrl,n.ItemsControllerAddItemPath,"post");return t&&s.body(t.body,"application/json"),this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u.clone({body:void 0})))}itemsControllerAddItem(t,r){return this.itemsControllerAddItem$Response(t,r).pipe((0,gt.U)(s=>s.body))}itemsControllerGetBestPairs$Response(t,r){const s=new Ha(this.rootUrl,n.ItemsControllerGetBestPairsPath,"get");return t&&s.query("size",t.size,{}),this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u))}itemsControllerGetBestPairs(t,r){return this.itemsControllerGetBestPairs$Response(t,r).pipe((0,gt.U)(s=>s.body))}itemsControllerGetLastItem$Response(t,r){const s=new Ha(this.rootUrl,n.ItemsControllerGetLastItemPath,"get");return this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u))}itemsControllerGetLastItem(t,r){return this.itemsControllerGetLastItem$Response(t,r).pipe((0,gt.U)(s=>s.body))}itemsControllerGetBestPair$Response(t,r){const s=new Ha(this.rootUrl,n.ItemsControllerGetBestPairPath,"get");return t&&(s.path("id",t.id,{}),s.query("exclude",t.exclude,{})),this.http.request(s.build({responseType:"json",accept:"application/json",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u))}itemsControllerGetBestPair(t,r){return this.itemsControllerGetBestPair$Response(t,r).pipe((0,gt.U)(s=>s.body))}itemsControllerAddRelation$Response(t,r){const s=new Ha(this.rootUrl,n.ItemsControllerAddRelationPath,"post");return t&&s.body(t.body,"application/json"),this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u.clone({body:void 0})))}itemsControllerAddRelation(t,r){return this.itemsControllerAddRelation$Response(t,r).pipe((0,gt.U)(s=>s.body))}itemsControllerDeleteRelation$Response(t,r){const s=new Ha(this.rootUrl,n.ItemsControllerDeleteRelationPath,"delete");return t&&s.body(t.body,"application/json"),this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u.clone({body:void 0})))}itemsControllerDeleteRelation(t,r){return this.itemsControllerDeleteRelation$Response(t,r).pipe((0,gt.U)(s=>s.body))}}return n.ItemsControllerGetItemsPath="/items",n.ItemsControllerAddItemPath="/items",n.ItemsControllerGetBestPairsPath="/items/pairs",n.ItemsControllerGetLastItemPath="/items/last",n.ItemsControllerGetBestPairPath="/items/{id}/bestpair",n.ItemsControllerAddRelationPath="/items/relation",n.ItemsControllerDeleteRelationPath="/items/relation",n.\u0275fac=function(t){return new(t||n)(h.LFG(Ih),h.LFG(Jo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vv(n,e){if(1&n&&(h.TgZ(0,"li"),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Oqu(t.name)}}let yI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-list"]],inputs:{items:"items"},decls:3,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(h.TgZ(0,"div")(1,"ol"),h.YNc(2,Vv,2,1,"li",0),h.qZA()()),2&t&&(h.xp6(2),h.Q6J("ngForOf",r.items))},dependencies:[Wi]}),n})();function Uv(n,e){if(1&n&&(h.TgZ(0,"span",2),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item1.name)}}function vI(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addRelation(s.pair.item1.id,s.pair.item2.id))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item1.name)}}function CS(n,e){1&n&&(h.TgZ(0,"span",2),h._uU(1,"="),h.qZA())}function _I(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.deleteRelation(s.pair.relation.from,s.pair.relation.to))}),h._uU(1,"="),h.qZA()}}function EI(n,e){if(1&n&&(h.TgZ(0,"span",2),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item2.name)}}function wI(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.addRelation(s.pair.item2.id,s.pair.item1.id))}),h._uU(1),h.qZA()}if(2&n){const t=h.oxw();h.xp6(1),h.Oqu(t.pair.item2.name)}}let Bv=(()=>{class n{constructor(t){this.itemsService=t,this.pressed=new h.vpe}addRelation(t,r){if(void 0!==t&&void 0!==r){console.log("adding relation");const s={from:t,to:r};this.itemsService.itemsControllerAddRelation({body:s}).subscribe(()=>{this.pair.relation=s,this.pressed.emit()})}}deleteRelation(t,r){console.log("deleting relation"),this.itemsService.itemsControllerDeleteRelation({body:{from:t,to:r}}).subscribe(()=>{this.pair.relation=void 0,this.pressed.emit()})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pair"]],inputs:{pair:"pair"},outputs:{pressed:"pressed"},decls:6,vars:6,consts:[["class","bold-pair",4,"ngIf"],["class","btn-pair",3,"click",4,"ngIf"],[1,"bold-pair"],[1,"btn-pair",3,"click"]],template:function(t,r){1&t&&(h.YNc(0,Uv,2,1,"span",0),h.YNc(1,vI,2,1,"button",1),h.YNc(2,CS,2,0,"span",0),h.YNc(3,_I,2,0,"button",1),h.YNc(4,EI,2,1,"span",0),h.YNc(5,wI,2,1,"button",1)),2&t&&(h.Q6J("ngIf",r.pair.item1.id===(null==r.pair.relation?null:r.pair.relation.from)),h.xp6(1),h.Q6J("ngIf",r.pair.item1.id!==(null==r.pair.relation?null:r.pair.relation.from)),h.xp6(1),h.Q6J("ngIf",!r.pair.relation),h.xp6(1),h.Q6J("ngIf",!!r.pair.relation),h.xp6(1),h.Q6J("ngIf",r.pair.item2.id===(null==r.pair.relation?null:r.pair.relation.from)),h.xp6(1),h.Q6J("ngIf",r.pair.item2.id!==(null==r.pair.relation?null:r.pair.relation.from)))},dependencies:[Ni],styles:[".bold-pair[_ngcontent-%COMP%]{font-weight:700;margin-right:5px}.btn-pair[_ngcontent-%COMP%]{margin-right:5px}"]}),n})();function bS(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"app-pair",3),h.NdJ("pressed",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.itemPressed())}),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("pair",t)}}let TS=(()=>{class n{constructor(t){this.itemsService=t,this.items=[],this.changes=new h.vpe}ngOnInit(){this.getPairs()}getPairs(){this.itemsService.itemsControllerGetBestPairs({size:5}).subscribe(t=>this.items=t)}itemPressed(){this.changes.emit()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-pairs"]],outputs:{changes:"changes"},decls:8,vars:1,consts:[[4,"ngFor","ngForOf"],[2,"padding-left","20px"],[3,"click"],[3,"pair","pressed"]],template:function(t,r){1&t&&(h.TgZ(0,"h2"),h._uU(1,"Sort list"),h.qZA(),h.TgZ(2,"div")(3,"ul"),h.YNc(4,bS,2,1,"li",0),h.qZA()(),h.TgZ(5,"span",1)(6,"button",2),h.NdJ("click",function(){return r.getPairs()}),h._uU(7,"NEXT"),h.qZA()()),2&t&&(h.xp6(4),h.Q6J("ngForOf",r.items))},dependencies:[Wi,Bv]}),n})(),jv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),la=(()=>{class n extends jv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const oo=new h.OlP("NgValueAccessor"),DI={provide:oo,useExisting:(0,h.Gpc)(()=>Ch),multi:!0},bI=new h.OlP("CompositionEventMode");let Ch=(()=>{class n extends jv{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function CI(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(bI,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([DI]),h.qOj]}),n})();function da(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function bh(n){return null!=n&&"number"==typeof n.length}const wr=new h.OlP("NgValidators"),za=new h.OlP("NgAsyncValidators"),MS=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Hv{static min(e){return function Ga(n){return e=>{if(da(e.value)||da(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function cg(n){return e=>{if(da(e.value)||da(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function TI(n){return da(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function lg(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function AS(n){return da(n.value)||MS.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function xS(n){return e=>da(e.value)||!bh(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function SI(n){return e=>bh(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function MI(n){if(!n)return Th;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(da(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return RI(e)}static composeAsync(e){return Wv(e)}}function Th(n){return null}function AI(n){return null!=n}function Hr(n){return(0,h.QGY)(n)?(0,Zn.D)(n):n}function zv(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function xI(n,e){return e.map(t=>t(n))}function Gv(n){return n.map(e=>function RS(n){return!n.validate}(e)?e:t=>e.validate(t))}function RI(n){if(!n)return null;const e=n.filter(AI);return 0==e.length?null:function(t){return zv(xI(t,e))}}function dg(n){return null!=n?RI(Gv(n)):null}function Wv(n){if(!n)return null;const e=n.filter(AI);return 0==e.length?null:function(t){return function SS(...n){const e=(0,Fs.jO)(n),{args:t,keys:r}=Oa(n),s=new Li.y(u=>{const{length:l}=t;if(!l)return void u.complete();const g=new Array(l);let _=l,D=l;for(let b=0;b<l;b++){let R=!1;(0,Ji.Xf)(t[b]).subscribe((0,xr.x)(u,$=>{R||(R=!0,D--),g[b]=$},()=>_--,void 0,()=>{(!_||!R)&&(D||u.next(r?Ru(r,g):g),u.complete())}))}});return e?s.pipe(Ud(e)):s}(xI(t,e).map(Hr)).pipe((0,gt.U)(zv))}}function Wa(n){return null!=n?Wv(Gv(n)):null}function NI(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PI(n){return n._rawValidators}function qv(n){return n._rawAsyncValidators}function Kv(n){return n?Array.isArray(n)?n:[n]:[]}function Sh(n,e){return Array.isArray(n)?n.includes(e):n===e}function NS(n,e){const t=Kv(e);return Kv(n).forEach(s=>{Sh(t,s)||t.push(s)}),t}function Zv(n,e){return Kv(e).filter(t=>!Sh(n,t))}class hg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=dg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Wa(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class pr extends hg{get formDirective(){return null}get path(){return null}}class qa extends hg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class OI{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Us=(()=>{class n extends OI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(qa,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),Yv=(()=>{class n extends OI{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const cl="VALID",mg="INVALID",ll="PENDING",Hu="DISABLED";function dl(n){return(Ah(n)?n.validators:n)||null}function yg(n,e){return(Ah(e)?e.asyncValidators:n)||null}function Ah(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Jv(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function Xv(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new h.vHH(1002,"")})}class xh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===cl}get invalid(){return this.status===mg}get pending(){return this.status==ll}get disabled(){return this.status===Hu}get enabled(){return this.status!==Hu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(NS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(NS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zv(e,this._rawAsyncValidators))}hasValidator(e){return Sh(this._rawValidators,e)}hasAsyncValidator(e){return Sh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ll,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Hu,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=cl,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===cl||this.status===ll)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hu:cl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ll,this._hasOwnPendingAsyncValidator=!0;const t=Hr(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Hu:this.errors?mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ll)?ll:this._anyControlsHaveStatus(mg)?mg:cl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ah(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function LI(n){return Array.isArray(n)?dg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function VI(n){return Array.isArray(n)?Wa(n):n||null}(this._rawAsyncValidators)}}class hl extends xh{constructor(e,t,r){super(dl(t),yg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Xv(this,0,e),Object.keys(e).forEach(r=>{Jv(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class UI extends hl{}const fl=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>vg}),vg="always";function Rh(n,e,t=vg){e_(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function BS(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BI(n,e)})}(n,e),function $S(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function jS(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BI(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function US(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Eg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ig(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function wg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function e_(n,e){const t=PI(n);null!==e.validator?n.setValidators(NI(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=qv(n);null!==e.asyncValidator?n.setAsyncValidators(NI(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();wg(e._rawValidators,s),wg(e._rawAsyncValidators,s)}function Ig(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=PI(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=qv(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return wg(e._rawValidators,r),wg(e._rawAsyncValidators,r),t}function BI(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function qS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Tg(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Sg=class extends xh{constructor(e=null,t,r){super(dl(t),yg(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ah(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Tg(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Tg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let YS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),r_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const s_=new h.OlP("NgModelWithFormControlWarning"),eM={provide:pr,useExisting:(0,h.Gpc)(()=>Ag)};let Ag=(()=>{class n extends pr{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ig(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Rh(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Eg(t.control||null,t,!1),function GI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function t_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(Eg(r||null,t),(n=>n instanceof Sg)(s)&&(Rh(s,t,this.callSetDisabledState),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function jI(n,e){e_(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function $I(n,e){return Ig(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){e_(this.form,this),this._oldForm&&Ig(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(wr,10),h.Y36(za,10),h.Y36(fl,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([eM]),h.qOj,h.TTD]}),n})();const kh={provide:qa,useExisting:(0,h.Gpc)(()=>zu)};let zu=(()=>{class n extends qa{set isDisabled(t){}constructor(t,r,s,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.name=null,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function bg(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Ch?t=u:function zI(n){return Object.getPrototypeOf(n.constructor)===la}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function Cg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function _g(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(pr,13),h.Y36(wr,10),h.Y36(za,10),h.Y36(oo,10),h.Y36(s_,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([kh]),h.qOj,h.TTD]}),n})(),fD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[r_]}),n})();class pD extends xh{constructor(e,t,r){super(dl(t),yg(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Xv(this,0,e),e.forEach((r,s)=>{Jv(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Og(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let lM=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return Og(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new hl(s,u)}record(t,r=null){const s=this._reduceControls(t);return new UI(s,r)}control(t,r,s){let u={};return this.useNonNullable?(Og(r)?u=r:(u.validators=r,u.asyncValidators=s),new Sg(t,{...u,nonNullable:!0})):new Sg(t,r,s)}array(t,r,s){const u=t.map(l=>this._createControl(l));return new pD(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof Sg||t instanceof xh?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:s_,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:fl,useValue:t.callSetDisabledState??vg}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[fD]}),n})(),u_=(()=>{class n{constructor(t,r){this.formBuilder=t,this.itemService=r,this.changes=new h.vpe,this.form=this.formBuilder.group({name:[null,Hv.required]})}addNewItem(t){this.updateFormValidity(this.form),this.form.valid?this.itemService.itemsControllerAddItem({body:this.form.value}).subscribe(()=>{this.form.reset(),this.changes.emit()}):t.target.blur()}updateFormValidity(t){Object.values(t.controls).forEach(r=>{this.updateFormControlValidity(r)})}updateFormControlValidity(t){t.markAsTouched(),t.markAsDirty(),t.updateValueAndValidity()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(lM),h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-add-item"]],outputs:{changes:"changes"},decls:4,vars:2,consts:[[3,"formGroup"],["formControlName","name","id","name","placeholder","Item",1,"input-item"],[3,"disabled","click"]],template:function(t,r){1&t&&(h.TgZ(0,"form",0),h._UZ(1,"input",1),h.TgZ(2,"button",2),h.NdJ("click",function(u){return r.addNewItem(u)}),h._uU(3,"Add"),h.qZA()()),2&t&&(h.Q6J("formGroup",r.form),h.xp6(2),h.Q6J("disabled",r.form.invalid))},dependencies:[YS,Ch,Us,Yv,Ag,zu],styles:[".input-item[_ngcontent-%COMP%]{margin-right:5px}"]}),n})();function pM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"li")(1,"app-pair",4),h.NdJ("pressed",function(){const u=h.CHM(t).index,l=h.oxw(2);return h.KtG(l.itemPressed(u))}),h.qZA()()}if(2&n){const t=e.$implicit;h.xp6(1),h.Q6J("pair",t)}}function gD(n,e){if(1&n&&(h.TgZ(0,"div")(1,"ul"),h.YNc(2,pM,2,1,"li",3),h.qZA()()),2&n){const t=h.oxw();h.xp6(2),h.Q6J("ngForOf",t.items)}}function gM(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"span",5)(1,"button",6),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.getPairs())}),h._uU(2,"MORE"),h.qZA()()}}function mM(n,e){1&n&&(h.TgZ(0,"h3"),h._uU(1,"Calibrated!"),h.qZA())}let yM=(()=>{class n{constructor(t){this.itemsService=t,this.changes=new h.vpe,this.items=[],this.calibrated=!1,this.changed=!1}ngOnChanges(t){t.lastItem?.currentValue?.id!==t.lastItem?.previousValue?.id&&(console.log(t.lastItem?.currentValue),this.reloadCalibration())}getPairs(){this.getNextBestPair()}itemPressed(t){this.changed=!0,this.changes.emit(),t===this.items.length-1&&this.getNextBestPair()}reloadCalibration(){this.calibrated=!1,this.changed=!1,this.items=[],this.getNextBestPair()}getNextBestPair(){const t=[];t.push(this.lastItem.id),this.items.forEach(r=>t.push(r.item2.id)),this.itemsService.itemsControllerGetBestPair({id:this.lastItem.id,exclude:t}).subscribe(r=>{r?(this.changed=!1,this.items.push(r)):this.calibrated=!0})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-calibrate-item"]],inputs:{lastItem:"lastItem"},outputs:{changes:"changes"},features:[h.TTD],decls:7,vars:4,consts:[[1,"item"],[4,"ngIf"],["style","padding-left: 20px;",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"pair","pressed"],[2,"padding-left","20px"],[3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"h2"),h._uU(1,"Calibrate "),h.TgZ(2,"span",0),h._uU(3),h.qZA()(),h.YNc(4,gD,3,1,"div",1),h.YNc(5,gM,3,0,"span",2),h.YNc(6,mM,2,0,"h3",1)),2&t&&(h.xp6(3),h.Oqu(r.lastItem.name),h.xp6(1),h.Q6J("ngIf",!r.calibrated||!r.changed),h.xp6(1),h.Q6J("ngIf",!r.calibrated),h.xp6(1),h.Q6J("ngIf",r.calibrated&&r.changed))},dependencies:[Wi,Ni,Bv],styles:["h2[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{color:#8d697a}h3[_ngcontent-%COMP%]{color:#7faf54}"]}),n})();var c_=F(6451),vM=F(1144);const _M=["addListener","removeListener"],EM=["addEventListener","removeEventListener"],wM=["on","off"];function Za(n,e,t,r){if((0,Ei.m)(t)&&(r=t,t=void 0),r)return Za(n,e,t).pipe(Ud(r));const[s,u]=function mD(n){return(0,Ei.m)(n.addEventListener)&&(0,Ei.m)(n.removeEventListener)}(n)?EM.map(l=>g=>n[l](e,g,t)):function IM(n){return(0,Ei.m)(n.addListener)&&(0,Ei.m)(n.removeListener)}(n)?_M.map(l_(n,e)):function DM(n){return(0,Ei.m)(n.on)&&(0,Ei.m)(n.off)}(n)?wM.map(l_(n,e)):[];if(!s&&(0,vM.z)(n))return(0,jr.z)(l=>Za(l,e,t))((0,Ji.Xf)(n));if(!s)throw new TypeError("Invalid event target");return new Li.y(l=>{const g=(..._)=>l.next(1<_.length?_:_[0]);return s(g),()=>u(g)})}function l_(n,e){return t=>r=>n[t](e,r)}var CM=F(5032);function Vh(n){return(0,Lr.e)((e,t)=>{(0,Ji.Xf)(n).subscribe((0,xr.x)(t,()=>t.complete(),CM.Z)),!t.closed&&e.subscribe(t)})}const bM=["backdrop"],d_=["dialog"];function h_(n,e){if(1&n&&h._UZ(0,"div",6),2&n){const t=h.oxw(),r=h.MAs(3);h.Q6J("dialogDragEnabled",!0)("dialogDragTarget",r)("dragConstraint",t.config.dragConstraint)}}function yD(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",7),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.closeDialog())}),h.O4$(),h.TgZ(1,"svg",8),h._UZ(2,"path",9),h.qZA()()}}class vl{}class f_ extends vl{constructor(e={}){super(),this.beforeCloseGuards=[],this.mutate(e)}close(e){this.canClose(e).pipe(mn(Boolean)).subscribe({next:()=>this.onClose(e)})}beforeClose(e){this.beforeCloseGuards.push(e)}resetDrag(e){this.onReset(e)}canClose(e){const t=this.beforeCloseGuards.map(r=>r(e)).filter(r=>void 0!==r&&!0!==r).map(r=>"boolean"==typeof r?Ct(r):(0,Zn.D)(r).pipe(mn(s=>!s)));return(0,c_.T)(...t).pipe(ys(!0),vs())}mutate(e){Object.assign(this,e)}asDialogRef(){return this}}function kg(n){return function TM(n){return null==n}(n)?"":function p_(n){return"string"==typeof n}(n)?n:`${n}px`}let g_=(()=>{class n{constructor(){this.dialogDragEnabled=!1,this.host=(0,h.f3M)(h.SBq),this.zone=(0,h.f3M)(h.R0b),this.delta={x:0,y:0},this.offset={x:0,y:0},this.enabled=!0,this.destroy$=new Ui.x}set dialogDragOffset(t){this.reset(t)}ngAfterViewInit(){this.enabled&&this.init()}ngOnChanges(){!this.enabled&&this.dialogDragEnabled&&this.dialogDragTarget&&(this.enabled=!0,this.handle?this.handle.style.setProperty("cursor","move"):this.enabled&&this.init()),this.dialogDragEnabled||(this.enabled=!1,this.handle&&this.handle.style.setProperty("cursor",""))}ngOnDestroy(){this.destroy$.next()}reset(t){const r={x:0,y:0};this.offset={...r,...t},this.delta={...r},this.translate()}setupEvents(){this.zone.runOutsideAngular(()=>{const t=Za(this.handle,"mousedown"),r=Za(document,"mousemove"),s=Za(document,"mouseup");t.pipe(mn(()=>this.enabled),(0,gt.U)(l=>({startX:l.clientX,startY:l.clientY})),Rr(({startX:l,startY:g})=>r.pipe((0,gt.U)(_=>{_.preventDefault(),this.delta={x:_.clientX-l,y:_.clientY-g},"constrain"===this.dragConstraint&&this.checkConstraint()}),Vh(s))),Vh(this.destroy$)).subscribe(()=>{0===this.delta.x&&0===this.delta.y||this.translate()}),s.pipe(mn(()=>this.enabled),mn(()=>0!==this.delta.x||0!==this.delta.y),Vh(this.destroy$)).subscribe(()=>{"bounce"===this.dragConstraint&&(this.checkConstraint(),this.translate()),this.offset.x+=this.delta.x,this.offset.y+=this.delta.y,this.delta={x:0,y:0}})})}translate(){this.target&&this.zone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.target.style.setProperty("transform",`translate(${this.translateX}px, ${this.translateY}px)`)})})}get translateX(){return this.offset.x+this.delta.x}get translateY(){return this.offset.y+this.delta.y}init(){if(!this.dialogDragTarget)throw new Error("You need to specify the drag target");this.handle=this.dialogDragHandle instanceof Element?this.dialogDragHandle:"string"==typeof this.dialogDragHandle&&this.dialogDragHandle?document.querySelector(this.dialogDragHandle):this.host.nativeElement,this.handle&&this.enabled&&this.handle.style.setProperty("cursor","move"),this.target=this.dialogDragTarget instanceof HTMLElement?this.dialogDragTarget:document.querySelector(this.dialogDragTarget),this.setupEvents(),this.translate()}checkConstraint(){const{width:t,height:r}=this.target.getBoundingClientRect(),{innerWidth:s,innerHeight:u}=window,l=this.translateY>0?this.translateY+r/2:this.translateY-r/2,g=u/2,_=this.translateX>0?this.translateX+t/2:this.translateX-t/2,D=s/2;-g>l&&(this.delta.y=r/2-g-this.offset.y),g<l&&(this.delta.y=g-r/2-this.offset.y),-D>_&&(this.delta.x=t/2-D-this.offset.x),D<_&&(this.delta.x=D-t/2-this.offset.x)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["","dialogDraggable",""]],inputs:{dialogDragHandle:"dialogDragHandle",dialogDragTarget:"dialogDragTarget",dialogDragEnabled:"dialogDragEnabled",dialogDragOffset:"dialogDragOffset",dragConstraint:"dragConstraint"},standalone:!0,features:[h.TTD]}),n})();const Ya=new h.OlP("A reference to the document. Useful for iframes that want appends to parent window",{providedIn:"root",factory:()=>(0,h.f3M)(ce)}),Fg=new h.OlP("config",{providedIn:"root",factory:()=>({})});const SM=new h.OlP("Global dialog config token",{providedIn:"root",factory:()=>function vD(){return{id:void 0,container:(0,h.f3M)(Ya).body,backdrop:!0,closeButton:!0,enableClose:!0,draggable:!1,dragConstraint:"none",resizable:!1,size:"md",windowClass:void 0,width:void 0,height:void 0,minHeight:void 0,maxHeight:void 0,data:void 0,vcr:void 0,sizes:{sm:{height:"auto",width:"400px"},md:{height:"auto",width:"560px"},lg:{height:"auto",width:"800px"},fullScreen:{height:"100%",width:"100%"}},onClose:void 0,onOpen:void 0}}()}),Lg=new h.OlP("Nodes inserted into the dialog");let ED=(()=>{class n{constructor(){this.config=(0,h.f3M)(Fg),this.dialogRef=(0,h.f3M)(f_),this.size=this.config.sizes?.[this.config.size||"md"],this.styles={width:kg(this.config.width||this.size?.width),height:kg(this.config.height||this.size?.height),minHeight:kg(this.config.minHeight||this.size?.minHeight),maxHeight:kg(this.config.maxHeight||this.size?.maxHeight)},this.destroy$=new Ui.x,this.nodes=(0,h.f3M)(Lg),this.document=(0,h.f3M)(ce),this.host=(0,h.f3M)(h.SBq).nativeElement,this.dialogService=(0,h.f3M)(wD),this.host.id=this.config.id,this.nodes.forEach(t=>this.host.appendChild(t)),this.config.windowClass&&this.config.windowClass.split(/\s/).filter(r=>r).forEach(r=>this.host.classList.add(r))}ngOnInit(){const t=this.config.backdrop?this.backdrop.nativeElement:this.document.body,r=this.dialogElement.nativeElement,s=Za(t,"click",{capture:!0}).pipe(mn(({target:u})=>!r.contains(u)));if(s.pipe(Vh(this.destroy$)).subscribe(this.dialogRef.backdropClick$),this.config.enableClose&&(0,c_.T)(Za(this.document.body,"keyup").pipe(mn(({key:u})=>"Escape"===u)),s).pipe(Vh(this.destroy$),mn(()=>"onlyLastStrategy"!==this.config.enableClose||this.dialogService.isLastOpened(this.config.id))).subscribe(()=>this.closeDialog()),this.nodes.forEach(u=>r.appendChild(u)),this.config.zIndexGetter){const u=this.config.zIndexGetter().toString();t.style.setProperty("--dialog-backdrop-z-index",u)}}reset(t){this.config.draggable&&this.draggable.reset(t)}closeDialog(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.dialogRef=null,this.nodes=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ngneat-dialog"]],viewQuery:function(t,r){if(1&t&&(h.Gf(bM,7),h.Gf(d_,7),h.Gf(g_,5)),2&t){let s;h.iGM(s=h.CRH())&&(r.backdrop=s.first),h.iGM(s=h.CRH())&&(r.dialogElement=s.first),h.iGM(s=h.CRH())&&(r.draggable=s.first)}},standalone:!0,features:[h.jDz],decls:6,vars:8,consts:[[1,"ngneat-dialog-backdrop",3,"hidden"],["backdrop",""],["role","dialog",1,"ngneat-dialog-content",3,"ngStyle"],["dialog",""],["class","ngneat-drag-marker","dialogDraggable","",3,"dialogDragEnabled","dialogDragTarget","dragConstraint",4,"ngIf"],["class","ngneat-close-dialog",3,"click",4,"ngIf"],["dialogDraggable","",1,"ngneat-drag-marker",3,"dialogDragEnabled","dialogDragTarget","dragConstraint"],[1,"ngneat-close-dialog",3,"click"],["viewBox","0 0 329.26933 329","xmlns","http://www.w3.org/2000/svg"],["fill","currentColor","d","m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0,1)(2,"div",2,3),h.YNc(4,h_,1,3,"div",4),h.YNc(5,yD,3,0,"div",5),h.qZA()()),2&t&&(h.ekj("ngneat-dialog-backdrop-visible",r.config.backdrop),h.Q6J("hidden",!r.config.backdrop),h.xp6(2),h.ekj("ngneat-dialog-resizable",r.config.resizable),h.Q6J("ngStyle",r.styles),h.xp6(2),h.Q6J("ngIf",r.config.draggable),h.xp6(1),h.Q6J("ngIf",r.config.closeButton))},dependencies:[g_,Pi,Ni,Xe],styles:[".ngneat-dialog-content{display:flex;flex-direction:column;overflow:hidden;position:relative;animation:dialog-open .4s cubic-bezier(.25,.8,.25,1);border-radius:var(--dialog-content-border-radius, 4px);box-sizing:border-box;box-shadow:var(--dialog-content-box-shadow, 0px 11px 19px rgba(15, 20, 58, .14));background:var(--dialog-content-bg, #fff);width:auto;max-width:100%;height:auto;max-height:100%}@keyframes dialog-open{0%{transform:translate(50px)}to{transform:none}}.ngneat-dialog-content.ngneat-dialog-resizable{resize:both}.ngneat-dialog-backdrop{position:fixed;display:flex;align-items:center;justify-content:center;inset:0;height:100%;width:100%;padding:30px;z-index:var(--dialog-backdrop-z-index, 1050);background-color:transparent;animation:dialog-open-backdrop .3s}.ngneat-dialog-backdrop.ngneat-dialog-backdrop-visible{background:var(--dialog-backdrop-bg, rgba(0, 0, 0, .32))}@keyframes dialog-open-backdrop{0%{opacity:0}to{opacity:1}}.ngneat-drag-marker{position:absolute;left:0;top:0;cursor:move;width:100%;height:10px}.ngneat-close-dialog{display:flex;align-items:center;justify-content:center;position:absolute;cursor:pointer;top:var(--dialog-close-btn-top, 6px);right:var(--dialog-close-btn-right, 10px);width:var(--dialog-close-btn-size, 30px);height:var(--dialog-close-btn-size, 30px);color:var(--dialog-close-btn-color, #5f6368);transition:all .2s ease-in-out;border-radius:50%}.ngneat-close-dialog svg{width:var(--dialog-close-svg-size, 12px);height:var(--dialog-close-svg-size, 12px)}.ngneat-close-dialog:hover{color:var(--dialog-close-btn-color-hover, #5f6368);background-color:var(--dialog-close-btn-bg-hover, #eee)}body.ngneat-dialog-hidden{overflow:hidden}\n"],encapsulation:2}),n})();const m_="ngneat-dialog-hidden";let wD=(()=>{class n{constructor(){this.appRef=(0,h.f3M)(h.z2F),this.injector=(0,h.f3M)(h.lqb),this.document=(0,h.f3M)(Ya),this.globalConfig=(0,h.f3M)(SM),this.dialogs=[],this.hasOpenDialogSub=new Ii(!1),this.hasOpenDialogs$=this.hasOpenDialogSub.asObservable()}hasOpenDialogs(){return this.dialogs.length>0}isOpen(t){return this.dialogs.some(r=>r.id===t)}isLastOpened(t){const r=t instanceof vl?t.id:t;return this.dialogs.at(-1)?.id===r}closeAll(){this.dialogs.forEach(t=>t.close())}open(t,r={}){const s=this.mergeConfig(r);s.onOpen?.();const u=new f_({id:s.id,data:s.data,backdropClick$:new Ui.x});this.throwIfIDAlreadyExists(s.id);const l={config:s,dialogRef:u};return this.dialogs.push(u),this.hasOpenDialogSub.next(!0),1===this.dialogs.length&&this.document.body.classList.add(m_),t instanceof h.Rgc?this.openTemplate(t,l):"function"==typeof t?this.openComponent(t,l):function ID(n){throw new TypeError(`Dialog must receive a Component or a TemplateRef, but this has been passed instead: ${n}`)}(t)}openTemplate(t,{config:r,dialogRef:s}){const u={$implicit:s,config:r},l=r.vcr?.createEmbeddedView(t,u)||t.createEmbeddedView(u);return this.attach({dialogRef:s,config:r,ref:t,view:l,attachToApp:!r.vcr})}openComponent(t,{config:r,dialogRef:s}){const u=(0,h.LMc)(t,{elementInjector:h.zs3.create({providers:[{provide:vl,useValue:s},{provide:Fg,useValue:r}],parent:r.vcr?.injector||this.injector}),environmentInjector:this.injector});return this.attach({dialogRef:s,config:r,ref:u,view:u.hostView,attachToApp:!0})}attach({dialogRef:t,config:r,ref:s,view:u,attachToApp:l}){const g=this.createDialog(r,t,u),_=r.container instanceof h.SBq?r.container.nativeElement:r.container,D={after:new Ui.x};return t.mutate({id:r.id,data:r.data,ref:s,onClose:$=>{this.globalConfig.onClose?.(),this.dialogs=this.dialogs.filter(({id:Q})=>t.id!==Q),this.hasOpenDialogSub.next(this.hasOpenDialogs()),_.removeChild(g.location.nativeElement),this.appRef.detachView(g.hostView),this.appRef.detachView(u),g.destroy(),u.destroy(),t.backdropClick$.complete(),t.mutate({ref:null,onClose:null,afterClosed$:null,backdropClick$:null,beforeCloseGuards:null,onReset:null}),D.after.next($),D.after.complete(),0===this.dialogs.length&&this.document.body.classList.remove(m_)},afterClosed$:D.after.asObservable(),onReset:$=>{g.instance.reset($)}}),_.appendChild(g.location.nativeElement),this.appRef.attachView(g.hostView),l&&this.appRef.attachView(u),t.asDialogRef()}createDialog(t,r,s){return(0,h.LMc)(ED,{elementInjector:h.zs3.create({providers:[{provide:f_,useValue:r},{provide:Lg,useValue:s.rootNodes},{provide:Fg,useValue:t}],parent:this.injector}),environmentInjector:this.injector})}mergeConfig(t){return{...this.globalConfig,id:`dialog-${Math.random().toString(36).substring(7)}`,...t,sizes:this.globalConfig?.sizes}}throwIfIDAlreadyExists(t){if(this.dialogs.find(r=>r.id===t))throw new Error(`Please, ID must be unique, but there is already a dialog created with this ID: ${t}`)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Uh=F(5363),DD=F(6063);class xM extends Ui.x{constructor(e=1/0,t=1/0,r=DD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let g=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)g=_;g&&r.splice(0,g+1)}}}var RM=F(3099);function CD(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,RM.B)({connector:()=>new xM(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function bD(n,e){return(0,Ei.m)(e)?Rr(()=>n,e):Rr(()=>n)}var Vg=F(9468),Lo=F(2011);F(9260);const TD=new h.OlP("angularfire2.auth.use-emulator"),OM=new h.OlP("angularfire2.auth.settings"),SD=new h.OlP("angularfire2.auth.tenant-id"),MD=new h.OlP("angularfire2.auth.langugage-code"),AD=new h.OlP("angularfire2.auth.use-device-language"),xD=new h.OlP("angularfire.auth.persistence"),RD=(n,e,t,r,s,u,l,g)=>(0,Lo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=s,u&&_.useDeviceLanguage(),l)for(const[D,b]of Object.entries(l))_.settings[D]=b;return g&&_.setPersistence(g),_},[t,r,s,u,l,g]);let v_=(()=>{class n{constructor(t,r,s,u,l,g,_,D,b,R,$,Q){const me=new Ui.x,He=Ct(void 0).pipe((0,Uh.Q)(l.outsideAngular),Rr(()=>u.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,gt.U)(()=>(0,Lo.on)(t,u,r)),(0,gt.U)(We=>RD(We,u,g,D,b,R,_,$)),CD({bufferSize:1,refCount:!1}));if(Ps(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ct(null);else{He.pipe(vs()).subscribe();const nt=He.pipe(Rr(Bt=>Bt.getRedirectResult().then(xt=>xt,()=>null)),dn.iC,CD({bufferSize:1,refCount:!1})),lt=He.pipe(Rr(Bt=>new Li.y(xt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onAuthStateChanged(pn=>xt.next(pn),pn=>xt.error(pn),()=>xt.complete()))})))),St=He.pipe(Rr(Bt=>new Li.y(xt=>({unsubscribe:u.runOutsideAngular(()=>Bt.onIdTokenChanged(pn=>xt.next(pn),pn=>xt.error(pn),()=>xt.complete()))}))));this.authState=nt.pipe(bD(lt),(0,Vg.R)(l.outsideAngular),(0,Uh.Q)(l.insideAngular)),this.user=nt.pipe(bD(St),(0,Vg.R)(l.outsideAngular),(0,Uh.Q)(l.insideAngular)),this.idToken=this.user.pipe(Rr(Bt=>Bt?(0,Zn.D)(Bt.getIdToken()):Ct(null))),this.idTokenResult=this.user.pipe(Rr(Bt=>Bt?(0,Zn.D)(Bt.getIdTokenResult()):Ct(null))),this.credential=(0,c_.T)(nt,me,this.authState.pipe(mn(Bt=>!Bt))).pipe((0,gt.U)(Bt=>Bt?.user?Bt:null),(0,Vg.R)(l.outsideAngular),(0,Uh.Q)(l.insideAngular))}return(0,Lo.pX)(this,He,u,{spy:{apply:(We,nt,lt)=>{(We.startsWith("signIn")||We.startsWith("createUser"))&&lt.then(St=>me.next(St))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lo.Dh),h.LFG(Lo.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(TD,8),h.LFG(OM,8),h.LFG(SD,8),h.LFG(MD,8),h.LFG(AD,8),h.LFG(xD,8),h.LFG(vh,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();var kM=F(4986);function Ug(){return(0,Lr.e)((n,e)=>{let t,r=!1;n.subscribe((0,xr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function ND(n,e=xu.y){return n=n??FM,(0,Lr.e)((t,r)=>{let s,u=!0;t.subscribe((0,xr.x)(r,l=>{const g=e(l);(u||!n(s,g))&&(u=!1,s=g,r.next(l))}))})}function FM(n,e){return n===e}F(9568);var dt,Bh=F(3942),PD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bs={},Bg=Bg||{},Kt=PD||self;function jg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function jh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var __="closure_uid_"+(1e9*Math.random()>>>0),LM=0;function VM(n,e,t){return n.call.apply(n.bind,arguments)}function UM(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function bi(n,e,t){return(bi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?VM:UM).apply(null,arguments)}function Qa(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ni(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),g=2;g<arguments.length;g++)l[g-2]=arguments[g];return e.prototype[s].apply(r,l)}}function Vo(){this.s=this.s,this.o=this.o}Vo.prototype.s=!1,Vo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function QR(n){Object.prototype.hasOwnProperty.call(n,__)&&n[__]||(n[__]=++LM)}(this)},Vo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const OD=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function $h(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function _l(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(jg(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Ti(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ti.prototype.h=function(){this.defaultPrevented=!0};var BM=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",()=>{},e),Kt.removeEventListener("test",()=>{},e)}catch{}return n}();function Hh(n){return/^[\s\xa0]*$/.test(n)}function Gu(){var n=Kt.navigator;return n&&(n=n.userAgent)?n:""}function ao(n){return-1!=Gu().indexOf(n)}function E_(n){return E_[" "](n),n}E_[" "]=function(){};var wl,n,w_=ao("Opera"),El=ao("Trident")||ao("MSIE"),kD=ao("Edge"),$g=kD||El,FD=ao("Gecko")&&!(-1!=Gu().toLowerCase().indexOf("webkit")&&!ao("Edge"))&&!(ao("Trident")||ao("MSIE"))&&!ao("Edge"),$M=-1!=Gu().toLowerCase().indexOf("webkit")&&!ao("Edge");function I_(){var n=Kt.document;return n?n.documentMode:void 0}e:{var D_="",C_=(n=Gu(),FD?/rv:([^\);]+)(\)|;)/.exec(n):kD?/Edge\/([\d\.]+)/.exec(n):El?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$M?/WebKit\/(\S+)/.exec(n):w_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(C_&&(D_=C_?C_[1]:""),El){var Hg=I_();if(null!=Hg&&Hg>parseFloat(D_)){wl=String(Hg);break e}}wl=D_}var LD=Kt.document&&El&&(I_()||parseInt(wl,10))||void 0;function zh(n,e){if(Ti.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(FD){e:{try{E_(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:VD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&zh.$.h.call(this)}}ni(zh,Ti);var VD={2:"touch",3:"pen",4:"mouse"};zh.prototype.h=function(){zh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Il="closure_listenable_"+(1e6*Math.random()|0),HM=0;function zM(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++HM,this.fa=this.ia=!1}function Dl(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Gh(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Wg(n){const e={};for(const t in n)e[t]=n[t];return e}const qg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function BD(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<qg.length;u++)t=qg[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Kg(n){this.src=n,this.g={},this.h=0}function b_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=OD(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Dl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function T_(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Kg.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=T_(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new zM(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var Zg="closure_lm_"+(1e6*Math.random()|0),Wh={};function S_(n,e,t,r,s){if(r&&r.once)return A_(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)S_(n,e[u],t,r,s);return null}return t=fi(t),n&&n[Il]?n.O(e,t,jh(r)?!!r.capture:!!r,s):M_(n,e,t,!1,r,s)}function M_(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=jh(s)?!!s.capture:!!s,g=Qg(n);if(g||(n[Zg]=g=new Kg(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function jD(){const e=GM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)BM||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(x_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function A_(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)A_(n,e[u],t,r,s);return null}return t=fi(t),n&&n[Il]?n.P(e,t,jh(r)?!!r.capture:!!r,s):M_(n,e,t,!0,r,s)}function $D(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)$D(n,e[u],t,r,s);else r=jh(r)?!!r.capture:!!r,t=fi(t),n&&n[Il]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=T_(u=n.g[e],t,r,s))&&(Dl(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Qg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=T_(e,t,r,s)),(t=-1<n?e[n]:null)&&Yg(t))}function Yg(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Il])b_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(x_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Qg(e))?(b_(t,n),0==t.h&&(t.src=null,e[Zg]=null)):Dl(n)}}}function x_(n){return n in Wh?Wh[n]:Wh[n]="on"+n}function GM(n,e){if(n.fa)n=!0;else{e=new zh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Yg(n),n=t.call(r,e)}return n}function Qg(n){return(n=n[Zg])instanceof Kg?n:null}var R_="__closure_events_fn_"+(1e9*Math.random()>>>0);function fi(n){return"function"==typeof n?n:(n[R_]||(n[R_]=function(e){return n.handleEvent(e)}),n[R_])}function Dr(){Vo.call(this),this.i=new Kg(this),this.S=this,this.J=null}function pi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ti(e,n);else if(e instanceof Ti)e.target=e.target||n;else{var s=e;BD(e=new Ti(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=Jg(l,r,!0,e)&&s}if(s=Jg(l=e.g=n,r,!0,e)&&s,s=Jg(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=Jg(l=e.g=t[u],r,!1,e)&&s}function Jg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,_=l.la||l.src;l.ia&&b_(n.i,l),s=!1!==g.call(_,r)&&s}}return s&&!r.defaultPrevented}ni(Dr,Vo),Dr.prototype[Il]=!0,Dr.prototype.removeEventListener=function(n,e,t,r){$D(this,n,e,t,r)},Dr.prototype.N=function(){if(Dr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dl(t[r]);delete n.g[e],n.h--}}this.J=null},Dr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Dr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var HD=Kt.JSON.stringify;function zD(){var n=O_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Cl=new class JR{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new WM,n=>n.reset());class WM{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function P_(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function qM(n){Kt.setTimeout(()=>{throw n},0)}let bl,qh=!1,O_=new class N_{constructor(){this.h=this.g=null}add(e,t){const r=Cl.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},GD=()=>{const n=Kt.Promise.resolve(void 0);bl=()=>{n.then(k_)}};var k_=()=>{for(var n;n=zD();){try{n.h.call(n.g)}catch(t){qM(t)}var e=Cl;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}qh=!1};function Kh(n,e){Dr.call(this),this.h=n||1,this.g=e||Kt,this.j=bi(this.qb,this),this.l=Date.now()}function F_(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Tl(n,e,t){if("function"==typeof n)t&&(n=bi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=bi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Kt.setTimeout(n,e||0)}function Xg(n){n.g=Tl(()=>{n.g=null,n.i&&(n.i=!1,Xg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ni(Kh,Dr),(dt=Kh.prototype).ga=!1,dt.T=null,dt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),pi(this,"tick"),this.ga&&(F_(this),this.start()))}},dt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.N=function(){Kh.$.N.call(this),F_(this),delete this.g};class XR extends Vo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Xg(this)}N(){super.N(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sl(n){Vo.call(this),this.h=n,this.g={}}ni(Sl,Vo);var WD=[];function L_(n,e,t,r){Array.isArray(t)||(t&&(WD[0]=t.toString()),t=WD);for(var s=0;s<t.length;s++){var u=S_(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Wu(n){Gh(n.g,function(e,t){this.g.hasOwnProperty(t)&&Yg(e)},n),n.g={}}function em(){this.g=!0}function Zh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function eN(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return HD(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Sl.prototype.N=function(){Sl.$.N.call(this),Wu(this)},Sl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},em.prototype.Ea=function(){this.g=!1},em.prototype.info=function(){};var qu={},KD=null;function tm(){return KD=KD||new Dr}function U_(n){Ti.call(this,qu.Ta,n)}function Ml(n){const e=tm();pi(e,new U_(e))}function ZD(n,e){Ti.call(this,qu.STAT_EVENT,n),this.stat=e}function Si(n){const e=tm();pi(e,new ZD(e,n))}function B_(n,e){Ti.call(this,qu.Ua,n),this.size=e}function Yh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},e)}qu.Ta="serverreachability",ni(U_,Ti),qu.STAT_EVENT="statevent",ni(ZD,Ti),qu.Ua="timingevent",ni(B_,Ti);var nm={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},j_={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $_(){}function z_(){}$_.prototype.h=null;var W_,Al={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function rm(){Ti.call(this,"d")}function G_(){Ti.call(this,"c")}function q_(){}function xl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Sl(this),this.P=tN,this.V=new Kh(n=$g?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ZM}function ZM(){this.i=null,this.g="",this.h=!1}ni(rm,Ti),ni(G_,Ti),ni(q_,$_),q_.prototype.g=function(){return new XMLHttpRequest},q_.prototype.i=function(){return{}},W_=new q_;var tN=45e3,YD={},K_={};function QD(n,e,t){n.L=1,n.v=es(Ja(e)),n.s=t,n.S=!0,YM(n,null)}function YM(n,e){n.G=Date.now(),Rl(n),n.A=Ja(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),X_(t.i,"t",r),n.C=0,t=n.l.J,n.h=new ZM,n.g=_0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new XR(bi(n.Pa,n,n.g),n.O)),L_(n.U,n.g,"readystatechange",n.nb),e=n.I?Wg(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Ml(),function qD(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),_=0;_<g.length;_++){var D=g[_].split("=");if(1<D.length){var b=D[0];D=D[1];var R=b.split("_");l=2<=R.length&&"type"==R[1]?l+(b+"=")+D+"&":l+(b+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function QM(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function JM(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=nN(n,t),s==K_){4==e&&(n.o=4,Si(14),r=!1),Zh(n.j,n.m,null,"[Incomplete Response]");break}if(s==YD){n.o=4,Si(15),Zh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zh(n.j,n.m,s,null),Z_(n,s)}QM(n)&&s!=K_&&s!=YD&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Si(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),pC(e),e.M=!0,Si(11))):(Zh(n.j,n.m,t,"[Invalid Chunked Response]"),Bo(n),Jh(n))}function nN(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?K_:(t=Number(e.substring(t,r)),isNaN(t)?YD:(r+=1)+t>e.length?K_:(e=e.slice(r,r+t),n.C=r+t,e))}function Rl(n){n.Y=Date.now()+n.P,im(n,n.P)}function im(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yh(bi(n.lb,n),e)}function Qh(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function Jh(n){0==n.l.H||n.J||sA(n.l,n)}function Bo(n){Qh(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,F_(n.V),Wu(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Z_(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||n0(t.i,n)))if(!n.K&&n0(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;v0(t),lm(t)}fC(t),Si(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=Yh(bi(t.ib,t),6e3));if(1>=t0(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else jo(t,11)}else if((n.K||t.g==n)&&v0(t),!Hh(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let D=s[e];if(t.V=D[0],D=D[1],2==t.H)if("c"==D[0]){t.K=D[1],t.pa=D[2];const b=D[3];null!=b&&(t.ra=b,t.l.info("VER="+t.ra));const R=D[4];null!=R&&(t.Ga=R,t.l.info("SVER="+t.Ga));const $=D[5];null!=$&&"number"==typeof $&&0<$&&(t.L=r=1.5*$,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const me=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(me){var u=r.i;u.g||-1==me.indexOf("spdy")&&-1==me.indexOf("quic")&&-1==me.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(nf(u,u.h),u.h=null))}if(r.F){const He=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;He&&(r.Da=He,gr(r.I,r.F,He))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=yC(r,r.J?r.pa:null,r.Y),l.K){fa(r.i,l);var g=l,_=r.L;_&&g.setTimeout(_),g.B&&(Qh(g),Rl(g)),r.g=l}else hC(r);0<t.j.length&&m0(t)}else"stop"!=D[0]&&"close"!=D[0]||jo(t,7);else 3==t.H&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?jo(t,7):g0(t):"noop"!=D[0]&&t.h&&t.h.Aa(D),t.A=0)}Ml()}catch{}}function XM(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(jg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function iN(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(jg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function rN(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(jg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(dt=xl.prototype).setTimeout=function(n){this.P=n},dt.nb=function(n){n=n.target;const e=this.M;e&&3==Cs(n)?e.l():this.Pa(n)},dt.Pa=function(n){try{if(n==this.g)e:{const b=Cs(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||$g||this.g&&(this.h.h||this.g.ja()||h0(this.g)))){this.J||4!=b||7==e||Ml(),Qh(this);var t=this.g.da();this.ca=t;t:if(QM(this)){var r=h0(this.g);n="";var s=r.length,u=4==Cs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Bo(this),Jh(this);var l="";break t}this.h.i=new Kt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function V_(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,b,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,_=this.g;if((g=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hh(g)){var D=g;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Si(12),Bo(this),Jh(this);break e}Zh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Z_(this,t)}this.S?(JM(this,b,l),$g&&this.i&&3==b&&(L_(this.U,this.V,"tick",this.mb),this.V.start())):(Zh(this.j,this.m,l,null),Z_(this,l)),4==b&&Bo(this),this.i&&!this.J&&(4==b?sA(this.l,this):(this.i=!1,Rl(this)))}else(function cC(n){const e={};n=(n.g&&2<=Cs(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Hh(n[r]))continue;var t=P_(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function UD(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Si(12)):(this.o=0,Si(13)),Bo(this),Jh(this)}}}catch{}},dt.mb=function(){if(this.g){var n=Cs(this.g),e=this.g.ja();this.C<e.length&&(Qh(this),JM(this,n,e),this.i&&4!=n&&Rl(this))}},dt.cancel=function(){this.J=!0,Bo(this)},dt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function KM(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Ml(),Si(17)),Bo(this),this.o=2,Jh(this)):im(this,this.Y-n)};var JD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ku(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ku){this.h=n.h,sm(this,n.j),this.s=n.s,this.g=n.g,Xh(this,n.m),this.l=n.l;var e=n.i,t=new tf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Y_(this,t),this.o=n.o}else n&&(e=String(n).match(JD))?(this.h=!1,sm(this,e[1]||"",!0),this.s=ef(e[2]||""),this.g=ef(e[3]||"",!0),Xh(this,e[4]),this.l=ef(e[5]||"",!0),Y_(this,e[6]||"",!0),this.o=ef(e[7]||"")):(this.h=!1,this.i=new tf(null,this.h))}function Ja(n){return new Ku(n)}function sm(n,e,t){n.j=t?ef(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xh(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Y_(n,e,t){e instanceof tf?(n.i=e,function tC(n,e){e&&!n.j&&(Xa(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(om(this,r),X_(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Zu(e,tA)),n.i=new tf(e,n.h))}function gr(n,e,t){n.i.set(e,t)}function es(n){return gr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ef(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,XD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function XD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ku.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zu(e,eC,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zu(e,eC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zu(t,"/"==t.charAt(0)?Mi:sN,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zu(t,Q_)),n.join("")};var eC=/[#\/\?@]/g,sN=/[#\?:]/g,Mi=/[#\?]/g,tA=/[#\?@]/g,Q_=/#/g;function tf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xa(n){n.g||(n.g=new Map,n.h=0,n.i&&function eA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function om(n,e){Xa(n),e=Nl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function J_(n,e){return Xa(n),e=Nl(n,e),n.g.has(e)}function X_(n,e,t){om(n,e),0<t.length&&(n.i=null,n.g.set(Nl(n,e),$h(t)),n.h+=t.length)}function Nl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function e0(n){this.l=n||rC,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ka&&Kt.g.Ka()&&Kt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=tf.prototype).add=function(n,e){Xa(this),this.i=null,n=Nl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){Xa(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},dt.ta=function(){Xa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},dt.Z=function(n){Xa(this);let e=[];if("string"==typeof n)J_(this,n)&&(e=e.concat(this.g.get(Nl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},dt.set=function(n,e){return Xa(this),this.i=null,J_(this,n=Nl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var rC=10;function iC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function t0(n){return n.h?1:n.g?n.g.size:0}function n0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function nf(n,e){n.g?n.g.add(e):n.h=e}function fa(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function r0(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return $h(n.i)}e0.prototype.cancel=function(){if(this.i=r0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var s0=class{stringify(n){return Kt.JSON.stringify(n,void 0)}parse(n){return Kt.JSON.parse(n,void 0)}};function o0(){this.g=new s0}function nA(n,e,t){const r=t||"";try{XM(n,function(s,u){let l=s;jh(s)&&(l=HD(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function rf(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function sf(n){this.l=n.fc||null,this.j=n.ob||!1}function am(n,e){Dr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=a0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ni(sf,$_),sf.prototype.g=function(){return new am(this.l,this.j)},sf.prototype.i=function(n){return function(){return n}}({}),ni(am,Dr);var a0=0;function sC(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Pl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,um(n)}function um(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=am.prototype).open=function(n,e){if(this.readyState!=a0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,um(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Kt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pl(this)),this.readyState=a0},dt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,um(this)),this.g&&(this.readyState=3,um(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sC(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},dt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Pl(this):um(this),3==this.readyState&&sC(this)}},dt.Za=function(n){this.g&&(this.response=this.responseText=n,Pl(this))},dt.Ya=function(n){this.g&&(this.response=n,Pl(this))},dt.ka=function(){this.g&&Pl(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(am.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var oC=Kt.JSON.parse;function Pr(n){Dr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=u0,this.L=this.M=!1}ni(Pr,Dr);var u0="",aN=/^https?$/i,c0=["POST","PUT"];function l0(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,uC(n),af(n)}function uC(n){n.F||(n.F=!0,pi(n,"complete"),pi(n,"error"))}function d0(n){if(n.h&&typeof Bg<"u"&&(!n.C[1]||4!=Cs(n)||2!=n.da()))if(n.v&&4==Cs(n))Tl(n.La,0,n);else if(pi(n,"readystatechange"),4==Cs(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(JD)[1]||null;!s&&Kt.self&&Kt.self.location&&(s=Kt.self.location.protocol.slice(0,-1)),r=!aN.test(s?s.toLowerCase():"")}t=r}if(t)pi(n,"complete"),pi(n,"success");else{n.m=6;try{var u=2<Cs(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",uC(n)}}finally{af(n)}}}function af(n,e){if(n.g){Yu(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||pi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Yu(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function Cs(n){return n.g?n.g.readyState:0}function h0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case u0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lC(n){let e="";return Gh(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function f0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lC(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):gr(n,e,t))}function cm(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function p0(n){this.Ga=0,this.j=[],this.l=new em,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=cm("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=cm("baseRetryDelayMs",5e3,n),this.hb=cm("retryDelaySeedMs",1e4,n),this.eb=cm("forwardChannelMaxRetries",2,n),this.xa=cm("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new e0(n&&n.concurrentRequestLimit),this.Ja=new o0,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function g0(n){if(rA(n),3==n.H){var e=n.W++,t=Ja(n.I);if(gr(t,"SID",n.K),gr(t,"RID",e),gr(t,"TYPE","terminate"),uf(n,t),(e=new xl(n,n.l,e)).L=2,e.v=es(Ja(t)),t=!1,Kt.navigator&&Kt.navigator.sendBeacon)try{t=Kt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Rl(e)}mC(n)}function lm(n){n.g&&(pC(n),n.g.cancel(),n.g=null)}function rA(n){lm(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),v0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function m0(n){if(!iC(n.i)&&!n.m){n.m=!0;var e=n.Na;bl||GD(),qh||(bl(),qh=!0),O_.add(e,n),n.C=0}}function y0(n,e){var t;t=e?e.m:n.W++;const r=Ja(n.I);gr(r,"SID",n.K),gr(r,"RID",t),gr(r,"AID",n.V),uf(n,r),n.o&&n.s&&f0(r,n.o,n.s),t=new xl(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=dC(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),nf(n.i,t),QD(t,r,e)}function uf(n,e){n.na&&Gh(n.na,function(t,r){gr(e,r,t)}),n.h&&XM({},function(t,r){gr(e,r,t)})}function dC(n,e,t){t=Math.min(n.j.length,t);var r=n.h?bi(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let _=0;_<t;_++){let D=s[_].g;const b=s[_].map;if(D-=u,0>D)u=Math.max(0,s[_].g-100),g=!1;else try{nA(b,l,"req"+D+"_")}catch{r&&r(b)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function hC(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;bl||GD(),qh||(bl(),qh=!0),O_.add(e,n),n.A=0}}function fC(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Yh(bi(n.Ma,n),gC(n,n.A)),n.A++,0))}function pC(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function iA(n){n.g=new xl(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ja(n.wa);gr(e,"RID","rpc"),gr(e,"SID",n.K),gr(e,"AID",n.V),gr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&gr(e,"TO",n.qa),gr(e,"TYPE","xmlhttp"),uf(n,e),n.o&&n.s&&f0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=es(Ja(e)),t.s=null,t.S=!0,YM(t,n)}function v0(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function sA(n,e){var t=null;if(n.g==e){v0(n),pC(n),n.g=null;var r=2}else{if(!n0(n.i,e))return;t=e.F,fa(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;pi(r=tm(),new B_(r,t)),m0(n)}else hC(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function uN(n,e){return!(t0(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Yh(bi(n.Na,n,e),gC(n,n.C)),n.C++,0)))}(n,e)||2==r&&fC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:jo(n,5);break;case 4:jo(n,10);break;case 3:jo(n,6);break;default:jo(n,2)}}function gC(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function jo(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=bi(n.pb,n);t||(t=new Ku("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||sm(t,"https"),es(t)),function oN(n,e){const t=new em;if(Kt.Image){const r=new Image;r.onload=Qa(rf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Qa(rf,t,r,"TestLoadImage: error",!1,e),r.onabort=Qa(rf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qa(rf,t,r,"TestLoadImage: timeout",!1,e),Kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Si(2);n.H=0,n.h&&n.h.za(e),mC(n),rA(n)}function mC(n){if(n.H=0,n.ma=[],n.h){const e=r0(n.i);(0!=e.length||0!=n.j.length)&&(_l(n.ma,e),_l(n.ma,n.j),n.i.i.length=0,$h(n.j),n.j.length=0),n.h.ya()}}function yC(n,e,t){var r=t instanceof Ku?Ja(t):new Ku(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Xh(r,r.m);else{var s=Kt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Ku(null);r&&sm(u,r),e&&(u.g=e),s&&Xh(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&gr(r,t,e),gr(r,"VER",n.ra),uf(n,r),r}function _0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t&&n.Ha&&!n.va?new sf({ob:!0}):n.va)).Oa(n.J),e}function eu(){}function cf(){if(El&&!(10<=Number(LD)))throw Error("Environmental error: no available transport.")}function ji(n,e){Dr.call(this),this.g=new p0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Hh(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hh(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new tu(this)}function dm(n){rm.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function vC(){G_.call(this),this.status=1}function tu(n){this.g=n}function ts(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _C(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function Wn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(dt=Pr.prototype).Oa=function(n){this.M=n},dt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():W_.g(),this.C=function H_(n){return n.h||(n.h=n.i())}(this.u?this.u:W_),this.g.onreadystatechange=bi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void l0(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Kt.FormData&&n instanceof Kt.FormData,!(0<=OD(c0,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Yu(this),0<this.B&&((this.L=function aC(n){return El&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bi(this.ua,this)):this.A=Tl(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){l0(this,u)}},dt.ua=function(){typeof Bg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pi(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,pi(this,"complete"),pi(this,"abort"),af(this))},dt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),af(this,!0)),Pr.$.N.call(this)},dt.La=function(){this.s||(this.G||this.v||this.l?d0(this):this.kb())},dt.kb=function(){d0(this)},dt.isActive=function(){return!!this.g},dt.da=function(){try{return 2<Cs(this)?this.g.status:-1}catch{return-1}},dt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),oC(e)}},dt.Ia=function(){return this.m},dt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=p0.prototype).ra=8,dt.H=1,dt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new xl(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Wg(u),BD(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=dC(this,s,e),gr(t=Ja(this.I),"RID",n),gr(t,"CVER",22),this.F&&gr(t,"X-HTTP-Session-Id",this.F),uf(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(lC(u)))+"&"+e:this.o&&f0(t,this.o,u)),nf(this.i,s),this.bb&&gr(t,"TYPE","init"),this.P?(gr(t,"$req",e),gr(t,"SID","null"),s.aa=!0,QD(s,t,null)):QD(s,t,e),this.H=2}}else 3==this.H&&(n?y0(this,n):0==this.j.length||iC(this.i)||y0(this))},dt.Ma=function(){if(this.u=null,iA(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Yh(bi(this.jb,this),n)}},dt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Si(10),lm(this),iA(this))},dt.ib=function(){null!=this.v&&(this.v=null,lm(this),fC(this),Si(19))},dt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Si(2)):(this.l.info("Failed to ping google.com"),Si(1))},dt.isActive=function(){return!!this.h&&this.h.isActive(this)},(dt=eu.prototype).Ba=function(){},dt.Aa=function(){},dt.za=function(){},dt.ya=function(){},dt.isActive=function(){return!0},dt.Va=function(){},cf.prototype.g=function(n,e){return new ji(n,e)},ni(ji,Dr),ji.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Si(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=yC(n,null,n.Y),m0(n)},ji.prototype.close=function(){g0(this.g)},ji.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=HD(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&m0(e)},ji.prototype.N=function(){this.g.h=null,delete this.j,g0(this.g),delete this.g,ji.$.N.call(this)},ni(dm,rm),ni(vC,G_),ni(tu,eu),tu.prototype.Ba=function(){pi(this.g,"a")},tu.prototype.Aa=function(n){pi(this.g,new dm(n))},tu.prototype.za=function(n){pi(this.g,new vC)},tu.prototype.ya=function(){pi(this.g,"b")},ni(ts,function E0(){this.blockSize=-1}),ts.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ts.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)_C(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){_C(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){_C(this,r),s=0;break}}this.h=s,this.i+=e},ts.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var cN={};function hm(n){return-128<=n&&128>n?function jM(n,e){var t=cN;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Wn([0|e],0>e?-1:0)}):new Wn([0|n],0>n?-1:0)}function $o(n){if(isNaN(n)||!isFinite(n))return Ol;if(0>n)return gi($o(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=w0;return new Wn(e,0)}var w0=4294967296,Ol=hm(0),fm=hm(1),I0=hm(16777216);function Ho(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function js(n){return-1==n.h}function gi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Wn(t,~n.h).add(fm)}function lf(n,e){return n.add(gi(e))}function kl(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function pm(n,e){this.g=n,this.h=e}function df(n,e){if(Ho(e))throw Error("division by zero");if(Ho(n))return new pm(Ol,Ol);if(js(n))return e=df(gi(n),e),new pm(gi(e.g),gi(e.h));if(js(e))return e=df(n,gi(e)),new pm(gi(e.g),e.h);if(30<n.g.length){if(js(n)||js(e))throw Error("slowDivide_ only works with positive integers.");for(var t=fm,r=e;0>=r.X(n);)t=gm(t),r=gm(r);var s=Fl(t,1),u=Fl(r,1);for(r=Fl(r,2),t=Fl(t,2);!Ho(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Fl(r,1),t=Fl(t,1)}return e=lf(n,s.R(e)),new pm(s,e)}for(s=Ol;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=$o(t)).R(e);js(l)||0<l.X(n);)l=(u=$o(t-=r)).R(e);Ho(u)&&(u=fm),s=s.add(u),n=lf(n,l)}return new pm(s,n)}function gm(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Wn(t,n.h)}function Fl(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Wn(s,n.h)}(dt=Wn.prototype).ea=function(){if(js(this))return-gi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:w0+r)*e,e*=w0}return n},dt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Ho(this))return"0";if(js(this))return"-"+gi(this).toString(n);for(var e=$o(Math.pow(n,6)),t=this,r="";;){var s=df(t,e).g,u=((0<(t=lf(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Ho(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},dt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},dt.X=function(n){return js(n=lf(this,n))?-1:Ho(n)?0:1},dt.abs=function(){return js(this)?gi(this):this},dt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new Wn(t,-2147483648&t[t.length-1]?-1:0)},dt.R=function(n){if(Ho(this)||Ho(n))return Ol;if(js(this))return js(n)?gi(this).R(gi(n)):gi(gi(this).R(n));if(js(n))return gi(this.R(gi(n)));if(0>this.X(I0)&&0>n.X(I0))return $o(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(s)>>>16,_=65535&n.D(s);t[2*r+2*s]+=l*_,kl(t,2*r+2*s),t[2*r+2*s+1]+=u*_,kl(t,2*r+2*s+1),t[2*r+2*s+1]+=l*g,kl(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,kl(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Wn(t,0)},dt.gb=function(n){return df(this,n).h},dt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Wn(t,this.h&n.h)},dt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Wn(t,this.h|n.h)},dt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Wn(t,this.h^n.h)},cf.prototype.createWebChannel=cf.prototype.g,ji.prototype.send=ji.prototype.u,ji.prototype.open=ji.prototype.m,ji.prototype.close=ji.prototype.close,nm.NO_ERROR=0,nm.TIMEOUT=8,nm.HTTP_ERROR=6,j_.COMPLETE="complete",z_.EventType=Al,Al.OPEN="a",Al.CLOSE="b",Al.ERROR="c",Al.MESSAGE="d",Dr.prototype.listen=Dr.prototype.O,Pr.prototype.listenOnce=Pr.prototype.P,Pr.prototype.getLastError=Pr.prototype.Sa,Pr.prototype.getLastErrorCode=Pr.prototype.Ia,Pr.prototype.getStatus=Pr.prototype.da,Pr.prototype.getResponseJson=Pr.prototype.Wa,Pr.prototype.getResponseText=Pr.prototype.ja,Pr.prototype.send=Pr.prototype.ha,Pr.prototype.setWithCredentials=Pr.prototype.Oa,ts.prototype.digest=ts.prototype.l,ts.prototype.reset=ts.prototype.reset,ts.prototype.update=ts.prototype.j,Wn.prototype.add=Wn.prototype.add,Wn.prototype.multiply=Wn.prototype.R,Wn.prototype.modulo=Wn.prototype.gb,Wn.prototype.compare=Wn.prototype.X,Wn.prototype.toNumber=Wn.prototype.ea,Wn.prototype.toString=Wn.prototype.toString,Wn.prototype.getBits=Wn.prototype.D,Wn.fromNumber=$o,Wn.fromString=function EC(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return gi(EC(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=$o(Math.pow(e,8)),r=Ol,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=$o(Math.pow(e,u)),r=r.R(u).add($o(l))):r=(r=r.R(t)).add($o(l))}return r};var oA=Bs.createWebChannelTransport=function(){return new cf},lN=Bs.getStatEventTarget=function(){return tm()},wC=Bs.ErrorCode=nm,aA=Bs.EventType=j_,uA=Bs.Event=qu,IC=Bs.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},cA=Bs.FetchXmlHttpFactory=sf,hf=Bs.WebChannel=z_,DC=Bs.XhrIo=Pr,dN=Bs.Md5=ts,Ll=Bs.Integer=Wn;const mm="@firebase/firestore";class qr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qr.UNAUTHENTICATED=new qr(null),qr.GOOGLE_CREDENTIALS=new qr("google-credentials-uid"),qr.FIRST_PARTY=new qr("first-party-uid"),qr.MOCK_USER=new qr("mock-user");let Qu="9.22.2";const nu=new No.Yd("@firebase/firestore");function ff(){return nu.logLevel}function Ke(n,...e){if(nu.logLevel<=No.in.DEBUG){const t=e.map(ym);nu.debug(`Firestore (${Qu}): ${n}`,...t)}}function Or(n,...e){if(nu.logLevel<=No.in.ERROR){const t=e.map(ym);nu.error(`Firestore (${Qu}): ${n}`,...t)}}function bs(n,...e){if(nu.logLevel<=No.in.WARN){const t=e.map(ym);nu.warn(`Firestore (${Qu}): ${n}`,...t)}}function ym(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function _t(n="Unexpected state"){const e=`FIRESTORE (${Qu}) INTERNAL ASSERTION FAILED: `+n;throw Or(e),new Error(e)}function Mt(n,e){n||_t()}function ht(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends En.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class CC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class hN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(qr.UNAUTHENTICATED))}shutdown(){}}class fN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class pN{constructor(e){this.t=e,this.currentUser=qr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let l=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ri,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const D=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},_=D=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(D=>_(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?_(D):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ri)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt("string"==typeof r.accessToken),new CC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Mt(null===e||"string"==typeof e),new qr(e)}}class gN{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=qr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class dA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new gN(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(qr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mN{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Ke("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Mt("string"==typeof t.token),this.T=t.token,new hA(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function yN(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class bC{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=yN(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function pf(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function i(n){return n+"\0"}class o{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $e(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $e(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $e(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return o.fromMillis(Date.now())}static fromDate(e){return o.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new o(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class a{constructor(e){this.timestamp=e}static fromTimestamp(e){return new a(e)}static min(){return new a(new o(0,0))}static max(){return new a(new o(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class c{constructor(e,t,r){void 0===t?t=0:t>e.length&&_t(),void 0===r?r=e.length-t:r>e.length-t&&_t(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===c.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof c?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class d extends c{construct(e,t,r){return new d(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new $e(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new d(t)}static emptyPath(){return new d([])}}const f=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class y extends c{construct(e,t,r){return new y(e,t,r)}static isValidIdentifier(e){return f.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),y.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new y(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new $e(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new $e(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[s+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new $e(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,s+=2}else"`"===g?(l=!l,s++):"."!==g||l?(r+=g,s++):(u(),s++)}if(u(),l)throw new $e(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new y(t)}static emptyPath(){return new y([])}}class v{constructor(e){this.path=e}static fromPath(e){return new v(d.fromString(e))}static fromName(e){return new v(d.fromString(e).popFirst(5))}static empty(){return new v(d.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===d.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return d.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new v(new d(e.slice()))}}class I{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function C(n){return n.fields.find(e=>2===e.kind)}function S(n){return n.fields.filter(e=>2!==e.kind)}I.UNKNOWN_ID=-1;class q{constructor(e,t){this.fieldPath=e,this.kind=t}}class be{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new be(0,yt.min())}}function qe(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=a.fromTimestamp(1e9===r?new o(t+1,0):new o(t,r));return new yt(s,v.empty(),e)}function ot(n){return new yt(n.readTime,n.key,-1)}class yt{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new yt(a.min(),v.empty(),-1)}static max(){return new yt(a.max(),v.empty(),-1)}}function Fe(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=v.comparator(n.documentKey,e.documentKey),0!==t?t:Zt(n.largestBatchId,e.largestBatchId))}const Ot="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class on{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fn(n){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,Ee.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==Ot)throw n;Ke("LocalStore","Unexpectedly lost primary lease")}),Ts.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let s=0,u=0,l=!1;e.forEach(g=>{++s,g.next(()=>{++u,l&&u===s&&t()},_=>r(_))}),l=!0,u===s&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(s=>s?ue.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,s)=>{const u=e.length,l=new Array(u);let g=0;for(let _=0;_<u;_++){const D=_;t(e[D]).next(b=>{l[D]=b,++g,g===u&&r(l)},b=>s(b))}})}static doWhile(e,t){return new ue((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class TC{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new ri,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new D0(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=fA(r.target.error);this.v.reject(new D0(e,s))}}static open(e,t,r,s){try{return new TC(t,e.transaction(s,r))}catch(u){throw new D0(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new n2(t)}}class pa{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===pa.S((0,En.z$)())&&Or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),gf(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,En.hl)())return!1;if(pa.C())return!0;const e=(0,En.z$)(),t=pa.S(e),r=0<t&&t<10,s=pa.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new D0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const g=l.target.error;s("VersionError"===g.name?new $e(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new $e(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new D0(e,g))},u.onupgradeneeded=l=>{Ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.$(e);const _=TC.open(u.db,e,l?"readonly":"readwrite",r),D=s(_).next(b=>(_.P(),b)).catch(b=>(_.abort(b),ue.reject(b))).toPromise();return D.catch(()=>{}),yield _.R,D}catch(_){const D=_,b="FirebaseError"!==D.name&&g<3;if(Ke("SimpleDb","Transaction failed with error:",D.message,"Retrying:",b),u.close(),!b)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class t2{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return gf(this.L.delete())}}class D0 extends $e{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Vl(n){return"IndexedDbTransactionError"===n.name}class n2{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),gf(r)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),gf(this.store.add(e))}get(e){return gf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),gf(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),gf(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,g)=>{u.push(g)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ue((u,l)=>{s.onerror=g=>{l(g.target.error)},s.onsuccess=g=>{u(g.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,g)=>g.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ue((r,s)=>{t.onerror=u=>{const l=fA(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(g=>{g?l.continue():r()}):r()}})}W(e,t){const r=[];return new ue((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const g=l.target.result;if(!g)return void s();const _=new t2(g),D=t(g.primaryKey,g.value,_);if(D instanceof ue){const b=D.catch(R=>(_.done(),ue.reject(R)));r.push(b)}_.isDone?s():null===_.K?g.continue():g.continue(_.K)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function gf(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=fA(r.target.error);t(s)}})}let vN=!1;function fA(n){const e=pa.S((0,En.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new $e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vN||(vN=!0,setTimeout(()=>{throw r},0)),r}}return n}class r2{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Ke("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Vl(r)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield fn(r)}yield t.et(6e4)}))}}class i2{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ue.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ke("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(g=>{s-=g,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(g=>(Ke("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=ot(u);Fe(l,r)>0&&(r=l)}),new yt(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let uo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function C0(n){return null==n}function b0(n){return 0===n&&1/n==-1/0}function _N(n){return"number"==typeof n&&Number.isInteger(n)&&!b0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ns(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=EN(e)),e=s2(n.get(t),e);return EN(e)}function s2(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function EN(n){return n+"\x01\x01"}function ru(n){const e=n.length;if(Mt(e>=2),2===e)return Mt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),d.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&_t(),n.charAt(l+1)){case"\x01":const g=n.substring(u,l);let _;0===s.length?_=g:(s+=g,_=s,s=""),r.push(_);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:_t()}u=l+2}return new d(r)}const wN=["userId","batchId"];function SC(n,e){return[n,ns(e)]}function IN(n,e,t){return[n,ns(e),t]}const o2={},a2=["prefixPath","collectionGroup","readTime","documentId"],u2=["prefixPath","collectionGroup","documentId"],c2=["collectionGroup","readTime","prefixPath","documentId"],l2=["canonicalId","targetId"],d2=["targetId","path"],h2=["path","targetId"],f2=["collectionId","parent"],p2=["indexId","uid"],g2=["uid","sequenceNumber"],m2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],y2=["indexId","uid","orderedDocumentKey"],v2=["userId","collectionPath","documentId"],_2=["userId","collectionPath","largestBatchId"],E2=["userId","collectionGroup","largestBatchId"],DN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],w2=[...DN,"documentOverlays"],CN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bN=CN,I2=[...bN,"indexConfiguration","indexState","indexEntries"];class pA extends on{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ai(n,e){const t=ht(n);return pa.M(t.ht,e)}function TN(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ul(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mr{constructor(e,t){this.comparator=e,this.root=t||$i.EMPTY}insert(e,t){return new mr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$i.BLACK,null,null))}remove(e){return new mr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new MC(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new MC(this.root,e,this.comparator,!1)}getReverseIterator(){return new MC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new MC(this.root,e,this.comparator,!0)}}class MC{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $i{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??$i.RED,this.left=s??$i.EMPTY,this.right=u??$i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new $i(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return $i.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _t();const e=this.left.check();if(e!==this.right.check())throw _t();return e+(this.isRed()?0:1)}}$i.EMPTY=null,$i.RED=!0,$i.BLACK=!1,$i.EMPTY=new class{constructor(){this.size=0}get key(){throw _t()}get value(){throw _t()}get color(){throw _t()}get left(){throw _t()}get right(){throw _t()}copy(n,e,t,r,s){return this}insert(n,e,t){return new $i(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(e){this.comparator=e,this.data=new mr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new MN(this.data.getIterator())}getIteratorFrom(e){return new MN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cr(this.comparator);return t.data=e,t}}class MN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _m(n){return n.hasNext()?n.getNext():void 0}class $s{constructor(e){this.fields=e,e.sort(y.comparator)}static empty(){return new $s([])}unionWith(e){let t=new Cr(y.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class AN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class mi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new AN("Invalid base64 string: "+s):s}}(e);return new mi(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new mi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mi.EMPTY_BYTE_STRING=new mi("");const C2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bl(n){if(Mt(!!n),"string"==typeof n){let e=0;const t=C2.exec(n);if(Mt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zr(n.seconds),nanos:zr(n.nanos)}}function zr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ju(n){return"string"==typeof n?mi.fromBase64String(n):mi.fromUint8Array(n)}function AC(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function xC(n){const e=n.mapValue.fields.__previous_value__;return AC(e)?xC(e):e}function T0(n){const e=Bl(n.mapValue.fields.__local_write_time__.timestampValue);return new o(e.seconds,e.nanos)}class b2{constructor(e,t,r,s,u,l,g,_,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=D}}class jl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jl&&e.projectId===this.projectId&&e.database===this.database}}const $l={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},RC={nullValue:"NULL_VALUE"};function Hl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?AC(n)?4:PN(n)?9007199254740991:10:_t()}function iu(n,e){if(n===e)return!0;const t=Hl(n);if(t!==Hl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return T0(n).isEqual(T0(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=Bl(r.timestampValue),l=Bl(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ju(n.bytesValue).isEqual(Ju(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return zr(r.geoPointValue.latitude)===zr(s.geoPointValue.latitude)&&zr(r.geoPointValue.longitude)===zr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return zr(r.integerValue)===zr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=zr(r.doubleValue),l=zr(s.doubleValue);return u===l?b0(u)===b0(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return pf(n.arrayValue.values||[],e.arrayValue.values||[],iu);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(TN(u)!==TN(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!iu(u[g],l[g])))return!1;return!0}(n,e);default:return _t()}var s}function S0(n,e){return void 0!==(n.values||[]).find(t=>iu(t,e))}function zl(n,e){if(n===e)return 0;const t=Hl(n),r=Hl(e);if(t!==r)return Zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=zr(s.integerValue||s.doubleValue),g=zr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return xN(n.timestampValue,e.timestampValue);case 4:return xN(T0(n),T0(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Ju(s),g=Ju(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),g=u.split("/");for(let _=0;_<l.length&&_<g.length;_++){const D=Zt(l[_],g[_]);if(0!==D)return D}return Zt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Zt(zr(s.latitude),zr(u.latitude));return 0!==l?l:Zt(zr(s.longitude),zr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],g=u.values||[];for(let _=0;_<l.length&&_<g.length;++_){const D=zl(l[_],g[_]);if(D)return D}return Zt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===$l.mapValue&&u===$l.mapValue)return 0;if(s===$l.mapValue)return 1;if(u===$l.mapValue)return-1;const l=s.fields||{},g=Object.keys(l),_=u.fields||{},D=Object.keys(_);g.sort(),D.sort();for(let b=0;b<g.length&&b<D.length;++b){const R=Zt(g[b],D[b]);if(0!==R)return R;const $=zl(l[g[b]],_[D[b]]);if(0!==$)return $}return Zt(g.length,D.length)}(n.mapValue,e.mapValue);default:throw _t()}}function xN(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Bl(n),r=Bl(e),s=Zt(t.seconds,r.seconds);return 0!==s?s:Zt(t.nanos,r.nanos)}function Em(n){return gA(n)}function gA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=Bl(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ju(n.bytesValue).toBase64():"referenceValue"in n?v.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=gA(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of s)l?l=!1:u+=",",u+=`${g}:${gA(r.fields[g])}`;return u+"}"}(n.mapValue):_t();var e}function mf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mA(n){return!!n&&"integerValue"in n}function M0(n){return!!n&&"arrayValue"in n}function RN(n){return!!n&&"nullValue"in n}function NN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function PC(n){return!!n&&"mapValue"in n}function A0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ul(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=A0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=A0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PN(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function T2(n){return"nullValue"in n?RC:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?mf(jl.empty(),v.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:_t()}function S2(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?mf(jl.empty(),v.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?$l:_t()}function ON(n,e){const t=zl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kN(n,e){const t=zl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Hi{constructor(e){this.value=e}static empty(){return new Hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!PC(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=A0(t)}setAll(e){let t=y.emptyPath(),r={},s=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const _=this.getFieldsMap(t);this.applyChanges(_,r,s),r={},s=[],t=g.popLast()}l?r[g.lastSegment()]=A0(l):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());PC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return iu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];PC(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ul(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Hi(A0(this.value))}}function FN(n){const e=[];return Ul(n.fields,(t,r)=>{const s=new y([t]);if(PC(r)){const u=FN(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new $s(e)}class br{constructor(e,t,r,s,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new br(e,0,a.min(),a.min(),a.min(),Hi.empty(),0)}static newFoundDocument(e,t,r,s){return new br(e,1,t,a.min(),r,s,0)}static newNoDocument(e,t){return new br(e,2,t,a.min(),a.min(),Hi.empty(),0)}static newUnknownDocument(e,t){return new br(e,3,t,a.min(),a.min(),Hi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(a.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=a.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gl{constructor(e,t){this.position=e,this.inclusive=t}}function LN(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?v.comparator(v.fromName(l.referenceValue),t.key):zl(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function VN(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!iu(n.position[t],e.position[t]))return!1;return!0}class wm{constructor(e,t="asc"){this.field=e,this.dir=t}}function M2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class UN{}class wn extends UN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new A2(e,t,r):"array-contains"===t?new N2(e,r):"in"===t?new GN(e,r):"not-in"===t?new P2(e,r):"array-contains-any"===t?new O2(e,r):new wn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new x2(e,r):new R2(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(zl(t,this.value)):null!==t&&Hl(this.value)===Hl(t)&&this.matchesComparison(zl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return _t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Yn extends UN{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Yn(e,t)}matches(e){return Im(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Im(n){return"and"===n.op}function yA(n){return"or"===n.op}function vA(n){return BN(n)&&Im(n)}function BN(n){for(const e of n.filters)if(e instanceof Yn)return!1;return!0}function _A(n){if(n instanceof wn)return n.field.canonicalString()+n.op.toString()+Em(n.value);if(vA(n))return n.filters.map(e=>_A(e)).join(",");{const e=n.filters.map(t=>_A(t)).join(",");return`${n.op}(${e})`}}function jN(n,e){return n instanceof wn?(t=n,(r=e)instanceof wn&&t.op===r.op&&t.field.isEqual(r.field)&&iu(t.value,r.value)):n instanceof Yn?function(t,r){return r instanceof Yn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&jN(u,r.filters[l]),!0)}(n,e):void _t();var t,r}function $N(n,e){const t=n.filters.concat(e);return Yn.create(t,n.op)}function HN(n){return n instanceof wn?`${(e=n).field.canonicalString()} ${e.op} ${Em(e.value)}`:n instanceof Yn?function(e){return e.op.toString()+" {"+e.getFilters().map(HN).join(" ,")+"}"}(n):"Filter";var e}class A2 extends wn{constructor(e,t,r){super(e,t,r),this.key=v.fromName(r.referenceValue)}matches(e){const t=v.comparator(e.key,this.key);return this.matchesComparison(t)}}class x2 extends wn{constructor(e,t){super(e,"in",t),this.keys=zN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class R2 extends wn{constructor(e,t){super(e,"not-in",t),this.keys=zN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>v.fromName(r.referenceValue))}class N2 extends wn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return M0(t)&&S0(t.arrayValue,this.value)}}class GN extends wn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&S0(this.value.arrayValue,t)}}class P2 extends wn{constructor(e,t){super(e,"not-in",t)}matches(e){if(S0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!S0(this.value.arrayValue,t)}}class O2 extends wn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!M0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>S0(this.value.arrayValue,r))}}class k2{constructor(e,t=null,r=[],s=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function EA(n,e=null,t=[],r=[],s=null,u=null,l=null){return new k2(n,e,t,r,s,u,l)}function yf(n){const e=ht(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_A(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),C0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Em(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Em(r)).join(",")),e.dt=t}return e.dt}function x0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!M2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VN(n.startAt,e.startAt)&&VN(n.endAt,e.endAt)}function OC(n){return v.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function kC(n,e){return n.filters.filter(t=>t instanceof wn&&t.field.isEqual(e))}function WN(n,e,t){let r=RC,s=!0;for(const u of kC(n,e)){let l=RC,g=!0;switch(u.op){case"<":case"<=":l=T2(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,g=!1;break;case"!=":case"not-in":l=RC}ON({value:r,inclusive:s},{value:l,inclusive:g})<0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];ON({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function qN(n,e,t){let r=$l,s=!0;for(const u of kC(n,e)){let l=$l,g=!0;switch(u.op){case">=":case">":l=S2(u.value),g=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,g=!1;break;case"!=":case"not-in":l=$l}kN({value:r,inclusive:s},{value:l,inclusive:g})>0&&(r=l,s=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];kN({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class Xu{constructor(e,t=null,r=[],s=[],u=null,l="F",g=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=_,this.wt=null,this._t=null}}function KN(n,e,t,r,s,u,l,g){return new Xu(n,e,t,r,s,u,l,g)}function Dm(n){return new Xu(n)}function ZN(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function wA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function FC(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function IA(n){return null!==n.collectionGroup}function vf(n){const e=ht(n);if(null===e.wt){e.wt=[];const t=FC(e),r=wA(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new wm(t)),e.wt.push(new wm(y.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new wm(y.keyField(),u))}}}return e.wt}function Ss(n){const e=ht(n);if(!e._t)if("F"===e.limitType)e._t=EA(e.path,e.collectionGroup,vf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of vf(e))t.push(new wm(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Gl(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Gl(e.startAt.position,e.startAt.inclusive):null;e._t=EA(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function DA(n,e){e.getFirstInequalityField(),FC(n);const t=n.filters.concat([e]);return new Xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function LC(n,e,t){return new Xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function R0(n,e){return x0(Ss(n),Ss(e))&&n.limitType===e.limitType}function YN(n){return`${yf(Ss(n))}|lt:${n.limitType}`}function CA(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>HN(r)).join(", ")}]`),C0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Em(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Em(r)).join(",")),`Target(${t})`}(Ss(n))}; limitType=${n.limitType})`}function N0(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):v.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of vf(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const g=LN(s,u,l);return s.inclusive?g<=0:g<0}(t.startAt,vf(t),r)||t.endAt&&!function(s,u,l){const g=LN(s,u,l);return s.inclusive?g>=0:g>0}(t.endAt,vf(t),r)));var t,r}function QN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function JN(n){return(e,t)=>{let r=!1;for(const s of vf(n)){const u=F2(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function F2(n,e,t){const r=n.field.isKeyField()?v.comparator(e.key,t.key):function(s,u,l){const g=u.data.field(s),_=l.data.field(s);return null!==g&&null!==_?zl(g,_):_t()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return _t()}}class ec{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ul(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return SN(this.inner)}size(){return this.innerSize}}const L2=new mr(v.comparator);function Hs(){return L2}const XN=new mr(v.comparator);function P0(...n){let e=XN;for(const t of n)e=e.insert(t.key,t);return e}function eP(n){let e=XN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function su(){return O0()}function tP(){return O0()}function O0(){return new ec(n=>n.toString(),(n,e)=>n.isEqual(e))}const V2=new mr(v.comparator),U2=new Cr(v.comparator);function an(...n){let e=U2;for(const t of n)e=e.add(t);return e}const B2=new Cr(Zt);function bA(){return B2}function nP(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:b0(e)?"-0":e}}function rP(n){return{integerValue:""+n}}function iP(n,e){return _N(e)?rP(e):nP(n,e)}class VC{constructor(){this._=void 0}}function j2(n,e,t){return n instanceof Cm?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&AC(s)&&(s=xC(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof _f?oP(n,e):n instanceof Ef?aP(n,e):function(r,s){const u=sP(r,s),l=uP(u)+uP(r.gt);return mA(u)&&mA(r.gt)?rP(l):nP(r.serializer,l)}(n,e)}function $2(n,e,t){return n instanceof _f?oP(n,e):n instanceof Ef?aP(n,e):t}function sP(n,e){return n instanceof bm?mA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Cm extends VC{}class _f extends VC{constructor(e){super(),this.elements=e}}function oP(n,e){const t=cP(e);for(const r of n.elements)t.some(s=>iu(s,r))||t.push(r);return{arrayValue:{values:t}}}class Ef extends VC{constructor(e){super(),this.elements=e}}function aP(n,e){let t=cP(e);for(const r of n.elements)t=t.filter(s=>!iu(s,r));return{arrayValue:{values:t}}}class bm extends VC{constructor(e,t){super(),this.serializer=e,this.gt=t}}function uP(n){return zr(n.integerValue||n.doubleValue)}function cP(n){return M0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class k0{constructor(e,t){this.field=e,this.transform=t}}class z2{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function UC(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class BC{}function lP(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Sm(n.key,kr.none()):new Tm(n.key,n.data,kr.none());{const t=n.data,r=Hi.empty();let s=new Cr(y.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new tc(n.key,r,new $s(s.toArray()),kr.none())}}function G2(n,e,t){n instanceof Tm?function(r,s,u){const l=r.value.clone(),g=fP(r.fieldTransforms,s,u.transformResults);l.setAll(g),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof tc?function(r,s,u){if(!UC(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=fP(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(hP(r)),g.setAll(l),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function F0(n,e,t,r){return n instanceof Tm?function(s,u,l,g){if(!UC(s.precondition,u))return l;const _=s.value.clone(),D=pP(s.fieldTransforms,g,u);return _.setAll(D),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof tc?function(s,u,l,g){if(!UC(s.precondition,u))return l;const _=pP(s.fieldTransforms,g,u),D=u.data;return D.setAll(hP(s)),D.setAll(_),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,UC(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function W2(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=sP(r.transform,s||null);null!=u&&(null===t&&(t=Hi.empty()),t.set(r.field,u))}return t||null}function dP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&pf(t,r,(s,u)=>function H2(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _f&&r instanceof _f||t instanceof Ef&&r instanceof Ef?pf(t.elements,r.elements,iu):t instanceof bm&&r instanceof bm?iu(t.gt,r.gt):t instanceof Cm&&r instanceof Cm);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Tm extends BC{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tc extends BC{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function hP(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function fP(n,e,t){const r=new Map;Mt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,g=e.data.field(u.field);r.set(u.field,$2(l,g,t[s]))}return r}function pP(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,j2(u,l,e))}return r}class Sm extends BC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TA extends BC{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class SA{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&G2(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=F0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=F0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tP();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(s.key)?null:g;const _=lP(l,g);null!==_&&r.set(s.key,_),l.isValidDocument()||l.convertToNoDocument(a.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),an())}isEqual(e){return this.batchId===e.batchId&&pf(this.mutations,e.mutations,(t,r)=>dP(t,r))&&pf(this.baseMutations,e.baseMutations,(t,r)=>dP(t,r))}}class MA{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Mt(e.mutations.length===r.length);let s=V2;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new MA(e,t,r,s)}}class AA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class K2{constructor(e,t){this.count=e,this.unchangedNames=t}}var ii,Rn;function gP(n){switch(n){default:return _t();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function mP(n){if(void 0===n)return Or("GRPC error has no .code"),fe.UNKNOWN;switch(n){case ii.OK:return fe.OK;case ii.CANCELLED:return fe.CANCELLED;case ii.UNKNOWN:return fe.UNKNOWN;case ii.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case ii.INTERNAL:return fe.INTERNAL;case ii.UNAVAILABLE:return fe.UNAVAILABLE;case ii.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case ii.NOT_FOUND:return fe.NOT_FOUND;case ii.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case ii.ABORTED:return fe.ABORTED;case ii.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case ii.DATA_LOSS:return fe.DATA_LOSS;default:return _t()}}(Rn=ii||(ii={}))[Rn.OK=0]="OK",Rn[Rn.CANCELLED=1]="CANCELLED",Rn[Rn.UNKNOWN=2]="UNKNOWN",Rn[Rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rn[Rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rn[Rn.NOT_FOUND=5]="NOT_FOUND",Rn[Rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rn[Rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rn[Rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rn[Rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rn[Rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rn[Rn.ABORTED=10]="ABORTED",Rn[Rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rn[Rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rn[Rn.INTERNAL=13]="INTERNAL",Rn[Rn.UNAVAILABLE=14]="UNAVAILABLE",Rn[Rn.DATA_LOSS=15]="DATA_LOSS";class xA{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return jC}static getOrCreateInstance(){return null===jC&&(jC=new xA),jC}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let jC=null;function yP(){return new TextEncoder}const Z2=new Ll([4294967295,4294967295],0);function vP(n){const e=yP().encode(n),t=new dN;return t.update(e),new Uint8Array(t.digest())}function _P(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ll([t,r],0),new Ll([s,u],0)]}class RA{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new L0(`Invalid padding: ${t}`);if(r<0)throw new L0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new L0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new L0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Ll.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(Ll.fromNumber(r)));return 1===s.compare(Z2)&&(s=new Ll([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=vP(e),[r,s]=_P(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new RA(u,s,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=vP(e),[r,s]=_P(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class L0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class V0{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,U0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new V0(a.min(),s,new mr(Zt),Hs(),an())}}class U0{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new U0(r,t,an(),an(),an())}}class $C{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class EP{constructor(e,t){this.targetId=e,this.Vt=t}}class wP{constructor(e,t,r=mi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class IP{constructor(){this.St=0,this.Dt=CP(),this.Ct=mi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=an(),t=an(),r=an();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:_t()}}),new U0(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=CP()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Y2{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Hs(),this.zt=DP(),this.Wt=new mr(Zt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:_t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(OC(l))if(0===s){const g=new v(l.path);this.Yt(r,g,br.newNoDocument(g,a.min()))}else Mt(1===s);else{const g=this.ie(r);if(g!==s){const _=this.re(e,g);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=xA.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(D,b,R){var $,Q,me,He,We,nt;const lt={localCacheCount:b,existenceFilterCount:R.count},St=R.unchangedNames;return St&&(lt.bloomFilter={applied:0===D,hashCount:null!==($=St?.hashCount)&&void 0!==$?$:0,bitmapLength:null!==(He=null===(me=null===(Q=St?.bits)||void 0===Q?void 0:Q.bitmap)||void 0===me?void 0:me.length)&&void 0!==He?He:0,padding:null!==(nt=null===(We=St?.bits)||void 0===We?void 0:We.padding)&&void 0!==nt?nt:0}),lt}(_,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let _,D;try{_=Ju(u).toUint8Array()}catch(b){if(b instanceof AN)return bs("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{D=new RA(_,l,g)}catch(b){return bs(b instanceof L0?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===D.It?1:s!==t-this.oe(e.targetId,D)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&OC(g.target)){const _=new v(g.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,br.newNoDocument(_,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=an();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(_=>{const D=this.se(_);return!D||"TargetPurposeLimboResolution"===D.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new V0(e,t,this.Wt,this.jt,r);return this.jt=Hs(),this.zt=DP(),this.Wt=new mr(Zt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new IP,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Cr(Zt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ke("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new IP),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function DP(){return new mr(v.comparator)}function CP(){return new mr(v.comparator)}const Q2={asc:"ASCENDING",desc:"DESCENDING"},J2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X2={and:"AND",or:"OR"};class eF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function NA(n,e){return n.useProto3Json||C0(e)?e:{value:e}}function Mm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tF(n,e){return Mm(n,e.toTimestamp())}function Kr(n){return Mt(!!n),a.fromTimestamp(function(e){const t=Bl(e);return new o(t.seconds,t.nanos)}(n))}function PA(n,e){return(t=n,new d(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function TP(n){const e=d.fromString(n);return Mt(kP(e)),e}function B0(n,e){return PA(n.databaseId,e.path)}function ou(n,e){const t=TP(e);if(t.get(1)!==n.databaseId.projectId)throw new $e(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $e(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new v(MP(t))}function OA(n,e){return PA(n.databaseId,e)}function SP(n){const e=TP(n);return 4===e.length?d.emptyPath():MP(e)}function j0(n){return new d(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MP(n){return Mt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function AP(n,e,t){return{name:B0(n,e),fields:t.value.mapValue.fields}}function xP(n,e,t){const r=ou(n,e.name),s=Kr(e.updateTime),u=e.createTime?Kr(e.createTime):a.min(),l=new Hi({mapValue:{fields:e.fields}}),g=br.newFoundDocument(r,s,u,l);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function $0(n,e){let t;if(e instanceof Tm)t={update:AP(n,e.key,e.value)};else if(e instanceof Sm)t={delete:B0(n,e.key)};else if(e instanceof tc)t={update:AP(n,e.key,e.data),updateMask:cF(e.fieldMask)};else{if(!(e instanceof TA))return _t();t={verify:B0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof Cm)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _f)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ef)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bm)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw _t()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:tF(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:_t()),t;var s}function kA(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?kr.updateTime(Kr(s.updateTime)):void 0!==s.exists?kr.exists(s.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let g=null;"setToServerValue"in l?(Mt("REQUEST_TIME"===l.setToServerValue),g=new Cm):"appendMissingElements"in l?g=new _f(l.appendMissingElements.values||[]):"removeAllFromArray"in l?g=new Ef(l.removeAllFromArray.values||[]):"increment"in l?g=new bm(u,l.increment):_t();const _=y.fromServerFormat(l.fieldPath);return new k0(_,g)}(n,s)):[];var s;if(e.update){const s=ou(n,e.update.name),u=new Hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new $s((e.updateMask.fieldPaths||[]).map(D=>y.fromServerFormat(D)));return new tc(s,u,l,t,r)}return new Tm(s,u,t,r)}if(e.delete){const s=ou(n,e.delete);return new Sm(s,t)}if(e.verify){const s=ou(n,e.verify);return new TA(s,t)}return _t()}function RP(n,e){return{documents:[OA(n,e.path)]}}function FA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=OA(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=OA(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(_){if(0!==_.length)return OP(Yn.create(_,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(_){if(0!==_.length)return _.map(D=>{return{field:Wl((b=D).field),direction:oF(b.dir)};var b})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=NA(n,e.limit);var g,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function NP(n){let e=SP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Mt(1===r);const b=t.from[0];b.allDescendants?s=b.collectionId:e=e.child(b.collectionId)}let u=[];t.where&&(u=function(b){const R=PP(b);return R instanceof Yn&&vA(R)?R.getFilters():[R]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new wm(Am((R=b).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let g=null;t.limit&&(g=function(b){let R;return R="object"==typeof b?b.value:b,C0(R)?null:R}(t.limit));let _=null;var b;t.startAt&&(_=new Gl((b=t.startAt).values||[],!!b.before));let D=null;return t.endAt&&(D=function(b){return new Gl(b.values||[],!b.before)}(t.endAt)),KN(e,s,l,u,g,"F",_,D)}function PP(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Am(e.unaryFilter.field);return wn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Am(e.unaryFilter.field);return wn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Am(e.unaryFilter.field);return wn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Am(e.unaryFilter.field);return wn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return _t()}}(n):void 0!==n.fieldFilter?wn.create(Am((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _t()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Yn.create(e.compositeFilter.filters.map(t=>PP(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return _t()}}(e.compositeFilter.op))}(n):_t();var e}function oF(n){return Q2[n]}function aF(n){return J2[n]}function uF(n){return X2[n]}function Wl(n){return{fieldPath:n.canonicalString()}}function Am(n){return y.fromServerFormat(n.fieldPath)}function OP(n){return n instanceof wn?function(e){if("=="===e.op){if(NN(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NAN"}};if(RN(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(NN(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NOT_NAN"}};if(RN(e.value))return{unaryFilter:{field:Wl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wl(e.field),op:aF(e.op),value:e.value}}}(n):n instanceof Yn?function(e){const t=e.getFilters().map(r=>OP(r));return 1===t.length?t[0]:{compositeFilter:{op:uF(e.op),filters:t}}}(n):_t()}function cF(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kP(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class nc{constructor(e,t,r,s,u=a.min(),l=a.min(),g=mi.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class FP{constructor(e){this.fe=e}}function LP(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:HC(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:B0(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Mm(s,u.version.toTimestamp()),createTime:Mm(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wf(e.version)};else{if(!e.isUnknownDocument())return _t();r.unknownDocument={path:t.path.toArray(),version:wf(e.version)}}var s,u;return r}function HC(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function If(n){const e=new o(n.seconds,n.nanoseconds);return a.fromTimestamp(e)}function Df(n,e){const t=(e.baseMutations||[]).map(u=>kA(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>kA(n.fe,u)),s=o.fromMillis(e.localWriteTimeMs);return new SA(e.batchId,s,t,r)}function H0(n){const e=If(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?If(n.lastLimboFreeSnapshotVersion):a.min();let r;var s;return void 0!==n.query.documents?(Mt(1===(s=n.query).documents.length),r=Ss(Dm(SP(s.documents[0])))):r=Ss(NP(n.query)),new nc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,mi.fromBase64String(n.resumeToken))}function VP(n,e){const t=wf(e.snapshotVersion),r=wf(e.lastLimboFreeSnapshotVersion);let s;s=OC(e.target)?RP(n.fe,e.target):FA(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yf(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function LA(n){const e=NP({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?LC(e,e.limit,"L"):e}function VA(n,e){return new AA(e.largestBatchId,kA(n.fe,e.overlayMutation))}function UP(n,e){const t=e.path.lastSegment();return[n,ns(e.path.popLast()),t]}function BP(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:wf(r.readTime),documentKey:ns(r.documentKey.path),largestBatchId:r.largestBatchId}}class dF{getBundleMetadata(e,t){return jP(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:If(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return jP(e).put({bundleId:(r=t).id,createTime:wf(Kr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $P(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:LA(s.bundledQuery),readTime:If(s.readTime)};var s})}saveNamedQuery(e,t){return $P(e).put({name:(r=t).name,readTime:wf(Kr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function jP(n){return Ai(n,"bundles")}function $P(n){return Ai(n,"namedQueries")}class zC{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new zC(e,t.uid||"")}getOverlay(e,t){return z0(e).get(UP(this.userId,t)).next(r=>r?VA(this.serializer,r):null)}getOverlays(e,t){const r=su();return ue.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const g=new AA(t,l);s.push(this.we(e,g))}),ue.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(ns(l.getCollectionPath())));const u=[];return s.forEach(l=>{const g=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(z0(e).J("collectionPathOverlayIndex",g))}),ue.waitFor(u)}getOverlaysForCollection(e,t,r){const s=su(),u=ns(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return z0(e).j("collectionPathOverlayIndex",l).next(g=>{for(const _ of g){const D=VA(this.serializer,_);s.set(D.getKey(),D)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=su();let l;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return z0(e).X({index:"collectionGroupOverlayIndex",range:g},(_,D,b)=>{const R=VA(this.serializer,D);u.size()<s||R.largestBatchId===l?(u.set(R.getKey(),R),l=R.largestBatchId):b.done()}).next(()=>u)}we(e,t){return z0(e).put(function(r,s,u){const[l,g,_]=UP(s,u.mutation.key);return{userId:s,collectionPath:g,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:$0(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function z0(n){return Ai(n,"documentOverlays")}class Cf{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(zr(e.integerValue));else if("doubleValue"in e){const r=zr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),b0(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ju(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?PN(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):_t()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),v.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function hF(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function HP(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=hF(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Cf.Ve=new Cf;class fF{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=HP(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=HP(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class pF{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class gF{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class G0{constructor(){this.je=new fF,this.ze=new pF(this.je),this.We=new gF(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class bf{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new bf(this.indexId,this.documentKey,this.arrayValue,r)}}function ql(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=zP(n.arrayValue,e.arrayValue),0!==t?t:(t=zP(n.directionalValue,e.directionalValue),0!==t?t:v.comparator(n.documentKey,e.documentKey)))}function zP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class mF{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Mt(e.collectionGroup===this.collectionId);const t=C(e);if(void 0!==t&&!this.en(t))return!1;const r=S(e);let s=new Set,u=0,l=0;for(;u<r.length&&this.en(r[u]);++u)s=s.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!s.has(this.Ze.field.canonicalString())){const g=r[u];if(!this.nn(this.Ze,g)||!this.sn(this.Ye[l++],g))return!1}++u}for(;u<r.length;++u)if(l>=this.Ye.length||!this.sn(this.Ye[l++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function GP(n){var e,t;if(Mt(n instanceof wn||n instanceof Yn),n instanceof wn){if(n instanceof GN){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>wn.create(n.field,"==",u)))||[];return Yn.create(s,"or")}return n}const r=n.filters.map(s=>GP(s));return Yn.create(r,n.op)}function yF(n){if(0===n.getFilters().length)return[];const e=jA(GP(n));return Mt(WP(e)),UA(e)||BA(e)?[e]:e.getFilters()}function UA(n){return n instanceof wn}function BA(n){return n instanceof Yn&&vA(n)}function WP(n){return UA(n)||BA(n)||function(e){if(e instanceof Yn&&yA(e)){for(const t of e.getFilters())if(!UA(t)&&!BA(t))return!1;return!0}return!1}(n)}function jA(n){if(Mt(n instanceof wn||n instanceof Yn),n instanceof wn)return n;if(1===n.filters.length)return jA(n.filters[0]);const e=n.filters.map(r=>jA(r));let t=Yn.create(e,n.op);return t=GC(t),WP(t)?t:(Mt(t instanceof Yn),Mt(Im(t)),Mt(t.filters.length>1),t.filters.reduce((r,s)=>$A(r,s)))}function $A(n,e){let t;return Mt(n instanceof wn||n instanceof Yn),Mt(e instanceof wn||e instanceof Yn),t=n instanceof wn?e instanceof wn?Yn.create([n,e],"and"):qP(n,e):e instanceof wn?qP(e,n):function(r,s){if(Mt(r.filters.length>0&&s.filters.length>0),Im(r)&&Im(s))return $N(r,s.getFilters());const u=yA(r)?r:s,l=yA(r)?s:r,g=u.filters.map(_=>$A(_,l));return Yn.create(g,"or")}(n,e),GC(t)}function qP(n,e){if(Im(e))return $N(e,n.getFilters());{const t=e.filters.map(r=>$A(n,r));return Yn.create(t,"or")}}function GC(n){if(Mt(n instanceof wn||n instanceof Yn),n instanceof wn)return n;const e=n.getFilters();if(1===e.length)return GC(e[0]);if(BN(n))return n;const t=e.map(s=>GC(s)),r=[];return t.forEach(s=>{s instanceof wn?r.push(s):s instanceof Yn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:Yn.create(r,n.op)}class vF{constructor(){this.rn=new HA}addToCollectionParentIndex(e,t){return this.rn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(yt.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(yt.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class HA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Cr(d.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Cr(d.comparator)).toArray()}}const WC=new Uint8Array(0);class _F{constructor(e,t){this.user=e,this.databaseId=t,this.on=new HA,this.un=new ec(r=>yf(r),(r,s)=>x0(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:ns(s)};return KP(e).put(u)}return ue.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[i(t),""],!1,!0);return KP(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(ru(l.parent))}return r})}addFieldIndex(e,t){const r=qC(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=q0(e);return u.next(g=>{l.put(BP(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=qC(e),s=q0(e),u=W0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=W0(e);let s=!0;const u=new Map;return ue.forEach(this.cn(t),l=>this.an(e,l).next(g=>{s&&(s=!!g),u.set(l,g)})).next(()=>{if(s){let l=an();const g=[];return ue.forEach(u,(_,D)=>{var b;Ke("IndexedDbIndexManager",`Using index ${b=_,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(St=>`${St.fieldPath}:${St.kind}`).join(",")}`} to execute ${yf(t)}`);const R=function(St,Bt){const xt=C(Bt);if(void 0===xt)return null;for(const pn of kC(St,xt.fieldPath))switch(pn.op){case"array-contains-any":return pn.value.arrayValue.values||[];case"array-contains":return[pn.value]}return null}(D,_),$=function(St,Bt){const xt=new Map;for(const pn of S(Bt))for(const Ri of kC(St,pn.fieldPath))switch(Ri.op){case"==":case"in":xt.set(pn.fieldPath.canonicalString(),Ri.value);break;case"not-in":case"!=":return xt.set(pn.fieldPath.canonicalString(),Ri.value),Array.from(xt.values())}return null}(D,_),Q=function(St,Bt){const xt=[];let pn=!0;for(const Ri of S(Bt)){const oc=0===Ri.kind?WN(St,Ri.fieldPath,St.startAt):qN(St,Ri.fieldPath,St.startAt);xt.push(oc.value),pn&&(pn=oc.inclusive)}return new Gl(xt,pn)}(D,_),me=function(St,Bt){const xt=[];let pn=!0;for(const Ri of S(Bt)){const oc=0===Ri.kind?qN(St,Ri.fieldPath,St.endAt):WN(St,Ri.fieldPath,St.endAt);xt.push(oc.value),pn&&(pn=oc.inclusive)}return new Gl(xt,pn)}(D,_),He=this.hn(_,D,Q),We=this.hn(_,D,me),nt=this.ln(_,D,$),lt=this.fn(_.indexId,R,He,Q.inclusive,We,me.inclusive,nt);return ue.forEach(lt,St=>r.H(St,t.limit).next(Bt=>{Bt.forEach(xt=>{const pn=v.fromSegments(xt.documentKey);l.has(pn)||(l=l.add(pn),g.push(pn))})}))}).next(()=>g)}return ue.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:yF(Yn.create(e.filters,"and")).map(r=>EA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,g){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),D=_/(null!=t?t.length:1),b=[];for(let R=0;R<_;++R){const $=t?this.dn(t[R/D]):WC,Q=this.wn(e,$,r[R%D],s),me=this._n(e,$,u[R%D],l),He=g.map(We=>this.wn(e,$,We,!0));b.push(...this.createRange(Q,me,He))}return b}wn(e,t,r,s){const u=new bf(e,v.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new bf(e,v.empty(),t,r);return s?u.Je():u}an(e,t){const r=new mF(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const g of u)r.tn(g)&&(!l||g.fields.length>l.fields.length)&&(l=g);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ue.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(g){let _=new Cr(y.comparator),D=!1;for(const b of g.filters)for(const R of b.getFlattenedFilters())R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?D=!0:_=_.add(R.field));for(const b of g.orderBy)b.field.isKeyField()||(_=_.add(b.field));return _.size+(D?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new G0;for(const s of S(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Cf.Ve._e(u,l)}return r.Qe()}dn(e){const t=new G0;return Cf.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new G0;return Cf.Ve._e(mf(this.databaseId,t),r.He(function(s){const u=S(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new G0);let u=0;for(const l of S(e)){const g=r[u++];for(const _ of s)if(this.yn(t,l.fieldPath)&&M0(g))s=this.pn(s,l,g);else{const D=_.He(l.kind);Cf.Ve._e(g,D)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const g of s){const _=new G0;_.seed(g.Qe()),Cf.Ve._e(l,_.He(t.kind)),u.push(_)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof wn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=qC(e),s=q0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ue.forEach(u,g=>s.get([g.indexId,this.uid]).next(_=>{l.push(function(D,b){const R=b?new be(b.sequenceNumber,new yt(If(b.readTime),new v(ru(b.documentKey)),b.largestBatchId)):be.empty(),$=D.fields.map(([Q,me])=>new q(y.fromServerFormat(Q),me));return new I(D.indexId,D.collectionGroup,$,R)}(g,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Zt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=qC(e),u=q0(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>ue.forEach(g,_=>u.put(BP(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ue.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(g=>(r.set(s.collectionGroup,g),ue.forEach(g,_=>this.En(e,s,_).next(D=>{const b=this.An(u,_);return D.isEqual(b)?ue.resolve():this.vn(e,u,_,D,b)}))))})}Rn(e,t,r,s){return W0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return W0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=W0(e);let u=new Cr(ql);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,g)=>{u=u.add(new bf(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}An(e,t){let r=new Cr(ql);const s=this.mn(t,e);if(null==s)return r;const u=C(t);if(null!=u){const l=e.data.field(u.fieldPath);if(M0(l))for(const g of l.arrayValue.values||[])r=r.add(new bf(t.indexId,e.key,this.dn(g),s))}else r=r.add(new bf(t.indexId,e.key,WC,s));return r}vn(e,t,r,s,u){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(g,_,D,b,R){const $=g.getIterator(),Q=_.getIterator();let me=_m($),He=_m(Q);for(;me||He;){let We=!1,nt=!1;if(me&&He){const lt=D(me,He);lt<0?nt=!0:lt>0&&(We=!0)}else null!=me?nt=!0:We=!0;We?(b(He),He=_m(Q)):nt?(R(me),me=_m($)):(me=_m($),He=_m(Q))}}(s,u,ql,g=>{l.push(this.Rn(e,t,r,g))},g=>{l.push(this.Pn(e,t,r,g))}),ue.waitFor(l)}Tn(e){let t=1;return q0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,g)=>ql(l,g)).filter((l,g,_)=>!g||0!==ql(l,_[g-1]));const s=[];s.push(e);for(const l of r){const g=ql(l,e),_=ql(l,t);if(0===g)s[0]=e.Je();else if(g>0&&_<0)s.push(l),s.push(l.Je());else if(_>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,WC,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,WC,[]]))}return u}bn(e,t){return ql(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZP)}getMinOffset(e,t){return ue.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||_t())).next(ZP)}}function KP(n){return Ai(n,"collectionParents")}function W0(n){return Ai(n,"indexEntries")}function qC(n){return Ai(n,"indexConfiguration")}function q0(n){return Ai(n,"indexState")}function ZP(n){Mt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Fe(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new yt(e.readTime,e.documentKey,t)}const YP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new rs(e,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function QP(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let g=0;const _=r.X({range:l},(b,R,$)=>(g++,$.delete()));u.push(_.next(()=>{Mt(1===g)}));const D=[];for(const b of t.mutations){const R=IN(e,b.key.path,t.batchId);u.push(s.delete(R)),D.push(b.key)}return ue.waitFor(u).next(()=>D)}function KC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _t();e=n.noDocument}return JSON.stringify(e).length}rs.DEFAULT_COLLECTION_PERCENTILE=10,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rs.DEFAULT=new rs(41943040,rs.DEFAULT_COLLECTION_PERCENTILE,rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rs.DISABLED=new rs(-1,0,0);class ZC{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){Mt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new ZC(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kl(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=xm(e),l=Kl(e);return l.add({}).next(g=>{Mt("number"==typeof g);const _=new SA(g,t,r,s),D=function($,Q,me){const He=me.baseMutations.map(nt=>$0($.fe,nt)),We=me.mutations.map(nt=>$0($.fe,nt));return{userId:Q,batchId:me.batchId,localWriteTimeMs:me.localWriteTime.toMillis(),baseMutations:He,mutations:We}}(this.serializer,this.userId,_),b=[];let R=new Cr(($,Q)=>Zt($.canonicalString(),Q.canonicalString()));for(const $ of s){const Q=IN(this.userId,$.key.path,g);R=R.add($.key.path.popLast()),b.push(l.put(D)),b.push(u.put(Q,o2))}return R.forEach($=>{b.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.Vn[g]=_.keys()}),ue.waitFor(b).next(()=>_)})}lookupMutationBatch(e,t){return Kl(e).get(t).next(r=>r?(Mt(r.userId===this.userId),Df(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ue.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Kl(e).X({index:"userMutationsIndex",range:s},(l,g,_)=>{g.userId===this.userId&&(Mt(g.batchId>=r),u=Df(this.serializer,g)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Kl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kl(e).j("userMutationsIndex",t).next(r=>r.map(s=>Df(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=SC(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return xm(e).X({range:s},(l,g,_)=>{const[D,b,R]=l,$=ru(b);if(D===this.userId&&t.path.isEqual($))return Kl(e).get(R).next(Q=>{if(!Q)throw _t();Mt(Q.userId===this.userId),u.push(Df(this.serializer,Q))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cr(Zt);const s=[];return t.forEach(u=>{const l=SC(this.userId,u.path),g=IDBKeyRange.lowerBound(l),_=xm(e).X({range:g},(D,b,R)=>{const[$,Q,me]=D,He=ru(Q);$===this.userId&&u.path.isEqual(He)?r=r.add(me):R.done()});s.push(_)}),ue.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=SC(this.userId,r),l=IDBKeyRange.lowerBound(u);let g=new Cr(Zt);return xm(e).X({range:l},(_,D,b)=>{const[R,$,Q]=_,me=ru($);R===this.userId&&r.isPrefixOf(me)?me.length===s&&(g=g.add(Q)):b.done()}).next(()=>this.Dn(e,g))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Kl(e).get(u).next(l=>{if(null===l)throw _t();Mt(l.userId===this.userId),r.push(Df(this.serializer,l))}))}),ue.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return QP(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ue.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return xm(e).X({range:r},(u,l,g)=>{if(u[0]===this.userId){const _=ru(u[1]);s.push(_)}else g.done()}).next(()=>{Mt(0===s.length)})})}containsKey(e,t){return JP(e,this.userId,t)}xn(e){return XP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function JP(n,e,t){const r=SC(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return xm(n).X({range:u,Y:!0},(g,_,D)=>{const[b,R,$]=g;b===e&&R===s&&(l=!0),D.done()}).next(()=>l)}function Kl(n){return Ai(n,"mutations")}function xm(n){return Ai(n,"documentMutations")}function XP(n){return Ai(n,"mutationQueues")}class Tf{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Tf(0)}static Mn(){return new Tf(-1)}}class EF{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Tf(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>a.fromTimestamp(new o(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rm(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Mt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return Rm(e).X((l,g)=>{const _=H0(g);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(s++,u.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(u)).next(()=>s)}forEachTarget(e,t){return Rm(e).X((r,s)=>{const u=H0(s);t(u)})}$n(e){return eO(e).get("targetGlobalKey").next(t=>(Mt(null!==t),t))}On(e,t){return eO(e).put("targetGlobalKey",t)}Fn(e,t){return Rm(e).put(VP(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yf(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Rm(e).X({range:s,index:"queryTargetsIndex"},(l,g,_)=>{const D=H0(g);x0(t,D.target)&&(u=D,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Zl(e);return t.forEach(l=>{const g=ns(l.path);s.push(u.put({targetId:r,path:g})),s.push(this.referenceDelegate.addReference(e,r,l))}),ue.waitFor(s)}removeMatchingKeys(e,t,r){const s=Zl(e);return ue.forEach(t,u=>{const l=ns(u.path);return ue.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Zl(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Zl(e);let u=an();return s.X({range:r,Y:!0},(l,g,_)=>{const D=ru(l[1]),b=new v(D);u=u.add(b)}).next(()=>u)}containsKey(e,t){const r=ns(t.path),s=IDBKeyRange.bound([r],[i(r)],!1,!0);let u=0;return Zl(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,g],_,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}le(e,t){return Rm(e).get(t).next(r=>r?H0(r):null)}}function Rm(n){return Ai(n,"targets")}function eO(n){return Ai(n,"targetGlobal")}function Zl(n){return Ai(n,"targetDocuments")}function tO([n,e],[t,r]){const s=Zt(n,t);return 0===s?Zt(e,r):s}class wF{constructor(e){this.Ln=e,this.buffer=new Cr(tO),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tO(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Vl(r)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield fn(r)}yield t.Qn(3e5)}))}}class IF{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(uo.ct);const r=new wF(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(YP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YP):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,g,_,D;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),s=this.params.maximumSequenceNumbersToCollect):s=R,l=Date.now(),this.nthSequenceNumber(e,s))).next(R=>(r=R,g=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(D=Date.now(),ff()<=No.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${s} in `+(g-l)+`ms\n\tRemoved ${u} targets in `+(_-g)+`ms\n\tRemoved ${R} documents in `+(D-_)+`ms\nTotal Duration: ${D-b}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:R})))}}class DF{constructor(e,t){this.db=e,this.garbageCollector=function rO(n,e){return new IF(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return YC(e,r)}removeReference(e,t,r){return YC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return YC(e,t)}Xn(e,t){return function(r,s){let u=!1;return XP(r).Z(l=>JP(r,l,s).next(g=>(g&&(u=!0),ue.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,g)=>{if(g<=t){const _=this.Xn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,a.min()),Zl(e).delete([0,ns(l.path)])))});s.push(_)}}).next(()=>ue.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return YC(e,t)}Yn(e,t){const r=Zl(e);let s,u=uo.ct;return r.X({index:"documentTargetsIndex"},([l,g],{path:_,sequenceNumber:D})=>{0===l?(u!==uo.ct&&t(new v(ru(s)),u),u=D,s=_):u=uo.ct}).next(()=>{u!==uo.ct&&t(new v(ru(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YC(n,e){return Zl(n).put((r=n.currentSequenceNumber,{targetId:0,path:ns(e.path),sequenceNumber:r}));var r}class iO{constructor(){this.changes=new ec(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class CF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Sf(e).put(r)}removeEntry(e,t,r){return Sf(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],HC(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=br.newInvalidDocument(t);return Sf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(K0(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:br.newInvalidDocument(t)};return Sf(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(K0(t))},(s,u)=>{r={document:this.ts(t,u),size:KC(u)}}).next(()=>r)}getEntries(e,t){let r=Hs();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=Hs(),s=new mr(v.comparator);return this.ns(e,t,(u,l)=>{const g=this.ts(u,l);r=r.insert(u,g),s=s.insert(u,KC(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ue.resolve();let s=new Cr(uO);t.forEach(_=>s=s.add(_));const u=IDBKeyRange.bound(K0(s.first()),K0(s.last())),l=s.getIterator();let g=l.getNext();return Sf(e).X({index:"documentKeyIndex",range:u},(_,D,b)=>{const R=v.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;g&&uO(g,R)<0;)r(g,null),g=l.getNext();g&&g.isEqual(R)&&(r(g,D),g=l.hasNext()?l.getNext():null),g?b.G(K0(g)):b.done()}).next(()=>{for(;g;)r(g,null),g=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),HC(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Sf(e).j(IDBKeyRange.bound(l,g,!0)).next(_=>{let D=Hs();for(const b of _){const R=this.ts(v.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);R.isFoundDocument()&&(N0(t,R)||s.has(R.key))&&(D=D.insert(R.key,R))}return D})}getAllFromCollectionGroup(e,t,r,s){let u=Hs();const l=aO(t,r),g=aO(t,yt.max());return Sf(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,g,!0)},(_,D,b)=>{const R=this.ts(v.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(R.key,R),u.size===s&&b.done()}).next(()=>u)}newChangeBuffer(e){return new bF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return oO(e).get("remoteDocumentGlobalKey").next(t=>(Mt(!!t),t))}Zn(e,t){return oO(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function lF(n,e){let t;if(e.document)t=xP(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=v.fromSegments(e.noDocument.path),s=If(e.noDocument.readTime);t=br.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _t();{const r=v.fromSegments(e.unknownDocument.path),s=If(e.unknownDocument.version);t=br.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new o(r[0],r[1]);return a.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(a.min()))return r}return br.newInvalidDocument(e)}}function sO(n){return new CF(n)}class bF extends iO{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ec(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Cr((u,l)=>Zt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const g=this.us.get(u);if(t.push(this.os.removeEntry(e,u,g.readTime)),l.isValidDocument()){const _=LP(this.os.serializer,l);s=s.add(u.path.popLast());const D=KC(_);r+=D-g.size,t.push(this.os.addEntry(e,u,_))}else if(r-=g.size,this.trackRemovals){const _=LP(this.os.serializer,l.convertToNoDocument(a.min()));t.push(this.os.addEntry(e,u,_))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function oO(n){return Ai(n,"remoteDocumentGlobal")}function Sf(n){return Ai(n,"remoteDocumentsV14")}function K0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aO(n,e){const t=e.documentKey.path.toArray();return[n,HC(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uO(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Zt(t[u],r[u]),s)return s;return s=Zt(t.length,r.length),s||(s=Zt(t[t.length-2],r[r.length-2]),s||Zt(t[t.length-1],r[r.length-1]))}class TF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cO{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&F0(r.mutation,s,$s.empty(),o.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,an()).next(()=>r))}getLocalViewOfDocuments(e,t,r=an()){const s=su();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=P0();return u.forEach((g,_)=>{l=l.insert(g,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=su();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,an()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,s){let u=Hs();const l=O0(),g=O0();return t.forEach((_,D)=>{const b=r.get(D.key);s.has(D.key)&&(void 0===b||b.mutation instanceof tc)?u=u.insert(D.key,D):void 0!==b?(l.set(D.key,b.mutation.getFieldMask()),F0(b.mutation,D,b.mutation.getFieldMask(),o.now())):l.set(D.key,$s.empty())}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((D,b)=>l.set(D,b)),t.forEach((D,b)=>{var R;return g.set(D,new TF(b,null!==(R=l.get(D))&&void 0!==R?R:null))}),g))}recalculateAndSaveOverlays(e,t){const r=O0();let s=new mr((l,g)=>l-g),u=an();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(_=>{const D=t.get(_);if(null===D)return;let b=r.get(_)||$s.empty();b=g.applyToLocalView(D,b),r.set(_,b);const R=(s.get(g.batchId)||an()).add(_);s=s.insert(g.batchId,R)})}).next(()=>{const l=[],g=s.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),D=_.key,b=_.value,R=tP();b.forEach($=>{if(!u.has($)){const Q=lP(t.get($),r.get($));null!==Q&&R.set($,Q),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,R))}return ue.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return v.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):IA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ue.resolve(su());let g=-1,_=u;return l.next(D=>ue.forEach(D,(b,R)=>(g<R.largestBatchId&&(g=R.largestBatchId),u.get(b)?ue.resolve():this.remoteDocumentCache.getEntry(e,b).next($=>{_=_.insert(b,$)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,_,D,an())).next(b=>({batchId:g,changes:eP(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new v(t)).next(r=>{let s=P0();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=P0();return this.indexManager.getCollectionParents(e,s).next(l=>ue.forEach(l,g=>{const _=(D=t,b=g.child(s),new Xu(b,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,b;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(D=>{D.forEach((b,R)=>{u=u.insert(b,R)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,_)=>{const D=_.getKey();null===u.get(D)&&(u=u.insert(D,br.newInvalidDocument(D)))});let l=P0();return u.forEach((g,_)=>{const D=s.get(g);void 0!==D&&F0(D.mutation,_,$s.empty(),o.now()),N0(t,_)&&(l=l.insert(g,_))}),l})}}class SF{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ue.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Kr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:LA(r.bundledQuery),readTime:Kr(r.readTime)}),ue.resolve();var r}}class MF{constructor(){this.overlays=new mr(v.comparator),this.ls=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=su();return ue.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const s=su(),u=t.length+1,l=new v(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const _=g.getNext().value,D=_.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&_.largestBatchId>r&&s.set(_.getKey(),_)}return ue.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new mr((D,b)=>D-b);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let b=u.get(D.largestBatchId);null===b&&(b=su(),u=u.insert(D.largestBatchId,b)),b.set(D.getKey(),D)}}const g=su(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((D,b)=>g.set(D,b)),!(g.size()>=s)););return ue.resolve(g)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new AA(t,r));let u=this.ls.get(t);void 0===u&&(u=an(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class zA{constructor(){this.fs=new Cr(xi.ds),this.ws=new Cr(xi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new xi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new xi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new v(new d([])),r=new xi(t,e),s=new xi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new v(new d([])),r=new xi(t,e),s=new xi(t,e+1);let u=an();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new xi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class xi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return v.comparator(e.key,t.key)||Zt(e.As,t.As)}static _s(e,t){return Zt(e.As,t.As)||v.comparator(e.key,t.key)}}class AF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Cr(xi.ds)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new SA(u,t,r,s);this.mutationQueue.push(l);for(const g of s)this.Rs=this.Rs.add(new xi(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ue.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xi(t,0),s=new xi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const g=this.Ps(l.As);u.push(g)}),ue.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cr(Zt);return t.forEach(s=>{const u=new xi(s,0),l=new xi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),ue.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;v.isDocumentKey(u)||(u=u.child(""));const l=new xi(new v(u),0);let g=new Cr(Zt);return this.Rs.forEachWhile(_=>{const D=_.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(g=g.add(_.As)),!0)},l),ue.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Mt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ue.forEach(t.mutations,s=>{const u=new xi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new xi(t,0),s=this.Rs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ue.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class xF{constructor(e){this.Ds=e,this.docs=new mr(v.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():br.newInvalidDocument(t))}getEntries(e,t){let r=Hs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():br.newInvalidDocument(s))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Hs();const l=t.path,g=new v(l.child("")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:D,value:{document:b}}=_.getNext();if(!l.isPrefixOf(D.path))break;D.path.length>l.length+1||Fe(ot(b),r)<=0||(s.has(b.key)||N0(t,b))&&(u=u.insert(b.key,b.mutableCopy()))}return ue.resolve(u)}getAllFromCollectionGroup(e,t,r,s){_t()}Cs(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new RF(this)}getSize(e){return ue.resolve(this.size)}}class RF extends iO{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class NF{constructor(e){this.persistence=e,this.xs=new ec(t=>yf(t),x0),this.lastRemoteSnapshotVersion=a.min(),this.highestTargetId=0,this.Ns=0,this.ks=new zA,this.targetCount=0,this.Ms=Tf.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ue.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Tf(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Fn(t),ue.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),ue.waitFor(u).next(()=>s)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ue.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.ks.containsKey(t))}}class GA{constructor(e,t){this.$s={},this.overlays={},this.Os=new uo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new NF(this),this.indexManager=new vF,this.remoteDocumentCache=new xF(r=>this.referenceDelegate.Ls(r)),this.serializer=new FP(t),this.qs=new SF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new MF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new AF(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("MemoryPersistence","Starting transaction:",e);const s=new PF(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ue.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class PF extends on{constructor(e){super(),this.currentSequenceNumber=e}}class QC{constructor(e){this.persistence=e,this.Qs=new zA,this.js=null}static zs(e){return new QC(e)}get Ws(){if(this.js)return this.js;throw _t()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ws,r=>{const s=v.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,a.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ue.or([()=>ue.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class OF{constructor(e){this.serializer=e}O(e,t,r,s){const u=new TC("createOrUpgrade",t);var g;r<1&&s>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wN,{unique:!0}),g.createObjectStore("documentMutations"),lO(e),function(g){g.createObjectStore("remoteDocuments")}(e));let l=ue.resolve();return r<3&&s>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),lO(e)),l=l.next(()=>function(g){const _=g.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:a.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",D)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(g,_){return _.store("mutations").j().next(D=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wN,{unique:!0});const b=_.store("mutations"),R=D.map($=>b.put($));return ue.waitFor(R)})}(e,u))),l=l.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(g){const _=g.createObjectStore("documentOverlays",{keyPath:v2});_.createIndex("collectionPathOverlayIndex",_2,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",E2,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(g){const _=g.createObjectStore("remoteDocumentsV14",{keyPath:a2});_.createIndex("documentKeyIndex",u2),_.createIndex("collectionGroupIndex",c2)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:p2}).createIndex("sequenceNumberIndex",g2,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:m2}).createIndex("documentKeyIndex",y2,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=KC(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ue.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(g=>ue.forEach(g,_=>{Mt(_.userId===u.userId);const D=Df(this.serializer,_);return QP(e,u.userId,D).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,g)=>{const _=new d(l),D=[0,ns(_)];u.push(t.get(D).next(b=>b?ue.resolve():t.put({targetId:0,path:ns(_),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ue.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:f2});const r=t.store("collectionParents"),s=new HA,u=l=>{if(s.add(l)){const g=l.lastSegment(),_=l.popLast();return r.put({collectionId:g,parent:ns(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,g)=>{const _=new d(l);return u(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,g,_],D)=>{const b=ru(g);return u(b.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=H0(s),l=VP(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const g=t.store("remoteDocumentsV14"),_=(D=l,D.document?new v(d.fromString(D.document.name).popFirst(5)):D.noDocument?v.fromSegments(D.noDocument.path):D.unknownDocument?v.fromSegments(D.unknownDocument.path):_t()).path.toArray();var D;const b={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(g.put(b))}).next(()=>ue.waitFor(s))}si(e,t){const r=t.store("mutations"),s=sO(this.serializer),u=new GA(QC.zs,this.serializer.fe);return r.j().next(l=>{const g=new Map;return l.forEach(_=>{var D;let b=null!==(D=g.get(_.userId))&&void 0!==D?D:an();Df(this.serializer,_).keys().forEach(R=>b=b.add(R)),g.set(_.userId,b)}),ue.forEach(g,(_,D)=>{const b=new qr(D),R=zC.de(this.serializer,b),$=u.getIndexManager(b),Q=ZC.de(b,this.serializer,$,u.referenceDelegate);return new cO(s,Q,R,$).recalculateAndSaveOverlaysForDocumentKeys(new pA(t,uo.ct),_).next()})})}}function lO(n){n.createObjectStore("targetDocuments",{keyPath:d2}).createIndex("documentTargetsIndex",h2,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",l2,{unique:!0}),n.createObjectStore("targetGlobal")}const WA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qA{constructor(e,t,r,s,u,l,g,_,D,b,R=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=g,this.ri=D,this.oi=b,this.ui=R,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=$=>Promise.resolve(),!qA.D())throw new $e(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new DF(this,s),this.di=t+"main",this.serializer=new FP(_),this.wi=new pa(this.di,this.ui,new OF(this.serializer)),this.Bs=new EF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sO(this.serializer),this.qs=new dF,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&Or("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $e(fe.FAILED_PRECONDITION,WA);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new uo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,Ee.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>XC(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Vl(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Z0(e).get("owner").next(t=>ue.resolve(this.Ri(t)))}Pi(e){return XC(e).delete(this.clientId)}bi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=Ai(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),g=u.filter(_=>-1===l.indexOf(_));return ue.forEach(g,_=>s.delete(_.clientId)).next(()=>g)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ue.resolve(!0):Z0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new $e(fe.FAILED_PRECONDITION,WA);return!1}}return!(!this.networkEnabled||!this.inForeground)||XC(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pA(t,uo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>XC(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return ZC.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _F(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return zC.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ke("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?I2:14===l?bN:13===l?CN:12===l?w2:11===l?DN:void _t();var l;let g;return this.wi.runTransaction(e,s,u,_=>(g=new pA(_,this.Os?this.Os.next():uo.ct),"readwrite-primary"===t?this.Ti(g).next(D=>!!D||this.Ei(g)).next(D=>{if(!D)throw Or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new $e(fe.FAILED_PRECONDITION,Ot);return r(g)}).next(D=>this.vi(g).next(()=>D)):this.Oi(g).next(()=>r(g)))).then(_=>(g.raiseOnCommittedEvent(),_))}Oi(e){return Z0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $e(fe.FAILED_PRECONDITION,WA)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Z0(e).put("owner",t)}static D(){return pa.D()}Ai(e){const t=Z0(e);return t.get("owner").next(r=>this.Ri(r)?(Ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Or(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,En.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Or("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Or("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Z0(n){return Ai(n,"owner")}function XC(n){return Ai(n,"clientMetadata")}function KA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class ZA{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=an(),s=an();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new ZA(e,t.fromCache,r,s)}}class dO{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(ZN(t))return ue.resolve(null);let r=Ss(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=LC(t,null,"F"),r=Ss(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=an(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(_=>{const D=this.ji(t,g);return this.zi(t,D,l,_.readTime)?this.Ki(e,LC(t,null,"F")):this.Wi(e,D,t,_)}))})))}Gi(e,t,r,s){return ZN(t)||s.isEqual(a.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(ff()<=No.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),CA(t)),this.Wi(e,l,t,qe(s,-1)))})}ji(e,t){let r=new Cr(JN(e));return t.forEach((s,u)=>{N0(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return ff()<=No.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",CA(t)),this.Ui.getDocumentsMatchingQuery(e,t,yt.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class kF{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new mr(Zt),this.Yi=new ec(u=>yf(u),x0),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cO(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function hO(n,e,t,r){return new kF(n,e,t,r)}function fO(n,e){return YA.apply(this,arguments)}function YA(){return YA=(0,Ee.Z)(function*(n,e){const t=ht(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let _=an();for(const D of s){l.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}for(const D of u){g.push(D.batchId);for(const b of D.mutations)_=_.add(b.key)}return t.localDocuments.getDocuments(r,_).next(D=>({er:D,removedBatchIds:l,addedBatchIds:g}))})})}),YA.apply(this,arguments)}function pO(n){const e=ht(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function gO(n,e,t){let r=an(),s=an();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Hs();return t.forEach((g,_)=>{const D=u.get(g);_.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(g)),_.isNoDocument()&&_.version.isEqual(a.min())?(e.removeEntry(g,_.readTime),l=l.insert(g,_)):!D.isValidDocument()||_.version.compareTo(D.version)>0||0===_.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(_),l=l.insert(g,_)):Ke("LocalStore","Ignoring outdated watch update for ",g,". Current version:",D.version," Watch version:",_.version)}),{nr:l,sr:s}})}function VF(n,e){const t=ht(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nm(n,e){const t=ht(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ue.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new nc(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Pm(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,Ee.Z)(function*(n,e,t){const r=ht(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Vl(l))throw l;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),QA.apply(this,arguments)}function eb(n,e,t){const r=ht(n);let s=a.min(),u=an();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,_,D){const b=ht(g),R=b.Yi.get(D);return void 0!==R?ue.resolve(b.Ji.get(R)):b.Bs.getTargetData(_,D)}(r,l,Ss(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(_=>{u=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:a.min(),t?u:an())).next(g=>(vO(r,QN(e),g),{documents:g,ir:u})))}function mO(n,e){const t=ht(n),r=ht(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function yO(n,e){const t=ht(n),r=t.Xi.get(e)||a.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,qe(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(vO(t,e,s),s))}function vO(n,e,t){let r=n.Xi.get(e)||a.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function JA(){return JA=(0,Ee.Z)(function*(n,e,t,r){const s=ht(n);let u=an(),l=Hs();for(const D of t){const b=e.rr(D.metadata.name);D.document&&(u=u.add(b));const R=e.ur(D);R.setReadTime(e.cr(D.metadata.readTime)),l=l.insert(b,R)}const g=s.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Nm(s,(D=r,Ss(Dm(d.fromString(`__bundle__/docs/${D}`)))));var D;return s.persistence.runTransaction("Apply bundle documents","readwrite",D=>gO(D,g,l).next(b=>(g.apply(D),b)).next(b=>s.Bs.removeMatchingKeysForTargetId(D,_.targetId).next(()=>s.Bs.addMatchingKeys(D,u,_.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(D,b.nr,b.sr)).next(()=>b.nr)))}),JA.apply(this,arguments)}function BF(n,e){return XA.apply(this,arguments)}function XA(){return XA=(0,Ee.Z)(function*(n,e,t=an()){const r=yield Nm(n,Ss(LA(e.bundledQuery))),s=ht(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Kr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const g=r.withResumeToken(mi.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(g.targetId,g),s.Bs.updateTargetData(u,g).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),XA.apply(this,arguments)}function _O(n,e){return`firestore_clients_${n}_${e}`}function EO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function e1(n,e){return`firestore_targets_${n}_${e}`}class tb{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new $e(s.error.code,s.error.message))),l?new tb(e,t,s.state,u):(Or("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Y0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new $e(r.error.code,r.error.message))),u?new Y0(e,r.state,s):(Or("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=bA();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=_N(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new nb(e,u):(Or("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class t1{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new t1(t.clientId,t.onlineState):(Or("SharedClientState",`Failed to parse online state: ${e}`),null)}}class n1{constructor(){this.activeTargetIds=bA()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class r1{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new mr(Zt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=_O(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new n1),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(_O(e.persistenceKey,s));if(u){const l=nb.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(e1(this.persistenceKey,e));if(r){const s=Y0.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(e1(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ke("SharedClientState","READ",e,t),t}setItem(e,t){Ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=uo.ct;if(null!=u)try{const g=JSON.parse(u);Mt("number"==typeof g),l=g}catch(g){Or("SharedClientState","Failed to read sequence number from WebStorage",g)}return l}(r.newValue);s!==uo.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new tb(this.currentUser,e,t,r),u=EO(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=EO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=e1(this.persistenceKey,e),u=new Y0(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return nb.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return tb.ar(new qr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return Y0.ar(s,t)}br(e){return t1.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],g=[];return u.forEach(_=>{s.has(_)||l.push(_)}),s.forEach(_=>{u.has(_)||g.push(_)}),this.syncEngine.Wr(l,g).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=bA();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class wO{constructor(){this.Hr=new n1,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new n1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class jF{Yr(e){}shutdown(){}}class IO{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rb=null;function i1(){return null===rb?rb=268435456+Math.round(2147483648*Math.random()):rb++,"0x"+rb.toString(16)}const $F={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HF{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const is="WebChannelConnection";class zF extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=i1(),g=this.To(e,t);Ke("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const _={};return this.Eo(_,s,u),this.Ao(e,g,_,r).then(D=>(Ke("RestConnection",`Received RPC '${e}' ${l}: `,D),D),D=>{throw bs("RestConnection",`RPC '${e}' ${l} failed with error: `,D,"url: ",g,"request:",r),D})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${$F[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=i1();return new Promise((l,g)=>{const _=new DC;_.setWithCredentials(!0),_.listenOnce(aA.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case wC.NO_ERROR:const b=_.getResponseJson();Ke(is,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(b)),l(b);break;case wC.TIMEOUT:Ke(is,`RPC '${e}' ${u} timed out`),g(new $e(fe.DEADLINE_EXCEEDED,"Request time out"));break;case wC.HTTP_ERROR:const R=_.getStatus();if(Ke(is,`RPC '${e}' ${u} failed with status:`,R,"response text:",_.getResponseText()),R>0){let $=_.getResponseJson();Array.isArray($)&&($=$[0]);const Q=$?.error;if(Q&&Q.status&&Q.message){const me=function(He){const We=He.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(We)>=0?We:fe.UNKNOWN}(Q.status);g(new $e(me,Q.message))}else g(new $e(fe.UNKNOWN,"Server responded with status "+_.getStatus()))}else g(new $e(fe.UNAVAILABLE,"Connection failed."));break;default:_t()}}finally{Ke(is,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(s);Ke(is,`RPC '${e}' ${u} sending request:`,s),_.send(t,"POST",D,r,15)})}Ro(e,t,r){const s=i1(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=oA(),g=lN(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(_.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(_.xmlHttpFactory=new cA({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const b=u.join("");Ke(is,`Creating RPC '${e}' stream ${s}: ${b}`,_);const R=l.createWebChannel(b,_);let $=!1,Q=!1;const me=new HF({ro:We=>{Q?Ke(is,`Not sending because RPC '${e}' stream ${s} is closed:`,We):($||(Ke(is,`Opening RPC '${e}' stream ${s} transport.`),R.open(),$=!0),Ke(is,`RPC '${e}' stream ${s} sending:`,We),R.send(We))},oo:()=>R.close()}),He=(We,nt,lt)=>{We.listen(nt,St=>{try{lt(St)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return He(R,hf.EventType.OPEN,()=>{Q||Ke(is,`RPC '${e}' stream ${s} transport opened.`)}),He(R,hf.EventType.CLOSE,()=>{Q||(Q=!0,Ke(is,`RPC '${e}' stream ${s} transport closed`),me.wo())}),He(R,hf.EventType.ERROR,We=>{Q||(Q=!0,bs(is,`RPC '${e}' stream ${s} transport errored:`,We),me.wo(new $e(fe.UNAVAILABLE,"The operation could not be completed")))}),He(R,hf.EventType.MESSAGE,We=>{var nt;if(!Q){const lt=We.data[0];Mt(!!lt);const Bt=lt.error||(null===(nt=lt[0])||void 0===nt?void 0:nt.error);if(Bt){Ke(is,`RPC '${e}' stream ${s} received error:`,Bt);const xt=Bt.status;let pn=function(oc){const Kk=ii[oc];if(void 0!==Kk)return mP(Kk)}(xt),Ri=Bt.message;void 0===pn&&(pn=fe.INTERNAL,Ri="Unknown error status: "+xt+" with message "+Bt.message),Q=!0,me.wo(new $e(pn,Ri)),R.close()}else Ke(is,`RPC '${e}' stream ${s} received:`,lt),me._o(lt)}}),He(g,uA.STAT_EVENT,We=>{We.stat===IC.PROXY?Ke(is,`RPC '${e}' stream ${s} detected buffering proxy`):We.stat===IC.NOPROXY&&Ke(is,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{me.fo()},0),me}}function DO(){return typeof window<"u"?window:null}function ib(){return typeof document<"u"?document:null}function Q0(n){return new eF(n,!0)}class s1{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class CO{constructor(e,t,r,s,u,l,g,_){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new s1(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new $e(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,Ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GF extends CO{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function rF(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:_t(),s=e.targetChange.targetIds||[],u=function(_,D){return _.useProto3Json?(Mt(void 0===D||"string"==typeof D),mi.fromBase64String(D||"")):(Mt(void 0===D||D instanceof Uint8Array),mi.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(_){const D=void 0===_.code?fe.UNKNOWN:mP(_.code);return new $e(D,_.message||"")}(l);t=new wP(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=ou(n,r.document.name),u=Kr(r.document.updateTime),l=r.document.createTime?Kr(r.document.createTime):a.min(),g=new Hi({mapValue:{fields:r.document.fields}}),_=br.newFoundDocument(s,u,l,g);t=new $C(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,s=ou(n,r.document),u=r.readTime?Kr(r.readTime):a.min(),l=br.newNoDocument(s,u);t=new $C([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=ou(n,r.document);t=new $C([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return _t();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new K2(s,u);t=new EP(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return a.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?a.min():u.readTime?Kr(u.readTime):a.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=j0(this.serializer),t.addTarget=function(s,u){let l;const g=u.target;if(l=OC(g)?{documents:RP(s,g)}:{query:FA(s,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=bP(s,u.resumeToken);const _=NA(s,u.expectedCount);null!==_&&(l.expectedCount=_)}else if(u.snapshotVersion.compareTo(a.min())>0){l.readTime=Mm(s,u.snapshotVersion.toTimestamp());const _=NA(s,u.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function sF(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=j0(this.serializer),t.removeTarget=e,this.Wo(t)}}class WF extends CO{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Mt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function iF(n,e){return n&&n.length>0?(Mt(void 0!==e),n.map(t=>function(r,s){let u=Kr(r.updateTime?r.updateTime:s);return u.isEqual(a.min())&&(u=Kr(s)),new z2(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Kr(e.commitTime);return this.listener.cu(r,t)}return Mt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=j0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$0(this.serializer,r))};this.Wo(t)}}class qF extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new $e(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $e(fe.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new $e(fe.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class ZF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Or(t),this.mu=!1):Ke("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class YF{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;Yl(l)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(D){const b=ht(D);b.vu.add(4),yield Om(b),b.bu.set("Unknown"),b.vu.delete(4),yield J0(b)}),function(D){return _.apply(this,arguments)})(l))}))}),this.bu=new ZF(r,s)}}function J0(n){return a1.apply(this,arguments)}function a1(){return a1=(0,Ee.Z)(function*(n){if(Yl(n))for(const e of n.Ru)yield e(!0)}),a1.apply(this,arguments)}function Om(n){return u1.apply(this,arguments)}function u1(){return u1=(0,Ee.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),u1.apply(this,arguments)}function sb(n,e){const t=ht(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),d1(t)?l1(t):Fm(t).Ko()&&c1(t,e))}function X0(n,e){const t=ht(n),r=Fm(t);t.Au.delete(e),r.Ko()&&bO(t,e),0===t.Au.size&&(r.Ko()?r.jo():Yl(t)&&t.bu.set("Unknown"))}function c1(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(a.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Fm(n).su(e)}function bO(n,e){n.Vu.qt(e),Fm(n).iu(e)}function l1(n){n.Vu=new Y2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Fm(n).start(),n.bu.gu()}function d1(n){return Yl(n)&&!Fm(n).Uo()&&n.Au.size>0}function Yl(n){return 0===ht(n).vu.size}function TO(n){n.Vu=void 0}function QF(n){return h1.apply(this,arguments)}function h1(){return h1=(0,Ee.Z)(function*(n){n.Au.forEach((e,t)=>{c1(n,e)})}),h1.apply(this,arguments)}function JF(n,e){return f1.apply(this,arguments)}function f1(){return f1=(0,Ee.Z)(function*(n,e){TO(n),d1(n)?(n.bu.Iu(e),l1(n)):n.bu.set("Unknown")}),f1.apply(this,arguments)}function XF(n,e,t){return p1.apply(this,arguments)}function p1(){return p1=(0,Ee.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof wP&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(s,u){const l=u.cause;for(const g of u.targetIds)s.Au.has(g)&&(yield s.remoteSyncer.rejectListen(g,l),s.Au.delete(g),s.Vu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ob(n,r)}else if(e instanceof $C?n.Vu.Ht(e):e instanceof EP?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(a.min()))try{const r=yield pO(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const D=s.Au.get(_);D&&s.Au.set(_,D.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,_)=>{const D=s.Au.get(g);if(!D)return;s.Au.set(g,D.withResumeToken(mi.EMPTY_BYTE_STRING,D.snapshotVersion)),bO(s,g);const b=new nc(D.target,g,_,D.sequenceNumber);c1(s,b)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ke("RemoteStore","Failed to raise snapshot:",r),yield ob(n,r)}var r}),p1.apply(this,arguments)}function ob(n,e,t){return g1.apply(this,arguments)}function g1(){return g1=(0,Ee.Z)(function*(n,e,t){if(!Vl(e))throw e;n.vu.add(1),yield Om(n),n.bu.set("Offline"),t||(t=()=>pO(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield J0(n)}))}),g1.apply(this,arguments)}function SO(n,e){return e().catch(t=>ob(n,t,e))}function km(n){return m1.apply(this,arguments)}function m1(){return m1=(0,Ee.Z)(function*(n){const e=ht(n),t=Ql(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;eL(e);)try{const s=yield VF(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,tL(e,s)}catch(s){yield ob(e,s)}MO(e)&&AO(e)}),m1.apply(this,arguments)}function eL(n){return Yl(n)&&n.Eu.length<10}function tL(n,e){n.Eu.push(e);const t=Ql(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function MO(n){return Yl(n)&&!Ql(n).Uo()&&n.Eu.length>0}function AO(n){Ql(n).start()}function nL(n){return y1.apply(this,arguments)}function y1(){return y1=(0,Ee.Z)(function*(n){Ql(n).hu()}),y1.apply(this,arguments)}function rL(n){return v1.apply(this,arguments)}function v1(){return v1=(0,Ee.Z)(function*(n){const e=Ql(n);for(const t of n.Eu)e.uu(t.mutations)}),v1.apply(this,arguments)}function iL(n,e,t){return _1.apply(this,arguments)}function _1(){return _1=(0,Ee.Z)(function*(n,e,t){const r=n.Eu.shift(),s=MA.from(r,e,t);yield SO(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield km(n)}),_1.apply(this,arguments)}function sL(n,e){return E1.apply(this,arguments)}function E1(){return E1=(0,Ee.Z)(function*(n,e){var t;e&&Ql(n).ou&&(yield(t=(0,Ee.Z)(function*(r,s){if(gP(u=s.code)&&u!==fe.ABORTED){const l=r.Eu.shift();Ql(r).Qo(),yield SO(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield km(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),MO(n)&&AO(n)}),E1.apply(this,arguments)}function xO(n,e){return w1.apply(this,arguments)}function w1(){return w1=(0,Ee.Z)(function*(n,e){const t=ht(n);t.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const r=Yl(t);t.vu.add(3),yield Om(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield J0(t)}),w1.apply(this,arguments)}function I1(n,e){return D1.apply(this,arguments)}function D1(){return D1=(0,Ee.Z)(function*(n,e){const t=ht(n);e?(t.vu.delete(2),yield J0(t)):e||(t.vu.add(2),yield Om(t),t.bu.set("Unknown"))}),D1.apply(this,arguments)}function Fm(n){return n.Su||(n.Su=function(e,t,r){const s=ht(e);return s.fu(),new GF(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:QF.bind(null,n),ao:JF.bind(null,n),nu:XF.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Su.Qo(),d1(n)?l1(n):n.bu.set("Unknown")):(yield n.Su.stop(),TO(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ql(n){return n.Du||(n.Du=function(e,t,r){const s=ht(e);return s.fu(),new WF(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:nL.bind(null,n),ao:sL.bind(null,n),au:rL.bind(null,n),cu:iL.bind(null,n)}),n.Ru.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Du.Qo(),yield km(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class C1{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,g=new C1(e,t,l,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $e(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lm(n,e){if(Or("AsyncQueue",`${e}: ${n}`),Vl(n))return new $e(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Vm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||v.comparator(t.key,r.key):(t,r)=>v.comparator(t.key,r.key),this.keyedMap=P0(),this.sortedSet=new mr(this.comparator)}static emptySet(e){return new Vm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Vm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RO{constructor(){this.Cu=new mr(v.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):_t():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Um{constructor(e,t,r,s,u,l,g,_,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Um(e,t,Vm.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&R0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class oL{constructor(){this.Nu=void 0,this.listeners=[]}}class aL{constructor(){this.queries=new ec(e=>YN(e),R0),this.onlineState="Unknown",this.ku=new Set}}function b1(n,e){return T1.apply(this,arguments)}function T1(){return T1=(0,Ee.Z)(function*(n,e){const t=ht(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new oL),s)try{u.Nu=yield t.onListen(r)}catch(l){const g=Lm(l,`Initialization of query '${CA(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&A1(t)}),T1.apply(this,arguments)}function S1(n,e){return M1.apply(this,arguments)}function M1(){return M1=(0,Ee.Z)(function*(n,e){const t=ht(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),M1.apply(this,arguments)}function uL(n,e){const t=ht(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const g of l.listeners)g.$u(s)&&(r=!0);l.Nu=s}}r&&A1(t)}function cL(n,e,t){const r=ht(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function A1(n){n.ku.forEach(e=>{e.next()})}class x1{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Um(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Um.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class lL{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class NO{constructor(e){this.serializer=e}rr(e){return ou(this.serializer,e)}ur(e){return e.metadata.exists?xP(this.serializer,e.document,!1):br.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Kr(e)}}class dL{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=PO(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=d.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new NO(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const g=(t.get(l)||an()).add(u);t.set(l,g)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function UF(n,e,t,r){return JA.apply(this,arguments)}(e.localStore,new NO(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield BF(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function PO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OO{constructor(e){this.key=e}}class kO{constructor(e){this.key=e}}class FO{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=an(),this.mutatedKeys=an(),this.tc=JN(e),this.ec=new Vm(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new RO,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,g=!1;const _="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((b,R)=>{const $=s.get(b),Q=N0(this.query,R)?R:null,me=!!$&&this.mutatedKeys.has($.key),He=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let We=!1;$&&Q?$.data.isEqual(Q.data)?me!==He&&(r.track({type:3,doc:Q}),We=!0):this.rc($,Q)||(r.track({type:2,doc:Q}),We=!0,(_&&this.tc(Q,_)>0||D&&this.tc(Q,D)<0)&&(g=!0)):!$&&Q?(r.track({type:0,doc:Q}),We=!0):$&&!Q&&(r.track({type:1,doc:$}),We=!0,(_||D)&&(g=!0)),We&&(Q?(l=l.add(Q),u=He?u.add(b):u.delete(b)):(l=l.delete(b),u=u.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),u=u.delete(b.key),r.track({type:1,doc:b})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((D,b)=>function(R,$){const Q=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t()}};return Q(R)-Q($)}(D.type,b.type)||this.tc(D.doc,b.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,_=g!==this.Xu;return this.Xu=g,0!==u.length||_?{snapshot:new Um(this.query,e.ec,s,u,e.mutatedKeys,0===g,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new RO,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=an(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new kO(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new OO(r))}),t}hc(e){this.Yu=e.ir,this.Zu=an();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Um.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class hL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class fL{constructor(e){this.key=e,this.fc=!1}}class pL{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new ec(g=>YN(g),R0),this._c=new Map,this.mc=new Set,this.gc=new mr(v.comparator),this.yc=new Map,this.Ic=new zA,this.Tc={},this.Ec=new Map,this.Ac=Tf.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function gL(n,e){return R1.apply(this,arguments)}function R1(){return R1=(0,Ee.Z)(function*(n,e){const t=ex(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield Nm(t.localStore,Ss(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield N1(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&sb(t.remoteStore,l)}return s}),R1.apply(this,arguments)}function N1(n,e,t,r,s){return P1.apply(this,arguments)}function P1(){return P1=(0,Ee.Z)(function*(n,e,t,r,s){n.Rc=(R,$,Q)=>{return(me=(0,Ee.Z)(function*(He,We,nt,lt){let St=We.view.sc(nt);St.zi&&(St=yield eb(He.localStore,We.query,!1).then(({documents:pn})=>We.view.sc(pn,St)));const Bt=lt&&lt.targetChanges.get(We.targetId),xt=We.view.applyChanges(St,He.isPrimaryClient,Bt);return H1(He,We.targetId,xt.cc),xt.snapshot}),function(He,We,nt,lt){return me.apply(this,arguments)})(n,R,$,Q);var me};const u=yield eb(n.localStore,e,!0),l=new FO(e,u.ir),g=l.sc(u.documents),_=U0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=l.applyChanges(g,n.isPrimaryClient,_);H1(n,t,D.cc);const b=new hL(e,t,l);return n.wc.set(e,b),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),D.snapshot}),P1.apply(this,arguments)}function mL(n,e){return O1.apply(this,arguments)}function O1(){return O1=(0,Ee.Z)(function*(n,e){const t=ht(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!R0(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Pm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),X0(t.remoteStore,r.targetId),Bm(t,r.targetId)}).catch(fn))):(Bm(t,r.targetId),yield Pm(t.localStore,r.targetId,!0))}),O1.apply(this,arguments)}function k1(){return k1=(0,Ee.Z)(function*(n,e,t){const r=tx(n);try{const s=yield function(u,l){const g=ht(u),_=o.now(),D=l.reduce(($,Q)=>$.add(Q.key),an());let b,R;return g.persistence.runTransaction("Locally write mutations","readwrite",$=>{let Q=Hs(),me=an();return g.Zi.getEntries($,D).next(He=>{Q=He,Q.forEach((We,nt)=>{nt.isValidDocument()||(me=me.add(We))})}).next(()=>g.localDocuments.getOverlayedDocuments($,Q)).next(He=>{b=He;const We=[];for(const nt of l){const lt=W2(nt,b.get(nt.key).overlayedDocument);null!=lt&&We.push(new tc(nt.key,lt,FN(lt.value.mapValue),kr.exists(!0)))}return g.mutationQueue.addMutationBatch($,_,We,l)}).next(He=>{R=He;const We=He.applyToLocalDocumentSet(b,me);return g.documentOverlayCache.saveOverlays($,He.batchId,We)})}).then(()=>({batchId:R.batchId,changes:eP(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,g){let _=u.Tc[u.currentUser.toKey()];_||(_=new mr(Zt)),_=_.insert(l,g),u.Tc[u.currentUser.toKey()]=_}(r,s.batchId,t),yield rc(r,s.changes),yield km(r.remoteStore)}catch(s){const u=Lm(s,"Failed to persist write");t.reject(u)}}),k1.apply(this,arguments)}function LO(n,e){return F1.apply(this,arguments)}function F1(){return F1=(0,Ee.Z)(function*(n,e){const t=ht(n);try{const r=yield function LF(n,e){const t=ht(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const g=[];e.targetChanges.forEach((b,R)=>{const $=s.get(R);if(!$)return;g.push(t.Bs.removeMatchingKeys(u,b.removedDocuments,R).next(()=>t.Bs.addMatchingKeys(u,b.addedDocuments,R)));let Q=$.withSequenceNumber(u.currentSequenceNumber);var me,He,We;null!==e.targetMismatches.get(R)?Q=Q.withResumeToken(mi.EMPTY_BYTE_STRING,a.min()).withLastLimboFreeSnapshotVersion(a.min()):b.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(b.resumeToken,r)),s=s.insert(R,Q),He=Q,We=b,(0===(me=$).resumeToken.approximateByteSize()||He.snapshotVersion.toMicroseconds()-me.snapshotVersion.toMicroseconds()>=3e8||We.addedDocuments.size+We.modifiedDocuments.size+We.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,Q))});let _=Hs(),D=an();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),g.push(gO(u,l,e.documentUpdates).next(b=>{_=b.nr,D=b.sr})),!r.isEqual(a.min())){const b=t.Bs.getLastRemoteSnapshotVersion(u).next(R=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(b)}return ue.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,D)).next(()=>_)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(Mt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?Mt(l.fc):s.removedDocuments.size>0&&(Mt(l.fc),l.fc=!1))}),yield rc(t,r,e)}catch(r){yield fn(r)}}),F1.apply(this,arguments)}function VO(n,e,t){const r=ht(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&s.push(g.snapshot)}),function(u,l){const g=ht(u);g.onlineState=l;let _=!1;g.queries.forEach((D,b)=>{for(const R of b.listeners)R.Mu(l)&&(_=!0)}),_&&A1(g)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function vL(n,e,t){return L1.apply(this,arguments)}function L1(){return L1=(0,Ee.Z)(function*(n,e,t){const r=ht(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new mr(v.comparator);l=l.insert(u,br.newNoDocument(u,a.min()));const g=an().add(u),_=new V0(a.min(),new Map,new mr(Zt),l,g);yield LO(r,_),r.gc=r.gc.remove(u),r.yc.delete(e),z1(r)}else yield Pm(r.localStore,e,!1).then(()=>Bm(r,e,t)).catch(fn)}),L1.apply(this,arguments)}function _L(n,e){return V1.apply(this,arguments)}function V1(){return V1=(0,Ee.Z)(function*(n,e){const t=ht(n),r=e.batch.batchId;try{const s=yield function FF(n,e){const t=ht(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,_,D){const b=_.batch,R=b.keys();let $=ue.resolve();return R.forEach(Q=>{$=$.next(()=>D.getEntry(g,Q)).next(me=>{const He=_.docVersions.get(Q);Mt(null!==He),me.version.compareTo(He)<0&&(b.applyToRemoteDocument(me,_),me.isValidDocument()&&(me.setReadTime(_.commitVersion),D.addEntry(me)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(g,b))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=an();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(g=g.add(l.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);$1(t,r,null),j1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield rc(t,s)}catch(s){yield fn(s)}}),V1.apply(this,arguments)}function EL(n,e,t){return U1.apply(this,arguments)}function U1(){return U1=(0,Ee.Z)(function*(n,e,t){const r=ht(n);try{const s=yield function(u,l){const g=ht(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let D;return g.mutationQueue.lookupMutationBatch(_,l).next(b=>(Mt(null!==b),D=b.keys(),g.mutationQueue.removeMutationBatch(_,b))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,D,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,D)).next(()=>g.localDocuments.getDocuments(_,D))})}(r.localStore,e);$1(r,e,t),j1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield rc(r,s)}catch(s){yield fn(s)}}),U1.apply(this,arguments)}function B1(){return B1=(0,Ee.Z)(function*(n,e){const t=ht(n);Yl(t.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=ht(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>l.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=Lm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),B1.apply(this,arguments)}function j1(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function $1(n,e,t){const r=ht(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||UO(n,r)})}function UO(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(X0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),z1(n))}function H1(n,e,t){for(const r of t)r instanceof OO?(n.Ic.addReference(r.key,e),IL(n,r)):r instanceof kO?(Ke("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||UO(n,r.key)):_t()}function IL(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ke("SyncEngine","New document in limbo: "+t),n.mc.add(r),z1(n))}function z1(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new v(d.fromString(e)),r=n.Ac.next();n.yc.set(r,new fL(t)),n.gc=n.gc.insert(t,r),sb(n.remoteStore,new nc(Ss(Dm(t.path)),r,"TargetPurposeLimboResolution",uo.ct))}}function rc(n,e,t){return G1.apply(this,arguments)}function G1(){return G1=(0,Ee.Z)(function*(n,e,t){const r=ht(n),s=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,_)=>{l.push(r.Rc(_,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,D?.fromCache?"not-current":"current"),D){s.push(D);const b=ZA.Li(_.targetId,D);u.push(b)}}))}),yield Promise.all(l),r.dc.nu(s),yield(g=(0,Ee.Z)(function*(_,D){const b=ht(_);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>ue.forEach(D,$=>ue.forEach($.Fi,Q=>b.persistence.referenceDelegate.addReference(R,$.targetId,Q)).next(()=>ue.forEach($.Bi,Q=>b.persistence.referenceDelegate.removeReference(R,$.targetId,Q)))))}catch(R){if(!Vl(R))throw R;Ke("LocalStore","Failed to update sequence numbers: "+R)}for(const R of D){const $=R.targetId;if(!R.fromCache){const Q=b.Ji.get($),He=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);b.Ji=b.Ji.insert($,He)}}}),function(_,D){return g.apply(this,arguments)})(r.localStore,u))}),G1.apply(this,arguments)}function DL(n,e){return W1.apply(this,arguments)}function W1(){return W1=(0,Ee.Z)(function*(n,e){const t=ht(n);if(!t.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const r=yield fO(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new $e(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield rc(t,r.er)}var s}),W1.apply(this,arguments)}function CL(n,e){const t=ht(n),r=t.yc.get(e);if(r&&r.fc)return an().add(r.key);{let s=an();const u=t._c.get(e);if(!u)return s;for(const l of u){const g=t.wc.get(l);s=s.unionWith(g.view.nc)}return s}}function bL(n,e){return q1.apply(this,arguments)}function q1(){return q1=(0,Ee.Z)(function*(n,e){const t=ht(n),r=yield eb(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&H1(t,e.targetId,s.cc),s}),q1.apply(this,arguments)}function TL(n,e){return K1.apply(this,arguments)}function K1(){return K1=(0,Ee.Z)(function*(n,e){const t=ht(n);return yO(t.localStore,e).then(r=>rc(t,r))}),K1.apply(this,arguments)}function SL(n,e,t,r){return Z1.apply(this,arguments)}function Z1(){return Z1=(0,Ee.Z)(function*(n,e,t,r){const s=ht(n),u=yield function(l,g){const _=ht(l),D=ht(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",b=>D.Sn(b,g).next(R=>R?_.localDocuments.getDocuments(b,R):ue.resolve(null)))}(s.localStore,e);var g;null!==u?("pending"===t?yield km(s.remoteStore):"acknowledged"===t||"rejected"===t?($1(s,e,r||null),j1(s,e),g=e,ht(ht(s.localStore).mutationQueue).Cn(g)):_t(),yield rc(s,u)):Ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),Z1.apply(this,arguments)}function Y1(){return Y1=(0,Ee.Z)(function*(n,e){const t=ht(n);if(ex(t),tx(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield BO(t,r.toArray());t.vc=!0,yield I1(t.remoteStore,!0);for(const u of s)sb(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Bm(t,l),Pm(t.localStore,l,!0))),X0(t.remoteStore,l)}),yield s,yield BO(t,r),function(u){const l=ht(u);l.yc.forEach((g,_)=>{X0(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new mr(v.comparator)}(t),t.vc=!1,yield I1(t.remoteStore,!1)}}),Y1.apply(this,arguments)}function BO(n,e,t){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,Ee.Z)(function*(n,e,t){const r=ht(n),s=[],u=[];for(const l of e){let g;const _=r._c.get(l);if(_&&0!==_.length){g=yield Nm(r.localStore,Ss(_[0]));for(const D of _){const b=r.wc.get(D),R=yield bL(r,b);R.snapshot&&u.push(R.snapshot)}}else{const D=yield mO(r.localStore,l);g=yield Nm(r.localStore,D),yield N1(r,jO(D),l,!1,g.resumeToken)}s.push(g)}return r.dc.nu(u),s}),Q1.apply(this,arguments)}function jO(n){return KN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function AL(n){const e=ht(n);return ht(ht(e.localStore).persistence).$i()}function xL(n,e,t,r){return J1.apply(this,arguments)}function J1(){return J1=(0,Ee.Z)(function*(n,e,t,r){const s=ht(n);if(s.vc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield yO(s.localStore,QN(u[0])),g=V0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,mi.EMPTY_BYTE_STRING);yield rc(s,l,g);break}case"rejected":yield Pm(s.localStore,e,!0),Bm(s,e,r);break;default:_t()}}),J1.apply(this,arguments)}function RL(n,e,t){return X1.apply(this,arguments)}function X1(){return X1=(0,Ee.Z)(function*(n,e,t){const r=ex(n);if(r.vc){for(const s of e){if(r._c.has(s)){Ke("SyncEngine","Adding an already active target "+s);continue}const u=yield mO(r.localStore,s),l=yield Nm(r.localStore,u);yield N1(r,jO(u),l.targetId,!1,l.resumeToken),sb(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Pm(r.localStore,s,!1).then(()=>{X0(r.remoteStore,s),Bm(r,s)}).catch(fn))}}),X1.apply(this,arguments)}function ex(n){const e=ht(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=LO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vL.bind(null,e),e.dc.nu=uL.bind(null,e.eventManager),e.dc.Pc=cL.bind(null,e.eventManager),e}function tx(n){const e=ht(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_L.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EL.bind(null,e),e}class eE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.serializer=Q0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hO(this.persistence,new dO,e.initialUser,this.serializer)}createPersistence(e){return new GA(QC.zs,this.serializer)}createSharedClientState(e){return new wO}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class nx extends eE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield tx(r.Vc.syncEngine),yield km(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return hO(this.persistence,new dO,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new nO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new i2(t,this.persistence);return new r2(e.asyncQueue,r)}createPersistence(e){const t=KA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?rs.withCacheSize(this.cacheSizeBytes):rs.DEFAULT;return new qA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DO(),ib(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new wO}}class $O extends nx{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof r1&&(r.sharedClientState.syncEngine={jr:SL.bind(null,s),zr:xL.bind(null,s),Wr:RL.bind(null,s),$i:AL.bind(null,s),Qr:TL.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,Ee.Z)(function*(l){yield function ML(n,e){return Y1.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=DO();if(!r1.D(t))throw new $e(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=KA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new r1(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jm{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>VO(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=DL.bind(null,r.syncEngine),yield I1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new aL}createDatastore(e){const t=Q0(e.databaseInfo.databaseId),r=new zF(e.databaseInfo);return new qF(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>VO(this.syncEngine,g,0),l=IO.D()?new IO:new jF,new YF(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,g,_,D){const b=new pL(r,s,u,l,g,_);return D&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=ht(t);Ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Om(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HO(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ab{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class OL{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new ri,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new lL(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class kL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new $e(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,Ee.Z)(function*(u,l){const g=ht(u),_=j0(g.serializer)+"/documents",D={documents:l.map(Q=>B0(g.serializer,Q))},b=yield g.vo("BatchGetDocuments",_,D,l.length),R=new Map;b.forEach(Q=>{const me=function nF(n,e){return"found"in e?function(t,r){Mt(!!r.found);const s=ou(t,r.found.name),u=Kr(r.found.updateTime),l=r.found.createTime?Kr(r.found.createTime):a.min(),g=new Hi({mapValue:{fields:r.found.fields}});return br.newFoundDocument(s,u,l,g)}(n,e):"missing"in e?function(t,r){Mt(!!r.missing),Mt(!!r.readTime);const s=ou(t,r.missing),u=Kr(r.readTime);return br.newNoDocument(s,u)}(n,e):_t()}(g.serializer,Q);R.set(me.key.toString(),me)});const $=[];return l.forEach(Q=>{const me=R.get(Q.toString());Mt(!!me),$.push(me)}),$}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Sm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=v.fromPath(s);e.mutations.push(new TA(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(s,u){const l=ht(s),g=j0(l.serializer)+"/documents",_={writes:u.map(D=>$0(l.serializer,D))};yield l.Io("Commit",g,_)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _t();t=a.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new $e(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(a.min())?kr.exists(!1):kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(a.min()))throw new $e(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class FL{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new s1(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ee.Z)(function*(){const t=new kL(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!C0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!gP(t)}return!1}}class LL{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=qr.UNAUTHENTICATED,this.clientId=bC.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(g){Ke("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ke("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $e(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Lm(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function ub(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield fO(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),rx.apply(this,arguments)}function ix(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ox(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>xO(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>xO(e.remoteStore,u)),n._onlineComponents=e}),sx.apply(this,arguments)}function zO(n){return"FirebaseError"===n.name?n.code===fe.FAILED_PRECONDITION||n.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ox(n){return ax.apply(this,arguments)}function ax(){return ax=(0,Ee.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ub(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!zO(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),yield ub(n,new eE)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield ub(n,new eE);return n._offlineComponents}),ax.apply(this,arguments)}function cb(n){return ux.apply(this,arguments)}function ux(){return ux=(0,Ee.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield ix(n,n._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield ix(n,new jm))),n._onlineComponents}),ux.apply(this,arguments)}function GO(n){return ox(n).then(e=>e.persistence)}function lb(n){return ox(n).then(e=>e.localStore)}function WO(n){return cb(n).then(e=>e.remoteStore)}function cx(n){return cb(n).then(e=>e.syncEngine)}function $m(n){return lx.apply(this,arguments)}function lx(){return lx=(0,Ee.Z)(function*(n){const e=yield cb(n),t=e.eventManager;return t.onListen=gL.bind(null,e.syncEngine),t.onUnlisten=mL.bind(null,e.syncEngine),t}),lx.apply(this,arguments)}function KO(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,g,_){const D=new ab({next:R=>{u.enqueueAndForget(()=>S1(s,b));const $=R.docs.has(l);!$&&R.fromCache?_.reject(new $e(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&R.fromCache&&g&&"server"===g.source?_.reject(new $e(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(R)},error:R=>_.reject(R)}),b=new x1(Dm(l.path),D,{includeMetadataChanges:!0,Ku:!0});return b1(s,b)}(yield $m(n),n.asyncQueue,e,t,r)})),r.promise}function ZO(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(s,u,l,g,_){const D=new ab({next:R=>{u.enqueueAndForget(()=>S1(s,b)),R.fromCache&&"server"===g.source?_.reject(new $e(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(R)},error:R=>_.reject(R)}),b=new x1(l,D,{includeMetadataChanges:!0,Ku:!0});return b1(s,b)}(yield $m(n),n.asyncQueue,e,t,r)})),r.promise}function YO(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const QO=new Map;function dx(n,e,t){if(!t)throw new $e(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JO(n,e,t,r){if(!0===e&&!0===r)throw new $e(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XO(n){if(!v.isDocumentKey(n))throw new $e(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ek(n){if(v.isDocumentKey(n))throw new $e(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function db(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":_t()}function In(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $e(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=db(n);throw new $e(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tk(n,e){if(e<=0)throw new $e(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class nk{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new $e(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $e(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=YO(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new $e(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $e(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $e(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tE{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $e(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $e(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new hN;switch(t.type){case"firstParty":return new dA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new $e(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=QO.get(e);t&&(Ke("ComponentProvider","Removing Datastore"),QO.delete(e),t.terminate())}(this),Promise.resolve()}}class Tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new au(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class au extends zi{constructor(e,t,r){super(e,t,Dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new v(e))}withConverter(e){return new au(this.firestore,e,this._path)}}function ik(n,e,...t){if(n=(0,En.m9)(n),dx("collection","path",e),n instanceof tE){const r=d.fromString(e,...t);return ek(r),new au(n,null,r)}{if(!(n instanceof Tr||n instanceof au))throw new $e(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(d.fromString(e,...t));return ek(r),new au(n.firestore,null,r)}}function hb(n,e,...t){if(n=(0,En.m9)(n),1===arguments.length&&(e=bC.A()),dx("doc","path",e),n instanceof tE){const r=d.fromString(e,...t);return XO(r),new Tr(n,null,new v(r))}{if(!(n instanceof Tr||n instanceof au))throw new $e(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(d.fromString(e,...t));return XO(r),new Tr(n.firestore,n instanceof au?n.converter:null,new v(r))}}function sk(n,e){return n=(0,En.m9)(n),e=(0,En.m9)(e),(n instanceof Tr||n instanceof au)&&(e instanceof Tr||e instanceof au)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function hx(n,e){return n=(0,En.m9)(n),e=(0,En.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&R0(n._query,e._query)&&n.converter===e.converter}class qL{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new s1(this,"async_queue_retry"),this.Xc=()=>{const t=ib();t&&Ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=ib();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=ib();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ri;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Vl(t))throw t;Ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Or("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=C1.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&_t()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function fx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class KL{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sr extends tE{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new qL,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ok(this),this._firestoreClient.terminate()}}function Zr(n){return n._firestoreClient||ok(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ok(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new b2(n._databaseId,g,n._persistenceKey,(D=s).host,D.ssl,D.experimentalForceLongPolling,D.experimentalAutoDetectLongPolling,YO(D.experimentalLongPollingOptions),D.useFetchStreams));var g,D;n._firestoreClient=new LL(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function ak(n,e,t){const r=new ri;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield ub(n,t),yield ix(n,e),r.resolve()}catch(s){const u=s;if(!zO(u))throw u;bs("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function uk(n){if(n._initialized||n._terminated)throw new $e(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uu(mi.fromBase64String(e))}catch(t){throw new $e(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uu(mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $e(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new y(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Mf{constructor(e){this._methodName=e}}class fb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $e(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $e(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const sV=/^__.*__$/;class oV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tm(e,this.data,t,this.fieldTransforms)}}class ck{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t()}}class pb{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new pb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return yb(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(lk(this.ca)&&sV.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class aV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Q0(e)}ya(e,t,r,s=!1){return new pb({ca:e,methodName:t,ga:r,path:y.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Af(n){const e=n._freezeSettings(),t=Q0(n._databaseId);return new aV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function gb(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);yx("Data must be an object, but it was:",l,r);const g=fk(r,l);let _,D;if(u.merge)_=new $s(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const b=[];for(const R of u.mergeFields){const $=iE(e,R,t);if(!l.contains($))throw new $e(fe.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);gk(b,$)||b.push($)}_=new $s(b),D=l.fieldTransforms.filter(R=>_.covers(R.field))}else _=null,D=l.fieldTransforms;return new oV(new Hi(g),_,D)}class rE extends Mf{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rE}}function dk(n,e,t){return new pb({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class px extends Mf{_toFieldTransform(e){return new k0(e.path,new Cm)}isEqual(e){return e instanceof px}}class uV extends Mf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=dk(this,e,!0),r=this.pa.map(u=>xf(u,t)),s=new _f(r);return new k0(e.path,s)}isEqual(e){return this===e}}class cV extends Mf{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=dk(this,e,!0),r=this.pa.map(u=>xf(u,t)),s=new Ef(r);return new k0(e.path,s)}isEqual(e){return this===e}}class lV extends Mf{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new bm(e.serializer,iP(e.serializer,this.Ia));return new k0(e.path,t)}isEqual(e){return this===e}}function gx(n,e,t,r){const s=n.ya(1,e,t);yx("Data must be an object, but it was:",s,r);const u=[],l=Hi.empty();Ul(r,(_,D)=>{const b=mb(e,_,t);D=(0,En.m9)(D);const R=s.da(b);if(D instanceof rE)u.push(b);else{const $=xf(D,R);null!=$&&(u.push(b),l.set(b,$))}});const g=new $s(u);return new ck(l,g,s.fieldTransforms)}function mx(n,e,t,r,s,u){const l=n.ya(1,e,t),g=[iE(e,r,t)],_=[s];if(u.length%2!=0)throw new $e(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)g.push(iE(e,u[$])),_.push(u[$+1]);const D=[],b=Hi.empty();for(let $=g.length-1;$>=0;--$)if(!gk(D,g[$])){const Q=g[$];let me=_[$];me=(0,En.m9)(me);const He=l.da(Q);if(me instanceof rE)D.push(Q);else{const We=xf(me,He);null!=We&&(D.push(Q),b.set(Q,We))}}const R=new $s(D);return new ck(b,R,l.fieldTransforms)}function hk(n,e,t,r=!1){return xf(t,n.ya(r?4:3,e))}function xf(n,e){if(pk(n=(0,En.m9)(n)))return yx("Unsupported field value:",e,n),fk(n,e);if(n instanceof Mf)return function(t,r){if(!lk(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let g=xf(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,En.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return iP(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=o.fromDate(t);return{timestampValue:Mm(r.serializer,s)}}if(t instanceof o){const s=new o(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mm(r.serializer,s)}}if(t instanceof fb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uu)return{bytesValue:bP(r.serializer,t._byteString)};if(t instanceof Tr){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:PA(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${db(t)}`)}(n,e)}function fk(n,e){const t={};return SN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ul(n,(r,s)=>{const u=xf(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function pk(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof o||n instanceof fb||n instanceof uu||n instanceof Tr||n instanceof Mf)}function yx(n,e,t){if(!pk(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=db(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function iE(n,e,t){if((e=(0,En.m9)(e))instanceof ic)return e._internalPath;if("string"==typeof e)return mb(n,e);throw yb("Field path arguments must be of type string or ",n,!1,void 0,t)}const dV=new RegExp("[~\\*/\\[\\]]");function mb(n,e,t){if(e.search(dV)>=0)throw yb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ic(...e.split("."))._internalPath}catch{throw yb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yb(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(u||l)&&(_+=" (found",u&&(_+=` in field ${r}`),l&&(_+=` in document ${s}`),_+=")"),new $e(fe.INVALID_ARGUMENT,g+n+_)}function gk(n,e){return n.some(t=>t.isEqual(e))}class sE{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hV extends sE{data(){return super.data()}}function vb(n,e){return"string"==typeof e?mb(n,e):e instanceof ic?e._internalPath:e._delegate._internalPath}function mk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new $e(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vx{}class oE extends vx{}function Jl(n,e,...t){let r=[];e instanceof vx&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof Hm).length,l=s.filter(g=>g instanceof aE).length;if(u>1||u>0&&l>0)throw new $e(fe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class aE extends oE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new aE(e,t,r)}_apply(e){const t=this._parse(e);return Ek(e._query,t),new zi(e.firestore,e.converter,DA(e._query,t))}_parse(e){const t=Af(e.firestore);return function(s,u,l,g,_,D,b){let R;if(_.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new $e(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){_k(b,D);const $=[];for(const Q of b)$.push(vk(g,s,Q));R={arrayValue:{values:$}}}else R=vk(g,s,b)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||_k(b,D),R=hk(l,"where",b,"in"===D||"not-in"===D);return wn.create(_,D,R)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Hm extends vx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Hm(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const g of l)Ek(u,g),u=DA(u,g)}(e._query,t),new zi(e.firestore,e.converter,DA(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _x extends oE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _x(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new $e(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new $e(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new wm(s,u);return function(g,_){if(null===wA(g)){const D=FC(g);null!==D&&wk(0,D,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Xu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class _b extends oE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new _b(e,t,r)}_apply(e){return new zi(e.firestore,e.converter,LC(e._query,this._limit,this._limitType))}}class Eb extends oE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Eb(e,t,r)}_apply(e){const t=yk(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(s=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class wb extends oE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new wb(e,t,r)}_apply(e){const t=yk(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(s=t,new Xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function yk(n,e,t,r){if(t[0]=(0,En.m9)(t[0]),t[0]instanceof sE)return function(s,u,l,g,_){if(!g)throw new $e(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const b of vf(s))if(b.field.isKeyField())D.push(mf(u,g.key));else{const R=g.data.field(b.field);if(AC(R))throw new $e(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const $=b.field.canonicalString();throw new $e(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}D.push(R)}return new Gl(D,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=Af(n.firestore);return function(u,l,g,_,D,b){const R=u.explicitOrderBy;if(D.length>R.length)throw new $e(fe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let Q=0;Q<D.length;Q++){const me=D[Q];if(R[Q].field.isKeyField()){if("string"!=typeof me)throw new $e(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof me}`);if(!IA(u)&&-1!==me.indexOf("/"))throw new $e(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${me}' contains a slash.`);const He=u.path.child(d.fromString(me));if(!v.isDocumentKey(He))throw new $e(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${He}' is not because it contains an odd number of segments.`);const We=new v(He);$.push(mf(l,We))}else{const He=hk(g,_,me);$.push(He)}}return new Gl($,b)}(n._query,n.firestore._databaseId,s,e,t,r)}}function vk(n,e,t){if("string"==typeof(t=(0,En.m9)(t))){if(""===t)throw new $e(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!IA(e)&&-1!==t.indexOf("/"))throw new $e(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(d.fromString(t));if(!v.isDocumentKey(r))throw new $e(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return mf(n,new v(r))}if(t instanceof Tr)return mf(n,t._key);throw new $e(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${db(t)}.`)}function _k(n,e){if(!Array.isArray(n)||0===n.length)throw new $e(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ek(n,e){if(e.isInequality()){const r=FC(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new $e(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=wA(n);null!==u&&wk(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new $e(fe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function wk(n,e,t){if(!t.isEqual(e))throw new $e(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Ex{convertValue(e,t="none"){switch(Hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ju(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw _t()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ul(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new fb(zr(e.latitude),zr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=xC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(T0(e));default:return null}}convertTimestamp(e){const t=Bl(e);return new o(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=d.fromString(e);Mt(kP(r));const s=new jl(r.get(1),r.get(3)),u=new v(r.popFirst(5));return s.isEqual(t)||Or(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function Ib(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wV extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}class Rf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sc extends sE{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new uE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class uE extends sc{data(e={}){return super.data(e)}}class Xl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Rf(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new uE(this._firestore,this._userDataWriter,r.key,r,new Rf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $e(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new uE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const g=new uE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Rf(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,D=-1;return 0!==l.type&&(_=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:DV(l.type),doc:g,oldIndex:_,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t()}}function Dk(n,e){return n instanceof sc&&e instanceof sc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xl&&e instanceof Xl&&n._firestore===e._firestore&&hx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ed extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}function Ck(n,e,t){n=In(n,Tr);const r=In(n.firestore,Sr),s=Ib(n.converter,e,t);return zm(r,[gb(Af(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,kr.none())])}function bk(n,e,t,...r){n=In(n,Tr);const s=In(n.firestore,Sr),u=Af(s);let l;return l="string"==typeof(e=(0,En.m9)(e))||e instanceof ic?mx(u,"updateDoc",n._key,e,t,r):gx(u,"updateDoc",n._key,e),zm(s,[l.toMutation(n._key,kr.exists(!0))])}function Tk(n,...e){var t,r,s;n=(0,En.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||fx(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(fx(e[l])){const R=e[l];e[l]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[l+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[l+2]=null===(s=R.complete)||void 0===s?void 0:s.bind(R)}let _,D,b;if(n instanceof Tr)D=In(n.firestore,Sr),b=Dm(n._key.path),_={next:R=>{e[l]&&e[l](wx(D,n,R))},error:e[l+1],complete:e[l+2]};else{const R=In(n,zi);D=In(R.firestore,Sr),b=R._query;const $=new ed(D);_={next:Q=>{e[l]&&e[l](new Xl(D,$,R,Q))},error:e[l+1],complete:e[l+2]},mk(n._query)}return function(R,$,Q,me){const He=new ab(me),We=new x1($,He,Q);return R.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return b1(yield $m(R),We)})),()=>{He.Dc(),R.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return S1(yield $m(R),We)}))}}(Zr(D),b,g,_)}function zm(n,e){return function(t,r){const s=new ri;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function yL(n,e,t){return k1.apply(this,arguments)}(yield cx(t),r,s)})),s.promise}(Zr(n),e)}function wx(n,e,t){const r=t.docs.get(e._key),s=new ed(n);return new sc(n,s,e._key,r,new Rf(t.hasPendingWrites,t.fromCache),e.converter)}const jV={maxAttempts:5};class Sk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Af(e)}set(e,t,r){this._verifyNotCommitted();const s=td(e,this._firestore),u=Ib(s.converter,t,r),l=gb(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,kr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=td(e,this._firestore);let l;return l="string"==typeof(t=(0,En.m9)(t))||t instanceof ic?mx(this._dataReader,"WriteBatch.update",u._key,t,r,s):gx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=td(e,this._firestore);return this._mutations=this._mutations.concat(new Sm(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $e(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function td(n,e){if((n=(0,En.m9)(n)).firestore!==e)throw new $e(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $V extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Af(e)}get(e){const t=td(e,this._firestore),r=new wV(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return _t();const u=s[0];if(u.isFoundDocument())return new sE(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new sE(this._firestore,r,t._key,null,t.converter);throw _t()})}set(e,t,r){const s=td(e,this._firestore),u=Ib(s.converter,t,r),l=gb(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=td(e,this._firestore);let l;return l="string"==typeof(t=(0,En.m9)(t))||t instanceof ic?mx(this._dataReader,"Transaction.update",u._key,t,r,s):gx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=td(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=td(e,this._firestore),r=new ed(this._firestore);return super.get(e).then(s=>new sc(this._firestore,r,t._key,s._document,new Rf(!1,!1),t.converter))}}function Ix(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new $e("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ak(){if(typeof Uint8Array>"u")throw new $e("unimplemented","Uint8Arrays are not available in this environment.")}function xk(){if(!function D2(){return typeof atob<"u"}())throw new $e("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Qu=ja.SDK_VERSION,(0,ja._registerComponent)(new Xc.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Sr(new pN(t.getProvider("auth-internal")),new mN(t.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new $e(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jl(g.options.projectId,_)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,ja.registerVersion)(mm,"3.12.2",n),(0,ja.registerVersion)(mm,"3.12.2","esm2017")}();class cE{constructor(e){this._delegate=e}static fromBase64String(e){return xk(),new cE(uu.fromBase64String(e))}static fromUint8Array(e){return Ak(),new cE(uu.fromUint8Array(e))}toBase64(){return xk(),this._delegate.toBase64()}toUint8Array(){return Ak(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Dx(n){return function QV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class JV{enableIndexedDbPersistence(e,t){return function YL(n,e){uk(n=In(n,Sr));const t=Zr(n);if(t._uninitializedComponentsProvider)throw new $e(fe.FAILED_PRECONDITION,"SDK cache is already specified.");bs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new jm;return ak(t,s,new nx(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function QL(n){uk(n=In(n,Sr));const e=Zr(n);if(e._uninitializedComponentsProvider)throw new $e(fe.FAILED_PRECONDITION,"SDK cache is already specified.");bs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new jm;return ak(e,r,new $O(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function JL(n){if(n._initialized&&!n._terminated)throw new $e(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!pa.D())return Promise.resolve();const s=r+"main";yield pa.delete(s)}),function(r){return t.apply(this,arguments)})(KA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Rk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof jl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&bs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function rk(n,e,t,r={}){var s;const u=(n=In(n,tE))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==l&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:l,ssl:!1})),r.mockUserToken){let g,_;if("string"==typeof r.mockUserToken)g=r.mockUserToken,_=qr.MOCK_USER;else{g=(0,En.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new $e(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new qr(D)}n._authCredentials=new fN(new CC(g,_))}}(this._delegate,e,t,r)}enableNetwork(){return function eV(n){return function VL(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield GO(n),t=yield WO(n);return e.setNetworkEnabled(!0),function(r){const s=ht(r);return s.vu.delete(0),J0(s)}(t)}))}(Zr(n=In(n,Sr)))}(this._delegate)}disableNetwork(){return function tV(n){return function UL(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield GO(n),t=yield WO(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(s){const u=ht(s);u.vu.add(0),yield Om(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Zr(n=In(n,Sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,JO("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function XL(n){return function(e){const t=new ri;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function wL(n,e){return B1.apply(this,arguments)}(yield cx(e),t)})),t.promise}(Zr(n=In(n,Sr)))}(this._delegate)}onSnapshotsInSync(e){return function NV(n,e){return function $L(n,e){const t=new ab(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield $m(n),s=t,ht(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield $m(n),s=t,void ht(r).ku.delete(s);var r,s}))}}(Zr(n=In(n,Sr)),fx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new $e("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gm(this,ik(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,hb(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,function WL(n,e){if(n=In(n,tE),dx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $e(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new Xu(d.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HV(n,e,t){n=In(n,Sr);const r=Object.assign(Object.assign({},jV),t);return function(s){if(s.maxAttempts<1)throw new $e(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const g=new ri;return s.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const _=yield function qO(n){return cb(n).then(e=>e.datastore)}(s);new FL(s.asyncQueue,_,l,u,g).run()})),g.promise}(Zr(n),s=>e(new $V(n,s)),r)}(this._delegate,t=>e(new Nk(this,t)))}batch(){return Zr(this._delegate),new Pk(new Sk(this._delegate,e=>zm(this._delegate,e)))}loadBundle(e){return function nV(n,e){const t=Zr(n=In(n,Sr)),r=new KL;return function HL(n,e,t,r){const s=function(u,l){let g;return g="string"==typeof u?yP().encode(u):u,_=function(_,D){if(_ instanceof Uint8Array)return HO(_,D);if(_ instanceof ArrayBuffer)return HO(new Uint8Array(_),D);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new OL(_,l);var _}(t,Q0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function NL(n,e,t){const r=ht(n);var s;(s=(0,Ee.Z)(function*(u,l,g){try{const _=yield l.getMetadata();if(yield function($,Q){const me=ht($),He=Kr(Q.createTime);return me.persistence.runTransaction("hasNewerBundle","readonly",We=>me.qs.getBundleMetadata(We,Q.id)).then(We=>!!We&&We.createTime.compareTo(He)>=0)}(u.localStore,_))return yield l.close(),g._completeWith({taskState:"Success",documentsLoaded:($=_).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);g._updateProgress(PO(_));const D=new dL(_,u.localStore,l.serializer);let b=yield l.bc();for(;b;){const $=yield D.zu(b);$&&g._updateProgress($),b=yield l.bc()}const R=yield D.complete();return yield rc(u,R.Ju,void 0),yield function($,Q){const me=ht($);return me.persistence.runTransaction("Save bundle","readwrite",He=>me.qs.saveBundleMetadata(He,Q))}(u.localStore,_),g._completeWith(R.progress),Promise.resolve(R.Hu)}catch(_){return bs("SyncEngine",`Loading bundle failed with ${_}`),g._failWith(_),Promise.resolve(new Set)}var $}),function(u,l,g){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield cx(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function rV(n,e){return function zL(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const s=ht(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield lb(n),e)}))}(Zr(n=In(n,Sr)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new As(this,t):null)}}class Db extends Ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new cE(new uu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(t,this.firestore,null)}}class Nk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}get(e){const t=Pf(e);return this._delegate.get(t).then(r=>new lE(this._firestore,new sc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=Pf(e);return r?(Ix("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pf(e);return this._delegate.delete(t),this}}class Pk{constructor(e){this._delegate=e}set(e,t,r){const s=Pf(e);return r?(Ix("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=Pf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=Pf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new uE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new dE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Nf.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Nf(e,new Db(e),t),s.set(t,u)),u}}Nf.INSTANCES=new WeakMap;class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}static forPath(e,t,r){if(e.length%2!=0)throw new $e("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(t,new Tr(t._delegate,r,new v(e)))}static forKey(e,t,r){return new zo(t,new Tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gm(this.firestore,ik(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,En.m9)(e))instanceof Tr&&sk(this._delegate,e)}set(e,t){t=Ix("DocumentReference.set",t);try{return t?Ck(this._delegate,e,t):Ck(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?bk(this._delegate,e):bk(this._delegate,e,t,...r)}catch(s){throw Ms(s,"updateDoc()","DocumentReference.update()")}}delete(){return function xV(n){return zm(In(n.firestore,Sr),[new Sm(n._key,kr.none())])}(this._delegate)}onSnapshot(...e){const t=Ok(e),r=kk(e,s=>new lE(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Tk(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function bV(n){n=In(n,Tr);const e=In(n.firestore,Sr),t=Zr(e),r=new ed(e);return function BL(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const g=yield function(_,D){const b=ht(_);return b.persistence.runTransaction("read document","readonly",R=>b.localDocuments.getDocument(R,D))}(s,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new $e(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const _=Lm(g,`Failed to get document '${u} from cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield lb(n),e,t);var r})),t.promise}(t,n._key).then(s=>new sc(e,r,n._key,s,new Rf(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function TV(n){n=In(n,Tr);const e=In(n.firestore,Sr);return KO(Zr(e),n._key,{source:"server"}).then(t=>wx(e,n,t))}(this._delegate):function CV(n){n=In(n,Tr);const e=In(n.firestore,Sr);return KO(Zr(e),n._key).then(t=>wx(e,n,t))}(this._delegate),t.then(r=>new lE(this.firestore,new sc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?Nf.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function Ok(n){for(const e of n)if("object"==typeof e&&!Dx(e))return e;return{}}function kk(n,e){var t,r;let s;return s=Dx(n[0])?n[0]:Dx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class lE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Dk(this._delegate,e._delegate)}}class dE extends lE{data(e){const t=this._delegate.data(e);return function vm(n,e){n||_t()}(void 0!==t),t}}class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Db(e)}where(e,t,r){try{return new As(this.firestore,Jl(this._delegate,function fV(n,e,t){const r=e,s=vb("where",n);return aE._create(s,r,t)}(e,t,r)))}catch(s){throw Ms(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new As(this.firestore,Jl(this._delegate,function pV(n,e="asc"){const t=e,r=vb("orderBy",n);return _x._create(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new As(this.firestore,Jl(this._delegate,function gV(n){return tk("limit",n),_b._create("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new As(this.firestore,Jl(this._delegate,function mV(n){return tk("limitToLast",n),_b._create("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new As(this.firestore,Jl(this._delegate,function yV(...n){return Eb._create("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new As(this.firestore,Jl(this._delegate,function vV(...n){return Eb._create("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new As(this.firestore,Jl(this._delegate,function _V(...n){return wb._create("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new As(this.firestore,Jl(this._delegate,function EV(...n){return wb._create("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return hx(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function MV(n){n=In(n,zi);const e=In(n.firestore,Sr),t=Zr(e),r=new ed(e);return function jL(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(s,u,l){try{const g=yield eb(s,u,!0),_=new FO(u,g.ir),D=_.sc(g.documents),b=_.applyChanges(D,!1);l.resolve(b.snapshot)}catch(g){const _=Lm(g,`Failed to execute query '${u} against cache`);l.reject(_)}}),function(s,u,l){return r.apply(this,arguments)})(yield lb(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Xl(e,r,n,s))}(this._delegate):"server"===e?.source?function AV(n){n=In(n,zi);const e=In(n.firestore,Sr),t=Zr(e),r=new ed(e);return ZO(t,n._query,{source:"server"}).then(s=>new Xl(e,r,n,s))}(this._delegate):function SV(n){n=In(n,zi);const e=In(n.firestore,Sr),t=Zr(e),r=new ed(e);return mk(n._query),ZO(t,n._query).then(s=>new Xl(e,r,n,s))}(this._delegate),t.then(r=>new Cx(this.firestore,new Xl(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ok(e),r=kk(e,s=>new Cx(this.firestore,new Xl(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Tk(this._delegate,t,r)}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?Nf.getInstance(this.firestore,e):null))}}class eU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new dE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new dE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new eU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new dE(this._firestore,r))})}isEqual(e){return Dk(this._delegate,e._delegate)}}class Gm extends As{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?hb(this._delegate):hb(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function RV(n,e){const t=In(n.firestore,Sr),r=hb(n),s=Ib(n.converter,e);return zm(t,[gb(Af(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new zo(this.firestore,t))}isEqual(e){return sk(this._delegate,e._delegate)}withConverter(e){return new Gm(this.firestore,this._delegate.withConverter(e?Nf.getInstance(this.firestore,e):null))}}function Pf(n){return In(n,Tr)}class bx{constructor(...e){this._delegate=new ic(...e)}static documentId(){return new bx(y.keyField().canonicalString())}isEqual(e){return(e=(0,En.m9)(e))instanceof ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class Of{constructor(e){this._delegate=e}static serverTimestamp(){const e=function GV(){return new px("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Of(e)}static delete(){const e=function zV(){return new rE("deleteField")}();return e._methodName="FieldValue.delete",new Of(e)}static arrayUnion(...e){const t=function WV(...n){return new uV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Of(t)}static arrayRemove(...e){const t=function qV(...n){return new cV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Of(t)}static increment(e){const t=function KV(n){return new lV("increment",n)}(e);return t._methodName="FieldValue.increment",new Of(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tU={Firestore:Rk,GeoPoint:fb,Timestamp:o,Blob:cE,Transaction:Nk,WriteBatch:Pk,DocumentReference:zo,DocumentSnapshot:lE,Query:As,QueryDocumentSnapshot:dE,QuerySnapshot:Cx,CollectionReference:Gm,FieldPath:bx,FieldValue:Of,setLogLevel:function XV(n){!function lA(n){nu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Fk(n,e){return function iU(n,e=kM.z){return new Li.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Tx(n,e){return Fk(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function Cb(n,e){return Tx(n,e).pipe(Xi(void 0),Ug(),(0,gt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const _=s.find(b=>b.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function Lk(n,e,t){return Cb(n,t).pipe(To((r,s)=>function oU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function aU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Sx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Sx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Sx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),ND(),(0,gt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function Sx(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function Vk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function rU(n){(function nU(n,e){n.INTERNAL.registerComponent(new Xc.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},tU)))})(n,(e,t)=>new Rk(e,t,new JV)),n.registerVersion("@firebase/firestore-compat","0.3.11")}(Bh.Z);class Uk{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Cb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Xi(void 0),Ug(),mn(([r,s])=>s.length>0||!r),(0,gt.U)(([r,s])=>s),dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(To((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Vk(e);return Lk(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Tx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),dn.iC)}get(e){return(0,Zn.D)(this.query.get(e)).pipe(dn.iC)}add(e){return this.ref.add(e)}doc(e){return new Bk(this.ref.doc(e),this.afs)}}class Bk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=jk(r,t);return new Uk(s,u,this.afs)}snapshotChanges(){return function sU(n,e){return Fk(n,e).pipe(Xi(void 0),Ug(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Zn.D)(this.ref.get(e)).pipe(dn.iC)}}class uU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Cb(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),mn(t=>t.length>0),dn.iC):Cb(this.query,this.afs.schedulers.outsideAngular).pipe(dn.iC)}auditTrail(e){return this.stateChanges(e).pipe(To((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Vk(e);return Lk(this.query,t,this.afs.schedulers.outsideAngular).pipe(dn.iC)}valueChanges(e={}){return Tx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),dn.iC)}get(e){return(0,Zn.D)(this.query.get(e)).pipe(dn.iC)}}const cU=new h.OlP("angularfire2.enableFirestorePersistence"),lU=new h.OlP("angularfire2.firestore.persistenceSettings"),dU=new h.OlP("angularfire2.firestore.settings"),hU=new h.OlP("angularfire2.firestore.use-emulator");function jk(n,e=(t=>t)){return{query:e(n),ref:n}}let fU=(()=>{class n{constructor(t,r,s,u,l,g,_,D,b,R,$,Q,me,He,We,nt,lt){this.schedulers=_;const St=(0,Lo.on)(t,g,r),Bt=b;R&&RD(St,g,$,me,He,We,Q,nt),[this.firestore,this.persistenceEnabled$]=(0,Lo.cc)(`${St.name}.firestore`,"AngularFirestore",St.name,()=>{const xt=g.runOutsideAngular(()=>St.firestore());if(u&&xt.settings(u),Bt&&xt.useEmulator(...Bt),s&&!Ps(l)){const pn=()=>{try{return(0,Zn.D)(xt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(Ri){return typeof console<"u"&&console.warn(Ri),Ct(!1)}};return[xt,g.runOutsideAngular(pn)]}return[xt,Ct(!1)]},[u,Bt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=jk(s,r),g=this.schedulers.ngZone.run(()=>u);return new Uk(g,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new uU(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new Bk(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Lo.Dh),h.LFG(Lo.xv,8),h.LFG(cU,8),h.LFG(dU,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(dn.HU),h.LFG(lU,8),h.LFG(hU,8),h.LFG(v_,8),h.LFG(TD,8),h.LFG(OM,8),h.LFG(SD,8),h.LFG(MD,8),h.LFG(AD,8),h.LFG(xD,8),h.LFG(vh,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bb=(()=>{class n{constructor(t,r){this.afAuth=t,this.afs=r,this.afAuth.authState.subscribe(s=>{s?(this.userData=s,localStorage.setItem("fire.user",JSON.stringify(this.userData))):localStorage.setItem("fire.user","null")})}get isLoggedIn(){const t=localStorage.getItem("fire.user"),r=JSON.parse(t||"null");return null!==r&&!1!==r.emailVerified}GoogleAuth(){return this.AuthLogin(new _h.V).then(t=>{})}getToken(){var t=this;return(0,Ee.Z)(function*(){return yield(yield t.afAuth.currentUser)?.getIdToken(!1)})()}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("fire.user")})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(v_),h.LFG(fU))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pU=(()=>{class n{constructor(t,r){this.ref=t,this.fireAuthService=r}get userName(){return this.fireAuthService.userData.displayName}get photoURL(){return this.fireAuthService.userData.photoURL}logOut(){this.fireAuthService.SignOut(),this.ref.close()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vl),h.Y36(bb))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-profile"]],standalone:!0,features:[h.jDz],decls:8,vars:2,consts:[[1,"profileContainer"],[1,"profileImageContainer"],["alt","",1,"profilePhoto",3,"src"],[1,"profilePhotoBorder"],[1,"text-main","link-btn",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1),h._UZ(2,"img",2)(3,"div",3),h.qZA()(),h.TgZ(4,"h2"),h._uU(5),h.qZA(),h.TgZ(6,"button",4),h.NdJ("click",function(){return r.logOut()}),h._uU(7,"LOGOUT"),h.qZA()),2&t&&(h.xp6(2),h.Q6J("src",r.photoURL,h.LSH),h.xp6(3),h.hij("Logged in as ",r.userName,"\n"))},styles:[".profileContainer[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;margin-top:32px}.profileImageContainer[_ngcontent-%COMP%]{position:relative;top:0;left:0}.profilePhoto[_ngcontent-%COMP%]{width:32px;height:32px;border:5px solid transparent;border-radius:16px;position:relative;top:0;left:0}.profilePhotoBorder[_ngcontent-%COMP%]{width:32px;height:32px;position:absolute;top:0;left:0;background-image:url(picture.2153edc4a0507997.svg)}"],changeDetection:0}),n})();function gU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"a",3),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.profile())}),h.qZA()}}function mU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",4),h.NdJ("click",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.GoogleAuth())}),h._uU(1,"LOGIN"),h.qZA()}}let yU=(()=>{class n{constructor(t,r){this.fireAuthService=t,this.dialogService=r}get loggedIn(){return this.fireAuthService.isLoggedIn}get userName(){const t=this.fireAuthService?.userData?.displayName;return t||"Logged In"}login(){this.GoogleAuth()}GoogleAuth(){this.fireAuthService.GoogleAuth()}profile(){this.dialogService.open(pU,{data:{title:"asdasdsad"}})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bb),h.Y36(wD))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:3,vars:2,consts:[[1,"login-block"],["class","login",3,"click",4,"ngIf"],["class","text-main link-btn",3,"click",4,"ngIf"],[1,"login",3,"click"],[1,"text-main","link-btn",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"span",0),h.YNc(1,gU,1,0,"a",1),h.YNc(2,mU,2,0,"button",2),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngIf",r.loggedIn),h.xp6(1),h.Q6J("ngIf",!r.loggedIn))},dependencies:[Ni],styles:[".login[_ngcontent-%COMP%]{display:block;width:32px;height:32px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -0.5 32 32' shape-rendering='crispEdges'%3E%3Cmetadata%3EMade with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj%3C/metadata%3E%3Cpath stroke='%23203c56' d='M10 0h12M10 1h12M6 2h4M22 2h4M6 3h4M22 3h4M4 4h2M12 4h8M26 4h2M4 5h2M12 5h8M26 5h2M2 6h2M8 6h4M20 6h4M28 6h2M2 7h2M8 7h4M20 7h4M28 7h2M2 8h2M6 8h2M24 8h2M28 8h2M2 9h2M6 9h2M24 9h2M28 9h2M0 10h2M6 10h2M24 10h2M30 10h2M0 11h2M6 11h2M24 11h2M30 11h2M0 12h2M4 12h2M26 12h2M30 12h2M0 13h2M4 13h2M26 13h2M30 13h2M0 14h2M4 14h2M26 14h2M30 14h2M0 15h2M4 15h2M26 15h2M30 15h2M0 16h2M4 16h2M26 16h2M30 16h2M0 17h2M4 17h2M26 17h2M30 17h2M0 18h2M4 18h2M26 18h2M30 18h2M0 19h2M4 19h2M26 19h2M30 19h2M0 20h2M6 20h2M24 20h2M30 20h2M0 21h2M6 21h2M24 21h2M30 21h2M2 22h2M6 22h2M24 22h2M28 22h2M2 23h2M6 23h2M24 23h2M28 23h2M2 24h2M8 24h4M20 24h4M28 24h2M2 25h2M8 25h4M20 25h4M28 25h2M4 26h2M12 26h8M26 26h2M4 27h2M12 27h8M26 27h2M6 28h4M22 28h4M6 29h4M22 29h4M10 30h12M10 31h12' /%3E%3Cpath stroke='%23ffaa5e' d='M10 2h12M10 3h12M6 4h4M22 4h4M6 5h4M22 5h4M4 6h2M26 6h2M4 7h2M26 7h2M4 8h2M14 8h4M26 8h2M4 9h2M13 9h6M26 9h2M2 10h2M13 10h6M28 10h2M2 11h2M13 11h6M28 11h2M2 12h2M13 12h6M28 12h2M2 13h2M14 13h4M28 13h2M2 14h2M28 14h2M2 15h2M28 15h2M2 16h2M12 16h8M28 16h2M2 17h2M11 17h10M28 17h2M2 18h2M10 18h12M28 18h2M2 19h2M10 19h12M28 19h2M4 20h2M11 20h10M26 20h2M4 21h2M12 21h2M18 21h2M26 21h2M4 22h2M26 22h2M4 23h2M26 23h2M6 24h2M24 24h2M6 25h2M24 25h2M8 26h4M20 26h4M8 27h4M20 27h4M12 28h8M12 29h8' /%3E%3Cpath stroke='%23d08159' d='M10 4h2M20 4h2M10 5h2M20 5h2M6 6h2M24 6h2M6 7h2M24 7h2M4 10h2M26 10h2M4 11h2M26 11h2M13 13h1M18 13h1M14 14h4M2 20h2M10 20h1M21 20h1M28 20h2M2 21h2M11 21h1M14 21h4M20 21h1M28 21h2M12 22h2M18 22h2M4 24h2M26 24h2M4 25h2M26 25h2M6 26h2M24 26h2M6 27h2M24 27h2M10 28h2M20 28h2M10 29h2M20 29h2' /%3E%3Cpath stroke='%23544e68' d='M12 6h8M8 8h4M20 8h4M8 9h1M23 9h1M8 10h1M23 10h1M8 11h1M23 11h1M6 12h1M25 12h1M6 13h1M25 13h1M6 14h1M25 14h1M6 15h1M25 15h1M6 16h1M25 16h1M6 17h1M25 17h1M6 18h1M25 18h1M6 19h1M25 19h1M8 20h1M23 20h1M8 21h1M23 21h1M8 22h1M23 22h1M8 23h4M20 23h4M12 25h8' /%3E%3Cpath stroke='%238d697a' d='M12 7h8M12 8h2M18 8h2M9 9h4M19 9h4M9 10h4M19 10h4M9 11h4M19 11h4M7 12h6M19 12h6M7 13h6M19 13h6M7 14h7M18 14h7M7 15h18M7 16h5M20 16h5M7 17h4M21 17h4M7 18h3M22 18h3M7 19h3M22 19h3M9 20h1M22 20h1M9 21h2M21 21h2M9 22h3M14 22h4M20 22h3M12 23h8M12 24h8' /%3E%3C/svg%3E\")}.login[_ngcontent-%COMP%]:hover{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -0.5 32 32' shape-rendering='crispEdges'%3E%3Cmetadata%3EMade with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj%3C/metadata%3E%3Cpath stroke='%23203c56' d='M10 0h12M6 2h4M22 2h4M4 4h2M12 4h8M26 4h2M12 5h8M2 6h2M8 6h4M20 6h4M28 6h2M2 7h2M8 7h4M20 7h4M28 7h2M2 8h2M6 8h2M24 8h2M28 8h2M6 9h2M24 9h2M0 10h2M6 10h2M24 10h2M30 10h2M0 11h2M6 11h2M24 11h2M30 11h2M0 12h2M4 12h2M26 12h2M30 12h2M0 13h2M4 13h2M26 13h2M30 13h2M0 14h2M4 14h2M26 14h2M30 14h2M0 15h2M4 15h2M26 15h2M30 15h2M0 16h2M4 16h2M26 16h2M30 16h2M0 17h2M4 17h2M26 17h2M30 17h2M0 18h2M4 18h2M26 18h2M30 18h2M0 19h2M30 19h2M0 20h2M6 20h2M24 20h2M30 20h2M0 21h2M6 21h2M24 21h2M30 21h2M2 22h2M6 22h2M24 22h2M28 22h2M2 23h2M28 23h2M2 24h2M8 24h4M20 24h4M28 24h2M2 25h2M28 25h2M4 26h2M12 26h8M26 26h2M4 27h2M26 27h2M6 28h4M22 28h4M6 29h4M22 29h4M10 30h12M10 31h12' /%3E%3Cpath stroke='%23ffd4a3' d='M10 1h12M10 2h12M6 3h4M22 3h4M6 4h4M22 4h4M4 5h2M26 5h2M4 6h2M26 6h2M4 7h2M14 7h4M26 7h2M4 8h2M13 8h6M26 8h2M2 9h2M13 9h6M28 9h2M2 10h2M13 10h6M28 10h2M2 11h2M13 11h6M28 11h2M2 12h2M14 12h4M28 12h2M2 13h2M28 13h2M2 14h2M28 14h2M2 15h2M12 15h8M28 15h2M2 16h2M11 16h10M28 16h2M2 17h2M10 17h12M28 17h2M2 18h2M10 18h12M28 18h2M4 19h2M11 19h10M26 19h2M4 20h2M12 20h2M18 20h2M26 20h2M4 21h2M26 21h2M4 22h2M26 22h2M6 23h2M24 23h2M6 24h2M24 24h2M8 25h4M20 25h4M8 26h4M20 26h4M12 27h8M12 28h8' /%3E%3Cpath stroke='%23d08159' d='M10 3h12M10 4h2M20 4h2M6 5h6M20 5h6M6 6h2M24 6h2M6 7h2M24 7h2M4 9h2M26 9h2M4 10h2M26 10h2M4 11h2M26 11h2M13 12h1M18 12h1M13 13h6M14 14h4M2 19h2M10 19h1M21 19h1M28 19h2M2 20h2M10 20h2M14 20h4M20 20h2M28 20h2M2 21h2M10 21h12M28 21h2M11 22h10M4 23h2M12 23h2M18 23h2M26 23h2M4 24h2M26 24h2M4 25h4M24 25h4M6 26h2M24 26h2M6 27h6M20 27h6M10 28h2M20 28h2M10 29h12' /%3E%3Cpath stroke='%23544e68' d='M12 6h8M8 8h4M20 8h4M8 9h1M23 9h1M8 10h1M23 10h1M8 11h1M23 11h1M6 12h1M25 12h1M6 13h1M25 13h1M6 14h1M25 14h1M6 15h1M25 15h1M6 16h1M25 16h1M6 17h1M25 17h1M6 18h1M25 18h1M6 19h1M25 19h1M8 20h1M23 20h1M8 21h1M23 21h1M8 22h1M23 22h1M8 23h4M20 23h4M12 25h8' /%3E%3Cpath stroke='%238d697a' d='M12 7h2M18 7h2M12 8h1M19 8h1M9 9h4M19 9h4M9 10h4M19 10h4M9 11h4M19 11h4M7 12h6M19 12h6M7 13h6M19 13h6M7 14h7M18 14h7M7 15h5M20 15h5M7 16h4M21 16h4M7 17h3M22 17h3M7 18h3M22 18h3M7 19h3M22 19h3M9 20h1M22 20h1M9 21h1M22 21h1M9 22h2M21 22h2M14 23h4M12 24h8' /%3E%3C/svg%3E\")}.login[_ngcontent-%COMP%]:active{background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 -0.5 32 32' shape-rendering='crispEdges'%3E%3Cmetadata%3EMade with Pixels to Svg https://codepen.io/shshaw/pen/XbxvNj%3C/metadata%3E%3Cpath stroke='%23203c56' d='M10 0h12M10 1h12M6 2h4M22 2h4M6 3h4M22 3h4M4 4h2M12 4h8M26 4h2M4 5h2M12 5h8M26 5h2M2 6h2M8 6h4M20 6h4M28 6h2M2 7h2M8 7h4M20 7h4M28 7h2M2 8h2M6 8h2M24 8h2M28 8h2M2 9h2M6 9h2M24 9h2M28 9h2M0 10h2M6 10h2M24 10h2M30 10h2M0 11h2M6 11h2M24 11h2M30 11h2M0 12h2M4 12h2M26 12h2M30 12h2M0 13h2M4 13h2M26 13h2M30 13h2M0 14h2M4 14h2M26 14h2M30 14h2M0 15h2M4 15h2M26 15h2M30 15h2M0 16h2M4 16h2M26 16h2M30 16h2M0 17h2M4 17h2M26 17h2M30 17h2M0 18h2M4 18h2M26 18h2M30 18h2M0 19h2M4 19h2M26 19h2M30 19h2M0 20h2M6 20h2M24 20h2M30 20h2M0 21h2M6 21h2M24 21h2M30 21h2M2 22h2M6 22h2M24 22h2M28 22h2M2 23h2M6 23h2M24 23h2M28 23h2M2 24h2M8 24h4M20 24h4M28 24h2M2 25h2M8 25h4M20 25h4M28 25h2M4 26h2M12 26h8M26 26h2M4 27h2M12 27h8M26 27h2M6 28h4M22 28h4M6 29h4M22 29h4M10 30h12M10 31h12' /%3E%3Cpath stroke='%23d08159' d='M10 2h12M10 3h12M6 4h6M20 4h6M6 5h6M20 5h6M4 6h4M24 6h4M4 7h4M24 7h4M4 8h2M26 8h2M4 9h2M14 9h4M26 9h2M2 10h4M13 10h6M26 10h4M2 11h4M13 11h6M26 11h4M2 12h2M13 12h6M28 12h2M2 13h2M13 13h6M28 13h2M2 14h2M14 14h4M28 14h2M2 15h2M28 15h2M2 16h2M28 16h2M2 17h2M12 17h8M28 17h2M2 18h2M11 18h10M28 18h2M2 19h2M10 19h12M28 19h2M2 20h4M10 20h12M26 20h4M2 21h4M11 21h10M26 21h4M4 22h2M12 22h2M18 22h2M26 22h2M4 23h2M26 23h2M4 24h4M24 24h4M4 25h4M24 25h4M6 26h6M20 26h6M6 27h6M20 27h6M10 28h12M10 29h12' /%3E%3Cpath stroke='%23544e68' d='M12 6h8M8 8h4M20 8h4M8 9h1M23 9h1M8 10h1M23 10h1M8 11h1M23 11h1M6 12h1M25 12h1M6 13h1M25 13h1M6 14h1M25 14h1M6 15h1M25 15h1M6 16h1M25 16h1M6 17h1M25 17h1M6 18h1M25 18h1M6 19h1M25 19h1M8 20h1M23 20h1M8 21h1M23 21h1M8 22h1M23 22h1M8 23h4M20 23h4M12 25h8' /%3E%3Cpath stroke='%238d697a' d='M12 7h8M12 8h8M9 9h5M18 9h5M9 10h4M19 10h4M9 11h4M19 11h4M7 12h6M19 12h6M7 13h6M19 13h6M7 14h7M18 14h7M7 15h18M7 16h18M7 17h5M20 17h5M7 18h4M21 18h4M7 19h3M22 19h3M9 20h1M22 20h1M9 21h2M21 21h2M9 22h3M14 22h4M20 22h3M12 23h8M12 24h8' /%3E%3C/svg%3E\")}"]}),n})();function vU(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"app-calibrate-item",7),h.NdJ("changes",function(){h.CHM(t);const s=h.oxw();return h.KtG(s.reloadItems())}),h.qZA()}if(2&n){const t=h.oxw();h.Q6J("lastItem",t.lastItem)}}let _U=(()=>{class n{constructor(t){this.itemsService=t,this.items=[],this.auth=(0,h.f3M)(ko)}ngOnInit(){this.reloadItems()}reloadItems(){this.getItems(),this.getLastItem()}getItems(){this.itemsService.itemsControllerGetItems().subscribe(t=>this.items=t)}getLastItem(){this.itemsService.itemsControllerGetLastItem().subscribe(t=>this.lastItem=t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36($u))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:12,vars:2,consts:[[1,"topbar"],[1,"login-block"],[1,"card"],[1,"card-content"],[3,"changes"],[3,"items"],[3,"lastItem","changes",4,"ngIf"],[3,"lastItem","changes"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h._UZ(1,"app-login",1),h.qZA(),h.TgZ(2,"div",2)(3,"div",3)(4,"app-add-item",4),h.NdJ("changes",function(){return r.reloadItems()}),h.qZA(),h._UZ(5,"app-list",5),h.qZA()(),h.TgZ(6,"div",2)(7,"div",3),h.YNc(8,vU,1,1,"app-calibrate-item",6),h.qZA()(),h.TgZ(9,"div",2)(10,"div",3)(11,"app-pairs",4),h.NdJ("changes",function(){return r.reloadItems()}),h.qZA()()()),2&t&&(h.xp6(5),h.Q6J("items",r.items),h.xp6(3),h.Q6J("ngIf",!!r.lastItem))},dependencies:[Ni,yI,TS,u_,yM,yU],styles:['@import"https://fonts.googleapis.com/css2?family=PT+Mono&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}*[_ngcontent-%COMP%]:focus{outline:none!important}[_ngcontent-%COMP%]::placeholder{color:#8d697a;opacity:1}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:5px 10px;margin:5px 0;border:none;border-radius:.25rem}button[_ngcontent-%COMP%]{color:#ffaa5e}button[_ngcontent-%COMP%]:disabled{color:#d08159;border-color:#d08159}button[_ngcontent-%COMP%]:hover:not(:disabled){color:#0d2b45;background-color:#ffaa5e;border-color:#ffaa5e}button[_ngcontent-%COMP%]:active:not(:disabled){background-color:#ffcb9a;border-color:#ffcb9a}input[_ngcontent-%COMP%]{border:1px solid #544E68;background-color:#0d2b45;color:#ffecd6}input[_ngcontent-%COMP%]:hover, input[_ngcontent-%COMP%]:focus{border:1px solid #8D697A}html[_ngcontent-%COMP%]{background-color:#0d2b45;color:#ffecd6;font-family:"PT Serif",serif;padding:5px}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-family:"PT Serif",serif}button[_ngcontent-%COMP%]{background-color:transparent;color:#ffaa5e;border:1px solid #FFAA5E}h2[_ngcontent-%COMP%]{color:#544e68}body[_ngcontent-%COMP%]{padding:0;margin:0}ngneat-dialog[_ngcontent-%COMP%]   .ngneat-dialog-backdrop[_ngcontent-%COMP%]{background:var(#0D2B45, .5)!important}ngneat-dialog[_ngcontent-%COMP%]   .ngneat-dialog-backdrop[_ngcontent-%COMP%]   .ngneat-dialog-content[_ngcontent-%COMP%]{background:#203C56!important;border:12px solid;border-image:url(border.e99fa6d0aa6dd683.png) 30%/1 stretch}.card[_ngcontent-%COMP%]{border:12px solid;max-width:800px;margin:10px auto;border-image:url(border.e99fa6d0aa6dd683.png) 30%/1 stretch}.card-content[_ngcontent-%COMP%]{background-color:#203c56;padding:5px;width:available}.topbar[_ngcontent-%COMP%]{display:flex}.login-block[_ngcontent-%COMP%]{margin-left:auto;padding:5px;width:-moz-fit-content;width:fit-content}']}),n})(),EU=(()=>{class n extends pI{constructor(t,r){super(t,r)}appControllerGetHello$Response(t,r){const s=new Ha(this.rootUrl,n.AppControllerGetHelloPath,"get");return this.http.request(s.build({responseType:"text",accept:"*/*",context:r})).pipe(mn(u=>u instanceof di),(0,gt.U)(u=>u.clone({body:void 0})))}appControllerGetHello(t,r){return this.appControllerGetHello$Response(t,r).pipe((0,gt.U)(s=>s.body))}}return n.AppControllerGetHelloPath="/",n.\u0275fac=function(t){return new(t||n)(h.LFG(Ih),h.LFG(Jo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wU=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Ih,useValue:t}]}}constructor(t,r){if(t)throw new Error("ApiModule is already loaded. Import in your base AppModule only.");if(!r)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12),h.LFG(Jo,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[EU,$u,Ih]}),n})();var DU=F(655),Mx=F(3008);class hE{constructor(e){return e}}const $k="analytics",Hk=dn.nk.async,bU=(0,dn.u3)(Mx.IH,!0),TU=(0,dn.u3)(Mx.Kz,!0),SU=(0,dn.u3)(Mx.Iv,!0);let Ax=(()=>{class n{constructor(t,r,s){let u;this.disposables=[],(0,ro.KN)("angularfire",dn.q4.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(l=>{u=l})),Hk().then(()=>{const l=s.get(hE);l?this.disposables=[sI(t).subscribe(g=>{SU(l,g?.uid),u()})]:u()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ko),h.LFG(h.R0b),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const zk="firebase_screen_id",xx="outlet",fE="screen_class",Gk="screen_name";let UU=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const Rx={},BU=n=>{const e=[n[fE],n[xx]].join("#");if(Rx.hasOwnProperty(e))return Rx[e];{const t=UU++;return Rx[e]=t,t}};let Wk=(()=>{class n{constructor(t,r,s,u,l,g){(0,ro.KN)("angularfire",dn.q4.full,"screen-tracking"),Hk().then(()=>{const _=g.get(hE);!t||!_||u.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(mn(s=>s instanceof zc)).pipe(Rr(s=>{var u;const g=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,Q=>Q.replace("://",":///"))).root.children[s.snapshot.outlet])||void 0===u?void 0:u.toString())||"",_=n.routerState.root.children.map(Q=>Q).find(Q=>Q.outlet===s.snapshot.outlet);if(!_)return Ct(null);let D=_;for(;D.firstChild;)D=D.firstChild;const b=D.pathFromRoot.map(Q=>{var me;return null===(me=Q.routeConfig)||void 0===me?void 0:me.path}).filter(Q=>Q).join("/")||"/",R={[Gk]:b,page_path:`/${g}`,firebase_event_origin:"auto",firebase_screen:b,[xx]:s.snapshot.outlet};e&&(R.page_title=e.getTitle());let $=_.component;if($){if($===eh){let Q=s.snapshot;for(;Q.firstChild;)Q=Q.firstChild;$=Q.component}}else $=s.snapshot.component;if("string"==typeof $)return Ct(Object.assign(Object.assign({},R),{[fE]:$}));if($){const Q=t.resolveComponentFactory($);return Ct(Object.assign(Object.assign({},R),{[fE]:Q.selector}))}return Ct(null)}),mn(s=>!!s),(0,gt.U)(s=>Object.assign({firebase_screen_class:s[fE],[zk]:BU(s)},s)),function IU(n,e,t,r){return(0,Lr.e)((s,u)=>{let l;e&&"function"!=typeof e?({duration:t,element:l,connector:r}=e):l=e;const g=new Map,_=me=>{g.forEach(me),me(u)},D=me=>_(He=>He.error(me));let b=0,R=!1;const $=new xr.Q(u,me=>{try{const He=n(me);let We=g.get(He);if(!We){g.set(He,We=r?r():new Ui.x);const nt=function Q(me,He){const We=new Li.y(nt=>{b++;const lt=He.subscribe(nt);return()=>{lt.unsubscribe(),0==--b&&R&&$.unsubscribe()}});return We.key=me,We}(He,We);if(u.next(nt),t){const lt=(0,xr.x)(We,()=>{We.complete(),lt?.unsubscribe()},void 0,void 0,()=>g.delete(He));$.add((0,Ji.Xf)(t(nt)).subscribe(lt))}}We.next(l?l(me):me)}catch(He){D(He)}},()=>_(me=>me.complete()),D,()=>g.clear(),()=>(R=!0,0===b));s.subscribe($)})}(s=>s[xx]),(0,jr.z)(s=>s.pipe(ND((u,l)=>JSON.stringify(u)===JSON.stringify(l)),Xi(void 0),Ug(),(0,gt.U)(([u,l])=>u?Object.assign({firebase_previous_class:u[fE],firebase_previous_screen:u[Gk],firebase_previous_id:u[zk]},l):l)))))(t,r,s).pipe(Rr(D=>(0,DU.mG)(this,void 0,void 0,function*(){return l&&(yield l.initialized),TU(_,"screen_view",D)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Is,8),h.LFG(Cc,8),h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(Ax,8),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Nx=new h.OlP("angularfire2.analytics-instances");function HU(n){return(e,t)=>{if(!dn.nk.sync())return null;const r=e.runOutsideAngular(()=>n(t));return new hE(r)}}const zU={provide:class CU{constructor(){return(0,dn.vb)($k)}},deps:[[new h.FiY,Nx]]},GU={provide:hE,useFactory:function $U(n,e){if(!dn.nk.sync())return null;const t=(0,dn.JM)($k,n,e);return t&&new hE(t)},deps:[[new h.FiY,Nx],Jc]};let WU=(()=>{class n{constructor(t,r){(0,ro.KN)("angularfire",dn.q4.full,"analytics")}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Wk,8),h.LFG(Ax,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[GU,zU,{provide:h.ip1,useValue:dn.nk.async,multi:!0}]}),n})();function qU(n,...e){return{ngModule:WU,providers:[{provide:Nx,useFactory:HU(n),multi:!0,deps:[h.R0b,h.zs3,dn.HU,hv,...e]}]}}function qk(n,e){const t="object"==typeof e;return new Promise((r,s)=>{let l,u=!1;n.subscribe({next:g=>{l=g,u=!0},error:s,complete:()=>{u?r(l):t?r(e.defaultValue):s(new p)}})})}let KU=(()=>{class n{constructor(t){this.fireAuthService=t}intercept(t,r){return(0,Zn.D)(this.handle(t,r))}handle(t,r){var s=this;return(0,Ee.Z)(function*(){const u=yield s.fireAuthService.getToken();if(!u)return yield qk(r.handle(t));const l=t.clone({headers:t.headers.set("Authorization",`Bearer ${u}`)});return yield qk(r.handle(l))})()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(bb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[_U]}),n.\u0275inj=h.cJS({providers:[bb,{provide:Xo,useClass:KU,multi:!0},Wk,Ax],imports:[Ic,Od,fM.withConfig({warnOnNgModelWithFormControl:"always"}),wU.forRoot({rootUrl:ea_application_apiUrl}),Jx,Lo.hO.initializeApp(ea_firebase),Nw(()=>(console.log("*********MODULE*********",ea_firebase),FT(ea_firebase))),qU(()=>bU()),iI(()=>hR())]}),n})();Dd().bootstrapModule(ZU).catch(n=>console.error(n))},9751:(It,Oe,F)=>{F.d(Oe,{y:()=>Ce});var h=F(930),V=F(727),k=F(8822),ne=F(9635),ge=F(2416),ce=F(576),ve=F(2806);let Ce=(()=>{class K{constructor(we){we&&(this._subscribe=we)}lift(we){const Qe=new K;return Qe.source=this,Qe.operator=we,Qe}subscribe(we,Qe,Et){const he=function z(K){return K&&K instanceof h.Lv||function W(K){return K&&(0,ce.m)(K.next)&&(0,ce.m)(K.error)&&(0,ce.m)(K.complete)}(K)&&(0,V.Nn)(K)}(we)?we:new h.Hp(we,Qe,Et);return(0,ve.x)(()=>{const{operator:Le,source:ze}=this;he.add(Le?Le.call(he,ze):ze?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(we){try{return this._subscribe(we)}catch(Qe){we.error(Qe)}}forEach(we,Qe){return new(Qe=_e(Qe))((Et,he)=>{const Le=new h.Hp({next:ze=>{try{we(ze)}catch(Ze){he(Ze),Le.unsubscribe()}},error:he,complete:Et});this.subscribe(Le)})}_subscribe(we){var Qe;return null===(Qe=this.source)||void 0===Qe?void 0:Qe.subscribe(we)}[k.L](){return this}pipe(...we){return(0,ne.U)(we)(this)}toPromise(we){return new(we=_e(we))((Qe,Et)=>{let he;this.subscribe(Le=>he=Le,Le=>Et(Le),()=>Qe(he))})}}return K.create=xe=>new K(xe),K})();function _e(K){var xe;return null!==(xe=K??ge.config.Promise)&&void 0!==xe?xe:Promise}},7579:(It,Oe,F)=>{F.d(Oe,{x:()=>ve});var h=F(9751),V=F(727);const ne=(0,F(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(8737),ce=F(2806);let ve=(()=>{class _e extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const K=new Ce(this,this);return K.operator=z,K}_throwIfClosed(){if(this.closed)throw new ne}next(z){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(z)}})}error(z){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:K}=this;for(;K.length;)K.shift().error(z)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:K,isStopped:xe,observers:we}=this;return K||xe?V.Lc:(this.currentObservers=null,we.push(z),new V.w0(()=>{this.currentObservers=null,(0,ge.P)(we,z)}))}_checkFinalizedStatuses(z){const{hasError:K,thrownError:xe,isStopped:we}=this;K?z.error(xe):we&&z.complete()}asObservable(){const z=new h.y;return z.source=this,z}}return _e.create=(W,z)=>new Ce(W,z),_e})();class Ce extends ve{constructor(W,z){super(),this.destination=W,this.source=z}next(W){var z,K;null===(K=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===K||K.call(z,W)}error(W){var z,K;null===(K=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===K||K.call(z,W)}complete(){var W,z;null===(z=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===z||z.call(W)}_subscribe(W){var z,K;return null!==(K=null===(z=this.source)||void 0===z?void 0:z.subscribe(W))&&void 0!==K?K:V.Lc}}},930:(It,Oe,F)=>{F.d(Oe,{Hp:()=>Et,Lv:()=>K});var h=F(576),V=F(727),k=F(2416),ne=F(7849),ge=F(5032);const ce=_e("C",void 0,void 0);function _e(Te,De,Se){return{kind:Te,value:De,error:Se}}var W=F(3410),z=F(2806);class K extends V.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,V.Nn)(De)&&De.add(this)):this.destination=Ze}static create(De,Se,Ue){return new Et(De,Se,Ue)}next(De){this.isStopped?ze(function Ce(Te){return _e("N",Te,void 0)}(De),this):this._next(De)}error(De){this.isStopped?ze(function ve(Te){return _e("E",void 0,Te)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?ze(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xe=Function.prototype.bind;function we(Te,De){return xe.call(Te,De)}class Qe{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Se}=this;if(Se.next)try{Se.next(De)}catch(Ue){he(Ue)}}error(De){const{partialObserver:Se}=this;if(Se.error)try{Se.error(De)}catch(Ue){he(Ue)}else he(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Se){he(Se)}}}class Et extends K{constructor(De,Se,Ue){let Me;if(super(),(0,h.m)(De)||!De)Me={next:De??void 0,error:Se??void 0,complete:Ue??void 0};else{let J;this&&k.config.useDeprecatedNextContext?(J=Object.create(De),J.unsubscribe=()=>this.unsubscribe(),Me={next:De.next&&we(De.next,J),error:De.error&&we(De.error,J),complete:De.complete&&we(De.complete,J)}):Me=De}this.destination=new Qe(Me)}}function he(Te){k.config.useDeprecatedSynchronousErrorHandling?(0,z.O)(Te):(0,ne.h)(Te)}function ze(Te,De){const{onStoppedNotification:Se}=k.config;Se&&W.z.setTimeout(()=>Se(Te,De))}const Ze={closed:!0,next:ge.Z,error:function Le(Te){throw Te},complete:ge.Z}},727:(It,Oe,F)=>{F.d(Oe,{Lc:()=>ce,w0:()=>ge,Nn:()=>ve});var h=F(576);const k=(0,F(3888).d)(_e=>function(z){_e(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((K,xe)=>`${xe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ne=F(8737);class ge{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const we of z)we.remove(this);else z.remove(this);const{initialTeardown:K}=this;if((0,h.m)(K))try{K()}catch(we){W=we instanceof k?we.errors:[we]}const{_finalizers:xe}=this;if(xe){this._finalizers=null;for(const we of xe)try{Ce(we)}catch(Qe){W=W??[],Qe instanceof k?W=[...W,...Qe.errors]:W.push(Qe)}}if(W)throw new k(W)}}add(W){var z;if(W&&W!==this)if(this.closed)Ce(W);else{if(W instanceof ge){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(W)}}_hasParent(W){const{_parentage:z}=this;return z===W||Array.isArray(z)&&z.includes(W)}_addParent(W){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(W),z):z?[z,W]:W}_removeParent(W){const{_parentage:z}=this;z===W?this._parentage=null:Array.isArray(z)&&(0,ne.P)(z,W)}remove(W){const{_finalizers:z}=this;z&&(0,ne.P)(z,W),W instanceof ge&&W._removeParent(this)}}ge.EMPTY=(()=>{const _e=new ge;return _e.closed=!0,_e})();const ce=ge.EMPTY;function ve(_e){return _e instanceof ge||_e&&"closed"in _e&&(0,h.m)(_e.remove)&&(0,h.m)(_e.add)&&(0,h.m)(_e.unsubscribe)}function Ce(_e){(0,h.m)(_e)?_e():_e.unsubscribe()}},2416:(It,Oe,F)=>{F.d(Oe,{config:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(It,Oe,F)=>{F.d(Oe,{E:()=>V});const V=new(F(9751).y)(ge=>ge.complete())},8996:(It,Oe,F)=>{F.d(Oe,{D:()=>De});var h=F(8421),V=F(5363),k=F(9468),ce=F(9751),Ce=F(2202),_e=F(576),W=F(9672);function K(Se,Ue){if(!Se)throw new Error("Iterable cannot be null");return new ce.y(Me=>{(0,W.f)(Me,Ue,()=>{const J=Se[Symbol.asyncIterator]();(0,W.f)(Me,Ue,()=>{J.next().then(st=>{st.done?Me.complete():Me.next(st.value)})},0,!0)})})}var xe=F(3670),we=F(8239),Qe=F(1144),Et=F(6495),he=F(2206),Le=F(4532),ze=F(3260);function De(Se,Ue){return Ue?function Te(Se,Ue){if(null!=Se){if((0,xe.c)(Se))return function ne(Se,Ue){return(0,h.Xf)(Se).pipe((0,k.R)(Ue),(0,V.Q)(Ue))}(Se,Ue);if((0,Qe.z)(Se))return function ve(Se,Ue){return new ce.y(Me=>{let J=0;return Ue.schedule(function(){J===Se.length?Me.complete():(Me.next(Se[J++]),Me.closed||this.schedule())})})}(Se,Ue);if((0,we.t)(Se))return function ge(Se,Ue){return(0,h.Xf)(Se).pipe((0,k.R)(Ue),(0,V.Q)(Ue))}(Se,Ue);if((0,he.D)(Se))return K(Se,Ue);if((0,Et.T)(Se))return function z(Se,Ue){return new ce.y(Me=>{let J;return(0,W.f)(Me,Ue,()=>{J=Se[Ce.h](),(0,W.f)(Me,Ue,()=>{let st,et;try{({value:st,done:et}=J.next())}catch(un){return void Me.error(un)}et?Me.complete():Me.next(st)},0,!0)}),()=>(0,_e.m)(J?.return)&&J.return()})}(Se,Ue);if((0,ze.L)(Se))return function Ze(Se,Ue){return K((0,ze.Q)(Se),Ue)}(Se,Ue)}throw(0,Le.z)(Se)}(Se,Ue):(0,h.Xf)(Se)}},8421:(It,Oe,F)=>{F.d(Oe,{Xf:()=>xe});var h=F(655),V=F(1144),k=F(8239),ne=F(9751),ge=F(3670),ce=F(2206),ve=F(4532),Ce=F(6495),_e=F(3260),W=F(576),z=F(7849),K=F(8822);function xe(Te){if(Te instanceof ne.y)return Te;if(null!=Te){if((0,ge.c)(Te))return function we(Te){return new ne.y(De=>{const Se=Te[K.L]();if((0,W.m)(Se.subscribe))return Se.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,V.z)(Te))return function Qe(Te){return new ne.y(De=>{for(let Se=0;Se<Te.length&&!De.closed;Se++)De.next(Te[Se]);De.complete()})}(Te);if((0,k.t)(Te))return function Et(Te){return new ne.y(De=>{Te.then(Se=>{De.closed||(De.next(Se),De.complete())},Se=>De.error(Se)).then(null,z.h)})}(Te);if((0,ce.D)(Te))return Le(Te);if((0,Ce.T)(Te))return function he(Te){return new ne.y(De=>{for(const Se of Te)if(De.next(Se),De.closed)return;De.complete()})}(Te);if((0,_e.L)(Te))return function ze(Te){return Le((0,_e.Q)(Te))}(Te)}throw(0,ve.z)(Te)}function Le(Te){return new ne.y(De=>{(function Ze(Te,De){var Se,Ue,Me,J;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Se=(0,h.KL)(Te);!(Ue=yield Se.next()).done;)if(De.next(Ue.value),De.closed)return}catch(st){Me={error:st}}finally{try{Ue&&!Ue.done&&(J=Se.return)&&(yield J.call(Se))}finally{if(Me)throw Me.error}}De.complete()})})(Te,De).catch(Se=>De.error(Se))})}},6451:(It,Oe,F)=>{F.d(Oe,{T:()=>ce});var h=F(8189),V=F(8421),k=F(515),ne=F(7669),ge=F(8996);function ce(...ve){const Ce=(0,ne.yG)(ve),_e=(0,ne._6)(ve,1/0),W=ve;return W.length?1===W.length?(0,V.Xf)(W[0]):(0,h.J)(_e)((0,ge.D)(W,Ce)):k.E}},5403:(It,Oe,F)=>{F.d(Oe,{Q:()=>k,x:()=>V});var h=F(930);function V(ne,ge,ce,ve,Ce){return new k(ne,ge,ce,ve,Ce)}class k extends h.Lv{constructor(ge,ce,ve,Ce,_e,W){super(ge),this.onFinalize=_e,this.shouldUnsubscribe=W,this._next=ce?function(z){try{ce(z)}catch(K){ge.error(K)}}:super._next,this._error=Ce?function(z){try{Ce(z)}catch(K){ge.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(z){ge.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},4004:(It,Oe,F)=>{F.d(Oe,{U:()=>k});var h=F(4482),V=F(5403);function k(ne,ge){return(0,h.e)((ce,ve)=>{let Ce=0;ce.subscribe((0,V.x)(ve,_e=>{ve.next(ne.call(ge,_e,Ce++))}))})}},8189:(It,Oe,F)=>{F.d(Oe,{J:()=>k});var h=F(5577),V=F(4671);function k(ne=1/0){return(0,h.z)(V.y,ne)}},5577:(It,Oe,F)=>{F.d(Oe,{z:()=>Ce});var h=F(4004),V=F(8421),k=F(4482),ne=F(9672),ge=F(5403),ve=F(576);function Ce(_e,W,z=1/0){return(0,ve.m)(W)?Ce((K,xe)=>(0,h.U)((we,Qe)=>W(K,we,xe,Qe))((0,V.Xf)(_e(K,xe))),z):("number"==typeof W&&(z=W),(0,k.e)((K,xe)=>function ce(_e,W,z,K,xe,we,Qe,Et){const he=[];let Le=0,ze=0,Ze=!1;const Te=()=>{Ze&&!he.length&&!Le&&W.complete()},De=Ue=>Le<K?Se(Ue):he.push(Ue),Se=Ue=>{we&&W.next(Ue),Le++;let Me=!1;(0,V.Xf)(z(Ue,ze++)).subscribe((0,ge.x)(W,J=>{xe?.(J),we?De(J):W.next(J)},()=>{Me=!0},void 0,()=>{if(Me)try{for(Le--;he.length&&Le<K;){const J=he.shift();Qe?(0,ne.f)(W,Qe,()=>Se(J)):Se(J)}Te()}catch(J){W.error(J)}}))};return _e.subscribe((0,ge.x)(W,De,()=>{Ze=!0,Te()})),()=>{Et?.()}}(K,xe,_e,z)))}},5363:(It,Oe,F)=>{F.d(Oe,{Q:()=>ne});var h=F(9672),V=F(4482),k=F(5403);function ne(ge,ce=0){return(0,V.e)((ve,Ce)=>{ve.subscribe((0,k.x)(Ce,_e=>(0,h.f)(Ce,ge,()=>Ce.next(_e),ce),()=>(0,h.f)(Ce,ge,()=>Ce.complete(),ce),_e=>(0,h.f)(Ce,ge,()=>Ce.error(_e),ce)))})}},3099:(It,Oe,F)=>{F.d(Oe,{B:()=>ge});var h=F(8421),V=F(7579),k=F(930),ne=F(4482);function ge(ve={}){const{connector:Ce=(()=>new V.x),resetOnError:_e=!0,resetOnComplete:W=!0,resetOnRefCountZero:z=!0}=ve;return K=>{let xe,we,Qe,Et=0,he=!1,Le=!1;const ze=()=>{we?.unsubscribe(),we=void 0},Ze=()=>{ze(),xe=Qe=void 0,he=Le=!1},Te=()=>{const De=xe;Ze(),De?.unsubscribe()};return(0,ne.e)((De,Se)=>{Et++,!Le&&!he&&ze();const Ue=Qe=Qe??Ce();Se.add(()=>{Et--,0===Et&&!Le&&!he&&(we=ce(Te,z))}),Ue.subscribe(Se),!xe&&Et>0&&(xe=new k.Hp({next:Me=>Ue.next(Me),error:Me=>{Le=!0,ze(),we=ce(Ze,_e,Me),Ue.error(Me)},complete:()=>{he=!0,ze(),we=ce(Ze,W),Ue.complete()}}),(0,h.Xf)(De).subscribe(xe))})(K)}}function ce(ve,Ce,..._e){if(!0===Ce)return void ve();if(!1===Ce)return;const W=new k.Hp({next:()=>{W.unsubscribe(),ve()}});return(0,h.Xf)(Ce(..._e)).subscribe(W)}},9468:(It,Oe,F)=>{F.d(Oe,{R:()=>V});var h=F(4482);function V(k,ne=0){return(0,h.e)((ge,ce)=>{ce.add(k.schedule(()=>ge.subscribe(ce),ne))})}},8505:(It,Oe,F)=>{F.d(Oe,{b:()=>ge});var h=F(576),V=F(4482),k=F(5403),ne=F(4671);function ge(ce,ve,Ce){const _e=(0,h.m)(ce)||ve||Ce?{next:ce,error:ve,complete:Ce}:ce;return _e?(0,V.e)((W,z)=>{var K;null===(K=_e.subscribe)||void 0===K||K.call(_e);let xe=!0;W.subscribe((0,k.x)(z,we=>{var Qe;null===(Qe=_e.next)||void 0===Qe||Qe.call(_e,we),z.next(we)},()=>{var we;xe=!1,null===(we=_e.complete)||void 0===we||we.call(_e),z.complete()},we=>{var Qe;xe=!1,null===(Qe=_e.error)||void 0===Qe||Qe.call(_e,we),z.error(we)},()=>{var we,Qe;xe&&(null===(we=_e.unsubscribe)||void 0===we||we.call(_e)),null===(Qe=_e.finalize)||void 0===Qe||Qe.call(_e)}))}):ne.y}},4408:(It,Oe,F)=>{F.d(Oe,{o:()=>ge});var h=F(727);class V extends h.w0{constructor(ve,Ce){super()}schedule(ve,Ce=0){return this}}const k={setInterval(ce,ve,...Ce){const{delegate:_e}=k;return _e?.setInterval?_e.setInterval(ce,ve,...Ce):setInterval(ce,ve,...Ce)},clearInterval(ce){const{delegate:ve}=k;return(ve?.clearInterval||clearInterval)(ce)},delegate:void 0};var ne=F(8737);class ge extends V{constructor(ve,Ce){super(ve,Ce),this.scheduler=ve,this.work=Ce,this.pending=!1}schedule(ve,Ce=0){var _e;if(this.closed)return this;this.state=ve;const W=this.id,z=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(z,W,Ce)),this.pending=!0,this.delay=Ce,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(z,this.id,Ce),this}requestAsyncId(ve,Ce,_e=0){return k.setInterval(ve.flush.bind(ve,this),_e)}recycleAsyncId(ve,Ce,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return Ce;null!=Ce&&k.clearInterval(Ce)}execute(ve,Ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ve,Ce);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Ce){let W,_e=!1;try{this.work(ve)}catch(z){_e=!0,W=z||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Ce}=this,{actions:_e}=Ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(_e,this),null!=ve&&(this.id=this.recycleAsyncId(Ce,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(It,Oe,F)=>{F.d(Oe,{v:()=>k});var h=F(6063);class V{constructor(ge,ce=V.now){this.schedulerActionCtor=ge,this.now=ce}schedule(ge,ce=0,ve){return new this.schedulerActionCtor(this,ge).schedule(ve,ce)}}V.now=h.l.now;class k extends V{constructor(ge,ce=V.now){super(ge,ce),this.actions=[],this._active=!1}flush(ge){const{actions:ce}=this;if(this._active)return void ce.push(ge);let ve;this._active=!0;do{if(ve=ge.execute(ge.state,ge.delay))break}while(ge=ce.shift());if(this._active=!1,ve){for(;ge=ce.shift();)ge.unsubscribe();throw ve}}}},4986:(It,Oe,F)=>{F.d(Oe,{z:()=>k});var h=F(4408);const k=new(F(7565).v)(h.o)},6063:(It,Oe,F)=>{F.d(Oe,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(It,Oe,F)=>{F.d(Oe,{z:()=>h});const h={setTimeout(V,k,...ne){const{delegate:ge}=h;return ge?.setTimeout?ge.setTimeout(V,k,...ne):setTimeout(V,k,...ne)},clearTimeout(V){const{delegate:k}=h;return(k?.clearTimeout||clearTimeout)(V)},delegate:void 0}},2202:(It,Oe,F)=>{F.d(Oe,{h:()=>V});const V=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(It,Oe,F)=>{F.d(Oe,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(It,Oe,F)=>{F.d(Oe,{_6:()=>ce,jO:()=>ne,yG:()=>ge});var h=F(576);function k(ve){return ve[ve.length-1]}function ne(ve){return(0,h.m)(k(ve))?ve.pop():void 0}function ge(ve){return function V(ve){return ve&&(0,h.m)(ve.schedule)}(k(ve))?ve.pop():void 0}function ce(ve,Ce){return"number"==typeof k(ve)?ve.pop():Ce}},8737:(It,Oe,F)=>{function h(V,k){if(V){const ne=V.indexOf(k);0<=ne&&V.splice(ne,1)}}F.d(Oe,{P:()=>h})},3888:(It,Oe,F)=>{function h(V){const ne=V(ge=>{Error.call(ge),ge.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}F.d(Oe,{d:()=>h})},2806:(It,Oe,F)=>{F.d(Oe,{O:()=>ne,x:()=>k});var h=F(2416);let V=null;function k(ge){if(h.config.useDeprecatedSynchronousErrorHandling){const ce=!V;if(ce&&(V={errorThrown:!1,error:null}),ge(),ce){const{errorThrown:ve,error:Ce}=V;if(V=null,ve)throw Ce}}else ge()}function ne(ge){h.config.useDeprecatedSynchronousErrorHandling&&V&&(V.errorThrown=!0,V.error=ge)}},9672:(It,Oe,F)=>{function h(V,k,ne,ge=0,ce=!1){const ve=k.schedule(function(){ne(),ce?V.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(V.add(ve),!ce)return ve}F.d(Oe,{f:()=>h})},4671:(It,Oe,F)=>{function h(V){return V}F.d(Oe,{y:()=>h})},1144:(It,Oe,F)=>{F.d(Oe,{z:()=>h});const h=V=>V&&"number"==typeof V.length&&"function"!=typeof V},2206:(It,Oe,F)=>{F.d(Oe,{D:()=>V});var h=F(576);function V(k){return Symbol.asyncIterator&&(0,h.m)(k?.[Symbol.asyncIterator])}},576:(It,Oe,F)=>{function h(V){return"function"==typeof V}F.d(Oe,{m:()=>h})},3670:(It,Oe,F)=>{F.d(Oe,{c:()=>k});var h=F(8822),V=F(576);function k(ne){return(0,V.m)(ne[h.L])}},6495:(It,Oe,F)=>{F.d(Oe,{T:()=>k});var h=F(2202),V=F(576);function k(ne){return(0,V.m)(ne?.[h.h])}},8239:(It,Oe,F)=>{F.d(Oe,{t:()=>V});var h=F(576);function V(k){return(0,h.m)(k?.then)}},3260:(It,Oe,F)=>{F.d(Oe,{L:()=>ne,Q:()=>k});var h=F(655),V=F(576);function k(ge){return(0,h.FC)(this,arguments,function*(){const ve=ge.getReader();try{for(;;){const{value:Ce,done:_e}=yield(0,h.qq)(ve.read());if(_e)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(Ce)}}finally{ve.releaseLock()}})}function ne(ge){return(0,V.m)(ge?.getReader)}},4482:(It,Oe,F)=>{F.d(Oe,{A:()=>V,e:()=>k});var h=F(576);function V(ne){return(0,h.m)(ne?.lift)}function k(ne){return ge=>{if(V(ge))return ge.lift(function(ce){try{return ne(ce,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(It,Oe,F)=>{function h(){}F.d(Oe,{Z:()=>h})},9635:(It,Oe,F)=>{F.d(Oe,{U:()=>k,z:()=>V});var h=F(4671);function V(...ne){return k(ne)}function k(ne){return 0===ne.length?h.y:1===ne.length?ne[0]:function(ce){return ne.reduce((ve,Ce)=>Ce(ve),ce)}}},7849:(It,Oe,F)=>{F.d(Oe,{h:()=>k});var h=F(2416),V=F(3410);function k(ne){V.z.setTimeout(()=>{const{onUnhandledError:ge}=h.config;if(!ge)throw ne;ge(ne)})}},4532:(It,Oe,F)=>{function h(V){return new TypeError(`You provided ${null!==V&&"object"==typeof V?"an invalid object":`'${V}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Oe,{z:()=>h})},655:(It,Oe,F)=>{function ne(pe,ye){var Re={};for(var Ve in pe)Object.prototype.hasOwnProperty.call(pe,Ve)&&ye.indexOf(Ve)<0&&(Re[Ve]=pe[Ve]);if(null!=pe&&"function"==typeof Object.getOwnPropertySymbols){var Je=0;for(Ve=Object.getOwnPropertySymbols(pe);Je<Ve.length;Je++)ye.indexOf(Ve[Je])<0&&Object.prototype.propertyIsEnumerable.call(pe,Ve[Je])&&(Re[Ve[Je]]=pe[Ve[Je]])}return Re}function K(pe,ye,Re,Ve){return new(Re||(Re=Promise))(function(Be,Ae){function at(Tt){try{wt(Ve.next(Tt))}catch(jt){Ae(jt)}}function _n(Tt){try{wt(Ve.throw(Tt))}catch(jt){Ae(jt)}}function wt(Tt){Tt.done?Be(Tt.value):function Je(Be){return Be instanceof Re?Be:new Re(function(Ae){Ae(Be)})}(Tt.value).then(at,_n)}wt((Ve=Ve.apply(pe,ye||[])).next())})}function Te(pe){return this instanceof Te?(this.v=pe,this):new Te(pe)}function De(pe,ye,Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Je,Ve=Re.apply(pe,ye||[]),Be=[];return Je={},Ae("next"),Ae("throw"),Ae("return"),Je[Symbol.asyncIterator]=function(){return this},Je;function Ae(tn){Ve[tn]&&(Je[tn]=function(gn){return new Promise(function(Xn,Mn){Be.push([tn,gn,Xn,Mn])>1||at(tn,gn)})})}function at(tn,gn){try{!function _n(tn){tn.value instanceof Te?Promise.resolve(tn.value.v).then(wt,Tt):jt(Be[0][2],tn)}(Ve[tn](gn))}catch(Xn){jt(Be[0][3],Xn)}}function wt(tn){at("next",tn)}function Tt(tn){at("throw",tn)}function jt(tn,gn){tn(gn),Be.shift(),Be.length&&at(Be[0][0],Be[0][1])}}function Ue(pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,ye=pe[Symbol.asyncIterator];return ye?ye.call(pe):(pe=function Et(pe){var ye="function"==typeof Symbol&&Symbol.iterator,Re=ye&&pe[ye],Ve=0;if(Re)return Re.call(pe);if(pe&&"number"==typeof pe.length)return{next:function(){return pe&&Ve>=pe.length&&(pe=void 0),{value:pe&&pe[Ve++],done:!pe}}};throw new TypeError(ye?"Object is not iterable.":"Symbol.iterator is not defined.")}(pe),Re={},Ve("next"),Ve("throw"),Ve("return"),Re[Symbol.asyncIterator]=function(){return this},Re);function Ve(Be){Re[Be]=pe[Be]&&function(Ae){return new Promise(function(at,_n){!function Je(Be,Ae,at,_n){Promise.resolve(_n).then(function(wt){Be({value:wt,done:at})},Ae)}(at,_n,(Ae=pe[Be](Ae)).done,Ae.value)})}}}F.d(Oe,{FC:()=>De,KL:()=>Ue,_T:()=>ne,mG:()=>K,qq:()=>Te})},2223:(It,Oe,F)=>{F.d(Oe,{$8M:()=>Rd,$WT:()=>zt,$Z:()=>kT,AFp:()=>cw,AaK:()=>Ce,CHM:()=>yu,CRH:()=>A_,D6c:()=>CC,EJc:()=>Z_,EpF:()=>$u,F4k:()=>yI,FYo:()=>Bp,FiY:()=>Pc,Gf:()=>M_,GfV:()=>Ro,Gpc:()=>z,HDt:()=>bs,JOm:()=>_s,KtG:()=>Wf,LFG:()=>Yt,LMc:()=>bC,LSH:()=>Wy,Lbi:()=>ev,Lck:()=>vD,MAs:()=>ES,MMx:()=>m_,MR2:()=>Ky,NdJ:()=>Uv,O4$:()=>oy,Ojb:()=>dT,OlP:()=>vn,Oqu:()=>Hu,P3R:()=>Kc,PXZ:()=>am,Q6J:()=>dI,QGY:()=>Vv,Qsj:()=>Ew,R0b:()=>Mi,RDi:()=>zb,Rgc:()=>_l,SBq:()=>Up,Sil:()=>eA,Suo:()=>jD,TTD:()=>gc,TgZ:()=>kv,X6Q:()=>lm,XFs:()=>vt,Xpm:()=>Ni,Xts:()=>th,Y36:()=>uh,YKP:()=>Fg,YNc:()=>yS,Yjl:()=>X,Yz7:()=>Tt,Z0I:()=>Xn,ZZ4:()=>kl,_Bn:()=>g_,_UZ:()=>fI,_Vd:()=>oh,_c5:()=>aA,_uU:()=>VS,aQg:()=>gm,c2e:()=>Qh,cJS:()=>tn,cg1:()=>Tg,dDg:()=>iC,dqk:()=>rt,eFA:()=>oC,eJc:()=>N_,ekj:()=>hg,eoX:()=>t0,f3M:()=>Ft,g9A:()=>lw,h0i:()=>Ya,hGG:()=>uA,hij:()=>dl,iGM:()=>S_,ifc:()=>M,ip1:()=>Rl,jDz:()=>ID,kL8:()=>KS,lG2:()=>U,lqb:()=>xo,lri:()=>e0,n5z:()=>Ad,oAB:()=>ss,oxw:()=>Bv,q4F:()=>Iw,qFp:()=>Zt,qLn:()=>Ba,qOj:()=>Mv,qZA:()=>Fv,rWj:()=>rC,sBO:()=>uf,s_b:()=>wl,soG:()=>Bo,tb:()=>o0,tp0:()=>Na,uIk:()=>_h,vHH:()=>he,vpe:()=>Uo,wAp:()=>Ut,xp6:()=>xT,z2F:()=>Yu,zSh:()=>Qy,zs3:()=>Uu});var h=F(7579),V=F(727),k=F(9751),ne=F(6451),ge=F(3099);function ce(i){for(let o in i)if(i[o]===ce)return o;throw Error("Could not find renamed property on target object.")}function ve(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function _e(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const W=ce({__forward_ref__:ce});function z(i){return i.__forward_ref__=z,i.toString=function(){return Ce(this())},i}function K(i){return xe(i)?i():i}function xe(i){return"function"==typeof i&&i.hasOwnProperty(W)&&i.__forward_ref__===z}function we(i){return i&&!!i.\u0275providers}const Et="https://g.co/ng/security#xss";class he extends Error{constructor(o,a){super(function Le(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function ze(i){return"string"==typeof i?i:null==i?"":String(i)}function Ue(i,o){throw new he(-201,!1)}function Be(i,o){null==i&&function Ae(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Tt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function tn(i){return{providers:i.providers||[],imports:i.imports||[]}}function gn(i){return Mn(i,kn)||Mn(i,si)}function Xn(i){return null!==gn(i)}function Mn(i,o){return i.hasOwnProperty(o)?i[o]:null}function er(i){return i&&(i.hasOwnProperty(qn)||i.hasOwnProperty(Mr))?i[qn]:null}const kn=ce({\u0275prov:ce}),qn=ce({\u0275inj:ce}),si=ce({ngInjectableDef:ce}),Mr=ce({ngInjectorDef:ce});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let Dn;function Nn(i){const o=Dn;return Dn=i,o}function Wt(i,o,a){const c=gn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&vt.Optional?null:void 0!==o?o:void Ue(Ce(i))}const rt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Cn={},Xt="__NG_DI_FLAG__",cr="ngTempTokenPath",vr=/\n/gm,en="__source";let Hn;function Pn(i){const o=Hn;return Hn=i,o}function Un(i,o=vt.Default){if(void 0===Hn)throw new he(-203,!1);return null===Hn?Wt(i,void 0,o):Hn.get(i,o&vt.Optional?null:void 0,o)}function Yt(i,o=vt.Default){return(function ar(){return Dn}()||Un)(K(i),o)}function Ft(i,o=vt.Default){return Yt(i,Fn(o))}function Fn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Fr(i){const o=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new he(900,!1);let d,f=vt.Default;for(let y=0;y<c.length;y++){const v=c[y],I=Yr(v);"number"==typeof I?-1===I?d=v.token:f|=I:d=v}o.push(Yt(d,f))}else o.push(Yt(c))}return o}function lr(i,o){return i[Xt]=o,i.prototype[Xt]=o,i}function Yr(i){return i[Xt]}function N(i){return{toString:i}.toString()}var O=(()=>((O=O||{})[O.OnPush=0]="OnPush",O[O.Default=1]="Default",O))(),M=(()=>{return(i=M||(M={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",M;var i})();const Z={},ie=[],G=ce({\u0275cmp:ce}),ae=ce({\u0275dir:ce}),de=ce({\u0275pipe:ce}),Ge=ce({\u0275mod:ce}),Ie=ce({\u0275fac:ce}),it=ce({__NG_ELEMENT_ID__:ce}),tt=ce({__NG_ENV_ID__:ce});function Pt(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}function Lt(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],y=a[c++],v=a[c++];i.setAttribute(o,y,v,f)}else{const f=d,y=a[++c];ee(f)?i.setProperty(o,f,y):i.setAttribute(o,f,y),c++}}return c}function se(i){return 3===i||4===i||6===i}function ee(i){return 64===i.charCodeAt(0)}function Pe(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||mt(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function mt(i,o,a,c,d){let f=0,y=i.length;if(-1===o)y=-1;else for(;f<i.length;){const v=i[f++];if("number"==typeof v){if(v===o){y=-1;break}if(v>o){y=f-1;break}}}for(;f<i.length;){const v=i[f];if("number"==typeof v)break;if(v===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(i.splice(y,0,o),f=y+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}const Dt="ng-template";function Ht(i,o,a){let c=0,d=!0;for(;c<i.length;){let f=i[c++];if("string"==typeof f&&d){const y=i[c++];if(a&&"class"===f&&-1!==Pt(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;c<i.length&&"string"==typeof(f=i[c++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function rn(i){return 4===i.type&&i.value!==Dt}function _r(i,o,a){return o===(4!==i.type||a?i.value:Dt)}function On(i,o,a){let c=4;const d=i.attrs||[],f=function lo(i){for(let o=0;o<i.length;o++)if(se(i[o]))return o;return i.length}(d);let y=!1;for(let v=0;v<o.length;v++){const I=o[v];if("number"!=typeof I){if(!y)if(4&c){if(c=2|1&c,""!==I&&!_r(i,I,a)||""===I&&1===o.length){if(tr(c))return!1;y=!0}}else{const C=8&c?I:o[++v];if(8&c&&null!==i.attrs){if(!Ht(i.attrs,C,a)){if(tr(c))return!1;y=!0}continue}const L=Gi(8&c?"class":I,d,rn(i),a);if(-1===L){if(tr(c))return!1;y=!0;continue}if(""!==C){let q;q=L>f?"":d[L+1].toLowerCase();const te=8&c?q:null;if(te&&-1!==Pt(te,C,0)||2&c&&C!==q){if(tr(c))return!1;y=!0}}}}else{if(!y&&!tr(c)&&!tr(I))return!1;if(y&&tr(I))continue;y=!1,c=I|1&c}}return tr(c)||y}function tr(i){return 0==(1&i)}function Gi(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===i)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let v=o[++d];for(;"string"==typeof v;)v=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function vi(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function nr(i,o,a=!1){for(let c=0;c<o.length;c++)if(On(i,o[c],a))return!0;return!1}function ga(i,o){return i?":not("+o.trim()+")":o}function Wi(i){let o=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&c){const v=i[++a];d+="["+y+(v.length>0?'="'+v+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!tr(y)&&(o+=ga(f,d),d=""),c=y,f=f||!tr(c);a++}return""!==d&&(o+=ga(f,d)),o}function Ni(i){return N(()=>{const o=Bn(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===O.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||M.Emulated,styles:i.styles||ie,_:null,schemas:i.schemas||null,tView:null,id:""};rr(a);const c=i.dependencies;return a.directiveDefs=ir(c,!1),a.pipeDefs=ir(c,!0),a.id=function nd(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function fo(i){return oe(i)||Xe(i)}function po(i){return null!==i}function ss(i){return N(()=>({type:i.type,bootstrap:i.bootstrap||ie,declarations:i.declarations||ie,imports:i.imports||ie,exports:i.exports||ie,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function go(i,o){if(null==i)return Z;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,o&&(o[d]=f)}return a}function U(i){return N(()=>{const o=Bn(i);return rr(o),o})}function X(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function oe(i){return i[G]||null}function Xe(i){return i[ae]||null}function Rt(i){return i[de]||null}function zt(i){const o=oe(i)||Xe(i)||Rt(i);return null!==o&&o.standalone}function At(i,o){const a=i[Ge]||null;if(!a&&!0===o)throw new Error(`Type ${Ce(i)} does not have '\u0275mod' property.`);return a}function Bn(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||ie,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:go(i.inputs,o),outputs:go(i.outputs)}}function rr(i){i.features?.forEach(o=>o(i))}function ir(i,o){if(!i)return null;const a=o?Rt:fo;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(po)}const sr=0,ut=1,Vt=2,jn=3,Qr=4,as=5,Ar=6,Rs=7,Gn=8,Ns=9,qi=10,Nt=11,oi=12,mo=13,zs=14,Tn=15,Gs=16,us=17,ai=18,cs=19,rd=20,ls=21,Pi=22,Ws=23,yo=24,Gt=25,id=1,Ps=2,Ki=7,ya=8,_i=9,dr=11;function ui(i){return Array.isArray(i)&&"object"==typeof i[id]}function ci(i){return Array.isArray(i)&&!0===i[id]}function va(i){return 0!=(4&i.flags)}function Yi(i){return i.componentOffset>-1}function vo(i){return 1==(1&i.flags)}function Jr(i){return!!i.template}function cu(i){return 0!=(512&i[Vt])}function Xr(i,o){return i.hasOwnProperty(Ie)?i[Ie]:null}let Lf=rt.WeakRef??class pc{constructor(o){this.ref=o}deref(){return this.ref}},j=0,re=null,Ne=!1;function ke(i){const o=re;return re=i,o}class pt{constructor(){this.id=j++,this.ref=function A(i){return new Lf(i)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,a]of this.producers){const c=a.producerNode.deref();if(void 0!==c&&a.atTrackingVersion===this.trackingVersion){if(c.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(o),c?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=Ne;Ne=!0;try{for(const[a,c]of this.consumers){const d=c.consumerNode.deref();void 0!==d&&d.trackingVersion===c.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),d?.producers.delete(this.id))}}finally{Ne=o}}producerAccessed(){if(Ne)throw new Error("");if(null===re)return;let o=re.producers.get(this.id);void 0===o?(o={consumerNode:re.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:re.trackingVersion},re.producers.set(this.id,o),this.consumers.set(re.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=re.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==re?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let Os=null;const Wm=()=>{};class Vf extends pt{constructor(o,a,c){super(),this.watch=o,this.schedule=a,this.dirty=!1,this.cleanupFn=Wm,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=c}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=ke(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Wm,this.watch(this.registerOnCleanup)}finally{ke(o)}}cleanup(){this.cleanupFn()}}class pE{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function gc(){return qm}function qm(i){return i.type.prototype.ngOnChanges&&(i.setInput=gE),Uf}function Uf(){const i=Km(this),o=i?.current;if(o){const a=i.previous;if(a===Z)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function gE(i,o,a,c){const d=this.declaredInputs[a],f=Km(i)||function dd(i,o){return i[ld]=o}(i,{previous:Z,current:null}),y=f.current||(f.current={}),v=f.previous,I=v[d];y[d]=new pE(I&&I.currentValue,o,v===Z),i[c]=o}gc.ngInherit=!0;const ld="__ngSimpleChanges__";function Km(i){return i[ld]||null}const ks=function(i,o,a){},fd="svg";function or(i){for(;Array.isArray(i);)i=i[sr];return i}function fu(i,o){return or(o[i])}function Oi(i,o){return or(o[i.index])}function jf(i,o){return i.data[o]}function ki(i,o){const a=o[i];return ui(a)?a:a[sr]}function yc(i){return 128==(128&i[Vt])}function ps(i,o){return null==o?null:i[o]}function Qm(i){i[us]=0}function vc(i){1024&i[Vt]||(i[Vt]|=1024,Hf(i,1))}function $f(i){1024&i[Vt]&&(i[Vt]&=-1025,Hf(i,-1))}function Hf(i,o){let a=i[jn];if(null===a)return;a[as]+=o;let c=a;for(a=a[jn];null!==a&&(1===o&&1===c[as]||-1===o&&0===c[as]);)a[as]+=o,c=a,a=a[jn]}const $t={lFrame:Dc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function md(){return $t.bindingsEnabled}function je(){return $t.lFrame.lView}function sn(){return $t.lFrame.tView}function yu(i){return $t.lFrame.contextLView=i,i[Gn]}function Wf(i){return $t.lFrame.contextLView=null,i}function ei(){let i=_d();for(;null!==i&&64===i.type;)i=i.parent;return i}function _d(){return $t.lFrame.currentTNode}function Fi(i,o){const a=$t.lFrame;a.currentTNode=i,a.isParent=o}function Ed(){return $t.lFrame.isParent}function Zs(){return $t.lFrame.bindingIndex++}function ny(i,o){const a=$t.lFrame;a.bindingIndex=a.bindingRootIndex=i,Dd(o)}function Dd(i){$t.lFrame.currentDirectiveIndex=i}function wc(){return $t.lFrame.currentQueryIndex}function Io(i){$t.lFrame.currentQueryIndex=i}function Ic(i){const o=i[ut];return 2===o.type?o.declTNode:1===o.type?i[Ar]:null}function ry(i,o,a){if(a&vt.SkipSelf){let d=o,f=i;for(;!(d=d.parent,null!==d||a&vt.Host||(d=Ic(f),null===d||(f=f[zs],10&d.type))););if(null===d)return!1;o=d,i=f}const c=$t.lFrame=Zf();return c.currentTNode=o,c.lView=i,!0}function _u(i){const o=Zf(),a=i[ut];$t.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Zf(){const i=$t.lFrame,o=null===i?null:i.child;return null===o?Dc(i):o}function Dc(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function Cc(){const i=$t.lFrame;return $t.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Eu=Cc;function gs(){const i=Cc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ti(){return $t.lFrame.selectedIndex}function Ys(i){$t.lFrame.selectedIndex=i}function hr(){const i=$t.lFrame;return jf(i.tView,i.selectedIndex)}function oy(){$t.lFrame.currentNamespace=fd}let uy=!0;function Cd(){return uy}function Yo(i){uy=i}function bd(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:v,ngAfterViewInit:I,ngAfterViewChecked:C,ngOnDestroy:S}=f;y&&(i.contentHooks??=[]).push(-a,y),v&&((i.contentHooks??=[]).push(a,v),(i.contentCheckHooks??=[]).push(a,v)),I&&(i.viewHooks??=[]).push(-a,I),C&&((i.viewHooks??=[]).push(a,C),(i.viewCheckHooks??=[]).push(a,C)),null!=S&&(i.destroyHooks??=[]).push(a,S)}}function Td(i,o,a){cy(i,o,3,a)}function Tc(i,o,a,c){(3&i[Vt])===a&&cy(i,o,a,c)}function Sc(i,o){let a=i[Vt];(3&a)===o&&(a&=4095,a+=1,i[Vt]=a)}function cy(i,o,a,c){const f=c??-1,y=o.length-1;let v=0;for(let I=void 0!==c?65535&i[us]:0;I<y;I++)if("number"==typeof o[I+1]){if(v=o[I],null!=c&&v>=c)break}else o[I]<0&&(i[us]+=65536),(v<f||-1==f)&&(EE(i,a,o,I),i[us]=(4294901760&i[us])+I+2),I++}function Qf(i,o){ks(4,i,o);const a=ke(null);try{o.call(i)}finally{ke(a),ks(5,i,o)}}function EE(i,o,a,c){const d=a[c]<0,f=a[c+1],v=i[d?-a[c]:a[c]];d?i[Vt]>>12<i[us]>>16&&(3&i[Vt])===o&&(i[Vt]+=4096,Qf(v,f)):Qf(v,f)}const wu=-1;class Mc{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Qs(i){return i!==wu}function Lr(i){return 32767&i}function mn(i,o){let a=function xr(i){return i>>16}(i),c=o;for(;a>0;)c=c[zs],a--;return c}let gt=!0;function Ji(i){const o=gt;return gt=i,o}const Iu=255,Ac=5;let Vi=0;const Ls={};function xc(i,o){const a=Xf(i,o);if(-1!==a)return a;const c=o[ut];c.firstCreatePass&&(i.injectorIndex=o.length,Du(c.data,i),Du(o,null),Du(c.blueprint,null));const d=Ta(i,o),f=i.injectorIndex;if(Qs(d)){const y=Lr(d),v=mn(d,o),I=v[ut].data;for(let C=0;C<8;C++)o[f+C]=v[y+C]|I[y+C]}return o[f+8]=d,f}function Du(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Xf(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ta(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=xd(d),null===c)return wu;if(a++,d=d[zs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return wu}function Sa(i,o,a){!function ly(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(it)&&(c=a[it]),null==c&&(c=a[it]=Vi++);const d=c&Iu;o.data[i+(d>>Ac)]|=1<<d}(i,o,a)}function Sd(i,o,a){if(a&vt.Optional||void 0!==i)return i;Ue()}function ep(i,o,a,c){if(a&vt.Optional&&void 0===c&&(c=null),!(a&(vt.Self|vt.Host))){const d=i[Ns],f=Nn(void 0);try{return d?d.get(o,c,a&vt.Optional):Wt(o,c,a&vt.Optional)}finally{Nn(f)}}return Sd(c,0,a)}function Ma(i,o,a,c=vt.Default,d){if(null!==i){if(2048&o[Vt]&&!(c&vt.Self)){const y=function Jo(i,o,a,c,d){let f=i,y=o;for(;null!==f&&null!==y&&2048&y[Vt]&&!(512&y[Vt]);){const v=Md(f,y,a,c|vt.Self,Ls);if(v!==Ls)return v;let I=f.parent;if(!I){const C=y[rd];if(C){const S=C.get(a,Ls,c);if(S!==Ls)return S}I=xd(y),y=y[zs]}f=I}return d}(i,o,a,c,Ls);if(y!==Ls)return y}const f=Md(i,o,a,c,Ls);if(f!==Ls)return f}return ep(o,a,c,d)}function Md(i,o,a,c,d){const f=function Do(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(it)?i[it]:void 0;return"number"==typeof o?o>=0?o&Iu:di:o}(a);if("function"==typeof f){if(!ry(o,i,c))return c&vt.Host?Sd(d,0,c):ep(o,a,c,d);try{const y=f(c);if(null!=y||c&vt.Optional)return y;Ue()}finally{Eu()}}else if("number"==typeof f){let y=null,v=Xf(i,o),I=wu,C=c&vt.Host?o[Tn][Ar]:null;for((-1===v||c&vt.SkipSelf)&&(I=-1===v?Ta(i,o):o[v+8],I!==wu&&Cu(c,!1)?(y=o[ut],v=Lr(I),o=mn(I,o)):v=-1);-1!==v;){const S=o[ut];if(Er(f,v,S.data)){const L=tp(v,o,a,y,c,C);if(L!==Ls)return L}I=o[v+8],I!==wu&&Cu(c,o[ut].data[v+8]===C)&&Er(f,v,o)?(y=S,v=Lr(I),o=mn(I,o)):v=-1}}return d}function tp(i,o,a,c,d,f){const y=o[ut],v=y.data[i+8],S=Qo(v,y,a,null==c?Yi(v)&&gt:c!=y&&0!=(3&v.type),d&vt.Host&&f===v);return null!==S?Js(o,y,S,v):Ls}function Qo(i,o,a,c,d){const f=i.providerIndexes,y=o.data,v=1048575&f,I=i.directiveStart,S=f>>20,q=d?v+S:i.directiveEnd;for(let te=c?v:v+S;te<q;te++){const be=y[te];if(te<I&&a===be||te>=I&&be.type===a)return te}if(d){const te=y[I];if(te&&Jr(te)&&te.type===a)return I}return null}function Js(i,o,a,c){let d=i[a];const f=o.data;if(function Jf(i){return i instanceof Mc}(d)){const y=d;y.resolving&&function Te(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ze(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ze(i)}(f[a]));const v=Ji(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?Nn(y.injectImpl):null;ry(i,c,vt.Default);try{d=i[a]=y.factory(void 0,f,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Yf(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=qm(o);(a.preOrderHooks??=[]).push(i,y),(a.preOrderCheckHooks??=[]).push(i,y)}d&&(a.preOrderHooks??=[]).push(0-i,d),f&&((a.preOrderHooks??=[]).push(i,f),(a.preOrderCheckHooks??=[]).push(i,f))}(a,f[a],o)}finally{null!==I&&Nn(I),Ji(v),y.resolving=!1,Eu()}}return d}function Er(i,o,a){return!!(a[o+(i>>Ac)]&1<<i)}function Cu(i,o){return!(i&vt.Self||i&vt.Host&&o)}class Xs{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Ma(this._tNode,this._lView,o,Fn(c),a)}}function di(){return new Xs(ei(),je())}function Ad(i){return N(()=>{const o=i.prototype.constructor,a=o[Ie]||bu(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Ie]||bu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function bu(i){return xe(i)?()=>{const o=bu(K(i));return o&&o()}:Xr(i)}function xd(i){const o=i[ut],a=o.type;return 2===a?o.declTNode:1===a?i[Ar]:null}function Rd(i){return function ms(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(se(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(ei(),i)}const Xo="__parameters__";function eo(i,o,a){return N(()=>{const c=function Nd(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return v.annotation=y,v;function v(I,C,S){const L=I.hasOwnProperty(Xo)?I[Xo]:Object.defineProperty(I,Xo,{value:[]})[Xo];for(;L.length<=S;)L.push(null);return(L[S]=L[S]||[]).push(y),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}function Su(i,o){i.forEach(a=>Array.isArray(a)?Su(a,o):o(a))}function Rc(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Nc(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function yn(i,o,a){let c=Ra(i,o);return c>=0?i[1|c]=a:(c=~c,function vy(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function bo(i,o){const a=Ra(i,o);if(a>=0)return i[1|a]}function Ra(i,o){return function Mu(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),y=i[f<<a];if(o===y)return f<<a;y>o?d=f:c=f+1}return~(d<<a)}(i,o,1)}const Pc=lr(eo("Optional"),8),Na=lr(eo("SkipSelf"),4);function To(i){return 128==(128&i.flags)}var _s=(()=>((_s=_s||{})[_s.Important=1]="Important",_s[_s.DashCase=2]="DashCase",_s))();const Sy=new Map;let Uc=0;const up="__ngContext__";function Ci(i,o){ui(o)?(i[up]=o[cs],function Nb(i){Sy.set(i[cs],i)}(o)):i[up]=o}let ku;function Hd(i,o){return ku(i,o)}function ka(i){const o=i[jn];return ci(o)?o[jn]:o}function $c(i){return cp(i[oi])}function Ry(i){return cp(i[Qr])}function cp(i){for(;null!==i&&!ci(i);)i=i[Qr];return i}function ta(i,o,a,c,d){if(null!=c){let f,y=!1;ci(c)?f=c:ui(c)&&(y=!0,c=c[sr]);const v=or(c);0===i&&null!==a?null==d?Fy(o,a,v):Fa(o,a,v,d||null,!0):1===i&&null!==a?Fa(o,a,v,d||null,!0):2===i?function hp(i,o,a){const c=Kd(i,o);c&&function qd(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,v,y):3===i&&o.destroyNode(v),null!=f&&function Fu(i,o,a,c,d){const f=a[Ki];f!==or(a)&&ta(o,i,c,f,d);for(let v=dr;v<a.length;v++){const I=a[v];ia(I[ut],I,i,o,c,f)}}(o,i,f,a,d)}}function lp(i,o,a){return i.createElement(o,a)}function OE(i,o){const a=i[_i],c=a.indexOf(o);$f(o),a.splice(c,1)}function ky(i,o){if(i.length<=dr)return;const a=dr+o,c=i[a];if(c){const d=c[Gs];null!==d&&d!==i&&OE(d,c),o>0&&(i[a-1][Qr]=c[Qr]);const f=Nc(i,dr+o);!function kb(i,o){ia(i,o,o[Nt],2,null,null),o[sr]=null,o[Ar]=null}(c[ut],c);const y=f[ai];null!==y&&y.detachView(f[ut]),c[jn]=null,c[Qr]=null,c[Vt]&=-129}return c}function kE(i,o){if(!(256&o[Vt])){const a=o[Nt];o[Ws]?.destroy(),o[yo]?.destroy(),a.destroyNode&&ia(i,o,a,3,null,null),function Lb(i){let o=i[oi];if(!o)return dp(i[ut],i);for(;o;){let a=null;if(ui(o))a=o[oi];else{const c=o[dr];c&&(a=c)}if(!a){for(;o&&!o[Qr]&&o!==i;)ui(o)&&dp(o[ut],o),o=o[jn];null===o&&(o=i),ui(o)&&dp(o[ut],o),a=o&&o[Qr]}o=a}}(o)}}function dp(i,o){if(!(256&o[Vt])){o[Vt]&=-129,o[Vt]|=256,function Bb(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Mc)){const f=a[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const v=d[f[y]],I=f[y+1];ks(4,v,I);try{I.call(v)}finally{ks(5,v,I)}}else{ks(4,d,f);try{f.call(d)}finally{ks(5,d,f)}}}}}(i,o),function FE(i,o){const a=i.cleanup,c=o[Rs];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?c[y]():c[-y].unsubscribe(),f+=2}else a[f].call(c[a[f+1]]);null!==c&&(o[Rs]=null);const d=o[ls];if(null!==d){o[ls]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(i,o),1===o[ut].type&&o[Nt].destroy();const a=o[Gs];if(null!==a&&ci(o[jn])){a!==o[jn]&&OE(a,o);const c=o[ai];null!==c&&c.detachView(i)}!function ME(i){Sy.delete(i[cs])}(o)}}function na(i,o,a){return function LE(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[sr];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===M.None||f===M.Emulated)return null}return Oi(c,a)}}(i,o.parent,a)}function Fa(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Fy(i,o,a){i.appendChild(o,a)}function Wd(i,o,a,c,d){null!==c?Fa(i,o,a,c,d):Fy(i,o,a)}function Kd(i,o){return i.parentNode(o)}let Ly,By,Xd,jE=function Zd(i,o,a){return 40&i.type?Oi(i,a):null};function Yd(i,o,a,c){const d=na(i,c,o),f=o[Nt],v=function BE(i,o,a){return jE(i,o,a)}(c.parent||o[Ar],c,o);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Wd(f,d,a[I],v,!1);else Wd(f,d,a,v,!1);void 0!==Ly&&Ly(f,c,o,a,d)}function ra(i,o){if(null!==o){const a=o.type;if(3&a)return Oi(o,i);if(4&a)return Qd(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return ra(i,c);{const d=i[o.index];return ci(d)?Qd(-1,d):or(d)}}if(32&a)return Hd(o,i)()||or(i[o.index]);{const c=HE(i,o);return null!==c?Array.isArray(c)?c[0]:ra(ka(i[Tn]),c):ra(i,o.next)}}return null}function HE(i,o){return null!==o?i[Tn][Ar].projection[o.projection]:null}function Qd(i,o){const a=dr+i+1;if(a<o.length){const c=o[a],d=c[ut].firstChild;if(null!==d)return ra(c,d)}return o[Ki]}function fp(i,o,a,c,d,f,y){for(;null!=a;){const v=c[a.index],I=a.type;if(y&&0===o&&(v&&Ci(or(v),c),a.flags|=2),32!=(32&a.flags))if(8&I)fp(i,o,a.child,c,d,f,!1),ta(o,i,d,v,f);else if(32&I){const C=Hd(a,c);let S;for(;S=C();)ta(o,i,d,S,f);ta(o,i,d,v,f)}else 16&I?pp(i,o,c,a,d,f):ta(o,i,d,v,f);a=y?a.projectionNext:a.next}}function ia(i,o,a,c,d,f){fp(a,c,i.firstChild,o,d,f,!1)}function pp(i,o,a,c,d,f){const y=a[Tn],I=y[Ar].projection[c.projection];if(Array.isArray(I))for(let C=0;C<I.length;C++)ta(o,i,d,I[C],f);else{let C=I;const S=y[jn];To(c)&&(C.flags|=128),fp(i,o,C,S,d,f,!0)}}function mp(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function zE(i,o,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&Lt(i,o,c),null!==d&&mp(i,o,d),null!==f&&function Jd(i,o,a){i.setAttribute(o,"style",a)}(i,o,f)}function zb(i){By=i}function jy(i){return function GE(){if(void 0===Xd&&(Xd=null,rt.trustedTypes))try{Xd=rt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Xd}()?.createScriptURL(i)||i}class vp{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Et})`}}function La(i){return i instanceof vp?i.changingThisBreaksApplicationSecurity:i}function Ao(i,o){const a=function ZE(i){return i instanceof vp&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${Et})`)}return a===o}const Ep=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var fr=(()=>((fr=fr||{})[fr.NONE=0]="NONE",fr[fr.HTML=1]="HTML",fr[fr.STYLE=2]="STYLE",fr[fr.SCRIPT=3]="SCRIPT",fr[fr.URL=4]="URL",fr[fr.RESOURCE_URL=5]="RESOURCE_URL",fr))();function Wy(i){const o=ua();return o?o.sanitize(fr.URL,i)||"":Ao(i,"URL")?La(i):function wp(i){return(i=String(i)).match(Ep)?i:"unsafe:"+i}(ze(i))}function qy(i){const o=ua();if(o)return jy(o.sanitize(fr.RESOURCE_URL,i)||"");if(Ao(i,"ResourceURL"))return jy(La(i));throw new he(904,!1)}function Kc(i,o,a){return function qc(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?qy:Wy}(o,a)(i)}function ua(){const i=je();return i&&i[qi].sanitizer}class vn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Tt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const th=new vn("ENVIRONMENT_INITIALIZER"),tw=new vn("INJECTOR",-1),nw=new vn("INJECTOR_DEF_TYPES");class rw{get(o,a=Cn){if(a===Cn){const c=new Error(`NullInjectorError: No provider for ${Ce(o)}!`);throw c.name="NullInjectorError",c}return a}}function Ky(i){return{\u0275providers:i}}function rT(...i){return{\u0275providers:iT(0,i),\u0275fromNgModule:!0}}function iT(i,...o){const a=[],c=new Set;let d;return Su(o,f=>{const y=f;Tp(y,a,[],c)&&(d||=[],d.push(y))}),void 0!==d&&iw(d,a),a}function iw(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Va(d,f=>{o.push(f)})}}function Tp(i,o,a,c){if(!(i=K(i)))return!1;let d=null,f=er(i);const y=!f&&oe(i);if(f||y){if(y&&!y.standalone)return!1;d=i}else{const I=i.ngModule;if(f=er(I),!f)return!1;d=I}const v=c.has(d);if(y){if(v)return!1;if(c.add(d),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const C of I)Tp(C,o,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!v){let C;c.add(d);try{Su(f.imports,S=>{Tp(S,o,a,c)&&(C||=[],C.push(S))})}finally{}void 0!==C&&iw(C,o)}if(!v){const C=Xr(d)||(()=>new d);o.push({provide:d,useFactory:C,deps:ie},{provide:nw,useValue:d,multi:!0},{provide:th,useValue:()=>Yt(d),multi:!0})}const I=f.providers;null==I||v||Va(I,S=>{o.push(S)})}}return d!==i&&void 0!==i.providers}function Va(i,o){for(let a of i)we(a)&&(a=a.\u0275providers),Array.isArray(a)?Va(a,o):o(a)}const sT=ce({provide:String,useValue:ce});function Yy(i){return null!==i&&"object"==typeof i&&sT in i}function Lu(i){return"function"==typeof i}const Qy=new vn("Set Injector scope."),Sp={},aT={};let Mp;function Ap(){return void 0===Mp&&(Mp=new rw),Mp}class xo{}class xp extends xo{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rp(o,y=>this.processProvider(y)),this.records.set(tw,Zc(void 0,this)),d.has("environment")&&this.records.set(xo,Zc(void 0,this));const f=this.records.get(Qy);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(nw.multi,ie,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=Pn(this),c=Nn(void 0);try{return o()}finally{Pn(a),Nn(c)}}get(o,a=Cn,c=vt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(tt))return o[tt](this);c=Fn(c);const d=Pn(this),f=Nn(void 0);try{if(!(c&vt.SkipSelf)){let v=this.records.get(o);if(void 0===v){const I=function Xy(i){return"function"==typeof i||"object"==typeof i&&i instanceof vn}(o)&&gn(o);v=I&&this.injectableDefInScope(I)?Zc(Ua(o),Sp):null,this.records.set(o,v)}if(null!=v)return this.hydrate(o,v)}return(c&vt.Self?Ap():this.parent).get(o,a=c&vt.Optional&&a===Cn?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[cr]=y[cr]||[]).unshift(Ce(o)),d)throw y;return function H(i,o,a,c){const d=i[cr];throw o[en]&&d.unshift(o[en]),i.message=function B(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=Ce(o);if(Array.isArray(o))d=o.map(Ce).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let v=o[y];f.push(y+":"+("string"==typeof v?JSON.stringify(v):Ce(v)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(vr,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[cr]=null,i}(y,o,"R3InjectorError",this.source)}throw y}finally{Nn(f),Pn(d)}}resolveInjectorInitializers(){const o=Pn(this),a=Nn(void 0);try{const c=this.get(th.multi,ie,vt.Self);for(const d of c)d()}finally{Pn(o),Nn(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Ce(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(o){let a=Lu(o=K(o))?o:K(o&&o.provide);const c=function uT(i){return Yy(i)?Zc(void 0,i.useValue):Zc(uw(i),Sp)}(o);if(Lu(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Zc(void 0,Sp,!0),d.factory=()=>Fr(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Sp&&(a.value=aT,a.value=a.factory()),"object"==typeof a.value&&a.value&&function cT(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=K(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function Ua(i){const o=gn(i),a=null!==o?o.factory:Xr(i);if(null!==a)return a;if(i instanceof vn)throw new he(204,!1);if(i instanceof Function)return function aw(i){const o=i.length;if(o>0)throw function to(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new he(204,!1);const a=function yr(i){return i&&(i[kn]||i[si])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new he(204,!1)}function uw(i,o,a){let c;if(Lu(i)){const d=K(i);return Xr(d)||Ua(d)}if(Yy(i))c=()=>K(i.useValue);else if(function ow(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Fr(i.deps||[]));else if(function sw(i){return!(!i||!i.useExisting)}(i))c=()=>Yt(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function Jy(i){return!!i.deps}(i))return Xr(d)||Ua(d);c=()=>new d(...Fr(i.deps))}return c}function Zc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Rp(i,o){for(const a of i)Array.isArray(a)?Rp(a,o):a&&we(a)?Rp(a.\u0275providers,o):o(a)}const cw=new vn("AppId",{providedIn:"root",factory:()=>lT}),lT="ng",lw=new vn("Platform Initializer"),ev=new vn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dT=new vn("CSP nonce",{providedIn:"root",factory:()=>function zc(){if(void 0!==By)return By;if(typeof document<"u")return document;throw new he(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let sv=(i,o)=>null;function ov(i,o){return sv(i,o)}class gT{}class mw{}class mT{resolveComponentFactory(o){throw function Is(i){const o=Error(`No component factory found for ${Ce(i)}.`);return o.ngComponent=i,o}(o)}}let oh=(()=>{class i{}return i.NULL=new mT,i})();function _w(){return ah(ei(),je())}function ah(i,o){return new Up(Oi(i,o))}let Up=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=_w,i})();function yT(i){return i instanceof Up?i.nativeElement:i}class Bp{}let Ew=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Wx(){const i=je(),a=ki(ei().index,i);return(ui(a)?a:i)[Nt]}(),i})(),ww=(()=>{class i{}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:()=>null}),i})();class Ro{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Iw=new Ro("16.0.3"),Dw={};function jp(i){for(;i;){i[Vt]|=64;const o=ka(i);if(cu(i)&&!o)return i;i=o}return null}function $p(i){return i.ngOriginalError}class Ba{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&$p(o);for(;a&&$p(a);)a=$p(a);return a||null}}const ET=new vn("",{providedIn:"root",factory:()=>!1});function ca(i){return i instanceof Function?i():i}class Aw extends pt{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){jp(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,a,c){const d=ke(this);this.trackingVersion++;try{o(a,c)}finally{ke(d)}}destroy(){this.trackingVersion++}}let dv=null;function ST(){return dv??=new Aw,dv}function MT(i,o){return i[o]??ST()}function AT(i,o){const a=ST();a.hasReadASignal&&(i[o]=dv,a.lView=i,dv=new Aw)}const Jt={};function xT(i){xw(sn(),je(),ti()+i,!1)}function xw(i,o,a,c){if(!c)if(3==(3&o[Vt])){const f=i.preOrderCheckHooks;null!==f&&Td(o,f,a)}else{const f=i.preOrderHooks;null!==f&&Tc(o,f,0,a)}Ys(a)}function Rw(i,o=null,a=null,c){const d=Nw(i,o,a,c);return d.resolveInjectorInitializers(),d}function Nw(i,o=null,a=null,c,d=new Set){const f=[a||ie,rT(i)];return c=c||("object"==typeof i?void 0:Ce(i)),new xp(f,o||Ap(),c||null,d)}let Uu=(()=>{class i{static create(a,c){if(Array.isArray(a))return Rw({name:""},c,a,"");{const d=a.name??"";return Rw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=Cn,i.NULL=new rw,i.\u0275prov=Tt({token:i,providedIn:"any",factory:()=>Yt(tw)}),i.__NG_ELEMENT_ID__=-1,i})();function uh(i,o=vt.Default){const a=je();return null===a?Yt(i,o):Ma(ei(),a,K(i),o)}function kT(){throw new Error("invalid")}function fv(i,o,a,c,d,f,y,v,I,C,S){const L=o.blueprint.slice();return L[sr]=d,L[Vt]=140|c,(null!==C||i&&2048&i[Vt])&&(L[Vt]|=2048),Qm(L),L[jn]=L[zs]=i,L[Gn]=a,L[qi]=y||i&&i[qi],L[Nt]=v||i&&i[Nt],L[Ns]=I||i&&i[Ns]||null,L[Ar]=f,L[cs]=function Rb(){return Uc++}(),L[Pi]=S,L[rd]=C,L[Tn]=2==o.type?i[Tn]:L,L}function ch(i,o,a,c,d){let f=i.data[o];if(null===f)f=function Pw(i,o,a,c,d){const f=_d(),y=Ed(),I=i.data[o]=function jT(i,o,a,c,d,f){let y=o?o.injectorIndex:-1,v=0;return function Da(){return null!==$t.skipHydrationRootTNode}()&&(v|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:v,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I,I.prev=f)),I}(i,o,a,c,d),function wd(){return $t.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const y=function Ec(){const i=$t.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return Fi(f,!0),f}function Ee(i,o,a,c){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function ja(i,o,a,c,d){const f=MT(o,Ws),y=ti(),v=2&c;try{if(Ys(-1),v&&o.length>Gt&&xw(i,o,Gt,!1),ks(v?2:0,d),v)f.runInContext(a,c,d);else{const C=ke(null);try{a(c,d)}finally{ke(C)}}}finally{v&&null===o[Ws]&&AT(o,Ws),Ys(y),ks(v?3:1,d)}}function Xc(i,o,a){if(va(o)){const c=ke(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const v=i.data[y];v.contentQueries&&v.contentQueries(1,a[y],y)}}finally{ke(c)}}}function En(i,o,a){md()&&(function zT(i,o,a,c){const d=a.directiveStart,f=a.directiveEnd;Yi(a)&&function WT(i,o,a){const c=Oi(o,i),y=ph(i,fv(i,Gp(a),null,a.onPush?64:16,c,o,null,i[qi].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=y}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||xc(a,o),Ci(c,o);const y=a.initialInputs;for(let v=d;v<f;v++){const I=i.data[v],C=Js(o,i,v,a);Ci(C,o),null!==y&&qT(0,v-d,C,I,0,y),Jr(I)&&(ki(a.index,o)[Gn]=Js(o,i,v,a))}}(i,o,a,Oi(a,o)),64==(64&a.flags)&&Fw(i,o,a))}function No(i,o,a=Oi){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],v=-1===y?a(o,i):i[y];i[d++]=v}}}function Gp(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Wp(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function Wp(i,o,a,c,d,f,y,v,I,C,S){const L=Gt+c,q=L+d,te=function LT(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Jt);return a}(L,q),be="function"==typeof C?C():C;return te[ut]={type:i,blueprint:te,template:a,queries:null,viewQuery:v,declTNode:o,data:te.slice().fill(null,L),bindingStartIndex:L,expandoStartIndex:q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:be,incompleteFirstPass:!1,ssrId:S}}let lh=i=>null;function gv(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?Ow(a,o,d,f):c.hasOwnProperty(d)&&Ow(a,o,c[d],f)}return a}function Ow(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function dh(i,o,a,c){if(md()){const d=null===c?null:{"":-1},f=function GT(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(nr(o,y.selectors,!1))if(c||(c=[]),Jr(y))if(null!==y.findHostDirectiveDefs){const v=[];d=d||new Map,y.findHostDirectiveDefs(y,v,d),c.unshift(...v,y),yv(i,o,v.length)}else c.unshift(y),yv(i,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,c,d),c.push(y)}return null===c?null:[c,d]}(i,a);let y,v;null===f?y=v=null:[y,v]=f,null!==y&&hh(i,o,a,y,d,v),d&&function fh(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new he(-301,!1);c.push(o[d],f)}}}(a,c,d)}a.mergedAttrs=Pe(a.mergedAttrs,a.attrs)}function hh(i,o,a,c,d,f){for(let C=0;C<c.length;C++)Sa(xc(a,o),i,c[C].type);!function Zp(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let C=0;C<c.length;C++){const S=c[C];S.providersResolver&&S.providersResolver(S)}let y=!1,v=!1,I=Ee(i,o,c.length,null);for(let C=0;C<c.length;C++){const S=c[C];a.mergedAttrs=Pe(a.mergedAttrs,S.hostAttrs),Uw(i,a,o,I,S),Vw(I,S,d),null!==S.contentQueries&&(a.flags|=4),(null!==S.hostBindings||null!==S.hostAttrs||0!==S.hostVars)&&(a.flags|=64);const L=S.type.prototype;!y&&(L.ngOnChanges||L.ngOnInit||L.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),y=!0),!v&&(L.ngOnChanges||L.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),v=!0),I++}!function $T(i,o,a){const d=o.directiveEnd,f=i.data,y=o.attrs,v=[];let I=null,C=null;for(let S=o.directiveStart;S<d;S++){const L=f[S],q=a?a.get(L):null,be=q?q.outputs:null;I=gv(L.inputs,S,I,q?q.inputs:null),C=gv(L.outputs,S,C,be);const qe=null===I||null===y||rn(o)?null:Ev(I,S,y);v.push(qe)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=8),I.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=v,o.inputs=I,o.outputs=C}(i,a,f)}function Fw(i,o,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Id(){return $t.lFrame.currentDirectiveIndex}();try{Ys(f);for(let v=c;v<d;v++){const I=i.data[v],C=o[v];Dd(v),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Lw(I,C)}}finally{Ys(-1),Dd(y)}}function Lw(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function yv(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function Vw(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Jr(o)&&(a[""]=i)}}function Uw(i,o,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=Xr(d.type)),y=new Mc(f,Jr(d),uh);i.blueprint[c]=y,a[c]=y,function Kp(i,o,a,c,d){const f=d.hostBindings;if(f){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const v=~o.index;(function mv(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=v&&y.push(v),y.push(a,c,f)}}(i,o,c,Ee(i,a,d.hostVars,Jt),d)}function Po(i,o,a,c,d,f){const y=Oi(i,o);!function vv(i,o,a,c,d,f,y){if(null==f)i.removeAttribute(o,d,a);else{const v=null==y?ze(f):y(f,c||"",d);i.setAttribute(o,d,v,a)}}(o[Nt],y,f,i.value,a,c,d)}function qT(i,o,a,c,d,f){const y=f[o];if(null!==y)for(let v=0;v<y.length;)_v(c,a,y[v++],y[v++],y[v++])}function _v(i,o,a,c,d){const f=ke(null);try{null!==i.setInput?i.setInput(o,d,a,c):o[c]=d}finally{ke(f)}}function Ev(i,o,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const y=i[f];for(let v=0;v<y.length;v+=2)if(y[v]===o){c.push(f,y[v+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function wv(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null,null]}function Yp(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const y=i.data[f];Io(a[c]),y.contentQueries(2,o[f],f)}}}function ph(i,o){return i[oi]?i[mo][Qr]=o:i[oi]=o,i[mo]=o,o}function Bu(i,o,a){Io(0);const c=ke(null);try{o(i,a)}finally{ke(c)}}function Qp(i){return i[Rs]||(i[Rs]=[])}function Jp(i){return i.cleanup||(i.cleanup=[])}function Xp(i,o){const a=i[Ns],c=a?a.get(Ba,null):null;c&&c.handleError(o)}function gh(i,o,a,c,d){for(let f=0;f<a.length;){const y=a[f++],v=a[f++];_v(i.data[y],o[y],c,v,d)}}function Iv(i,o){const a=ki(o,i),c=a[ut];!function KT(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const d=a[sr];null!==d&&null===a[Pi]&&(a[Pi]=ov(d,a[Ns])),Dv(c,a,a[Gn])}function Dv(i,o,a){_u(o);try{const c=i.viewQuery;null!==c&&Bu(1,c,a);const d=i.template;null!==d&&ja(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Yp(i,o),i.staticViewQueries&&Bu(2,i.viewQuery,a);const f=i.components;null!==f&&function ZT(i,o){for(let a=0;a<o.length;a++)Iv(i,o[a])}(o,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Vt]&=-5,gs()}}let tg=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(a,c,d){const f=typeof Zone>"u"?null:Zone.current,y=new Vf(a,C=>{this.all.has(C)&&this.queue.set(C,f)},d);let v;this.all.add(y),y.notify();const I=()=>{y.cleanup(),v?.(),this.all.delete(y),this.queue.delete(y)};return v=c?.onDestroy(I),{destroy:I}}flush(){if(0!==this.queue.size)for(const[a,c]of this.queue)this.queue.delete(a),c?c.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:()=>new i}),i})();function el(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const v=o[y];"number"==typeof v?f=v:1==f?d=_e(d,v):2==f&&(c=_e(c,v+": "+o[++y]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function tl(i,o,a,c,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&c.push(or(f)),ci(f)){for(let v=dr;v<f.length;v++){const I=f[v],C=I[ut].firstChild;null!==C&&tl(I[ut],I,C,c)}f[Ki]!==f[sr]&&c.push(f[Ki])}const y=a.type;if(8&y)tl(i,o,a.child,c);else if(32&y){const v=Hd(a,o);let I;for(;I=v();)c.push(I)}else if(16&y){const v=HE(o,a);if(Array.isArray(v))c.push(...v);else{const I=ka(o[Tn]);tl(I[ut],I,v,c,!0)}}a=d?a.projectionNext:a.next}return c}function ng(i,o,a,c=!0){const d=o[qi].rendererFactory;d.begin&&d.begin();try{mh(i,o,i.template,a)}catch(y){throw c&&Xp(o,y),y}finally{d.end&&d.end(),o[qi].effectManager?.flush()}}function mh(i,o,a,c){const d=o[Vt];if(256!=(256&d)){o[qi].effectManager?.flush(),_u(o);try{Qm(o),function ty(i){return $t.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&ja(i,o,a,2,c);const y=3==(3&d);if(y){const C=i.preOrderCheckHooks;null!==C&&Td(o,C,null)}else{const C=i.preOrderHooks;null!==C&&Tc(o,C,0,null),Sc(o,0)}if(function XT(i){for(let o=$c(i);null!==o;o=Ry(o)){if(!o[Ps])continue;const a=o[_i];for(let c=0;c<a.length;c++){vc(a[c])}}}(o),function JT(i){for(let o=$c(i);null!==o;o=Ry(o))for(let a=dr;a<o.length;a++){const c=o[a],d=c[ut];yc(c)&&mh(d,c,d.template,c[Gn])}}(o),null!==i.contentQueries&&Yp(i,o),y){const C=i.contentCheckHooks;null!==C&&Td(o,C)}else{const C=i.contentHooks;null!==C&&Tc(o,C,1),Sc(o,1)}!function FT(i,o){const a=i.hostBindingOpCodes;if(null===a)return;const c=MT(o,yo);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)Ys(~f);else{const y=f,v=a[++d],I=a[++d];ny(v,y),c.runInContext(I,2,o[y])}}}finally{null===o[yo]&&AT(o,yo),Ys(-1)}}(i,o);const v=i.components;null!==v&&function tS(i,o){for(let a=0;a<o.length;a++)eS(i,o[a])}(o,v);const I=i.viewQuery;if(null!==I&&Bu(2,I,c),y){const C=i.viewCheckHooks;null!==C&&Td(o,C)}else{const C=i.viewHooks;null!==C&&Tc(o,C,2),Sc(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Vt]&=-73,$f(o)}finally{gs()}}}function eS(i,o){const a=ki(o,i);if(yc(a)){const c=a[ut];80&a[Vt]?mh(c,a,c.template,a[Gn]):a[as]>0&&Tv(a)}}function Tv(i){for(let c=$c(i);null!==c;c=Ry(c))for(let d=dr;d<c.length;d++){const f=c[d];if(yc(f))if(1024&f[Vt]){const y=f[ut];mh(y,f,y.template,f[Gn])}else f[as]>0&&Tv(f)}const a=i[ut].components;if(null!==a)for(let c=0;c<a.length;c++){const d=ki(a[c],i);yc(d)&&d[as]>0&&Tv(d)}}class yh{get rootNodes(){const o=this._lView,a=o[ut];return tl(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gn]}set context(o){this._lView[Gn]=o}get destroyed(){return 256==(256&this._lView[Vt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[jn];if(ci(o)){const a=o[ya],c=a?a.indexOf(this):-1;c>-1&&(ky(o,c),Nc(a,c))}this._attachedToViewContainer=!1}kE(this._lView[ut],this._lView)}onDestroy(o){!function Jm(i,o){if(256==(256&i[Vt]))throw new he(911,!1);null===i[ls]&&(i[ls]=[]),i[ls].push(o)}(this._lView,o)}markForCheck(){jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Vt]&=-129}reattach(){this._lView[Vt]|=128}detectChanges(){ng(this._lView[ut],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fb(i,o){ia(i,o,o[Nt],2,null,null)}(this._lView[ut],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=o}}class nS extends yh{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ng(o[ut],o,o[Gn],!1)}checkNoChanges(){}get context(){return null}}class jw extends oh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=oe(o);return new rl(a,this.ngModule)}}function $w(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Hw{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Fn(c);const d=this.injector.get(o,Dw,c);return d!==Dw||a===Dw?d:this.parentInjector.get(o,a,c)}}class rl extends mw{get inputs(){return $w(this.componentDef.inputs)}get outputs(){return $w(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function zn(i){return i.map(Wi).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let f=(d=d||this.ngModule)instanceof xo?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new Hw(o,f):o,v=y.get(Bp,null);if(null===v)throw new he(407,!1);const S={rendererFactory:v,sanitizer:y.get(ww,null),effectManager:y.get(tg,null)},L=v.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",te=c?function Nr(i,o,a,c){const f=c.get(ET,!1)||a===M.ShadowDom,y=i.selectRootElement(o,f);return function VT(i){lh(i)}(y),y}(L,c,this.componentDef.encapsulation,y):lp(L,q,function rg(i){const o=i.toLowerCase();return"svg"===o?fd:"math"===o?"math":null}(q)),be=this.componentDef.onPush?576:528,qe=Wp(0,null,null,1,0,null,null,null,null,null,null),ot=fv(null,qe,null,be,null,null,S,L,y,null,null);let yt,Fe;_u(ot);try{const Ot=this.componentDef;let on,fn=null;Ot.findHostDirectiveDefs?(on=[],fn=new Map,Ot.findHostDirectiveDefs(Ot,on,fn),on.push(Ot)):on=[Ot];const Ts=function rS(i,o){const a=i[ut],c=Gt;return i[c]=o,ch(a,c,2,"#host",null)}(ot,te),ue=function iS(i,o,a,c,d,f,y){const v=d[ut];!function zw(i,o,a,c){for(const d of i)o.mergedAttrs=Pe(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(el(o,o.mergedAttrs,!0),null!==a&&zE(c,a,o))}(c,i,o,y);let I=null;null!==o&&(I=ov(o,d[Ns]));const C=f.rendererFactory.createRenderer(o,a),S=fv(d,Gp(a),null,a.onPush?64:16,d[i.index],i,f,C,null,null,I);return v.firstCreatePass&&yv(v,i,c.length-1),ph(d,S),d[i.index]=S}(Ts,te,Ot,on,ot,S,L);Fe=jf(qe,Gt),te&&function Ww(i,o,a,c){if(c)Lt(i,a,["ng-version",Iw.full]);else{const{attrs:d,classes:f}=function ma(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&o.push(f,i[++c]):8===d&&a.push(f);else{if(!tr(d))break;d=f}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Lt(i,a,d),f&&f.length>0&&mp(i,a,f.join(" "))}}(L,Ot,te,c),void 0!==a&&function qw(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Fe,this.ngContentSelectors,a),yt=function Gw(i,o,a,c,d,f){const y=ei(),v=d[ut],I=Oi(y,d);hh(v,d,y,a,null,c);for(let S=0;S<a.length;S++)Ci(Js(d,v,y.directiveStart+S,y),d);Fw(v,d,y),I&&Ci(I,d);const C=Js(d,v,y.directiveStart+y.componentOffset,y);if(i[Gn]=d[Gn]=C,null!==f)for(const S of f)S(C,o);return Xc(v,y,i),C}(ue,Ot,on,fn,ot,[Kw]),Dv(qe,ot,null)}finally{gs()}return new Sv(this.componentType,yt,ah(Fe,ot),ot,Fe)}}class Sv extends gT{constructor(o,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new nS(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;gh(f[ut],f,d,o,a),this.previousInputValues.set(o,a),jp(ki(this._tNode.index,f))}}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Kw(){const i=ei();bd(je()[ut],i)}function Mv(i){let o=function sS(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(Jr(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new he(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const y=i;y.inputs=Zw(i.inputs),y.declaredInputs=Zw(i.declaredInputs),y.outputs=Zw(i.outputs);const v=d.hostBindings;v&&iR(i,v);const I=d.viewQuery,C=d.contentQueries;if(I&&Av(i,I),C&&rR(i,C),ve(i.inputs,d.inputs),ve(i.declaredInputs,d.declaredInputs),ve(i.outputs,d.outputs),Jr(d)&&d.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const v=f[y];v&&v.ngInherit&&v(i),v===Mv&&(a=!1)}}o=Object.getPrototypeOf(o)}!function nR(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Pe(d.hostAttrs,a=Pe(a,d.hostAttrs))}}(c)}function Zw(i){return i===Z?{}:i===ie?[]:i}function Av(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function rR(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{o(c,d,f),a(c,d,f)}:o}function iR(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function xv(i){return!!Xw(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Xw(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Bi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function _h(i,o,a,c){const d=je();return Bi(d,Zs(),o)&&(sn(),Po(hr(),d,i,o,a,c)),_h}function yS(i,o,a,c,d,f,y,v){const I=je(),C=sn(),S=i+Gt,L=C.firstCreatePass?function bR(i,o,a,c,d,f,y,v,I){const C=o.consts,S=ch(o,i,4,y||null,ps(C,v));dh(o,a,S,ps(C,I)),bd(o,S);const L=S.tView=Wp(2,S,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,C,null);return null!==o.queries&&(o.queries.template(o,S),L.queries=o.queries.embeddedTView(S)),S}(S,C,I,o,a,c,d,f,y):C.data[S];Fi(L,!1);const q=vS(C,I,L,i);Cd()&&Yd(C,I,q,L),Ci(q,I),ph(I,I[S]=wv(q,I,q,L)),vo(L)&&En(C,I,L),null!=y&&No(I,L,v)}let vS=function _S(i,o,a,c){return Yo(!0),o[Nt].createComment("")};function ES(i){return function gu(i,o){return i[o]}(function qf(){return $t.lFrame.contextLView}(),Gt+i)}function dI(i,o,a){const c=je();return Bi(c,Zs(),o)&&function Ds(i,o,a,c,d,f,y,v){const I=Oi(o,a);let S,C=o.inputs;!v&&null!=C&&(S=C[c])?(gh(i,a,S,c,d),Yi(o)&&function hi(i,o){const a=ki(o,i);16&a[Vt]||(a[Vt]|=64)}(a,o.index)):3&o.type&&(c=function HT(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=y?y(d,o.value||"",c):d,f.setProperty(I,c,d))}(sn(),hr(),c,i,o,c[Nt],a,!1),dI}function hI(i,o,a,c,d){const y=d?"class":"style";gh(i,a,o.inputs[y],y,c)}function kv(i,o,a,c){const d=je(),f=sn(),y=Gt+i,v=d[Nt],I=f.firstCreatePass?function AR(i,o,a,c,d,f){const y=o.consts,I=ch(o,i,2,c,ps(y,d));return dh(o,a,I,ps(y,f)),null!==I.attrs&&el(I,I.attrs,!1),null!==I.mergedAttrs&&el(I,I.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,I),I}(y,f,d,o,a,c):f.data[y],C=wS(f,d,I,v,o,i);d[y]=C;const S=vo(I);return Fi(I,!0),zE(v,C,I),32!=(32&I.flags)&&Cd()&&Yd(f,d,C,I),0===function Eo(){return $t.lFrame.elementDepthCount}()&&Ci(C,d),function mu(){$t.lFrame.elementDepthCount++}(),S&&(En(f,d,I),Xc(f,I,d)),null!==c&&No(d,I),kv}function Fv(){let i=ei();Ed()?function vu(){$t.lFrame.isParent=!1}():(i=i.parent,Fi(i,!1));const o=i;(function mE(i){return $t.skipHydrationRootTNode===i})(o)&&function vd(){$t.skipHydrationRootTNode=null}(),function gd(){$t.lFrame.elementDepthCount--}();const a=sn();return a.firstCreatePass&&(bd(a,i),va(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Ct(i){return 0!=(8&i.flags)}(o)&&hI(a,o,je(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Li(i){return 0!=(16&i.flags)}(o)&&hI(a,o,je(),o.stylesWithoutHost,!1),Fv}function fI(i,o,a,c){return kv(i,o,a,c),Fv(),fI}let wS=(i,o,a,c,d,f)=>(Yo(!0),lp(c,d,function bc(){return $t.lFrame.currentNamespace}()));function $u(){return je()}function Vv(i){return!!i&&"function"==typeof i.then}function yI(i){return!!i&&"function"==typeof i.subscribe}function Uv(i,o,a,c){const d=je(),f=sn(),y=ei();return function _I(i,o,a,c,d,f,y){const v=vo(c),C=i.firstCreatePass&&Jp(i),S=o[Gn],L=Qp(o);let q=!0;if(3&c.type||y){const qe=Oi(c,o),ot=y?y(qe):qe,yt=L.length,Fe=y?on=>y(or(on[c.index])):c.index;let Ot=null;if(!y&&v&&(Ot=function CS(i,o,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===c){const v=o[Rs],I=d[f+2];return v.length>I?v[I]:null}"string"==typeof y&&(f+=2)}return null}(i,o,d,c.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=f,Ot.__ngLastListenerFn__=f,q=!1;else{f=wI(c,o,S,f,!1);const on=a.listen(ot,d,f);L.push(f,on),C&&C.push(d,Fe,yt,yt+1)}}else f=wI(c,o,S,f,!1);const te=c.outputs;let be;if(q&&null!==te&&(be=te[d])){const qe=be.length;if(qe)for(let ot=0;ot<qe;ot+=2){const fn=o[be[ot]][be[ot+1]].subscribe(f),Ts=L.length;L.push(f,fn),C&&C.push(d,c.index,Ts,-(Ts+1))}}}(f,d,d[Nt],y,i,o,c),Uv}function EI(i,o,a,c){try{return ks(6,o,a),!1!==a(c)}catch(d){return Xp(i,d),!1}finally{ks(7,o,a)}}function wI(i,o,a,c,d){return function f(y){if(y===Function)return c;jp(i.componentOffset>-1?ki(i.index,o):o);let I=EI(o,a,c,y),C=f.__ngNextListenerFn__;for(;C;)I=EI(o,a,C,y)&&I,C=C.__ngNextListenerFn__;return d&&!1===I&&y.preventDefault(),I}}function Bv(i=1){return function iy(i){return($t.lFrame.contextLView=function sy(i,o){for(;i>0;)o=o[zs],i--;return o}(i,$t.lFrame.contextLView))[Gn]}(i)}function bh(i,o){return i<<17|o<<2}function wr(i){return i>>17&32767}function Hv(i){return 2|i}function Ga(i){return(131068&i)>>2}function cg(i,o){return-131069&i|o<<2}function lg(i){return 1|i}function Th(i,o,a,c,d){const f=i[a+1],y=null===o;let v=c?wr(f):Ga(f),I=!1;for(;0!==v&&(!1===I||y);){const S=i[v+1];AI(i[v],o)&&(I=!0,i[v+1]=c?lg(S):Hv(S)),v=c?wr(S):Ga(S)}I&&(i[a+1]=c?Hv(f):lg(f))}function AI(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Ra(i,o)>=0}function hg(i,o){return function Fo(i,o,a,c){const d=je(),f=sn(),y=function wo(i){const o=$t.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);f.firstUpdatePass&&function fg(i,o,a,c){const d=i.data;if(null===d[a+1]){const f=d[ti()],y=function Yv(i,o){return o>=i.expandoStartIndex}(i,a);(function LS(i,o){return 0!=(i.flags&(o?8:16))})(f,c)&&null===o&&!y&&(o=!1),o=function pg(i,o,a,c){const d=function ba(i){const o=$t.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let f=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=gg(a=kI(null,i,o,a,c),o.attrs,c),f=null);else{const y=o.directiveStylingLast;if(-1===y||i[y]!==d)if(a=kI(d,i,o,a,c),null===f){let I=function PS(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==Ga(c))return i[wr(c)]}(i,o,c);void 0!==I&&Array.isArray(I)&&(I=kI(null,i,o,I[1],c),I=gg(I,o.attrs,c),function Qv(i,o,a,c){i[wr(a?o.classBindings:o.styleBindings)]=c}(i,o,c,I))}else f=function OS(i,o,a){let c;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)c=gg(c,i[f].hostAttrs,a);return gg(c,o.attrs,a)}(i,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,c),function SI(i,o,a,c,d,f){let y=f?o.classBindings:o.styleBindings,v=wr(y),I=Ga(y);i[c]=a;let S,C=!1;if(Array.isArray(a)?(S=a[1],(null===S||Ra(a,S)>0)&&(C=!0)):S=a,d)if(0!==I){const q=wr(i[v+1]);i[c+1]=bh(q,v),0!==q&&(i[q+1]=cg(i[q+1],c)),i[v+1]=function MS(i,o){return 131071&i|o<<17}(i[v+1],c)}else i[c+1]=bh(v,0),0!==v&&(i[v+1]=cg(i[v+1],c)),v=c;else i[c+1]=bh(I,0),0===v?v=c:i[I+1]=cg(i[I+1],c),I=c;C&&(i[c+1]=Hv(i[c+1])),Th(i,S,c,!0),Th(i,S,c,!1),function MI(i,o,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof o&&Ra(f,o)>=0&&(a[c+1]=lg(a[c+1]))}(o,S,i,c,f),y=bh(v,I),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,c)}}(f,i,y,c),o!==Jt&&Bi(d,y,o)&&function FS(i,o,a,c,d,f,y,v){if(!(3&o.type))return;const I=i.data,C=I[v+1],S=function TI(i){return 1==(1&i)}(C)?FI(I,o,a,d,Ga(C),y):void 0;Mh(S)||(Mh(f)||function za(i){return 2==(2&i)}(C)&&(f=FI(I,null,a,d,v,y)),function gp(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:_s.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=_s.Important),i.setStyle(a,c,d,f))}}(c,y,fu(ti(),a),d,f))}(f,f.data[ti()],d,d[Nt],i,d[y+1]=function PR(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Ce(La(i)))),i}(o,a),c,y)}(i,o,null,!0),hg}function kI(i,o,a,c,d){let f=null;const y=a.directiveEnd;let v=a.directiveStylingLast;for(-1===v?v=a.directiveStart:v++;v<y&&(f=o[v],c=gg(c,f.hostAttrs,d),f!==i);)v++;return null!==i&&(a.directiveStylingLast=v),c}function gg(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),yn(i,y,!!a||o[++f]))}return void 0===i?null:i}function FI(i,o,a,c,d,f){const y=null===o;let v;for(;d>0;){const I=i[d],C=Array.isArray(I),S=C?I[1]:I,L=null===S;let q=a[d+1];q===Jt&&(q=L?ie:void 0);let te=L?bo(q,c):S===c?q:void 0;if(C&&!Mh(te)&&(te=bo(I,c)),Mh(te)&&(v=te,y))return v;const be=i[d+1];d=y?wr(be):Ga(be)}if(null!==o){let I=f?o.residualClasses:o.residualStyles;null!=I&&(v=bo(I,c))}return v}function Mh(i){return void 0!==i}function VS(i,o=""){const a=je(),c=sn(),d=i+Gt,f=c.firstCreatePass?ch(c,d,1,o,null):c.data[d],y=cl(c,a,f,o,i);a[d]=y,Cd()&&Yd(c,a,y,f),Fi(f,!1)}let cl=(i,o,a,c,d)=>(Yo(!0),function Gd(i,o){return i.createText(o)}(o[Nt],c));function Hu(i){return dl("",i,""),Hu}function dl(i,o,a){const c=je(),d=function ol(i,o,a,c){return Bi(i,Zs(),a)?o+ze(a)+c:Jt}(c,i,o,a);return d!==Jt&&function io(i,o,a){const c=fu(o,i);!function Ny(i,o,a){i.setValue(o,a)}(i[Nt],c,a)}(c,ti(),d),dl}const pl=void 0;var Nh=["en",[["a","p"],["AM","PM"],pl],[["AM","PM"],pl,pl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pl,"{1} 'at' {0}",pl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WS(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Ka={};function Tg(i){const o=function LR(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=WI(o);if(a)return a;const c=o.split("-")[0];if(a=WI(c),a)return a;if("en"===c)return Nh;throw new he(701,!1)}function KS(i){return Tg(i)[Ut.PluralCase]}function WI(i){return i in Ka||(Ka[i]=rt.ng&&rt.ng.common&&rt.ng.common.locales&&rt.ng.common.locales[i]),Ka[i]}var Ut=(()=>((Ut=Ut||{})[Ut.LocaleId=0]="LocaleId",Ut[Ut.DayPeriodsFormat=1]="DayPeriodsFormat",Ut[Ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ut[Ut.DaysFormat=3]="DaysFormat",Ut[Ut.DaysStandalone=4]="DaysStandalone",Ut[Ut.MonthsFormat=5]="MonthsFormat",Ut[Ut.MonthsStandalone=6]="MonthsStandalone",Ut[Ut.Eras=7]="Eras",Ut[Ut.FirstDayOfWeek=8]="FirstDayOfWeek",Ut[Ut.WeekendRange=9]="WeekendRange",Ut[Ut.DateFormat=10]="DateFormat",Ut[Ut.TimeFormat=11]="TimeFormat",Ut[Ut.DateTimeFormat=12]="DateTimeFormat",Ut[Ut.NumberSymbols=13]="NumberSymbols",Ut[Ut.NumberFormats=14]="NumberFormats",Ut[Ut.CurrencyCode=15]="CurrencyCode",Ut[Ut.CurrencySymbol=16]="CurrencySymbol",Ut[Ut.CurrencyName=17]="CurrencyName",Ut[Ut.Currencies=18]="Currencies",Ut[Ut.Directionality=19]="Directionality",Ut[Ut.PluralCase=20]="PluralCase",Ut[Ut.ExtraData=21]="ExtraData",Ut))();const gl="en-US";let KI=gl;function d_(i,o,a,c,d){if(i=K(i),Array.isArray(i))for(let f=0;f<i.length;f++)d_(i[f],o,a,c,d);else{const f=sn(),y=je();let v=Lu(i)?i:K(i.provide),I=uw(i);const C=ei(),S=1048575&C.providerIndexes,L=C.directiveStart,q=C.providerIndexes>>20;if(Lu(i)||!i.multi){const te=new Mc(I,d,uh),be=vl(v,o,d?S:S+q,L);-1===be?(Sa(xc(C,y),f,v),h_(f,i,o.length),o.push(v),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(te),y.push(te)):(a[be]=te,y[be]=te)}else{const te=vl(v,o,S+q,L),be=vl(v,o,S,S+q),ot=be>=0&&a[be];if(d&&!ot||!d&&!(te>=0&&a[te])){Sa(xc(C,y),f,v);const yt=function kg(i,o,a,c,d){const f=new Mc(i,a,uh);return f.multi=[],f.index=o,f.componentProviders=0,yD(f,d,c&&!a),f}(d?TM:f_,a.length,d,c,I);!d&&ot&&(a[be].providerFactory=yt),h_(f,i,o.length,0),o.push(v),C.directiveStart++,C.directiveEnd++,d&&(C.providerIndexes+=1048576),a.push(yt),y.push(yt)}else h_(f,i,te>-1?te:be,yD(a[d?be:te],I,!d&&c));!d&&c&&ot&&a[be].componentProviders++}}}function h_(i,o,a,c){const d=Lu(o),f=function oT(i){return!!i.useClass}(o);if(d||f){const I=(f?K(o.useClass):o).prototype.ngOnDestroy;if(I){const C=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const S=C.indexOf(a);-1===S?C.push(a,[c,I]):C[S+1].push(c,I)}else C.push(a,I)}}}function yD(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function vl(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function f_(i,o,a,c){return p_(this.multi,[])}function TM(i,o,a,c){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,v=Js(a,a[ut],this.providerFactory.index,c);f=v.slice(0,y),p_(d,f);for(let I=y;I<v.length;I++)f.push(v[I])}else f=[],p_(d,f);return f}function p_(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function g_(i,o=[]){return a=>{a.providersResolver=(c,d)=>function bM(i,o,a){const c=sn();if(c.firstCreatePass){const d=Jr(i);d_(a,c.data,c.blueprint,d,!0),d_(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Ya{}class Fg{}function vD(i,o){return new Lg(i,o??null,[])}class Lg extends Ya{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jw(this);const d=At(o);this._bootstrapComponents=ca(d.bootstrap),this._r3Injector=Nw(o,a,[{provide:Ya,useValue:this},{provide:oh,useValue:this.componentFactoryResolver},...c],Ce(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class _D extends Fg{constructor(o){super(),this.moduleType=o}create(o){return new Lg(this.moduleType,o,[])}}class ED extends Ya{constructor(o){super(),this.componentFactoryResolver=new jw(this),this.instance=null;const a=new xp([...o.providers,{provide:Ya,useValue:this},{provide:oh,useValue:this.componentFactoryResolver}],o.parent||Ap(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function m_(i,o,a=null){return new ED({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let wD=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=iT(0,a.type),d=c.length>0?m_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Tt({token:i,providedIn:"environment",factory:()=>new i(Yt(xo))}),i})();function ID(i){i.getStandaloneInjector=o=>o.get(wD).getOrCreateStandaloneInjector(i)}function Vo(i){return o=>{setTimeout(i,void 0,o)}}const Uo=class ni extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,f=a||(()=>null),y=c;if(o&&"object"==typeof o){const I=o;d=I.next?.bind(I),f=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(f=Vo(f),d&&(d=Vo(d)),y&&(y=Vo(y)));const v=super.subscribe({next:d,error:f,complete:y});return o instanceof V.w0&&o.add(v),v}};function OD(){return this._results[Symbol.iterator]()}class $h{get changes(){return this._changes||(this._changes=new Uo)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=$h.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=OD)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function wi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Pd(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=o[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let _l=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hh,i})();const Ti=_l,BM=class extends Ti{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a,null)}createEmbeddedViewImpl(o,a,c){const d=this._declarationTContainer.tView,f=fv(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,a||null,c||null);f[Gs]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[ai];return null!==v&&(f[ai]=v.createEmbeddedView(d)),Dv(d,f,o),new yh(f)}};function Hh(){return Gu(ei(),je())}function Gu(i,o){return 4&i.type?new BM(o,i,ah(i,o)):null}let wl=(()=>{class i{}return i.__NG_ELEMENT_ID__=D_,i})();function D_(){return LD(ei(),je())}const C_=wl,Hg=class extends C_{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return ah(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ta(this._hostTNode,this._hostLView);if(Qs(o)){const a=mn(o,this._hostLView),c=Lr(o);return new Xs(a[ut].data[c+8],a)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=zg(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-dr}createEmbeddedView(o,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const v=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(v,d,false),v}createComponent(o,a,c,d,f){const y=o&&!function xa(i){return"function"==typeof i}(o);let v;if(y)v=a;else{const qe=a||{};v=qe.index,c=qe.injector,d=qe.projectableNodes,f=qe.environmentInjector||qe.ngModuleRef}const I=y?o:new rl(oe(o)),C=c||this.parentInjector;if(!f&&null==I.ngModule){const ot=(y?C:this.parentInjector).get(xo,null);ot&&(f=ot)}oe(I.componentType??{});const te=I.create(C,d,null,f);return this.insertImpl(te.hostView,v,false),te}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,c){const d=o._lView,f=d[ut];if(function pd(i){return ci(i[jn])}(d)){const I=this.indexOf(o);if(-1!==I)this.detach(I);else{const C=d[jn],S=new Hg(C,C[Ar],C[jn]);S.detach(S.indexOf(o))}}const y=this._adjustIndex(a),v=this._lContainer;if(function Vb(i,o,a,c){const d=dr+c,f=a.length;c>0&&(a[d-1][Qr]=o),c<f-dr?(o[Qr]=a[d],Rc(a,dr+c,o)):(a.push(o),o[Qr]=null),o[jn]=a;const y=o[Gs];null!==y&&a!==y&&function Ub(i,o){const a=i[_i];o[Tn]!==o[jn][jn][Tn]&&(i[Ps]=!0),null===a?i[_i]=[o]:a.push(o)}(y,o);const v=o[ai];null!==v&&v.insertView(i),o[Vt]|=128}(f,d,v,y),!c){const I=Qd(y,v),C=d[Nt],S=Kd(C,v[Ki]);null!==S&&function Oy(i,o,a,c,d,f){c[sr]=d,c[Ar]=o,ia(i,c,a,1,d,f)}(f,v[Ar],C,d,S,I)}return o.attachToViewContainerRef(),Rc(Gg(v),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=zg(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=ky(this._lContainer,a);c&&(Nc(Gg(this._lContainer),a),kE(c[ut],c))}detach(o){const a=this._adjustIndex(o,-1),c=ky(this._lContainer,a);return c&&null!=Nc(Gg(this._lContainer),a)?new yh(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function zg(i){return i[ya]}function Gg(i){return i[ya]||(i[ya]=[])}function LD(i,o){let a;const c=o[i.index];return ci(c)?a=c:(a=wv(c,o,null,i),o[i.index]=a,ph(o,a)),VD(a,o,i,c),new Hg(a,i,o)}let VD=function Il(i,o,a,c){if(i[Ki])return;let d;d=8&a.type?or(c):function zh(i,o){const a=i[Nt],c=a.createComment(""),d=Oi(o,i);return Fa(a,Kd(a,d),c,function UE(i,o){return i.nextSibling(o)}(a,d),!1),c}(o,a),i[Ki]=d};class Dl{constructor(o){this.queryList=o,this.matches=null}clone(){return new Dl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gh{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new Gh(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Qg(o,a).matches&&this.queries[a].setDirty()}}class UD{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Wg{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Wg(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class qg{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new qg(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,a,BD(a,f)),this.matchTNodeWithReadOption(o,a,Qo(a,o,f,!1,!1))}else c===_l?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Qo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Up||d===wl||d===_l&&4&a.type)this.addMatch(a.index,-2);else{const f=Qo(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function BD(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function b_(i,o,a,c){return-1===a?function Kg(i,o){return 11&i.type?ah(i,o):4&i.type?Gu(i,o):null}(o,i):-2===a?function T_(i,o,a){return a===Up?ah(o,i):a===_l?Gu(o,i):a===wl?LD(o,i):void 0}(i,o,c):Js(i,i[ut],a,o)}function Zg(i,o,a,c){const d=o[ai].queries[c];if(null===d.matches){const f=i.data,y=a.matches,v=[];for(let I=0;I<y.length;I+=2){const C=y[I];v.push(C<0?null:b_(o,f[C],y[I+1],a.metadata.read))}d.matches=v}return d.matches}function Wh(i,o,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const y=Zg(i,o,d,a);for(let v=0;v<f.length;v+=2){const I=f[v];if(I>0)c.push(y[v/2]);else{const C=f[v+1],S=o[-I];for(let L=dr;L<S.length;L++){const q=S[L];q[Gs]===q[jn]&&Wh(q[ut],q,C,c)}if(null!==S[_i]){const L=S[_i];for(let q=0;q<L.length;q++){const te=L[q];Wh(te[ut],te,C,c)}}}}}return c}function S_(i){const o=je(),a=sn(),c=wc();Io(c+1);const d=Qg(a,c);if(i.dirty&&function mc(i){return 4==(4&i[Vt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Wh(a,o,c,[]):Zg(a,o,d,c);i.reset(f,yT),i.notifyOnChanges()}return!0}return!1}function M_(i,o,a){const c=sn();c.firstCreatePass&&(x_(c,new UD(i,o,a),-1),2==(2&o)&&(c.staticViewQueries=!0)),Yg(c,je(),o)}function jD(i,o,a,c){const d=sn();if(d.firstCreatePass){const f=ei();x_(d,new UD(o,a,c),f.index),function GM(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}Yg(d,je(),a)}function A_(){return function $D(i,o){return i[ai].queries[o].queryList}(je(),wc())}function Yg(i,o,a){const c=new $h(4==(4&a));(function BT(i,o,a,c){const d=Qp(o);d.push(a),i.firstCreatePass&&Jp(i).push(c,d.length-1)})(i,o,c,c.destroy),null===o[ai]&&(o[ai]=new Gh),o[ai].queries.push(new Dl(c))}function x_(i,o,a){null===i.queries&&(i.queries=new Wg),i.queries.track(new qg(o,a))}function Qg(i,o){return i.queries.getByIndex(o)}function N_(i){return!!At(i)}const Rl=new vn("Application Initializer");let im=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=Ft(Rl,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(Vv(f))a.push(f);else if(yI(f)){const y=new Promise((v,I)=>{f.subscribe({complete:v,error:I})});a.push(y)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Qh=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Bo=new vn("LocaleId",{providedIn:"root",factory:()=>Ft(Bo,vt.Optional|vt.SkipSelf)||function Jh(){return typeof $localize<"u"&&$localize.locale||gl}()}),Z_=new vn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class JD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let eA=(()=>{class i{compileModuleSync(a){return new _D(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=ca(At(a).declarations).reduce((y,v)=>{const I=oe(v);return I&&y.push(new rl(I)),y},[]);return new JD(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ef=(()=>Promise.resolve(0))();function Zu(i){typeof Zone>"u"?ef.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}function XD(...i){}class Mi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uo(!1),this.onMicrotaskEmpty=new Uo(!1),this.onStable=new Uo(!1),this.onError=new Uo(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function eC(){let i=rt.requestAnimationFrame,o=rt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Xa(i){const o=()=>{!function tf(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,om(i),i.isCheckStableRunning=!0,Q_(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),om(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,y,v)=>{try{return J_(i),a.invokeTask(d,f,y,v)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&o(),X_(i)}},onInvoke:(a,c,d,f,y,v,I)=>{try{return J_(i),a.invoke(d,f,y,v,I)}finally{i.shouldCoalesceRunChangeDetection&&o(),X_(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,om(i),Q_(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mi.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(Mi.isInAngularZone())throw new he(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,tA,XD,XD);try{return f.runTask(y,a,c)}finally{f.cancelTask(y)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const tA={};function Q_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function om(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function J_(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function X_(i){i._nesting--,Q_(i)}class Nl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uo,this.onMicrotaskEmpty=new Uo,this.onStable=new Uo,this.onError=new Uo}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const tC=new vn("",{providedIn:"root",factory:nC});function nC(){const i=Ft(Mi);let o=!0;const a=new k.y(d=>{o=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{d.next(o),d.complete()})}),c=new k.y(d=>{let f;i.runOutsideAngular(()=>{f=i.onStable.subscribe(()=>{Mi.assertNotInAngularZone(),Zu(()=>{!o&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=i.onUnstable.subscribe(()=>{Mi.assertInAngularZone(),o&&(o=!1,i.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ne.T)(a,c.pipe((0,ge.B)()))}const e0=new vn(""),rC=new vn("");let nf,iC=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nf||(function n0(i){nf=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mi.assertNotInAngularZone(),Zu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zu(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Yt(Mi),Yt(t0),Yt(rC))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac}),i})(),t0=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return nf?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),fa=null;const r0=new vn("AllowMultipleToken"),s0=new vn("PlatformDestroyListeners"),o0=new vn("appBootstrapListener");class am{constructor(o,a){this.name=o,this.token=a}}function oC(i,o,a=[]){const c=`Platform: ${o}`,d=new vn(c);return(f=[])=>{let y=c0();if(!y||y.injector.get(r0,!1)){const v=[...a,...f,{provide:d,useValue:!0}];i?i(v):function a0(i){if(fa&&!fa.get(r0,!1))throw new he(400,!1);(function rf(){!function wa(i){Os=i}(()=>{throw new he(600,!1)})})(),fa=i;const o=i.get(aC);(function Pl(i){i.get(lw,null)?.forEach(a=>a())})(i)}(function u0(i=[],o){return Uu.create({name:o,providers:[{provide:Qy,useValue:"platform"},{provide:s0,useValue:new Set([()=>fa=null])},...i]})}(v,c))}return function Pr(i){const o=c0();if(!o)throw new he(401,!1);return o}()}}function c0(){return fa?.get(aC)??null}let aC=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function uC(i="zone.js",o){return"noop"===i?new Nl:"zone.js"===i?new Mi(o):i}(c?.ngZone,function l0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return d.run(()=>{const f=function KR(i,o,a){return new Lg(i,o,a)}(a.moduleType,this.injector,function p0(i){return[{provide:Mi,useFactory:i},{provide:th,multi:!0,useFactory:()=>{const o=Ft(f0,{optional:!0});return()=>o.initialize()}},{provide:cC,useFactory:lC},{provide:tC,useFactory:nC}]}(()=>d)),y=f.injector.get(Ba,null);return d.runOutsideAngular(()=>{const v=d.onError.subscribe({next:I=>{y.handleError(I)}});f.onDestroy(()=>{Cs(this._modules,f),v.unsubscribe()})}),function d0(i,o,a){try{const c=a();return Vv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(y,d,()=>{const v=f.injector.get(im);return v.runInitializers(),v.donePromise.then(()=>(function n_(i){Be(i,"Expected localeId to be defined"),"string"==typeof i&&(KI=i.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Bo,gl)||gl),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,c=[]){const d=af({},c);return function nA(i,o,a){const c=new _D(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Yu);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new he(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(s0,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Yt(Uu))},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function af(i,o){return Array.isArray(o)?o.reduce(af,i):{...i,...o}}let Yu=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ft(cC),this.componentTypes=[],this.components=[],this.isStable=Ft(tC),this._injector=Ft(xo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof mw;if(!this._injector.get(im).done)throw!d&&zt(a),new he(405,!1);let y;y=d?a:this._injector.get(oh).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const v=function sf(i){return i.isBoundToModule}(y)?void 0:this._injector.get(Ya),C=y.create(Uu.NULL,[],c||y.selector,v),S=C.location.nativeElement,L=C.injector.get(e0,null);return L?.registerApplication(S),C.onDestroy(()=>{this.detachView(C.hostView),Cs(this.components,C),L?.unregisterApplication(S)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Cs(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(o0,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Cs(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new he(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Cs(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}const cC=new vn("",{providedIn:"root",factory:()=>Ft(Ba).handleError.bind(void 0)});function lC(){const i=Ft(Mi),o=Ft(Ba);return a=>i.runOutsideAngular(()=>o.handleError(a))}let f0=(()=>{class i{constructor(){this.zone=Ft(Mi),this.applicationRef=Ft(Yu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lm(){return!1}let uf=(()=>{class i{}return i.__NG_ELEMENT_ID__=dC,i})();function dC(i){return function hC(i,o,a){if(Yi(i)&&!a){const c=ki(i.index,o);return new yh(c,c)}return 47&i.type?new yh(o[Tn],o):null}(ei(),je(),16==(16&i))}class hm{constructor(){}supports(o){return xv(o)}create(o){return new EC(o)}}const $o=(i,o)=>o;class EC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||$o}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const y=!c||a&&a.currentIndex<I0(c,d,f)?a:c,v=I0(y,d,f),I=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const C=v-d,S=I-d;if(C!=S){for(let q=0;q<C;q++){const te=q<f.length?f[q]:f[q]=0,be=te+q;S<=be&&be<C&&(f[q]=te+1)}f[y.previousIndex]=S-C}}v!==I&&o(y,v,I)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!xv(o))throw new he(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let v=0;v<this.length;v++)f=o[v],y=this._trackByFn(v,f),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,f,y,v)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,v),c=!0),a=a._next}else d=0,function lS(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,v=>{y=this._trackByFn(d,v),null!==a&&Object.is(a.trackById,y)?(c&&(a=this._verifyReinsertion(a,v,y,d)),Object.is(a.item,v)||this._addIdentityChange(a,v)):(a=this._mismatch(a,v,y,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new w0(a,c),f,d),o}_verifyReinsertion(o,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new fm),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new fm),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class w0{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ol{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class fm{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Ol,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function I0(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class Ho{constructor(){}supports(o){return o instanceof Map||Xw(o)}create(){return new js}}class js{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Xw(o)))throw new he(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new gi(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class gi{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lf(){return new kl([new hm])}let kl=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||lf()),deps:[[i,new Na,new Pc]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new he(901,!1)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:lf}),i})();function df(){return new gm([new Ho])}let gm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||df()),deps:[[i,new Na,new Pc]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new he(901,!1)}}return i.\u0275prov=Tt({token:i,providedIn:"root",factory:df}),i})();const aA=oC(null,"core",[]);let uA=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Yt(Yu))},i.\u0275mod=ss({type:i}),i.\u0275inj=tn({}),i})(),bs=(()=>{class i{get whenAllTasksComplete(){return 0===this.collection.size&&this.complete(),this.promise}constructor(){this.taskId=0,this.collection=new Set,this.ngZone=Ft(Mi),this.completed=!1,this.ngZone.runOutsideAngular(()=>{this.promise=new Promise(a=>{this.resolve=a})})}add(){if(this.completed)return-1;const a=this.taskId++;return this.collection.add(a),a}remove(a){this.completed||(this.collection.delete(a),0===this.collection.size&&this.complete())}ngOnDestroy(){this.complete(),this.collection.clear()}complete(){this.completed=!0,this.resolve()}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Tt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function CC(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function bC(i,o){const a=oe(i),c=o.elementInjector||Ap();return new rl(a).create(c,o.projectableNodes,o.hostElement,o.environmentInjector)}function Zt(i){const o=oe(i);if(!o)return null;const a=new rl(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone}}}},3942:(It,Oe,F)=>{F.d(Oe,{Z:()=>Qe});var h=F(2090),V=F(4859),k=F(6881),ne=F(1877);class ge{constructor(he,Le){this._delegate=he,this.firebase=Le,(0,k._addComponent)(he,new V.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(he,Le=k._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(he);return!Ze.isInitialized()&&"EXPLICIT"===(null===(ze=Ze.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Le})}_removeServiceInstance(he,Le=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Le)}_addComponent(he){(0,k._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,k._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function _e(){const Et=function Ce(Et){const he={},Le={__esModule:!0,initializeApp:function Te(Me,J={}){const st=k.initializeApp(Me,J);if((0,h.r3)(he,st.name))return he[st.name];const et=new Et(st,Le);return he[st.name]=et,et},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Se(Me){const J=Me.name,st=J.replace("-compat","");if(k._registerComponent(Me)&&"PUBLIC"===Me.type){const et=(un=Ze())=>{if("function"!=typeof un[st])throw ve.create("invalid-app-argument",{appName:J});return un[st]()};void 0!==Me.serviceProps&&(0,h.ZB)(et,Me.serviceProps),Le[st]=et,Et.prototype[st]=function(...un){return this._getService.bind(this,J).apply(this,Me.multipleInstances?un:[])}}return"PUBLIC"===Me.type?Le[st]:null},removeApp:function ze(Me){delete he[Me]},useAsService:function Ue(Me,J){return"serverAuth"===J?null:J},modularAPIs:k}};function Ze(Me){if(!(0,h.r3)(he,Me=Me||k._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:Me});return he[Me]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function De(){return Object.keys(he).map(Me=>he[Me])}}),Ze.App=Et,Le}(ge);return Et.INTERNAL=Object.assign(Object.assign({},Et.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function he(Le){(0,h.ZB)(Et,Le)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Et}(),z=new ne.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Et=self.firebase.SDK_VERSION;Et&&Et.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Qe=W;!function we(Et){(0,k.registerVersion)("@firebase/app-compat","0.2.12",Et)}()},6881:(It,Oe,F)=>{F.r(Oe),F.d(Oe,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Hn,_DEFAULT_ENTRY_NAME:()=>Wt,_addComponent:()=>An,_addOrOverwriteComponent:()=>ur,_apps:()=>rt,_clearComponents:()=>nn,_components:()=>Kn,_getProvider:()=>Xt,_registerComponent:()=>Cn,_removeServiceInstance:()=>cr,deleteApp:()=>Yt,getApp:()=>Pn,getApps:()=>Un,initializeApp:()=>Br,onLog:()=>Fn,registerVersion:()=>Ft,setLogLevel:()=>Fr});var h=F(5861),V=F(4859),k=F(1877),ne=F(2090);const ge=(se,ee)=>ee.some(Pe=>se instanceof Pe);let ce,ve;const W=new WeakMap,z=new WeakMap,K=new WeakMap,xe=new WeakMap,we=new WeakMap;let he={get(se,ee,Pe){if(se instanceof IDBTransaction){if("done"===ee)return z.get(se);if("objectStoreNames"===ee)return se.objectStoreNames||K.get(se);if("store"===ee)return Pe.objectStoreNames[1]?void 0:Pe.objectStore(Pe.objectStoreNames[0])}return Te(se[ee])},set:(se,ee,Pe)=>(se[ee]=Pe,!0),has:(se,ee)=>se instanceof IDBTransaction&&("done"===ee||"store"===ee)||ee in se};function Ze(se){return"function"==typeof se?function ze(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...ee){return se.apply(De(this),ee),Te(W.get(this))}:function(...ee){return Te(se.apply(De(this),ee))}:function(ee,...Pe){const mt=se.call(De(this),ee,...Pe);return K.set(mt,ee.sort?ee.sort():[ee]),Te(mt)}}(se):(se instanceof IDBTransaction&&function Et(se){if(z.has(se))return;const ee=new Promise((Pe,mt)=>{const Dt=()=>{se.removeEventListener("complete",Ht),se.removeEventListener("error",rn),se.removeEventListener("abort",rn)},Ht=()=>{Pe(),Dt()},rn=()=>{mt(se.error||new DOMException("AbortError","AbortError")),Dt()};se.addEventListener("complete",Ht),se.addEventListener("error",rn),se.addEventListener("abort",rn)});z.set(se,ee)}(se),ge(se,function Ce(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,he):se)}function Te(se){if(se instanceof IDBRequest)return function Qe(se){const ee=new Promise((Pe,mt)=>{const Dt=()=>{se.removeEventListener("success",Ht),se.removeEventListener("error",rn)},Ht=()=>{Pe(Te(se.result)),Dt()},rn=()=>{mt(se.error),Dt()};se.addEventListener("success",Ht),se.addEventListener("error",rn)});return ee.then(Pe=>{Pe instanceof IDBCursor&&W.set(Pe,se)}).catch(()=>{}),we.set(ee,se),ee}(se);if(xe.has(se))return xe.get(se);const ee=Ze(se);return ee!==se&&(xe.set(se,ee),we.set(ee,se)),ee}const De=se=>we.get(se),Me=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],st=new Map;function et(se,ee){if(!(se instanceof IDBDatabase)||ee in se||"string"!=typeof ee)return;if(st.get(ee))return st.get(ee);const Pe=ee.replace(/FromIndex$/,""),mt=ee!==Pe,Dt=J.includes(Pe);if(!(Pe in(mt?IDBIndex:IDBObjectStore).prototype)||!Dt&&!Me.includes(Pe))return;const Ht=function(){var rn=(0,h.Z)(function*(_r,...On){const tr=this.transaction(_r,Dt?"readwrite":"readonly");let Gi=tr.store;return mt&&(Gi=Gi.index(On.shift())),(yield Promise.all([Gi[Pe](...On),Dt&&tr.done]))[0]});return function(On){return rn.apply(this,arguments)}}();return st.set(ee,Ht),Ht}!function Le(se){he=se(he)}(se=>({...se,get:(ee,Pe,mt)=>et(ee,Pe)||se.get(ee,Pe,mt),has:(ee,Pe)=>!!et(ee,Pe)||se.has(ee,Pe)}));class un{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Pe=>{if(function Qn(se){const ee=se.getComponent();return"VERSION"===ee?.type}(Pe)){const mt=Pe.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(Pe=>Pe).join(" ")}}const Jn="@firebase/app",pe=new k.Yd("@firebase/app"),Wt="[DEFAULT]",ft={[Jn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rt=new Map,Kn=new Map;function An(se,ee){try{se.container.addComponent(ee)}catch(Pe){pe.debug(`Component ${ee.name} failed to register with FirebaseApp ${se.name}`,Pe)}}function ur(se,ee){se.container.addOrOverwriteComponent(ee)}function Cn(se){const ee=se.name;if(Kn.has(ee))return pe.debug(`There were multiple attempts to register component ${ee}.`),!1;Kn.set(ee,se);for(const Pe of rt.values())An(Pe,se);return!0}function Xt(se,ee){const Pe=se.container.getProvider("heartbeat").getImmediate({optional:!0});return Pe&&Pe.triggerHeartbeat(),se.container.getProvider(ee)}function cr(se,ee,Pe=Wt){Xt(se,ee).clearInstance(Pe)}function nn(){Kn.clear()}const kt=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class en{constructor(ee,Pe,mt){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Pe),this._name=Pe.name,this._automaticDataCollectionEnabled=Pe.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new V.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw kt.create("app-deleted",{appName:this._name})}}const Hn="9.22.2";function Br(se,ee={}){let Pe=se;"object"!=typeof ee&&(ee={name:ee});const mt=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},ee),Dt=mt.name;if("string"!=typeof Dt||!Dt)throw kt.create("bad-app-name",{appName:String(Dt)});if(Pe||(Pe=(0,ne.aH)()),!Pe)throw kt.create("no-options");const Ht=rt.get(Dt);if(Ht){if((0,ne.vZ)(Pe,Ht.options)&&(0,ne.vZ)(mt,Ht.config))return Ht;throw kt.create("duplicate-app",{appName:Dt})}const rn=new V.H0(Dt);for(const On of Kn.values())rn.addComponent(On);const _r=new en(Pe,mt,rn);return rt.set(Dt,_r),_r}function Pn(se=Wt){const ee=rt.get(se);if(!ee&&se===Wt&&(0,ne.aH)())return Br();if(!ee)throw kt.create("no-app",{appName:se});return ee}function Un(){return Array.from(rt.values())}function Yt(se){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(se){const ee=se.name;rt.has(ee)&&(rt.delete(ee),yield Promise.all(se.container.getProviders().map(Pe=>Pe.delete())),se.isDeleted=!0)})).apply(this,arguments)}function Ft(se,ee,Pe){var mt;let Dt=null!==(mt=ft[se])&&void 0!==mt?mt:se;Pe&&(Dt+=`-${Pe}`);const Ht=Dt.match(/\s|\//),rn=ee.match(/\s|\//);if(Ht||rn){const _r=[`Unable to register library "${Dt}" with version "${ee}":`];return Ht&&_r.push(`library name "${Dt}" contains illegal characters (whitespace or "/")`),Ht&&rn&&_r.push("and"),rn&&_r.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void pe.warn(_r.join(" "))}Cn(new V.wA(`${Dt}-version`,()=>({library:Dt,version:ee}),"VERSION"))}function Fn(se,ee){if(null!==se&&"function"!=typeof se)throw kt.create("invalid-log-argument");(0,k.Am)(se,ee)}function Fr(se){(0,k.Ub)(se)}const lr="firebase-heartbeat-database",Yr=1,H="firebase-heartbeat-store";let B=null;function N(){return B||(B=function Se(se,ee,{blocked:Pe,upgrade:mt,blocking:Dt,terminated:Ht}={}){const rn=indexedDB.open(se,ee),_r=Te(rn);return mt&&rn.addEventListener("upgradeneeded",On=>{mt(Te(rn.result),On.oldVersion,On.newVersion,Te(rn.transaction),On)}),Pe&&rn.addEventListener("blocked",On=>Pe(On.oldVersion,On.newVersion,On)),_r.then(On=>{Ht&&On.addEventListener("close",()=>Ht()),Dt&&On.addEventListener("versionchange",tr=>Dt(tr.oldVersion,tr.newVersion,tr))}).catch(()=>{}),_r}(lr,Yr,{upgrade:(se,ee)=>{0===ee&&se.createObjectStore(H)}}).catch(se=>{throw kt.create("idb-open",{originalErrorMessage:se.message})})),B}function M(){return(M=(0,h.Z)(function*(se){try{return yield(yield N()).transaction(H).objectStore(H).get(G(se))}catch(ee){if(ee instanceof ne.ZR)pe.warn(ee.message);else{const Pe=kt.create("idb-get",{originalErrorMessage:ee?.message});pe.warn(Pe.message)}}})).apply(this,arguments)}function Z(se,ee){return ie.apply(this,arguments)}function ie(){return(ie=(0,h.Z)(function*(se,ee){try{const mt=(yield N()).transaction(H,"readwrite");yield mt.objectStore(H).put(ee,G(se)),yield mt.done}catch(Pe){if(Pe instanceof ne.ZR)pe.warn(Pe.message);else{const mt=kt.create("idb-set",{originalErrorMessage:Pe?.message});pe.warn(mt.message)}}})).apply(this,arguments)}function G(se){return`${se.name}!${se.options.appId}`}class Ge{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Pe=this.container.getProvider("app").getImmediate();this._storage=new tt(Pe),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var ee=this;return(0,h.Z)(function*(){const mt=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Dt=Ie();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==Dt&&!ee._heartbeatsCache.heartbeats.some(Ht=>Ht.date===Dt))return ee._heartbeatsCache.heartbeats.push({date:Dt,agent:mt}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Ht=>{const rn=new Date(Ht.date).valueOf();return Date.now()-rn<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,h.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Pe=Ie(),{heartbeatsToSend:mt,unsentEntries:Dt}=function it(se,ee=1024){const Pe=[];let mt=se.slice();for(const Dt of se){const Ht=Pe.find(rn=>rn.agent===Dt.agent);if(Ht){if(Ht.dates.push(Dt.date),Pt(Pe)>ee){Ht.dates.pop();break}}else if(Pe.push({agent:Dt.agent,dates:[Dt.date]}),Pt(Pe)>ee){Pe.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:Pe,unsentEntries:mt}}(ee._heartbeatsCache.heartbeats),Ht=(0,ne.L)(JSON.stringify({version:2,heartbeats:mt}));return ee._heartbeatsCache.lastSentHeartbeatDate=Pe,Dt.length>0?(ee._heartbeatsCache.heartbeats=Dt,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Ht})()}}function Ie(){return(new Date).toISOString().substring(0,10)}class tt{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,h.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function O(se){return M.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Pe=this;return(0,h.Z)(function*(){var mt;if(yield Pe._canUseIndexedDBPromise){const Ht=yield Pe.read();return Z(Pe.app,{lastSentHeartbeatDate:null!==(mt=ee.lastSentHeartbeatDate)&&void 0!==mt?mt:Ht.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Pe=this;return(0,h.Z)(function*(){var mt;if(yield Pe._canUseIndexedDBPromise){const Ht=yield Pe.read();return Z(Pe.app,{lastSentHeartbeatDate:null!==(mt=ee.lastSentHeartbeatDate)&&void 0!==mt?mt:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...ee.heartbeats]})}})()}}function Pt(se){return(0,ne.L)(JSON.stringify({version:2,heartbeats:se})).length}!function Lt(se){Cn(new V.wA("platform-logger",ee=>new un(ee),"PRIVATE")),Cn(new V.wA("heartbeat",ee=>new Ge(ee),"PRIVATE")),Ft(Jn,"0.9.12",se),Ft(Jn,"0.9.12","esm2017"),Ft("fire-js","")}("")},4859:(It,Oe,F)=>{F.d(Oe,{H0:()=>Ce,wA:()=>k});var h=F(5861),V=F(2090);class k{constructor(W,z,K){this.name=W,this.instanceFactory=z,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ne="[DEFAULT]";class ge{constructor(W,z){this.name=W,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(z)){const K=new V.BH;if(this.instancesDeferred.set(z,K),this.isInitialized(z)||this.shouldAutoInitialize())try{const xe=this.getOrInitializeService({instanceIdentifier:z});xe&&K.resolve(xe)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(W){var z;const K=this.normalizeInstanceIdentifier(W?.identifier),xe=null!==(z=W?.optional)&&void 0!==z&&z;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(xe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(we){if(xe)return null;throw we}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ve(_e){return"EAGER"===_e.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ne})}catch{}for(const[z,K]of this.instancesDeferred.entries()){const xe=this.normalizeInstanceIdentifier(z);try{const we=this.getOrInitializeService({instanceIdentifier:xe});K.resolve(we)}catch{}}}}clearInstance(W=ne){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,h.Z)(function*(){const z=Array.from(W.instances.values());yield Promise.all([...z.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...z.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ne){return this.instances.has(W)}getOptions(W=ne){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:z={}}=W,K=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const xe=this.getOrInitializeService({instanceIdentifier:K,options:z});for(const[we,Qe]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(we)&&Qe.resolve(xe);return xe}onInit(W,z){var K;const xe=this.normalizeInstanceIdentifier(z),we=null!==(K=this.onInitCallbacks.get(xe))&&void 0!==K?K:new Set;we.add(W),this.onInitCallbacks.set(xe,we);const Qe=this.instances.get(xe);return Qe&&W(Qe,xe),()=>{we.delete(W)}}invokeOnInitCallbacks(W,z){const K=this.onInitCallbacks.get(z);if(K)for(const xe of K)try{xe(W,z)}catch{}}getOrInitializeService({instanceIdentifier:W,options:z={}}){let K=this.instances.get(W);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=W,_e===ne?void 0:_e),options:z}),this.instances.set(W,K),this.instancesOptions.set(W,z),this.invokeOnInitCallbacks(K,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,K)}catch{}var _e;return K||null}normalizeInstanceIdentifier(W=ne){return this.component?this.component.multipleInstances?W:ne:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const z=this.getProvider(W.name);if(z.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);z.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const z=new ge(W,this);return this.providers.set(W,z),z}getProviders(){return Array.from(this.providers.values())}}},4727:(It,Oe,F)=>{var h=F(5861),V=F(6881),k=F(4859),ne=F(2090);const ge=(U,X)=>X.some(oe=>U instanceof oe);let ce,ve;const W=new WeakMap,z=new WeakMap,K=new WeakMap,xe=new WeakMap,we=new WeakMap;let he={get(U,X,oe){if(U instanceof IDBTransaction){if("done"===X)return z.get(U);if("objectStoreNames"===X)return U.objectStoreNames||K.get(U);if("store"===X)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return Te(U[X])},set:(U,X,oe)=>(U[X]=oe,!0),has:(U,X)=>U instanceof IDBTransaction&&("done"===X||"store"===X)||X in U};function Ze(U){return"function"==typeof U?function ze(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...X){return U.apply(De(this),X),Te(W.get(this))}:function(...X){return Te(U.apply(De(this),X))}:function(X,...oe){const Xe=U.call(De(this),X,...oe);return K.set(Xe,X.sort?X.sort():[X]),Te(Xe)}}(U):(U instanceof IDBTransaction&&function Et(U){if(z.has(U))return;const X=new Promise((oe,Xe)=>{const Rt=()=>{U.removeEventListener("complete",zt),U.removeEventListener("error",At),U.removeEventListener("abort",At)},zt=()=>{oe(),Rt()},At=()=>{Xe(U.error||new DOMException("AbortError","AbortError")),Rt()};U.addEventListener("complete",zt),U.addEventListener("error",At),U.addEventListener("abort",At)});z.set(U,X)}(U),ge(U,function Ce(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,he):U)}function Te(U){if(U instanceof IDBRequest)return function Qe(U){const X=new Promise((oe,Xe)=>{const Rt=()=>{U.removeEventListener("success",zt),U.removeEventListener("error",At)},zt=()=>{oe(Te(U.result)),Rt()},At=()=>{Xe(U.error),Rt()};U.addEventListener("success",zt),U.addEventListener("error",At)});return X.then(oe=>{oe instanceof IDBCursor&&W.set(oe,U)}).catch(()=>{}),we.set(X,U),X}(U);if(xe.has(U))return xe.get(U);const X=Ze(U);return X!==U&&(xe.set(U,X),we.set(X,U)),X}const De=U=>we.get(U),Me=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],st=new Map;function et(U,X){if(!(U instanceof IDBDatabase)||X in U||"string"!=typeof X)return;if(st.get(X))return st.get(X);const oe=X.replace(/FromIndex$/,""),Xe=X!==oe,Rt=J.includes(oe);if(!(oe in(Xe?IDBIndex:IDBObjectStore).prototype)||!Rt&&!Me.includes(oe))return;const zt=function(){var At=(0,h.Z)(function*(Bn,...rr){const ir=this.transaction(Bn,Rt?"readwrite":"readonly");let os=ir.store;return Xe&&(os=os.index(rr.shift())),(yield Promise.all([os[oe](...rr),Rt&&ir.done]))[0]});return function(rr){return At.apply(this,arguments)}}();return st.set(X,zt),zt}!function Le(U){he=U(he)}(U=>({...U,get:(X,oe,Xe)=>et(X,oe)||U.get(X,oe,Xe),has:(X,oe)=>!!et(X,oe)||U.has(X,oe)}));const un="@firebase/installations",Qn="0.6.4",Jn=1e4,yi=`w:${Qn}`,pe="FIS_v2",ye="https://firebaseinstallations.googleapis.com/v1",Re=36e5,Ae=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function at(U){return U instanceof ne.ZR&&U.code.includes("request-failed")}function _n({projectId:U}){return`${ye}/projects/${U}/installations`}function wt(U){return{token:U.token,requestStatus:2,expiresIn:yr(U.expiresIn),creationTime:Date.now()}}function Tt(U,X){return jt.apply(this,arguments)}function jt(){return(jt=(0,h.Z)(function*(U,X){const Xe=(yield X.json()).error;return Ae.create("request-failed",{requestName:U,serverCode:Xe.code,serverMessage:Xe.message,serverStatus:Xe.status})})).apply(this,arguments)}function tn({apiKey:U}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":U})}function Xn(U){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(U){const X=yield U();return X.status>=500&&X.status<600?U():X})).apply(this,arguments)}function yr(U){return Number(U.replace("s","000"))}function qn(){return(qn=(0,h.Z)(function*({appConfig:U,heartbeatServiceProvider:X},{fid:oe}){const Xe=_n(U),Rt=tn(U),zt=X.getImmediate({optional:!0});if(zt){const ir=yield zt.getHeartbeatsHeader();ir&&Rt.append("x-firebase-client",ir)}const Bn={method:"POST",headers:Rt,body:JSON.stringify({fid:oe,authVersion:pe,appId:U.appId,sdkVersion:yi})},rr=yield Xn(()=>fetch(Xe,Bn));if(rr.ok){const ir=yield rr.json();return{fid:ir.fid||oe,registrationStatus:2,refreshToken:ir.refreshToken,authToken:wt(ir.authToken)}}throw yield Tt("Create Installation",rr)})).apply(this,arguments)}function si(U){return new Promise(X=>{setTimeout(X,U)})}const vt=/^[cdef][\w-]{21}$/,Dn="";function ar(){try{const U=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(U),U[0]=112+U[0]%16;const oe=function Nn(U){return function Mr(U){return btoa(String.fromCharCode(...U)).replace(/\+/g,"-").replace(/\//g,"_")}(U).substr(0,22)}(U);return vt.test(oe)?oe:Dn}catch{return Dn}}function Wt(U){return`${U.appName}!${U.appId}`}const ft=new Map;function rt(U,X){const oe=Wt(U);ur(oe,X),function Cn(U,X){const oe=function cr(){return!Xt&&"BroadcastChannel"in self&&(Xt=new BroadcastChannel("[Firebase] FID Change"),Xt.onmessage=U=>{ur(U.data.key,U.data.fid)}),Xt}();oe&&oe.postMessage({key:U,fid:X}),function nn(){0===ft.size&&Xt&&(Xt.close(),Xt=null)}()}(oe,X)}function ur(U,X){const oe=ft.get(U);if(oe)for(const Xe of oe)Xe(X)}let Xt=null;const vr="firebase-installations-database",kt=1,en="firebase-installations-store";let Hn=null;function Br(){return Hn||(Hn=function Se(U,X,{blocked:oe,upgrade:Xe,blocking:Rt,terminated:zt}={}){const At=indexedDB.open(U,X),Bn=Te(At);return Xe&&At.addEventListener("upgradeneeded",rr=>{Xe(Te(At.result),rr.oldVersion,rr.newVersion,Te(At.transaction))}),oe&&At.addEventListener("blocked",()=>oe()),Bn.then(rr=>{zt&&rr.addEventListener("close",()=>zt()),Rt&&rr.addEventListener("versionchange",()=>Rt())}).catch(()=>{}),Bn}(vr,kt,{upgrade:(U,X)=>{0===X&&U.createObjectStore(en)}})),Hn}function Pn(U,X){return Un.apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(U,X){const oe=Wt(U),Rt=(yield Br()).transaction(en,"readwrite"),zt=Rt.objectStore(en),At=yield zt.get(oe);return yield zt.put(X,oe),yield Rt.done,(!At||At.fid!==X.fid)&&rt(U,X.fid),X})).apply(this,arguments)}function Yt(U){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(U){const X=Wt(U),Xe=(yield Br()).transaction(en,"readwrite");yield Xe.objectStore(en).delete(X),yield Xe.done})).apply(this,arguments)}function Ft(U,X){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,h.Z)(function*(U,X){const oe=Wt(U),Rt=(yield Br()).transaction(en,"readwrite"),zt=Rt.objectStore(en),At=yield zt.get(oe),Bn=X(At);return void 0===Bn?yield zt.delete(oe):yield zt.put(Bn,oe),yield Rt.done,Bn&&(!At||At.fid!==Bn.fid)&&rt(U,Bn.fid),Bn})).apply(this,arguments)}function Fr(U){return lr.apply(this,arguments)}function lr(){return lr=(0,h.Z)(function*(U){let X;const oe=yield Ft(U.appConfig,Xe=>{const Rt=function Yr(U){return ie(U||{fid:ar(),registrationStatus:0})}(Xe),zt=function H(U,X){if(0===X.registrationStatus){if(!navigator.onLine)return{installationEntry:X,registrationPromise:Promise.reject(Ae.create("app-offline"))};const oe={fid:X.fid,registrationStatus:1,registrationTime:Date.now()},Xe=function B(U,X){return N.apply(this,arguments)}(U,oe);return{installationEntry:oe,registrationPromise:Xe}}return 1===X.registrationStatus?{installationEntry:X,registrationPromise:O(U)}:{installationEntry:X}}(U,Rt);return X=zt.registrationPromise,zt.installationEntry});return oe.fid===Dn?{installationEntry:yield X}:{installationEntry:oe,registrationPromise:X}}),lr.apply(this,arguments)}function N(){return N=(0,h.Z)(function*(U,X){try{const oe=yield function kn(U,X){return qn.apply(this,arguments)}(U,X);return Pn(U.appConfig,oe)}catch(oe){throw at(oe)&&409===oe.customData.serverCode?yield Yt(U.appConfig):yield Pn(U.appConfig,{fid:X.fid,registrationStatus:0}),oe}}),N.apply(this,arguments)}function O(U){return M.apply(this,arguments)}function M(){return(M=(0,h.Z)(function*(U){let X=yield Z(U.appConfig);for(;1===X.registrationStatus;)yield si(100),X=yield Z(U.appConfig);if(0===X.registrationStatus){const{installationEntry:oe,registrationPromise:Xe}=yield Fr(U);return Xe||oe}return X})).apply(this,arguments)}function Z(U){return Ft(U,X=>{if(!X)throw Ae.create("installation-not-found");return ie(X)})}function ie(U){return function G(U){return 1===U.registrationStatus&&U.registrationTime+Jn<Date.now()}(U)?{fid:U.fid,registrationStatus:0}:U}function de(){return(de=(0,h.Z)(function*({appConfig:U,heartbeatServiceProvider:X},oe){const Xe=function Ge(U,{fid:X}){return`${_n(U)}/${X}/authTokens:generate`}(U,oe),Rt=function gn(U,{refreshToken:X}){const oe=tn(U);return oe.append("Authorization",function er(U){return`${pe} ${U}`}(X)),oe}(U,oe),zt=X.getImmediate({optional:!0});if(zt){const ir=yield zt.getHeartbeatsHeader();ir&&Rt.append("x-firebase-client",ir)}const Bn={method:"POST",headers:Rt,body:JSON.stringify({installation:{sdkVersion:yi,appId:U.appId}})},rr=yield Xn(()=>fetch(Xe,Bn));if(rr.ok)return wt(yield rr.json());throw yield Tt("Generate Auth Token",rr)})).apply(this,arguments)}function Ie(U){return it.apply(this,arguments)}function it(){return it=(0,h.Z)(function*(U,X=!1){let oe;const Xe=yield Ft(U.appConfig,zt=>{if(!Pe(zt))throw Ae.create("not-registered");const At=zt.authToken;if(!X&&function mt(U){return 2===U.requestStatus&&!function Dt(U){const X=Date.now();return X<U.creationTime||U.creationTime+U.expiresIn<X+Re}(U)}(At))return zt;if(1===At.requestStatus)return oe=function tt(U,X){return Pt.apply(this,arguments)}(U,X),zt;{if(!navigator.onLine)throw Ae.create("app-offline");const Bn=function Ht(U){const X={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},U),{authToken:X})}(zt);return oe=function se(U,X){return ee.apply(this,arguments)}(U,Bn),Bn}});return oe?yield oe:Xe.authToken}),it.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(U,X){let oe=yield Lt(U.appConfig);for(;1===oe.authToken.requestStatus;)yield si(100),oe=yield Lt(U.appConfig);const Xe=oe.authToken;return 0===Xe.requestStatus?Ie(U,X):Xe})).apply(this,arguments)}function Lt(U){return Ft(U,X=>{if(!Pe(X))throw Ae.create("not-registered");return function rn(U){return 1===U.requestStatus&&U.requestTime+Jn<Date.now()}(X.authToken)?Object.assign(Object.assign({},X),{authToken:{requestStatus:0}}):X})}function ee(){return ee=(0,h.Z)(function*(U,X){try{const oe=yield function ae(U,X){return de.apply(this,arguments)}(U,X),Xe=Object.assign(Object.assign({},X),{authToken:oe});return yield Pn(U.appConfig,Xe),oe}catch(oe){if(!at(oe)||401!==oe.customData.serverCode&&404!==oe.customData.serverCode){const Xe=Object.assign(Object.assign({},X),{authToken:{requestStatus:0}});yield Pn(U.appConfig,Xe)}else yield Yt(U.appConfig);throw oe}}),ee.apply(this,arguments)}function Pe(U){return void 0!==U&&2===U.registrationStatus}function On(){return(On=(0,h.Z)(function*(U){const X=U,{installationEntry:oe,registrationPromise:Xe}=yield Fr(X);return Xe?Xe.catch(console.error):Ie(X).catch(console.error),oe.fid})).apply(this,arguments)}function Gi(){return Gi=(0,h.Z)(function*(U,X=!1){const oe=U;return yield function nr(U){return co.apply(this,arguments)}(oe),(yield Ie(oe,X)).token}),Gi.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(U){const{registrationPromise:X}=yield Fr(U);X&&(yield X)})).apply(this,arguments)}function ho(U){return Ae.create("missing-app-config-values",{valueName:U})}const fo="installations",ss=U=>{const X=U.getProvider("app").getImmediate(),oe=function Ni(U){if(!U||!U.options)throw ho("App Configuration");if(!U.name)throw ho("App Name");const X=["projectId","apiKey","appId"];for(const oe of X)if(!U.options[oe])throw ho(oe);return{appName:U.name,projectId:U.options.projectId,apiKey:U.options.apiKey,appId:U.options.appId}}(X);return{app:X,appConfig:oe,heartbeatServiceProvider:(0,V._getProvider)(X,"heartbeat"),_delete:()=>Promise.resolve()}},Go=U=>{const X=U.getProvider("app").getImmediate(),oe=(0,V._getProvider)(X,fo).getImmediate();return{getId:()=>function _r(U){return On.apply(this,arguments)}(oe),getToken:Rt=>function tr(U){return Gi.apply(this,arguments)}(oe,Rt)}};(function go(){(0,V._registerComponent)(new k.wA(fo,ss,"PUBLIC")),(0,V._registerComponent)(new k.wA("installations-internal",Go,"PRIVATE"))})(),(0,V.registerVersion)(un,Qn),(0,V.registerVersion)(un,Qn,"esm2017")},1877:(It,Oe,F)=>{F.d(Oe,{Am:()=>_e,Ub:()=>Ce,Yd:()=>ve,in:()=>V});const h=[];var V=(()=>((V=V||{})[V.DEBUG=0]="DEBUG",V[V.VERBOSE=1]="VERBOSE",V[V.INFO=2]="INFO",V[V.WARN=3]="WARN",V[V.ERROR=4]="ERROR",V[V.SILENT=5]="SILENT",V))();const k={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ne=V.INFO,ge={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},ce=(W,z,...K)=>{if(z<W.logLevel)return;const xe=(new Date).toISOString(),we=ge[z];if(!we)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[we](`[${xe}]  ${W.name}:`,...K)};class ve{constructor(z){this.name=z,this._logLevel=ne,this._logHandler=ce,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in V))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?k[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...z),this._logHandler(this,V.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...z),this._logHandler(this,V.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,V.INFO,...z),this._logHandler(this,V.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,V.WARN,...z),this._logHandler(this,V.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...z),this._logHandler(this,V.ERROR,...z)}}function Ce(W){h.forEach(z=>{z.setLogLevel(W)})}function _e(W,z){for(const K of h){let xe=null;z&&z.level&&(xe=k[z.level]),K.userLogHandler=null===W?null:(we,Qe,...Et)=>{const he=Et.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");Qe>=(xe??we.logLevel)&&W({level:V[Qe].toLowerCase(),message:he,args:Et,type:we.name})}}}},3008:(It,Oe,F)=>{F.d(Oe,{IH:()=>Pn,Gb:()=>Yt,Kz:()=>N,Iv:()=>lr});var h=F(5861),V=F(6881),k=F(1877),ne=F(2090),ge=F(4859);F(4727);const ve="analytics",Ce="firebase_id",_e="origin",W=6e4,z="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",K="https://www.googletagmanager.com/gtag/js",xe=new k.Yd("@firebase/analytics"),Qe=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Et(G){if(!G.startsWith(K)){const ae=Qe.create("invalid-gtag-resource",{gtagURL:G});return xe.warn(ae.message),""}return G}function he(G){return Promise.all(G.map(ae=>ae.catch(de=>de)))}function De(){return(De=(0,h.Z)(function*(G,ae,de,Ge,Ie,it){const tt=Ge[Ie];try{if(tt)yield ae[tt];else{const Lt=(yield he(de)).find(se=>se.measurementId===Ie);Lt&&(yield ae[Lt.appId])}}catch(Pt){xe.error(Pt)}G("config",Ie,it)})).apply(this,arguments)}function Ue(){return(Ue=(0,h.Z)(function*(G,ae,de,Ge,Ie){try{let it=[];if(Ie&&Ie.send_to){let tt=Ie.send_to;Array.isArray(tt)||(tt=[tt]);const Pt=yield he(de);for(const Lt of tt){const se=Pt.find(Pe=>Pe.measurementId===Lt),ee=se&&ae[se.appId];if(!ee){it=[];break}it.push(ee)}}0===it.length&&(it=Object.values(ae)),yield Promise.all(it),G("event",Ge,Ie||{})}catch(it){xe.error(it)}})).apply(this,arguments)}const et=30,Jn=new class Qn{constructor(ae={},de=1e3){this.throttleMetadata=ae,this.intervalMillis=de}getThrottleMetadata(ae){return this.throttleMetadata[ae]}setThrottleMetadata(ae,de){this.throttleMetadata[ae]=de}deleteThrottleMetadata(ae){delete this.throttleMetadata[ae]}};function yi(G){return new Headers({Accept:"application/json","x-goog-api-key":G})}function ye(){return(ye=(0,h.Z)(function*(G){var ae;const{appId:de,apiKey:Ge}=G,Ie={method:"GET",headers:yi(Ge)},it=z.replace("{app-id}",de),tt=yield fetch(it,Ie);if(200!==tt.status&&304!==tt.status){let Pt="";try{const Lt=yield tt.json();null!==(ae=Lt.error)&&void 0!==ae&&ae.message&&(Pt=Lt.error.message)}catch{}throw Qe.create("config-fetch-failed",{httpStatus:tt.status,responseMessage:Pt})}return tt.json()})).apply(this,arguments)}function Ve(){return(Ve=(0,h.Z)(function*(G,ae=Jn,de){const{appId:Ge,apiKey:Ie,measurementId:it}=G.options;if(!Ge)throw Qe.create("no-app-id");if(!Ie){if(it)return{measurementId:it,appId:Ge};throw Qe.create("no-api-key")}const tt=ae.getThrottleMetadata(Ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new _n;return setTimeout((0,h.Z)(function*(){Pt.abort()}),void 0!==de?de:W),Je({appId:Ge,apiKey:Ie,measurementId:it},tt,Pt,ae)})).apply(this,arguments)}function Je(G,ae,de){return Be.apply(this,arguments)}function Be(){return Be=(0,h.Z)(function*(G,{throttleEndTimeMillis:ae,backoffCount:de},Ge,Ie=Jn){var it;const{appId:tt,measurementId:Pt}=G;try{yield function Ae(G,ae){return new Promise((de,Ge)=>{const Ie=Math.max(ae-Date.now(),0),it=setTimeout(de,Ie);G.addEventListener(()=>{clearTimeout(it),Ge(Qe.create("fetch-throttle",{throttleEndTimeMillis:ae}))})})}(Ge,ae)}catch(Lt){if(Pt)return xe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pt} provided in the "measurementId" field in the local Firebase config. [${Lt?.message}]`),{appId:tt,measurementId:Pt};throw Lt}try{const Lt=yield function pe(G){return ye.apply(this,arguments)}(G);return Ie.deleteThrottleMetadata(tt),Lt}catch(Lt){const se=Lt;if(!function at(G){if(!(G instanceof ne.ZR&&G.customData))return!1;const ae=Number(G.customData.httpStatus);return 429===ae||500===ae||503===ae||504===ae}(se)){if(Ie.deleteThrottleMetadata(tt),Pt)return xe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pt} provided in the "measurementId" field in the local Firebase config. [${se?.message}]`),{appId:tt,measurementId:Pt};throw Lt}const ee=503===Number(null===(it=se?.customData)||void 0===it?void 0:it.httpStatus)?(0,ne.$s)(de,Ie.intervalMillis,et):(0,ne.$s)(de,Ie.intervalMillis),Pe={throttleEndTimeMillis:Date.now()+ee,backoffCount:de+1};return Ie.setThrottleMetadata(tt,Pe),xe.debug(`Calling attemptFetch again in ${ee} millis`),Je(G,Pe,Ge,Ie)}}),Be.apply(this,arguments)}class _n{constructor(){this.listeners=[]}addEventListener(ae){this.listeners.push(ae)}abort(){this.listeners.forEach(ae=>ae())}}let wt,vt;function jt(){return(jt=(0,h.Z)(function*(G,ae,de,Ge,Ie){if(Ie&&Ie.global)G("event",de,Ge);else{const it=yield ae;G("event",de,Object.assign(Object.assign({},Ge),{send_to:it}))}})).apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(G,ae,de,Ge){if(Ge&&Ge.global)return G("set",{user_id:de}),Promise.resolve();G("config",yield ae,{update:!0,user_id:de})})).apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(){if(!(0,ne.hl)())return xe.warn(Qe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch(G){return xe.warn(Qe.create("indexeddb-unavailable",{errorInfo:G?.toString()}).message),!1}return!0})).apply(this,arguments)}function rt(){return rt=(0,h.Z)(function*(G,ae,de,Ge,Ie,it,tt){var Pt;const Lt=function Re(G){return Ve.apply(this,arguments)}(G);Lt.then(Dt=>{de[Dt.measurementId]=Dt.appId,G.options.measurementId&&Dt.measurementId!==G.options.measurementId&&xe.warn(`The measurement ID in the local Firebase config (${G.options.measurementId}) does not match the measurement ID fetched from the server (${Dt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Dt=>xe.error(Dt)),ae.push(Lt);const se=function Nn(){return Wt.apply(this,arguments)}().then(Dt=>{if(Dt)return Ge.getId()}),[ee,Pe]=yield Promise.all([Lt,se]);(function st(G){const ae=window.document.getElementsByTagName("script");for(const de of Object.values(ae))if(de.src&&de.src.includes(K)&&de.src.includes(G))return de;return null})(it)||function ze(G,ae){const de=function Le(G,ae){let de;return window.trustedTypes&&(de=window.trustedTypes.createPolicy(G,ae)),de}("firebase-js-sdk-policy",{createScriptURL:Et}),Ge=document.createElement("script"),Ie=`${K}?l=${G}&id=${ae}`;Ge.src=de?de?.createScriptURL(Ie):Ie,Ge.async=!0,document.head.appendChild(Ge)}(it,ee.measurementId),vt&&(Ie("consent","default",vt),function Dn(G){vt=G}(void 0)),Ie("js",new Date);const mt=null!==(Pt=tt?.config)&&void 0!==Pt?Pt:{};return mt[_e]="firebase",mt.update=!0,null!=Pe&&(mt[Ce]=Pe),Ie("config",ee.measurementId,mt),wt&&(Ie("set",wt),function ar(G){wt=G}(void 0)),ee.measurementId}),rt.apply(this,arguments)}class Kn{constructor(ae){this.app=ae}_delete(){return delete An[this.app.options.appId],Promise.resolve()}}let An={},ur=[];const Cn={};let nn,vr,Xt="dataLayer",kt=!1;function Br(G,ae,de){!function Hn(){const G=[];if((0,ne.ru)()&&G.push("This is a browser extension environment."),(0,ne.zI)()||G.push("Cookies are not available."),G.length>0){const ae=G.map((Ge,Ie)=>`(${Ie+1}) ${Ge}`).join(" "),de=Qe.create("invalid-analytics-context",{errorInfo:ae});xe.warn(de.message)}}();const Ge=G.options.appId;if(!Ge)throw Qe.create("no-app-id");if(!G.options.apiKey){if(!G.options.measurementId)throw Qe.create("no-api-key");xe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${G.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=An[Ge])throw Qe.create("already-exists",{id:Ge});if(!kt){!function Ze(G){let ae=[];Array.isArray(window[G])?ae=window[G]:window[G]=ae}(Xt);const{wrappedGtag:it,gtagCore:tt}=function J(G,ae,de,Ge,Ie){let it=function(...tt){window[Ge].push(arguments)};return window[Ie]&&"function"==typeof window[Ie]&&(it=window[Ie]),window[Ie]=function Me(G,ae,de,Ge){function it(){return it=(0,h.Z)(function*(tt,...Pt){try{if("event"===tt){const[Lt,se]=Pt;yield function Se(G,ae,de,Ge,Ie){return Ue.apply(this,arguments)}(G,ae,de,Lt,se)}else if("config"===tt){const[Lt,se]=Pt;yield function Te(G,ae,de,Ge,Ie,it){return De.apply(this,arguments)}(G,ae,de,Ge,Lt,se)}else if("consent"===tt){const[Lt]=Pt;G("consent","update",Lt)}else if("get"===tt){const[Lt,se,ee]=Pt;G("get",Lt,se,ee)}else if("set"===tt){const[Lt]=Pt;G("set",Lt)}else G(tt,...Pt)}catch(Lt){xe.error(Lt)}}),it.apply(this,arguments)}return function Ie(tt){return it.apply(this,arguments)}}(it,G,ae,de),{gtagCore:it,wrappedGtag:window[Ie]}}(An,ur,Cn,Xt,"gtag");vr=it,nn=tt,kt=!0}return An[Ge]=function ft(G,ae,de,Ge,Ie,it,tt){return rt.apply(this,arguments)}(G,ur,Cn,ae,nn,Xt,de),new Kn(G)}function Pn(G=(0,V.getApp)()){G=(0,ne.m9)(G);const ae=(0,V._getProvider)(G,ve);return ae.isInitialized()?ae.getImmediate():function Un(G,ae={}){const de=(0,V._getProvider)(G,ve);if(de.isInitialized()){const Ie=de.getImmediate();if((0,ne.vZ)(ae,de.getOptions()))return Ie;throw Qe.create("already-initialized")}return de.initialize({options:ae})}(G)}function Yt(){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch{return!1}})).apply(this,arguments)}function lr(G,ae,de){G=(0,ne.m9)(G),function Xn(G,ae,de,Ge){return Mn.apply(this,arguments)}(vr,An[G.app.options.appId],ae,de).catch(Ge=>xe.error(Ge))}function N(G,ae,de,Ge){G=(0,ne.m9)(G),function Tt(G,ae,de,Ge,Ie){return jt.apply(this,arguments)}(vr,An[G.app.options.appId],ae,de,Ge).catch(Ie=>xe.error(Ie))}const M="@firebase/analytics",Z="0.10.0";!function ie(){(0,V._registerComponent)(new ge.wA(ve,(ae,{options:de})=>Br(ae.getProvider("app").getImmediate(),ae.getProvider("installations-internal").getImmediate(),de),"PUBLIC")),(0,V._registerComponent)(new ge.wA("analytics-internal",function G(ae){try{const de=ae.getProvider(ve).getImmediate();return{logEvent:(Ge,Ie,it)=>N(de,Ge,Ie,it)}}catch(de){throw Qe.create("interop-component-reg-failed",{reason:de})}},"PRIVATE")),(0,V.registerVersion)(M,Z),(0,V.registerVersion)(M,Z,"esm2017")}()},259:(It,Oe,F)=>{F.d(Oe,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=F(6881);(0,h.registerVersion)("firebase","9.22.2","app")},9260:(It,Oe,F)=>{F.d(Oe,{Z:()=>h.Z});var h=F(3942);h.Z.registerVersion("firebase","9.22.2","app-compat")},9568:(It,Oe,F)=>{F.r(Oe);var h=F(5861),V=F(3942),k=F(1389),ne=F(2090),ve=(F(6881),F(1877),F(4859));function Ce(){return window}function z(){return z=(0,h.Z)(function*(N,O,M){var Z;const{BuildInfo:ie}=Ce();(0,k.as)(O.sessionId,"AuthEvent did not contain a session ID");const G=yield function Le(N){return ze.apply(this,arguments)}(O.sessionId),ae={};return(0,k.at)()?ae.ibi=ie.packageName:(0,k.au)()?ae.apn=ie.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),ie.displayName&&(ae.appDisplayName=ie.displayName),ae.sessionId=G,(0,k.aw)(N,M,O.type,void 0,null!==(Z=O.eventId)&&void 0!==Z?Z:void 0,ae)}),z.apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(N){const{BuildInfo:O}=Ce(),M={};(0,k.at)()?M.iosBundleId=O.packageName:(0,k.au)()?M.androidPackageName=O.packageName:(0,k.av)(N,"operation-not-supported-in-this-environment"),yield(0,k.ax)(N,M)})).apply(this,arguments)}function Et(){return(Et=(0,h.Z)(function*(N,O,M){const{cordova:Z}=Ce();let ie=()=>{};try{yield new Promise((G,ae)=>{let de=null;function Ge(){var tt;G();const Pt=null===(tt=Z.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Pt&&Pt(),"function"==typeof M?.close&&M.close()}function Ie(){de||(de=window.setTimeout(()=>{ae((0,k.az)(N,"redirect-cancelled-by-user"))},2e3))}function it(){"visible"===document?.visibilityState&&Ie()}O.addPassiveListener(Ge),document.addEventListener("resume",Ie,!1),(0,k.au)()&&document.addEventListener("visibilitychange",it,!1),ie=()=>{O.removePassiveListener(Ge),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",it,!1),de&&window.clearTimeout(de)}})}finally{ie()}})).apply(this,arguments)}function ze(){return(ze=(0,h.Z)(function*(N){const O=function Ze(N){if((0,k.as)(/[0-9a-zA-Z]+/.test(N),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(N);const O=new ArrayBuffer(N.length),M=new Uint8Array(O);for(let Z=0;Z<N.length;Z++)M[Z]=N.charCodeAt(Z);return M}(N),M=yield crypto.subtle.digest("SHA-256",O);return Array.from(new Uint8Array(M)).map(ie=>ie.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class De extends k.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(O=>{this.resolveInialized=O})}addPassiveListener(O){this.passiveListeners.add(O)}removePassiveListener(O){this.passiveListeners.delete(O)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(O){return this.resolveInialized(),this.passiveListeners.forEach(M=>M(O)),super.onEvent(O)}initialized(){var O=this;return(0,h.Z)(function*(){yield O.initPromise})()}}function Me(N){return J.apply(this,arguments)}function J(){return(J=(0,h.Z)(function*(N){const O=yield un()._get(Qn(N));return O&&(yield un()._remove(Qn(N))),O})).apply(this,arguments)}function et(){const N=[];for(let M=0;M<20;M++){const Z=Math.floor(62*Math.random());N.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Z))}return N.join("")}function un(){return(0,k.aC)(k.b)}function Qn(N){return(0,k.aD)("authEvent",N.config.apiKey,N.name)}function pe(N){if(!N?.includes("?"))return{};const[O,...M]=N.split("?");return(0,ne.zd)(M.join("?"))}const Ve=class Re{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(O){var M=this;return(0,h.Z)(function*(){const Z=O._key();let ie=M.eventManagers.get(Z);return ie||(ie=new De(O),M.eventManagers.set(Z,ie),M.attachCallbackListeners(O,ie)),ie})()}_openPopup(O){(0,k.av)(O,"operation-not-supported-in-this-environment")}_openRedirect(O,M,Z,ie){var G=this;return(0,h.Z)(function*(){!function he(N){var O,M,Z,ie,G,ae,de,Ge,Ie,it;const tt=Ce();(0,k.aA)("function"==typeof(null===(O=tt?.universalLinks)||void 0===O?void 0:O.subscribe),N,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aA)(typeof(null===(M=tt?.BuildInfo)||void 0===M?void 0:M.packageName)<"u",N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aA)("function"==typeof(null===(G=null===(ie=null===(Z=tt?.cordova)||void 0===Z?void 0:Z.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===G?void 0:G.openUrl),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(Ge=null===(de=null===(ae=tt?.cordova)||void 0===ae?void 0:ae.plugins)||void 0===de?void 0:de.browsertab)||void 0===Ge?void 0:Ge.isAvailable),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aA)("function"==typeof(null===(it=null===(Ie=tt?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===it?void 0:it.open),N,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(O);const ae=yield G._initialize(O);yield ae.initialized(),ae.resetRedirect(),(0,k.aG)(),yield G._originValidation(O);const de=function Se(N,O,M=null){return{type:O,eventId:M,urlResponse:null,sessionId:et(),postBody:null,tenantId:N.tenantId,error:(0,k.az)(N,"no-auth-event")}}(O,Z,ie);yield function Ue(N,O){return un()._set(Qn(N),O)}(O,de);const Ge=yield function W(N,O,M){return z.apply(this,arguments)}(O,de,M),Ie=yield function we(N){const{cordova:O}=Ce();return new Promise(M=>{O.plugins.browsertab.isAvailable(Z=>{let ie=null;Z?O.plugins.browsertab.openUrl(N):ie=O.InAppBrowser.open(N,(0,k.ay)()?"_blank":"_system","location=yes"),M(ie)})})}(Ge);return function Qe(N,O,M){return Et.apply(this,arguments)}(O,ae,Ie)})()}_isIframeWebStorageSupported(O,M){throw new Error("Method not implemented.")}_originValidation(O){const M=O._key();return this.originValidationPromises[M]||(this.originValidationPromises[M]=function K(N){return xe.apply(this,arguments)}(O)),this.originValidationPromises[M]}attachCallbackListeners(O,M){const{universalLinks:Z,handleOpenURL:ie,BuildInfo:G}=Ce(),ae=setTimeout((0,h.Z)(function*(){yield Me(O),M.onEvent(Je())}),500),de=function(){var it=(0,h.Z)(function*(tt){clearTimeout(ae);const Pt=yield Me(O);let Lt=null;Pt&&tt?.url&&(Lt=function st(N,O){var M,Z;const ie=function yi(N){const O=pe(N),M=O.link?decodeURIComponent(O.link):void 0,Z=pe(M).link,ie=O.deep_link_id?decodeURIComponent(O.deep_link_id):void 0;return pe(ie).link||ie||Z||M||N}(O);if(ie.includes("/__/auth/callback")){const G=pe(ie),ae=G.firebaseError?function Jn(N){try{return JSON.parse(N)}catch{return null}}(decodeURIComponent(G.firebaseError)):null,de=null===(Z=null===(M=ae?.code)||void 0===M?void 0:M.split("auth/"))||void 0===Z?void 0:Z[1],Ge=de?(0,k.az)(de):null;return Ge?{type:N.type,eventId:N.eventId,tenantId:N.tenantId,error:Ge,urlResponse:null,sessionId:null,postBody:null}:{type:N.type,eventId:N.eventId,tenantId:N.tenantId,sessionId:N.sessionId,urlResponse:ie,postBody:null}}return null}(Pt,tt.url)),M.onEvent(Lt||Je())});return function(Pt){return it.apply(this,arguments)}}();typeof Z<"u"&&"function"==typeof Z.subscribe&&Z.subscribe(null,de);const Ge=ie,Ie=`${G.packageName.toLowerCase()}://`;Ce().handleOpenURL=function(){var it=(0,h.Z)(function*(tt){if(tt.toLowerCase().startsWith(Ie)&&de({url:tt}),"function"==typeof Ge)try{Ge(tt)}catch(Pt){console.error(Pt)}});return function(tt){return it.apply(this,arguments)}}()}};function Je(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.az)("no-auth-event")}}function wt(){var N;return(null===(N=self?.location)||void 0===N?void 0:N.protocol)||null}function jt(N=(0,ne.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()&&"capacitor:"!==wt()||!N.toLowerCase().match(/iphone|ipad|ipod|android/))}function yr(){try{const N=self.localStorage,O=k.aL();if(N)return N.setItem(O,"1"),N.removeItem(O),!function Mn(N=(0,ne.z$)()){return function gn(){return(0,ne.w1)()&&11===document?.documentMode}()||function Xn(N=(0,ne.z$)()){return/Edge\/\d+/.test(N)}(N)}()||(0,ne.hl)()}catch{return er()&&(0,ne.hl)()}return!1}function er(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function kn(){return(function Tt(){return"http:"===wt()||"https:"===wt()}()||(0,ne.ru)()||jt())&&!function tn(){return(0,ne.b$)()||(0,ne.UG)()}()&&yr()&&!er()}function qn(){return jt()&&typeof document<"u"}function Mr(){return(Mr=(0,h.Z)(function*(){return!!qn()&&new Promise(N=>{const O=setTimeout(()=>{N(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(O),N(!0)})})})).apply(this,arguments)}const Dn={LOCAL:"local",NONE:"none",SESSION:"session"},ar=k.aA,Nn="persistence";function ft(N){return rt.apply(this,arguments)}function rt(){return(rt=(0,h.Z)(function*(N){yield N._initializationPromise;const O=An(),M=k.aD(Nn,N.config.apiKey,N.name);O&&O.setItem(M,N._getPersistence())})).apply(this,arguments)}function An(){var N;try{return(null===(N=function vt(){return typeof window<"u"?window:null}())||void 0===N?void 0:N.sessionStorage)||null}catch{return null}}const ur=k.aA;class Cn{constructor(){this.browserResolver=k.aC(k.k),this.cordovaResolver=k.aC(Ve),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aE,this._overrideRedirectResult=k.aF}_initialize(O){var M=this;return(0,h.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._initialize(O)})()}_openPopup(O,M,Z,ie){var G=this;return(0,h.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openPopup(O,M,Z,ie)})()}_openRedirect(O,M,Z,ie){var G=this;return(0,h.Z)(function*(){return yield G.selectUnderlyingResolver(),G.assertedUnderlyingResolver._openRedirect(O,M,Z,ie)})()}_isIframeWebStorageSupported(O,M){this.assertedUnderlyingResolver._isIframeWebStorageSupported(O,M)}_originValidation(O){return this.assertedUnderlyingResolver._originValidation(O)}get _shouldInitProactively(){return qn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ur(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var O=this;return(0,h.Z)(function*(){if(O.underlyingResolver)return;const M=yield function si(){return Mr.apply(this,arguments)}();O.underlyingResolver=M?O.cordovaResolver:O.browserResolver})()}}function Xt(N){return N.unwrap()}function nn(N){return kt(N)}function kt(N){const{_tokenResponse:O}=N instanceof ne.ZR?N.customData:N;if(!O)return null;if(!(N instanceof ne.ZR)&&"temporaryProof"in O&&"phoneNumber"in O)return k.P.credentialFromResult(N);const M=O.providerId;if(!M||M===k.p.PASSWORD)return null;let Z;switch(M){case k.p.GOOGLE:Z=k.V;break;case k.p.FACEBOOK:Z=k.U;break;case k.p.GITHUB:Z=k.W;break;case k.p.TWITTER:Z=k.Z;break;default:const{oauthIdToken:ie,oauthAccessToken:G,oauthTokenSecret:ae,pendingToken:de,nonce:Ge}=O;return G||ae||ie||de?de?M.startsWith("saml.")?k.aO._create(M,de):k.L._fromParams({providerId:M,signInMethod:M,pendingToken:de,idToken:ie,accessToken:G}):new k.X(M).credential({idToken:ie,accessToken:G,rawNonce:Ge}):null}return N instanceof ne.ZR?Z.credentialFromError(N):Z.credentialFromResult(N)}function en(N,O){return O.catch(M=>{throw M instanceof ne.ZR&&function vr(N,O){var M;const Z=null===(M=O.customData)||void 0===M?void 0:M._tokenResponse;if("auth/multi-factor-auth-required"===O?.code)O.resolver=new Pn(N,k.aq(N,O));else if(Z){const ie=kt(O),G=O;ie&&(G.credential=ie,G.tenantId=Z.tenantId||void 0,G.email=Z.email||void 0,G.phoneNumber=Z.phoneNumber||void 0)}}(N,M),M}).then(M=>{const ie=M.user;return{operationType:M.operationType,credential:nn(M),additionalUserInfo:k.ao(M),user:Un.getOrCreate(ie)}})}function Hn(N,O){return Br.apply(this,arguments)}function Br(){return(Br=(0,h.Z)(function*(N,O){const M=yield O;return{verificationId:M.verificationId,confirm:Z=>en(N,M.confirm(Z))}})).apply(this,arguments)}class Pn{constructor(O,M){this.resolver=M,this.auth=function cr(N){return N.wrapped()}(O)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(O){return en(Xt(this.auth),this.resolver.resolveSignIn(O))}}class Un{constructor(O){this._delegate=O,this.multiFactor=k.ar(O)}static getOrCreate(O){return Un.USER_MAP.has(O)||Un.USER_MAP.set(O,new Un(O)),Un.USER_MAP.get(O)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(O){return this._delegate.getIdTokenResult(O)}getIdToken(O){return this._delegate.getIdToken(O)}linkAndRetrieveDataWithCredential(O){return this.linkWithCredential(O)}linkWithCredential(O){var M=this;return(0,h.Z)(function*(){return en(M.auth,k.a0(M._delegate,O))})()}linkWithPhoneNumber(O,M){var Z=this;return(0,h.Z)(function*(){return Hn(Z.auth,k.l(Z._delegate,O,M))})()}linkWithPopup(O){var M=this;return(0,h.Z)(function*(){return en(M.auth,k.d(M._delegate,O,Cn))})()}linkWithRedirect(O){var M=this;return(0,h.Z)(function*(){return yield ft(k.aH(M.auth)),k.g(M._delegate,O,Cn)})()}reauthenticateAndRetrieveDataWithCredential(O){return this.reauthenticateWithCredential(O)}reauthenticateWithCredential(O){var M=this;return(0,h.Z)(function*(){return en(M.auth,k.a1(M._delegate,O))})()}reauthenticateWithPhoneNumber(O,M){return Hn(this.auth,k.r(this._delegate,O,M))}reauthenticateWithPopup(O){return en(this.auth,k.e(this._delegate,O,Cn))}reauthenticateWithRedirect(O){var M=this;return(0,h.Z)(function*(){return yield ft(k.aH(M.auth)),k.h(M._delegate,O,Cn)})()}sendEmailVerification(O){return k.ae(this._delegate,O)}unlink(O){var M=this;return(0,h.Z)(function*(){return yield k.an(M._delegate,O),M})()}updateEmail(O){return k.aj(this._delegate,O)}updatePassword(O){return k.ak(this._delegate,O)}updatePhoneNumber(O){return k.u(this._delegate,O)}updateProfile(O){return k.ai(this._delegate,O)}verifyBeforeUpdateEmail(O,M){return k.af(this._delegate,O,M)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Un.USER_MAP=new WeakMap;const Yt=k.aA;let bn=(()=>{class N{constructor(M,Z){if(this.app=M,Z.isInitialized())return this._delegate=Z.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ie}=M.options;Yt(ie,"invalid-api-key",{appName:M.name}),Yt(ie,"invalid-api-key",{appName:M.name});const G=typeof window<"u"?Cn:void 0;this._delegate=Z.initialize({options:{persistence:Fn(ie,M.name),popupRedirectResolver:G}}),this._delegate._updateErrorMap(k.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Un.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(M){this._delegate.languageCode=M}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(M){this._delegate.tenantId=M}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(M,Z){k.I(this._delegate,M,Z)}applyActionCode(M){return k.a5(this._delegate,M)}checkActionCode(M){return k.a6(this._delegate,M)}confirmPasswordReset(M,Z){return k.a4(this._delegate,M,Z)}createUserWithEmailAndPassword(M,Z){var ie=this;return(0,h.Z)(function*(){return en(ie._delegate,k.a8(ie._delegate,M,Z))})()}fetchProvidersForEmail(M){return this.fetchSignInMethodsForEmail(M)}fetchSignInMethodsForEmail(M){return k.ad(this._delegate,M)}isSignInWithEmailLink(M){return k.ab(this._delegate,M)}getRedirectResult(){var M=this;return(0,h.Z)(function*(){Yt(kn(),M._delegate,"operation-not-supported-in-this-environment");const Z=yield k.j(M._delegate,Cn);return Z?en(M._delegate,Promise.resolve(Z)):{credential:null,user:null}})()}addFrameworkForLogging(M){!function Be(N,O){(0,k.aH)(N)._logFramework(O)}(this._delegate,M)}onAuthStateChanged(M,Z,ie){const{next:G,error:ae,complete:de}=Ft(M,Z,ie);return this._delegate.onAuthStateChanged(G,ae,de)}onIdTokenChanged(M,Z,ie){const{next:G,error:ae,complete:de}=Ft(M,Z,ie);return this._delegate.onIdTokenChanged(G,ae,de)}sendSignInLinkToEmail(M,Z){return k.aa(this._delegate,M,Z)}sendPasswordResetEmail(M,Z){return k.a3(this._delegate,M,Z||void 0)}setPersistence(M){var Z=this;return(0,h.Z)(function*(){let ie;switch(function Wt(N,O){ar(Object.values(Dn).includes(O),N,"invalid-persistence-type"),(0,ne.b$)()?ar(O!==Dn.SESSION,N,"unsupported-persistence-type"):(0,ne.UG)()?ar(O===Dn.NONE,N,"unsupported-persistence-type"):er()?ar(O===Dn.NONE||O===Dn.LOCAL&&(0,ne.hl)(),N,"unsupported-persistence-type"):ar(O===Dn.NONE||yr(),N,"unsupported-persistence-type")}(Z._delegate,M),M){case Dn.SESSION:ie=k.a;break;case Dn.LOCAL:ie=(yield k.aC(k.i)._isAvailable())?k.i:k.b;break;case Dn.NONE:ie=k.N;break;default:return k.av("argument-error",{appName:Z._delegate.name})}return Z._delegate.setPersistence(ie)})()}signInAndRetrieveDataWithCredential(M){return this.signInWithCredential(M)}signInAnonymously(){return en(this._delegate,k._(this._delegate))}signInWithCredential(M){return en(this._delegate,k.$(this._delegate,M))}signInWithCustomToken(M){return en(this._delegate,k.a2(this._delegate,M))}signInWithEmailAndPassword(M,Z){return en(this._delegate,k.a9(this._delegate,M,Z))}signInWithEmailLink(M,Z){return en(this._delegate,k.ac(this._delegate,M,Z))}signInWithPhoneNumber(M,Z){return Hn(this._delegate,k.s(this._delegate,M,Z))}signInWithPopup(M){var Z=this;return(0,h.Z)(function*(){return Yt(kn(),Z._delegate,"operation-not-supported-in-this-environment"),en(Z._delegate,k.c(Z._delegate,M,Cn))})()}signInWithRedirect(M){var Z=this;return(0,h.Z)(function*(){return Yt(kn(),Z._delegate,"operation-not-supported-in-this-environment"),yield ft(Z._delegate),k.f(Z._delegate,M,Cn)})()}updateCurrentUser(M){return this._delegate.updateCurrentUser(M)}verifyPasswordResetCode(M){return k.a7(this._delegate,M)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return N.Persistence=Dn,N})();function Ft(N,O,M){let Z=N;"function"!=typeof N&&({next:Z,error:O,complete:M}=N);const ie=Z;return{next:ae=>ie(ae&&Un.getOrCreate(ae)),error:O,complete:M}}function Fn(N,O){const M=function Kn(N,O){const M=An();if(!M)return[];const Z=k.aD(Nn,N,O);switch(M.getItem(Z)){case Dn.NONE:return[k.N];case Dn.LOCAL:return[k.i,k.a];case Dn.SESSION:return[k.a];default:return[]}}(N,O);if(typeof self<"u"&&!M.includes(k.i)&&M.push(k.i),typeof window<"u")for(const Z of[k.b,k.a])M.includes(Z)||M.push(Z);return M.includes(k.N)||M.push(k.N),M}class Fr{constructor(){this.providerId="phone",this._delegate=new k.P(Xt(V.Z.auth()))}static credential(O,M){return k.P.credential(O,M)}verifyPhoneNumber(O,M){return this._delegate.verifyPhoneNumber(O,M)}unwrap(){return this._delegate}}Fr.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,Fr.PROVIDER_ID=k.P.PROVIDER_ID;const lr=k.aA;class Yr{constructor(O,M,Z=V.Z.app()){var ie;lr(null===(ie=Z.options)||void 0===ie?void 0:ie.apiKey,"invalid-api-key",{appName:Z.name}),this._delegate=new k.R(O,M,Z.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function B(N){N.INTERNAL.registerComponent(new ve.wA("auth-compat",O=>{const M=O.getProvider("app-compat").getImmediate(),Z=O.getProvider("auth");return new bn(M,Z)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.Q,FacebookAuthProvider:k.U,GithubAuthProvider:k.W,GoogleAuthProvider:k.V,OAuthProvider:k.X,SAMLAuthProvider:k.Y,PhoneAuthProvider:Fr,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:Yr,TwitterAuthProvider:k.Z,Auth:bn,AuthCredential:k.J,Error:ne.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),N.registerVersion("@firebase/auth-compat","0.4.2")}(V.Z)},5861:(It,Oe,F)=>{function h(k,ne,ge,ce,ve,Ce,_e){try{var W=k[Ce](_e),z=W.value}catch(K){return void ge(K)}W.done?ne(z):Promise.resolve(z).then(ce,ve)}function V(k){return function(){var ne=this,ge=arguments;return new Promise(function(ce,ve){var Ce=k.apply(ne,ge);function _e(z){h(Ce,ce,ve,_e,W,"next",z)}function W(z){h(Ce,ce,ve,_e,W,"throw",z)}_e(void 0)})}}F.d(Oe,{Z:()=>V})}},It=>{It(It.s=8747)}]);